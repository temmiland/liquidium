(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(global, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/custom-electron-titlebar/base/browser/browser.js":
/*!***********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/browser/browser.js ***!
  \***********************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.isEdgeWebView = exports.isIPad = exports.isWebkitWebView = exports.isSafari = exports.isChrome = exports.isWebKit = exports.isFirefox = exports.isOpera = exports.isEdgeOrIE = exports.isEdge = exports.isIE = exports.onDidChangeFullscreen = exports.isFullscreen = exports.setFullscreen = exports.getPixelRatio = exports.setZoomFactor = exports.getZoomFactor = exports.onDidChangeZoomLevel = exports.getTimeSinceLastZoomLevelChanged = exports.getZoomLevel = exports.setZoomLevel = void 0;
const event_1 = __webpack_require__(/*! ../common/event */ "./node_modules/custom-electron-titlebar/base/common/event.js");
class WindowManager {
  constructor() {
    this._zoomLevel = 0;
    this._lastZoomLevelChangeTime = 0;
    this._onDidChangeZoomLevel = new (_get__("event_1").Emitter)();
    this.onDidChangeZoomLevel = this._onDidChangeZoomLevel.event;
    // --- Zoom Factor
    this._zoomFactor = 0;
    // --- Fullscreen
    this._fullscreen = false;
    this._onDidChangeFullscreen = new (_get__("event_1").Emitter)();
    this.onDidChangeFullscreen = this._onDidChangeFullscreen.event;
  }
  getZoomLevel() {
    return this._zoomLevel;
  }
  getTimeSinceLastZoomLevelChanged() {
    return Date.now() - this._lastZoomLevelChangeTime;
  }
  setZoomLevel(zoomLevel, isTrusted) {
    if (this._zoomLevel === zoomLevel) {
      return;
    }
    this._zoomLevel = zoomLevel;
    // See https://github.com/Microsoft/vscode/issues/26151
    this._lastZoomLevelChangeTime = isTrusted ? 0 : Date.now();
    this._onDidChangeZoomLevel.fire(this._zoomLevel);
  }
  getZoomFactor() {
    return this._zoomFactor;
  }
  setZoomFactor(zoomFactor) {
    this._zoomFactor = zoomFactor;
  }
  // --- Pixel Ratio
  getPixelRatio() {
    const ctx = document.createElement('canvas').getContext('2d');
    const dpr = window.devicePixelRatio || 1;
    const bsr = ctx.webkitBackingStorePixelRatio || ctx.mozBackingStorePixelRatio || ctx.msBackingStorePixelRatio || ctx.oBackingStorePixelRatio || ctx.backingStorePixelRatio || 1;
    return dpr / bsr;
  }
  setFullscreen(fullscreen) {
    if (this._fullscreen === fullscreen) {
      return;
    }
    this._fullscreen = fullscreen;
    this._onDidChangeFullscreen.fire();
  }
  isFullscreen() {
    return this._fullscreen;
  }
}
_get__("WindowManager").INSTANCE = new (_get__("WindowManager"))();
/** A zoom index, e.g. 1, 2, 3 */
function setZoomLevel(zoomLevel, isTrusted) {
  _get__("WindowManager").INSTANCE.setZoomLevel(zoomLevel, isTrusted);
}
exports.setZoomLevel = _get__("setZoomLevel");
function getZoomLevel() {
  return _get__("WindowManager").INSTANCE.getZoomLevel();
}
exports.getZoomLevel = _get__("getZoomLevel");
/** Returns the time (in ms) since the zoom level was changed */
function getTimeSinceLastZoomLevelChanged() {
  return _get__("WindowManager").INSTANCE.getTimeSinceLastZoomLevelChanged();
}
exports.getTimeSinceLastZoomLevelChanged = _get__("getTimeSinceLastZoomLevelChanged");
function onDidChangeZoomLevel(callback) {
  return _get__("WindowManager").INSTANCE.onDidChangeZoomLevel(callback);
}
exports.onDidChangeZoomLevel = _get__("onDidChangeZoomLevel");
/** The zoom scale for an index, e.g. 1, 1.2, 1.4 */
function getZoomFactor() {
  return _get__("WindowManager").INSTANCE.getZoomFactor();
}
exports.getZoomFactor = _get__("getZoomFactor");
function setZoomFactor(zoomFactor) {
  _get__("WindowManager").INSTANCE.setZoomFactor(zoomFactor);
}
exports.setZoomFactor = _get__("setZoomFactor");
function getPixelRatio() {
  return _get__("WindowManager").INSTANCE.getPixelRatio();
}
exports.getPixelRatio = _get__("getPixelRatio");
function setFullscreen(fullscreen) {
  _get__("WindowManager").INSTANCE.setFullscreen(fullscreen);
}
exports.setFullscreen = _get__("setFullscreen");
function isFullscreen() {
  return _get__("WindowManager").INSTANCE.isFullscreen();
}
exports.isFullscreen = _get__("isFullscreen");
exports.onDidChangeFullscreen = _get__("WindowManager").INSTANCE.onDidChangeFullscreen;
const userAgent = navigator.userAgent;
exports.isIE = _get__("userAgent").indexOf('Trident') >= 0;
exports.isEdge = _get__("userAgent").indexOf('Edge/') >= 0;
exports.isEdgeOrIE = exports.isIE || exports.isEdge;
exports.isOpera = _get__("userAgent").indexOf('Opera') >= 0;
exports.isFirefox = _get__("userAgent").indexOf('Firefox') >= 0;
exports.isWebKit = _get__("userAgent").indexOf('AppleWebKit') >= 0;
exports.isChrome = _get__("userAgent").indexOf('Chrome') >= 0;
exports.isSafari = !exports.isChrome && _get__("userAgent").indexOf('Safari') >= 0;
exports.isWebkitWebView = !exports.isChrome && !exports.isSafari && exports.isWebKit;
exports.isIPad = _get__("userAgent").indexOf('iPad') >= 0;
exports.isEdgeWebView = exports.isEdge && _get__("userAgent").indexOf('WebView/') >= 0;
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "event_1":
      return event_1;
    case "WindowManager":
      return WindowManager;
    case "setZoomLevel":
      return setZoomLevel;
    case "getZoomLevel":
      return getZoomLevel;
    case "getTimeSinceLastZoomLevelChanged":
      return getTimeSinceLastZoomLevelChanged;
    case "onDidChangeZoomLevel":
      return onDidChangeZoomLevel;
    case "getZoomFactor":
      return getZoomFactor;
    case "setZoomFactor":
      return setZoomFactor;
    case "getPixelRatio":
      return getPixelRatio;
    case "setFullscreen":
      return setFullscreen;
    case "isFullscreen":
      return isFullscreen;
    case "userAgent":
      return userAgent;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/browser/event.js":
/*!*********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/browser/event.js ***!
  \*********************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.stop = exports.domEvent = void 0;
const event_1 = __webpack_require__(/*! ../common/event */ "./node_modules/custom-electron-titlebar/base/common/event.js");
const domEvent = (element, type, useCapture) => {
  const fn = e => emitter.fire(e);
  const emitter = new (_get__("event_1").Emitter)({
    onFirstListenerAdd: () => {
      element.addEventListener(type, fn, useCapture);
    },
    onLastListenerRemove: () => {
      element.removeEventListener(type, fn, useCapture);
    }
  });
  return emitter.event;
};
exports.domEvent = _get__("domEvent");
function stop(event) {
  return _get__("event_1").Event.map(event, e => {
    e.preventDefault();
    e.stopPropagation();
    return e;
  });
}
exports.stop = _get__("stop");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "event_1":
      return event_1;
    case "domEvent":
      return domEvent;
    case "stop":
      return stop;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/browser/keyboardEvent.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/browser/keyboardEvent.js ***!
  \*****************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function () {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) _get__("__createBinding")(result, mod, k);
  _get__("__setModuleDefault")(result, mod);
  return result;
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.StandardKeyboardEvent = exports.getCodeForKeyCode = void 0;
const keyCodes_1 = __webpack_require__(/*! ../common/keyCodes */ "./node_modules/custom-electron-titlebar/base/common/keyCodes.js");
const platform = _get__("__importStar")(__webpack_require__(/*! ../common/platform */ "./node_modules/custom-electron-titlebar/base/common/platform.js"));
const KEY_CODE_MAP = new Array(230);
const INVERSE_KEY_CODE_MAP = new Array(112 /* KeyCode.MAX_VALUE */);
(function () {
  for (let i = 0; i < _get__("INVERSE_KEY_CODE_MAP").length; i++) {
    _get__("INVERSE_KEY_CODE_MAP")[i] = 0;
  }
  function define(code, keyCode) {
    _get__("KEY_CODE_MAP")[code] = keyCode;
    _get__("INVERSE_KEY_CODE_MAP")[keyCode] = code;
  }
  define(3, 7 /* KeyCode.PauseBreak */); // VK_CANCEL 0x03 Control-break processing
  define(8, 1 /* KeyCode.Backspace */);
  define(9, 2 /* KeyCode.Tab */);
  define(13, 3 /* KeyCode.Enter */);
  define(16, 4 /* KeyCode.Shift */);
  define(17, 5 /* KeyCode.Ctrl */);
  define(18, 6 /* KeyCode.Alt */);
  define(19, 7 /* KeyCode.PauseBreak */);
  define(20, 8 /* KeyCode.CapsLock */);
  define(27, 9 /* KeyCode.Escape */);
  define(32, 10 /* KeyCode.Space */);
  define(33, 11 /* KeyCode.PageUp */);
  define(34, 12 /* KeyCode.PageDown */);
  define(35, 13 /* KeyCode.End */);
  define(36, 14 /* KeyCode.Home */);
  define(37, 15 /* KeyCode.LeftArrow */);
  define(38, 16 /* KeyCode.UpArrow */);
  define(39, 17 /* KeyCode.RightArrow */);
  define(40, 18 /* KeyCode.DownArrow */);
  define(45, 19 /* KeyCode.Insert */);
  define(46, 20 /* KeyCode.Delete */);
  define(48, 21 /* KeyCode.KEY_0 */);
  define(49, 22 /* KeyCode.KEY_1 */);
  define(50, 23 /* KeyCode.KEY_2 */);
  define(51, 24 /* KeyCode.KEY_3 */);
  define(52, 25 /* KeyCode.KEY_4 */);
  define(53, 26 /* KeyCode.KEY_5 */);
  define(54, 27 /* KeyCode.KEY_6 */);
  define(55, 28 /* KeyCode.KEY_7 */);
  define(56, 29 /* KeyCode.KEY_8 */);
  define(57, 30 /* KeyCode.KEY_9 */);
  define(65, 31 /* KeyCode.KEY_A */);
  define(66, 32 /* KeyCode.KEY_B */);
  define(67, 33 /* KeyCode.KEY_C */);
  define(68, 34 /* KeyCode.KEY_D */);
  define(69, 35 /* KeyCode.KEY_E */);
  define(70, 36 /* KeyCode.KEY_F */);
  define(71, 37 /* KeyCode.KEY_G */);
  define(72, 38 /* KeyCode.KEY_H */);
  define(73, 39 /* KeyCode.KEY_I */);
  define(74, 40 /* KeyCode.KEY_J */);
  define(75, 41 /* KeyCode.KEY_K */);
  define(76, 42 /* KeyCode.KEY_L */);
  define(77, 43 /* KeyCode.KEY_M */);
  define(78, 44 /* KeyCode.KEY_N */);
  define(79, 45 /* KeyCode.KEY_O */);
  define(80, 46 /* KeyCode.KEY_P */);
  define(81, 47 /* KeyCode.KEY_Q */);
  define(82, 48 /* KeyCode.KEY_R */);
  define(83, 49 /* KeyCode.KEY_S */);
  define(84, 50 /* KeyCode.KEY_T */);
  define(85, 51 /* KeyCode.KEY_U */);
  define(86, 52 /* KeyCode.KEY_V */);
  define(87, 53 /* KeyCode.KEY_W */);
  define(88, 54 /* KeyCode.KEY_X */);
  define(89, 55 /* KeyCode.KEY_Y */);
  define(90, 56 /* KeyCode.KEY_Z */);
  define(93, 58 /* KeyCode.ContextMenu */);
  define(96, 93 /* KeyCode.NUMPAD_0 */);
  define(97, 94 /* KeyCode.NUMPAD_1 */);
  define(98, 95 /* KeyCode.NUMPAD_2 */);
  define(99, 96 /* KeyCode.NUMPAD_3 */);
  define(100, 97 /* KeyCode.NUMPAD_4 */);
  define(101, 98 /* KeyCode.NUMPAD_5 */);
  define(102, 99 /* KeyCode.NUMPAD_6 */);
  define(103, 100 /* KeyCode.NUMPAD_7 */);
  define(104, 101 /* KeyCode.NUMPAD_8 */);
  define(105, 102 /* KeyCode.NUMPAD_9 */);
  define(106, 103 /* KeyCode.NUMPAD_MULTIPLY */);
  define(107, 104 /* KeyCode.NUMPAD_ADD */);
  define(108, 105 /* KeyCode.NUMPAD_SEPARATOR */);
  define(109, 106 /* KeyCode.NUMPAD_SUBTRACT */);
  define(110, 107 /* KeyCode.NUMPAD_DECIMAL */);
  define(111, 108 /* KeyCode.NUMPAD_DIVIDE */);
  define(112, 59 /* KeyCode.F1 */);
  define(113, 60 /* KeyCode.F2 */);
  define(114, 61 /* KeyCode.F3 */);
  define(115, 62 /* KeyCode.F4 */);
  define(116, 63 /* KeyCode.F5 */);
  define(117, 64 /* KeyCode.F6 */);
  define(118, 65 /* KeyCode.F7 */);
  define(119, 66 /* KeyCode.F8 */);
  define(120, 67 /* KeyCode.F9 */);
  define(121, 68 /* KeyCode.F10 */);
  define(122, 69 /* KeyCode.F11 */);
  define(123, 70 /* KeyCode.F12 */);
  define(124, 71 /* KeyCode.F13 */);
  define(125, 72 /* KeyCode.F14 */);
  define(126, 73 /* KeyCode.F15 */);
  define(127, 74 /* KeyCode.F16 */);
  define(128, 75 /* KeyCode.F17 */);
  define(129, 76 /* KeyCode.F18 */);
  define(130, 77 /* KeyCode.F19 */);
  define(144, 78 /* KeyCode.NumLock */);
  define(145, 79 /* KeyCode.ScrollLock */);
  define(186, 80 /* KeyCode.US_SEMICOLON */);
  define(187, 81 /* KeyCode.US_EQUAL */);
  define(188, 82 /* KeyCode.US_COMMA */);
  define(189, 83 /* KeyCode.US_MINUS */);
  define(190, 84 /* KeyCode.US_DOT */);
  define(191, 85 /* KeyCode.US_SLASH */);
  define(192, 86 /* KeyCode.US_BACKTICK */);
  define(193, 110 /* KeyCode.ABNT_C1 */);
  define(194, 111 /* KeyCode.ABNT_C2 */);
  define(219, 87 /* KeyCode.US_OPEN_SQUARE_BRACKET */);
  define(220, 88 /* KeyCode.US_BACKSLASH */);
  define(221, 89 /* KeyCode.US_CLOSE_SQUARE_BRACKET */);
  define(222, 90 /* KeyCode.US_QUOTE */);
  define(223, 91 /* KeyCode.OEM_8 */);
  define(226, 92 /* KeyCode.OEM_102 */);
  /**
   * https://lists.w3.org/Archives/Public/www-dom/2010JulSep/att-0182/keyCode-spec.html
   * If an Input Method Editor is processing key input and the event is keydown, return 229.
   */
  define(229, 109 /* KeyCode.KEY_IN_COMPOSITION */);
  define(91, 57 /* KeyCode.Meta */);
  if (_get__("platform").isMacintosh) {
    // the two meta keys in the Mac have different key codes (91 and 93)
    define(93, 57 /* KeyCode.Meta */);
  } else {
    define(92, 57 /* KeyCode.Meta */);
  }
})();

function extractKeyCode(e) {
  if (e.charCode) {
    // "keypress" events mostly
    const char = String.fromCharCode(e.charCode).toUpperCase();
    return _get__("keyCodes_1").KeyCodeUtils.fromString(char);
  }
  return _get__("KEY_CODE_MAP")[e.keyCode] || 0 /* KeyCode.Unknown */;
}

function getCodeForKeyCode(keyCode) {
  return _get__("INVERSE_KEY_CODE_MAP")[keyCode];
}
exports.getCodeForKeyCode = _get__("getCodeForKeyCode");
const ctrlKeyMod = _get__("platform").isMacintosh ? 256 /* KeyMod.WinCtrl */ : 2048 /* KeyMod.CtrlCmd */;
const altKeyMod = 512 /* KeyMod.Alt */;
const shiftKeyMod = 1024 /* KeyMod.Shift */;
const metaKeyMod = _get__("platform").isMacintosh ? 2048 /* KeyMod.CtrlCmd */ : 256 /* KeyMod.WinCtrl */;
class StandardKeyboardEvent {
  constructor(source) {
    const e = source;
    this.browserEvent = e;
    this.target = e.target;
    this.ctrlKey = e.ctrlKey;
    this.shiftKey = e.shiftKey;
    this.altKey = e.altKey;
    this.metaKey = e.metaKey;
    this.keyCode = _get__("extractKeyCode")(e);
    this.code = e.code;
    // console.info(e.type + ": keyCode: " + e.keyCode + ", which: " + e.which + ", charCode: " + e.charCode + ", detail: " + e.detail + " ====> " + this.keyCode + ' -- ' + KeyCode[this.keyCode]);
    this.ctrlKey = this.ctrlKey || this.keyCode === 5 /* KeyCode.Ctrl */;
    this.altKey = this.altKey || this.keyCode === 6 /* KeyCode.Alt */;
    this.shiftKey = this.shiftKey || this.keyCode === 4 /* KeyCode.Shift */;
    this.metaKey = this.metaKey || this.keyCode === 57 /* KeyCode.Meta */;
    this._asKeybinding = this._computeKeybinding();
    this._asRuntimeKeybinding = this._computeRuntimeKeybinding();
  }
  preventDefault() {
    if (this.browserEvent && this.browserEvent.preventDefault) {
      this.browserEvent.preventDefault();
    }
  }
  stopPropagation() {
    if (this.browserEvent && this.browserEvent.stopPropagation) {
      this.browserEvent.stopPropagation();
    }
  }
  toKeybinding() {
    return this._asRuntimeKeybinding;
  }
  equals(other) {
    return this._asKeybinding === other;
  }
  _computeKeybinding() {
    let key = 0 /* KeyCode.Unknown */;
    if (this.keyCode !== 5 /* KeyCode.Ctrl */ && this.keyCode !== 4 /* KeyCode.Shift */ && this.keyCode !== 6 /* KeyCode.Alt */ && this.keyCode !== 57 /* KeyCode.Meta */) {
      key = this.keyCode;
    }
    let result = 0;
    if (this.ctrlKey) {
      result |= _get__("ctrlKeyMod");
    }
    if (this.altKey) {
      result |= _get__("altKeyMod");
    }
    if (this.shiftKey) {
      result |= _get__("shiftKeyMod");
    }
    if (this.metaKey) {
      result |= _get__("metaKeyMod");
    }
    result |= key;
    return result;
  }
  _computeRuntimeKeybinding() {
    let key = 0 /* KeyCode.Unknown */;
    if (this.keyCode !== 5 /* KeyCode.Ctrl */ && this.keyCode !== 4 /* KeyCode.Shift */ && this.keyCode !== 6 /* KeyCode.Alt */ && this.keyCode !== 57 /* KeyCode.Meta */) {
      key = this.keyCode;
    }
    return new (_get__("keyCodes_1").SimpleKeybinding)(this.ctrlKey, this.shiftKey, this.altKey, this.metaKey, key);
  }
}
exports.StandardKeyboardEvent = _get__("StandardKeyboardEvent");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "__createBinding":
      return __createBinding;
    case "__setModuleDefault":
      return __setModuleDefault;
    case "__importStar":
      return __importStar;
    case "INVERSE_KEY_CODE_MAP":
      return INVERSE_KEY_CODE_MAP;
    case "KEY_CODE_MAP":
      return KEY_CODE_MAP;
    case "platform":
      return platform;
    case "keyCodes_1":
      return keyCodes_1;
    case "getCodeForKeyCode":
      return getCodeForKeyCode;
    case "extractKeyCode":
      return extractKeyCode;
    case "ctrlKeyMod":
      return ctrlKeyMod;
    case "altKeyMod":
      return altKeyMod;
    case "shiftKeyMod":
      return shiftKeyMod;
    case "metaKeyMod":
      return metaKeyMod;
    case "StandardKeyboardEvent":
      return StandardKeyboardEvent;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/browser/mouseEvent.js":
/*!**************************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/browser/mouseEvent.js ***!
  \**************************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function () {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) _get__("__createBinding")(result, mod, k);
  _get__("__setModuleDefault")(result, mod);
  return result;
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.StandardWheelEvent = exports.DragMouseEvent = exports.StandardMouseEvent = void 0;
const browser = _get__("__importStar")(__webpack_require__(/*! ../browser/browser */ "./node_modules/custom-electron-titlebar/base/browser/browser.js"));
const platform = _get__("__importStar")(__webpack_require__(/*! ../common/platform */ "./node_modules/custom-electron-titlebar/base/common/platform.js"));
class StandardMouseEvent {
  constructor(e) {
    this.timestamp = Date.now();
    this.browserEvent = e;
    this.leftButton = e.button === 0;
    this.middleButton = e.button === 1;
    this.rightButton = e.button === 2;
    this.target = e.target;
    this.detail = e.detail || 1;
    if (e.type === 'dblclick') {
      this.detail = 2;
    }
    this.ctrlKey = e.ctrlKey;
    this.shiftKey = e.shiftKey;
    this.altKey = e.altKey;
    this.metaKey = e.metaKey;
    if (typeof e.pageX === 'number') {
      this.posx = e.pageX;
      this.posy = e.pageY;
    } else {
      // Probably hit by MSGestureEvent
      this.posx = e.clientX + document.body.scrollLeft + document.documentElement?.scrollLeft;
      this.posy = e.clientY + document.body.scrollTop + document.documentElement?.scrollTop;
    }
  }
  preventDefault() {
    if (this.browserEvent.preventDefault) {
      this.browserEvent.preventDefault();
    }
  }
  stopPropagation() {
    if (this.browserEvent.stopPropagation) {
      this.browserEvent.stopPropagation();
    }
  }
}
exports.StandardMouseEvent = _get__("StandardMouseEvent");
class DragMouseEvent extends _get__("StandardMouseEvent") {
  constructor(e) {
    super(e);
    this.dataTransfer = e.dataTransfer;
  }
}
exports.DragMouseEvent = _get__("DragMouseEvent");
class StandardWheelEvent {
  constructor(e, deltaX = 0, deltaY = 0) {
    this.browserEvent = e || null;
    this.target = e ? e.target || e.targetNode || e.srcElement : null;
    this.deltaY = deltaY;
    this.deltaX = deltaX;
    if (e) {
      const e1 = e;
      const e2 = e;
      // vertical delta scroll
      if (typeof e1.wheelDeltaY !== 'undefined') {
        this.deltaY = e1.wheelDeltaY / 120;
      } else if (typeof e2.VERTICAL_AXIS !== 'undefined' && e2.axis === e2.VERTICAL_AXIS) {
        this.deltaY = -e2.detail / 3;
      }
      // horizontal delta scroll
      if (typeof e1.wheelDeltaX !== 'undefined') {
        if (_get__("browser").isSafari && _get__("platform").isWindows) {
          this.deltaX = -(e1.wheelDeltaX / 120);
        } else {
          this.deltaX = e1.wheelDeltaX / 120;
        }
      } else if (typeof e2.HORIZONTAL_AXIS !== 'undefined' && e2.axis === e2.HORIZONTAL_AXIS) {
        this.deltaX = -e.detail / 3;
      }
      // Assume a vertical scroll if nothing else worked
      if (this.deltaY === 0 && this.deltaX === 0 && e.wheelDelta) {
        this.deltaY = e.wheelDelta / 120;
      }
    }
  }
  preventDefault() {
    if (this.browserEvent) {
      if (this.browserEvent.preventDefault) {
        this.browserEvent.preventDefault();
      }
    }
  }
  stopPropagation() {
    if (this.browserEvent) {
      if (this.browserEvent.stopPropagation) {
        this.browserEvent.stopPropagation();
      }
    }
  }
}
exports.StandardWheelEvent = _get__("StandardWheelEvent");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "__createBinding":
      return __createBinding;
    case "__setModuleDefault":
      return __setModuleDefault;
    case "__importStar":
      return __importStar;
    case "StandardMouseEvent":
      return StandardMouseEvent;
    case "DragMouseEvent":
      return DragMouseEvent;
    case "browser":
      return browser;
    case "platform":
      return platform;
    case "StandardWheelEvent":
      return StandardWheelEvent;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/browser/touch.js":
/*!*********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/browser/touch.js ***!
  \*********************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function () {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) _get__("__createBinding")(result, mod, k);
  _get__("__setModuleDefault")(result, mod);
  return result;
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Gesture = exports.EventType = void 0;
const DomUtils = _get__("__importStar")(__webpack_require__(/*! ../common/dom */ "./node_modules/custom-electron-titlebar/base/common/dom.js"));
const arrays = _get__("__importStar")(__webpack_require__(/*! ../common/arrays */ "./node_modules/custom-electron-titlebar/base/common/arrays.js"));
const lifecycle_1 = __webpack_require__(/*! ../common/lifecycle */ "./node_modules/custom-electron-titlebar/base/common/lifecycle.js");
const linkedList_1 = __webpack_require__(/*! ../common/linkedList */ "./node_modules/custom-electron-titlebar/base/common/linkedList.js");
var EventType;
(function (EventType) {
  EventType.Tap = '-monaco-gesturetap';
  EventType.Change = '-monaco-gesturechange';
  EventType.Start = '-monaco-gesturestart';
  EventType.End = '-monaco-gesturesend';
  EventType.Contextmenu = '-monaco-gesturecontextmenu';
})(_get__("EventType") || (exports.EventType = _assign__("EventType", {})));
class Gesture extends _get__("lifecycle_1").Disposable {
  constructor() {
    super();
    this.dispatched = false;
    this.targets = new (_get__("linkedList_1").LinkedList)();
    this.ignoreTargets = new (_get__("linkedList_1").LinkedList)();
    this.activeTouches = {};
    this.handle = null;
    this._lastSetTapCountTime = 0;
    this._register(_get__("DomUtils").addDisposableListener(document, 'touchstart', e => this.onTouchStart(e), {
      passive: false
    }));
    this._register(_get__("DomUtils").addDisposableListener(document, 'touchend', e => this.onTouchEnd(e)));
    this._register(_get__("DomUtils").addDisposableListener(document, 'touchmove', e => this.onTouchMove(e), {
      passive: false
    }));
  }
  static addTarget(element) {
    if (!_get__("Gesture").isTouchDevice()) {
      return _get__("lifecycle_1").Disposable.None;
    }
    if (!_get__("Gesture").INSTANCE) {
      _get__("Gesture").INSTANCE = new (_get__("Gesture"))();
    }
    const remove = _get__("Gesture").INSTANCE.targets.push(element);
    return (0, _get__("lifecycle_1").toDisposable)(remove);
  }
  static ignoreTarget(element) {
    if (!_get__("Gesture").isTouchDevice()) {
      return _get__("lifecycle_1").Disposable.None;
    }
    if (!_get__("Gesture").INSTANCE) {
      _get__("Gesture").INSTANCE = new (_get__("Gesture"))();
    }
    const remove = _get__("Gesture").INSTANCE.ignoreTargets.push(element);
    return (0, _get__("lifecycle_1").toDisposable)(remove);
  }
  static isTouchDevice() {
    // `'ontouchstart' in window` always evaluates to true with typescript's modern typings. This causes `window` to be
    // `never` later in `window.navigator`. That's why we need the explicit `window as Window` cast
    return 'ontouchstart' in window || navigator.maxTouchPoints > 0;
  }
  dispose() {
    if (this.handle) {
      this.handle.dispose();
      this.handle = null;
    }
    super.dispose();
  }
  onTouchStart(e) {
    const timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.
    if (this.handle) {
      this.handle.dispose();
      this.handle = null;
    }
    for (let i = 0, len = e.targetTouches.length; i < len; i++) {
      const touch = e.targetTouches.item(i);
      this.activeTouches[touch.identifier] = {
        id: touch.identifier,
        initialTarget: touch.target,
        initialTimeStamp: timestamp,
        initialPageX: touch.pageX,
        initialPageY: touch.pageY,
        rollingTimestamps: [timestamp],
        rollingPageX: [touch.pageX],
        rollingPageY: [touch.pageY]
      };
      const evt = this.newGestureEvent(_get__("EventType").Start, touch.target);
      evt.pageX = touch.pageX;
      evt.pageY = touch.pageY;
      this.dispatchEvent(evt);
    }
    if (this.dispatched) {
      e.preventDefault();
      e.stopPropagation();
      this.dispatched = false;
    }
  }
  onTouchEnd(e) {
    const timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.
    const activeTouchCount = Object.keys(this.activeTouches).length;
    for (let i = 0, len = e.changedTouches.length; i < len; i++) {
      const touch = e.changedTouches.item(i);
      if (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {
        console.warn('move of an UNKNOWN touch', touch);
        continue;
      }
      const data = this.activeTouches[touch.identifier],
        holdTime = Date.now() - data.initialTimeStamp;
      if (holdTime < _get__("Gesture").HOLD_DELAY && Math.abs(data.initialPageX - _get__("arrays").tail(data.rollingPageX)) < 30 && Math.abs(data.initialPageY - _get__("arrays").tail(data.rollingPageY)) < 30) {
        const evt = this.newGestureEvent(_get__("EventType").Tap, data.initialTarget);
        evt.pageX = _get__("arrays").tail(data.rollingPageX);
        evt.pageY = _get__("arrays").tail(data.rollingPageY);
        this.dispatchEvent(evt);
      } else if (holdTime >= _get__("Gesture").HOLD_DELAY && Math.abs(data.initialPageX - _get__("arrays").tail(data.rollingPageX)) < 30 && Math.abs(data.initialPageY - _get__("arrays").tail(data.rollingPageY)) < 30) {
        const evt = this.newGestureEvent(_get__("EventType").Contextmenu, data.initialTarget);
        evt.pageX = _get__("arrays").tail(data.rollingPageX);
        evt.pageY = _get__("arrays").tail(data.rollingPageY);
        this.dispatchEvent(evt);
      } else if (activeTouchCount === 1) {
        const finalX = _get__("arrays").tail(data.rollingPageX);
        const finalY = _get__("arrays").tail(data.rollingPageY);
        const deltaT = _get__("arrays").tail(data.rollingTimestamps) - data.rollingTimestamps[0];
        const deltaX = finalX - data.rollingPageX[0];
        const deltaY = finalY - data.rollingPageY[0];
      }
      this.dispatchEvent(this.newGestureEvent(_get__("EventType").End, data.initialTarget));
      // forget about this touch
      delete this.activeTouches[touch.identifier];
    }
    if (this.dispatched) {
      e.preventDefault();
      e.stopPropagation();
      this.dispatched = false;
    }
  }
  newGestureEvent(type, initialTarget) {
    const event = document.createEvent('CustomEvent');
    event.initEvent(type, false, true);
    event.initialTarget = initialTarget;
    event.tapCount = 0;
    return event;
  }
  dispatchEvent(event) {
    if (event.type === _get__("EventType").Tap) {
      const currentTime = new Date().getTime();
      let setTapCount = 0;
      if (currentTime - this._lastSetTapCountTime > _get__("Gesture").CLEAR_TAP_COUNT_TIME) {
        setTapCount = 1;
      } else {
        setTapCount = 2;
      }
      this._lastSetTapCountTime = currentTime;
      event.tapCount = setTapCount;
    } else if (event.type === _get__("EventType").Change || event.type === _get__("EventType").Contextmenu) {
      // tap is canceled by scrolling or context menu
      this._lastSetTapCountTime = 0;
    }
  }
  inertia(dispatchTo, t1, vX, dirX, x, vY, dirY, y) {
    this.handle = _get__("DomUtils").scheduleAtNextAnimationFrame(() => {
      const now = Date.now();
      // velocity: old speed + accel_over_time
      const deltaT = now - t1;
      let delta_pos_x = 0,
        delta_pos_y = 0;
      let stopped = true;
      vX += _get__("Gesture").SCROLL_FRICTION * deltaT;
      vY += _get__("Gesture").SCROLL_FRICTION * deltaT;
      if (vX > 0) {
        stopped = false;
        delta_pos_x = dirX * vX * deltaT;
      }
      if (vY > 0) {
        stopped = false;
        delta_pos_y = dirY * vY * deltaT;
      }
      // dispatch translation event
      const evt = this.newGestureEvent(_get__("EventType").Change);
      evt.translationX = delta_pos_x;
      evt.translationY = delta_pos_y;
      dispatchTo.forEach(d => d.dispatchEvent(evt));
      if (!stopped) {
        this.inertia(dispatchTo, now, vX, dirX, x + delta_pos_x, vY, dirY, y + delta_pos_y);
      }
    });
  }
  onTouchMove(e) {
    const timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.
    for (let i = 0, len = e.changedTouches.length; i < len; i++) {
      const touch = e.changedTouches.item(i);
      if (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {
        console.warn('end of an UNKNOWN touch', touch);
        continue;
      }
      const data = this.activeTouches[touch.identifier];
      const evt = this.newGestureEvent(_get__("EventType").Change, data.initialTarget);
      evt.translationX = touch.pageX - _get__("arrays").tail(data.rollingPageX);
      evt.translationY = touch.pageY - _get__("arrays").tail(data.rollingPageY);
      evt.pageX = touch.pageX;
      evt.pageY = touch.pageY;
      this.dispatchEvent(evt);
      // only keep a few data points, to average the final speed
      if (data.rollingPageX.length > 3) {
        data.rollingPageX.shift();
        data.rollingPageY.shift();
        data.rollingTimestamps.shift();
      }
      data.rollingPageX.push(touch.pageX);
      data.rollingPageY.push(touch.pageY);
      data.rollingTimestamps.push(timestamp);
    }
    if (this.dispatched) {
      e.preventDefault();
      e.stopPropagation();
      this.dispatched = false;
    }
  }
}
exports.Gesture = _get__("Gesture");
_get__("Gesture").SCROLL_FRICTION = -0.005;
_get__("Gesture").HOLD_DELAY = 700;
_get__("Gesture").CLEAR_TAP_COUNT_TIME = 400; // ms
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "__createBinding":
      return __createBinding;
    case "__setModuleDefault":
      return __setModuleDefault;
    case "__importStar":
      return __importStar;
    case "EventType":
      return EventType;
    case "linkedList_1":
      return linkedList_1;
    case "DomUtils":
      return DomUtils;
    case "Gesture":
      return Gesture;
    case "lifecycle_1":
      return lifecycle_1;
    case "arrays":
      return arrays;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {
    case "EventType":
      return EventType = _value;
  }
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/common/arrays.js":
/*!*********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/common/arrays.js ***!
  \*********************************************************************/
/***/ ((module, exports) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.coalesce = exports.tail = void 0;
/**
 * Returns the last element of an array.
 * @param array The array.
 * @param n Which element from the end (default is zero).
 */
function tail(array, n = 0) {
  return array[array.length - (1 + n)];
}
exports.tail = _get__("tail");
/**
 * @returns a new array with all falsy values removed. The original array IS NOT modified.
 */
function coalesce(array) {
  if (!array) {
    return array;
  }
  return array.filter(e => !!e);
}
exports.coalesce = _get__("coalesce");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "tail":
      return tail;
    case "coalesce":
      return coalesce;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/common/async.js":
/*!********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/common/async.js ***!
  \********************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.RunOnceScheduler = exports.TimeoutTimer = void 0;
const lifecycle_1 = __webpack_require__(/*! ../common/lifecycle */ "./node_modules/custom-electron-titlebar/base/common/lifecycle.js");
class TimeoutTimer extends _get__("lifecycle_1").Disposable {
  constructor(runner, timeout) {
    super();
    this._token = -1;
    if (typeof runner === 'function' && typeof timeout === 'number') {
      this.setIfNotSet(runner, timeout);
    }
  }
  dispose() {
    this.cancel();
    super.dispose();
  }
  cancel() {
    if (this._token !== -1) {
      clearTimeout(this._token);
      this._token = -1;
    }
  }
  cancelAndSet(runner, timeout) {
    this.cancel();
    this._token = setTimeout(() => {
      this._token = -1;
      runner();
    }, timeout);
  }
  setIfNotSet(runner, timeout) {
    if (this._token !== -1) {
      // timer is already set
      return;
    }
    this._token = setTimeout(() => {
      this._token = -1;
      runner();
    }, timeout);
  }
}
exports.TimeoutTimer = _get__("TimeoutTimer");
class RunOnceScheduler {
  constructor(runner, timeout) {
    this.timeoutToken = -1;
    this.runner = runner;
    this.timeout = timeout;
    this.timeoutHandler = this.onTimeout.bind(this);
  }
  /**
   * Dispose RunOnceScheduler
   */
  dispose() {
    this.cancel();
    this.runner = null;
  }
  /**
   * Cancel current scheduled runner (if any).
   */
  cancel() {
    if (this.isScheduled()) {
      clearTimeout(this.timeoutToken);
      this.timeoutToken = -1;
    }
  }
  /**
   * Cancel previous runner (if any) & schedule a new runner.
   */
  schedule(delay = this.timeout) {
    this.cancel();
    this.timeoutToken = setTimeout(this.timeoutHandler, delay);
  }
  /**
   * Returns true if scheduled.
   */
  isScheduled() {
    return this.timeoutToken !== -1;
  }
  onTimeout() {
    this.timeoutToken = -1;
    if (this.runner) {
      this.doRun();
    }
  }
  doRun() {
    if (this.runner) {
      this.runner();
    }
  }
}
exports.RunOnceScheduler = _get__("RunOnceScheduler");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "lifecycle_1":
      return lifecycle_1;
    case "TimeoutTimer":
      return TimeoutTimer;
    case "RunOnceScheduler":
      return RunOnceScheduler;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/common/color.js":
/*!********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/common/color.js ***!
  \********************************************************************/
/***/ ((module, exports) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Color = exports.HSVA = exports.HSLA = exports.RGBA = void 0;
function roundFloat(number, decimalPoints) {
  const decimal = Math.pow(10, decimalPoints);
  return Math.round(number * decimal) / decimal;
}
class RGBA {
  constructor(r, g, b, a = 1) {
    this.r = Math.min(255, Math.max(0, r)) | 0;
    this.g = Math.min(255, Math.max(0, g)) | 0;
    this.b = Math.min(255, Math.max(0, b)) | 0;
    this.a = _get__("roundFloat")(Math.max(Math.min(1, a), 0), 3);
  }
  static equals(a, b) {
    return a.r === b.r && a.g === b.g && a.b === b.b && a.a === b.a;
  }
}
exports.RGBA = _get__("RGBA");
class HSLA {
  constructor(h, s, l, a) {
    this.h = Math.max(Math.min(360, h), 0) | 0;
    this.s = _get__("roundFloat")(Math.max(Math.min(1, s), 0), 3);
    this.l = _get__("roundFloat")(Math.max(Math.min(1, l), 0), 3);
    this.a = _get__("roundFloat")(Math.max(Math.min(1, a), 0), 3);
  }
  static equals(a, b) {
    return a.h === b.h && a.s === b.s && a.l === b.l && a.a === b.a;
  }
  /**
   * Converts an RGB color value to HSL. Conversion formula
   * adapted from http://en.wikipedia.org/wiki/HSL_color_space.
   * Assumes r, g, and b are contained in the set [0, 255] and
   * returns h in the set [0, 360], s, and l in the set [0, 1].
   */
  static fromRGBA(rgba) {
    const r = rgba.r / 255;
    const g = rgba.g / 255;
    const b = rgba.b / 255;
    const a = rgba.a;
    const max = Math.max(r, g, b);
    const min = Math.min(r, g, b);
    let h = 0;
    let s = 0;
    const l = (min + max) / 2;
    const chroma = max - min;
    if (chroma > 0) {
      s = Math.min(l <= 0.5 ? chroma / (2 * l) : chroma / (2 - 2 * l), 1);
      switch (max) {
        case r:
          h = (g - b) / chroma + (g < b ? 6 : 0);
          break;
        case g:
          h = (b - r) / chroma + 2;
          break;
        case b:
          h = (r - g) / chroma + 4;
          break;
      }
      h *= 60;
      h = Math.round(h);
    }
    return new (_get__("HSLA"))(h, s, l, a);
  }
  static _hue2rgb(p, q, t) {
    if (t < 0) {
      t += 1;
    }
    if (t > 1) {
      t -= 1;
    }
    if (t < 1 / 6) {
      return p + (q - p) * 6 * t;
    }
    if (t < 1 / 2) {
      return q;
    }
    if (t < 2 / 3) {
      return p + (q - p) * (2 / 3 - t) * 6;
    }
    return p;
  }
  /**
   * Converts an HSL color value to RGB. Conversion formula
   * adapted from http://en.wikipedia.org/wiki/HSL_color_space.
   * Assumes h in the set [0, 360] s, and l are contained in the set [0, 1] and
   * returns r, g, and b in the set [0, 255].
   */
  static toRGBA(hsla) {
    const h = hsla.h / 360;
    const {
      s,
      l,
      a
    } = hsla;
    let r, g, b;
    if (s === 0) {
      r = g = b = l; // achromatic
    } else {
      const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
      const p = 2 * l - q;
      r = _get__("HSLA")._hue2rgb(p, q, h + 1 / 3);
      g = _get__("HSLA")._hue2rgb(p, q, h);
      b = _get__("HSLA")._hue2rgb(p, q, h - 1 / 3);
    }
    return new (_get__("RGBA"))(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), a);
  }
}
exports.HSLA = _get__("HSLA");
class HSVA {
  constructor(h, s, v, a) {
    this.h = Math.max(Math.min(360, h), 0) | 0;
    this.s = _get__("roundFloat")(Math.max(Math.min(1, s), 0), 3);
    this.v = _get__("roundFloat")(Math.max(Math.min(1, v), 0), 3);
    this.a = _get__("roundFloat")(Math.max(Math.min(1, a), 0), 3);
  }
  static equals(a, b) {
    return a.h === b.h && a.s === b.s && a.v === b.v && a.a === b.a;
  }
  // from http://www.rapidtables.com/convert/color/rgb-to-hsv.htm
  static fromRGBA(rgba) {
    const r = rgba.r / 255;
    const g = rgba.g / 255;
    const b = rgba.b / 255;
    const cmax = Math.max(r, g, b);
    const cmin = Math.min(r, g, b);
    const delta = cmax - cmin;
    const s = cmax === 0 ? 0 : delta / cmax;
    let m;
    if (delta === 0) {
      m = 0;
    } else if (cmax === r) {
      m = ((g - b) / delta % 6 + 6) % 6;
    } else if (cmax === g) {
      m = (b - r) / delta + 2;
    } else {
      m = (r - g) / delta + 4;
    }
    return new (_get__("HSVA"))(Math.round(m * 60), s, cmax, rgba.a);
  }
  // from http://www.rapidtables.com/convert/color/hsv-to-rgb.htm
  static toRGBA(hsva) {
    const {
      h,
      s,
      v,
      a
    } = hsva;
    const c = v * s;
    const x = c * (1 - Math.abs(h / 60 % 2 - 1));
    const m = v - c;
    let [r, g, b] = [0, 0, 0];
    if (h < 60) {
      r = c;
      g = x;
    } else if (h < 120) {
      r = x;
      g = c;
    } else if (h < 180) {
      g = c;
      b = x;
    } else if (h < 240) {
      g = x;
      b = c;
    } else if (h < 300) {
      r = x;
      b = c;
    } else if (h < 360) {
      r = c;
      b = x;
    }
    r = Math.round((r + m) * 255);
    g = Math.round((g + m) * 255);
    b = Math.round((b + m) * 255);
    return new (_get__("RGBA"))(r, g, b, a);
  }
}
exports.HSVA = _get__("HSVA");
class Color {
  static fromHex(hex) {
    return _get__("Color").Format.CSS.parseHex(hex) || _get__("Color").RED;
  }
  get hsla() {
    if (this._hsla) {
      return this._hsla;
    } else {
      return _get__("HSLA").fromRGBA(this.rgba);
    }
  }
  get hsva() {
    if (this._hsva) {
      return this._hsva;
    }
    return _get__("HSVA").fromRGBA(this.rgba);
  }
  constructor(arg) {
    if (!arg) {
      throw new Error('Color needs a value');
    } else if (arg instanceof _get__("RGBA")) {
      this.rgba = arg;
    } else if (arg instanceof _get__("HSLA")) {
      this._hsla = arg;
      this.rgba = _get__("HSLA").toRGBA(arg);
    } else if (arg instanceof _get__("HSVA")) {
      this._hsva = arg;
      this.rgba = _get__("HSVA").toRGBA(arg);
    } else {
      throw new Error('Invalid color ctor argument');
    }
  }
  equals(other) {
    return !!other && _get__("RGBA").equals(this.rgba, other.rgba) && _get__("HSLA").equals(this.hsla, other.hsla) && _get__("HSVA").equals(this.hsva, other.hsva);
  }
  /**
   * http://www.w3.org/TR/WCAG20/#relativeluminancedef
   * Returns the number in the set [0, 1]. O => Darkest Black. 1 => Lightest white.
   */
  getRelativeLuminance() {
    const R = _get__("Color")._relativeLuminanceForComponent(this.rgba.r);
    const G = _get__("Color")._relativeLuminanceForComponent(this.rgba.g);
    const B = _get__("Color")._relativeLuminanceForComponent(this.rgba.b);
    const luminance = 0.2126 * R + 0.7152 * G + 0.0722 * B;
    return _get__("roundFloat")(luminance, 4);
  }
  static _relativeLuminanceForComponent(color) {
    const c = color / 255;
    return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
  }
  /**
   * http://www.w3.org/TR/WCAG20/#contrast-ratiodef
   * Returns the contrast ration number in the set [1, 21].
   */
  getContrastRatio(another) {
    const lum1 = this.getRelativeLuminance();
    const lum2 = another.getRelativeLuminance();
    return lum1 > lum2 ? (lum1 + 0.05) / (lum2 + 0.05) : (lum2 + 0.05) / (lum1 + 0.05);
  }
  /**
   *	http://24ways.org/2010/calculating-color-contrast
   *  Return 'true' if darker color otherwise 'false'
   */
  isDarker() {
    const yiq = (this.rgba.r * 299 + this.rgba.g * 587 + this.rgba.b * 114) / 1000;
    return yiq < 128;
  }
  /**
   *	http://24ways.org/2010/calculating-color-contrast
   *  Return 'true' if lighter color otherwise 'false'
   */
  isLighter() {
    const yiq = (this.rgba.r * 299 + this.rgba.g * 587 + this.rgba.b * 114) / 1000;
    return yiq >= 128;
  }
  isLighterThan(another) {
    const lum1 = this.getRelativeLuminance();
    const lum2 = another.getRelativeLuminance();
    return lum1 > lum2;
  }
  isDarkerThan(another) {
    const lum1 = this.getRelativeLuminance();
    const lum2 = another.getRelativeLuminance();
    return lum1 < lum2;
  }
  lighten(factor) {
    return new (_get__("Color"))(new (_get__("HSLA"))(this.hsla.h, this.hsla.s, this.hsla.l + this.hsla.l * factor, this.hsla.a));
  }
  darken(factor) {
    return new (_get__("Color"))(new (_get__("HSLA"))(this.hsla.h, this.hsla.s, this.hsla.l - this.hsla.l * factor, this.hsla.a));
  }
  transparent(factor) {
    const {
      r,
      g,
      b,
      a
    } = this.rgba;
    return new (_get__("Color"))(new (_get__("RGBA"))(r, g, b, a * factor));
  }
  isTransparent() {
    return this.rgba.a === 0;
  }
  isOpaque() {
    return this.rgba.a === 1;
  }
  opposite() {
    return new (_get__("Color"))(new (_get__("RGBA"))(255 - this.rgba.r, 255 - this.rgba.g, 255 - this.rgba.b, this.rgba.a));
  }
  blend(c) {
    const rgba = c.rgba;
    // Convert to 0..1 opacity
    const thisA = this.rgba.a;
    const colorA = rgba.a;
    const a = thisA + colorA * (1 - thisA);
    if (a < 1e-6) {
      return _get__("Color").TRANSPARENT;
    }
    const r = this.rgba.r * thisA / a + rgba.r * colorA * (1 - thisA) / a;
    const g = this.rgba.g * thisA / a + rgba.g * colorA * (1 - thisA) / a;
    const b = this.rgba.b * thisA / a + rgba.b * colorA * (1 - thisA) / a;
    return new (_get__("Color"))(new (_get__("RGBA"))(r, g, b, a));
  }
  flatten(...backgrounds) {
    const background = backgrounds.reduceRight((accumulator, color) => {
      return _get__("Color")._flatten(color, accumulator);
    });
    return _get__("Color")._flatten(this, background);
  }
  static _flatten(foreground, background) {
    const backgroundAlpha = 1 - foreground.rgba.a;
    return new (_get__("Color"))(new (_get__("RGBA"))(backgroundAlpha * background.rgba.r + foreground.rgba.a * foreground.rgba.r, backgroundAlpha * background.rgba.g + foreground.rgba.a * foreground.rgba.g, backgroundAlpha * background.rgba.b + foreground.rgba.a * foreground.rgba.b));
  }
  toString() {
    return '' + _get__("Color").Format.CSS.format(this);
  }
  static getLighterColor(of, relative, factor) {
    if (of.isLighterThan(relative)) {
      return of;
    }
    factor = factor || 0.5;
    const lum1 = of.getRelativeLuminance();
    const lum2 = relative.getRelativeLuminance();
    factor = factor * (lum2 - lum1) / lum2;
    return of.lighten(factor);
  }
  static getDarkerColor(of, relative, factor) {
    if (of.isDarkerThan(relative)) {
      return of;
    }
    factor = factor || 0.5;
    const lum1 = of.getRelativeLuminance();
    const lum2 = relative.getRelativeLuminance();
    factor = factor * (lum1 - lum2) / lum1;
    return of.darken(factor);
  }
}
exports.Color = _get__("Color");
_get__("Color").WHITE = new (_get__("Color"))(new (_get__("RGBA"))(255, 255, 255, 1));
_get__("Color").BLACK = new (_get__("Color"))(new (_get__("RGBA"))(0, 0, 0, 1));
_get__("Color").RED = new (_get__("Color"))(new (_get__("RGBA"))(255, 0, 0, 1));
_get__("Color").BLUE = new (_get__("Color"))(new (_get__("RGBA"))(0, 0, 255, 1));
_get__("Color").GREEN = new (_get__("Color"))(new (_get__("RGBA"))(0, 255, 0, 1));
_get__("Color").CYAN = new (_get__("Color"))(new (_get__("RGBA"))(0, 255, 255, 1));
_get__("Color").LIGHTGREY = new (_get__("Color"))(new (_get__("RGBA"))(211, 211, 211, 1));
_get__("Color").TRANSPARENT = new (_get__("Color"))(new (_get__("RGBA"))(0, 0, 0, 0));
(function (Color) {
  let Format;
  (function (Format) {
    let CSS;
    (function (CSS) {
      function formatRGB(color) {
        if (color.rgba.a === 1) {
          return `rgb(${color.rgba.r}, ${color.rgba.g}, ${color.rgba.b})`;
        }
        return Color.Format.CSS.formatRGBA(color);
      }
      CSS.formatRGB = formatRGB;
      function formatRGBA(color) {
        return `rgba(${color.rgba.r}, ${color.rgba.g}, ${color.rgba.b}, ${+color.rgba.a.toFixed(2)})`;
      }
      CSS.formatRGBA = formatRGBA;
      function formatHSL(color) {
        if (color.hsla.a === 1) {
          return `hsl(${color.hsla.h}, ${(color.hsla.s * 100).toFixed(2)}%, ${(color.hsla.l * 100).toFixed(2)}%)`;
        }
        return Color.Format.CSS.formatHSLA(color);
      }
      CSS.formatHSL = formatHSL;
      function formatHSLA(color) {
        return `hsla(${color.hsla.h}, ${(color.hsla.s * 100).toFixed(2)}%, ${(color.hsla.l * 100).toFixed(2)}%, ${color.hsla.a.toFixed(2)})`;
      }
      CSS.formatHSLA = formatHSLA;
      function _toTwoDigitHex(n) {
        const r = n.toString(16);
        return r.length !== 2 ? '0' + r : r;
      }
      /**
       * Formats the color as #RRGGBB
       */
      function formatHex(color) {
        return `#${_toTwoDigitHex(color.rgba.r)}${_toTwoDigitHex(color.rgba.g)}${_toTwoDigitHex(color.rgba.b)}`;
      }
      CSS.formatHex = formatHex;
      /**
       * Formats the color as #RRGGBBAA
       * If 'compact' is set, colors without transparancy will be printed as #RRGGBB
       */
      function formatHexA(color, compact = false) {
        if (compact && color.rgba.a === 1) {
          return Color.Format.CSS.formatHex(color);
        }
        return `#${_toTwoDigitHex(color.rgba.r)}${_toTwoDigitHex(color.rgba.g)}${_toTwoDigitHex(color.rgba.b)}${_toTwoDigitHex(Math.round(color.rgba.a * 255))}`;
      }
      CSS.formatHexA = formatHexA;
      /**
       * The default format will use HEX if opaque and RGBA otherwise.
       */
      function format(color) {
        if (!color) {
          return null;
        }
        if (color.isOpaque()) {
          return Color.Format.CSS.formatHex(color);
        }
        return Color.Format.CSS.formatRGBA(color);
      }
      CSS.format = format;
      /**
       * Converts an Hex color value to a Color.
       * returns r, g, and b are contained in the set [0, 255]
       * @param hex string (#RGB, #RGBA, #RRGGBB or #RRGGBBAA).
       */
      function parseHex(hex) {
        if (!hex) {
          // Invalid color
          return null;
        }
        const length = hex.length;
        if (length === 0) {
          // Invalid color
          return null;
        }
        if (hex.charCodeAt(0) !== 35 /* CharCode.Hash */) {
          // Does not begin with a #
          return null;
        }
        if (length === 7) {
          // #RRGGBB format
          const r = 16 * _parseHexDigit(hex.charCodeAt(1)) + _parseHexDigit(hex.charCodeAt(2));
          const g = 16 * _parseHexDigit(hex.charCodeAt(3)) + _parseHexDigit(hex.charCodeAt(4));
          const b = 16 * _parseHexDigit(hex.charCodeAt(5)) + _parseHexDigit(hex.charCodeAt(6));
          return new Color(new (_get__("RGBA"))(r, g, b, 1));
        }
        if (length === 9) {
          // #RRGGBBAA format
          const r = 16 * _parseHexDigit(hex.charCodeAt(1)) + _parseHexDigit(hex.charCodeAt(2));
          const g = 16 * _parseHexDigit(hex.charCodeAt(3)) + _parseHexDigit(hex.charCodeAt(4));
          const b = 16 * _parseHexDigit(hex.charCodeAt(5)) + _parseHexDigit(hex.charCodeAt(6));
          const a = 16 * _parseHexDigit(hex.charCodeAt(7)) + _parseHexDigit(hex.charCodeAt(8));
          return new Color(new (_get__("RGBA"))(r, g, b, a / 255));
        }
        if (length === 4) {
          // #RGB format
          const r = _parseHexDigit(hex.charCodeAt(1));
          const g = _parseHexDigit(hex.charCodeAt(2));
          const b = _parseHexDigit(hex.charCodeAt(3));
          return new Color(new (_get__("RGBA"))(16 * r + r, 16 * g + g, 16 * b + b));
        }
        if (length === 5) {
          // #RGBA format
          const r = _parseHexDigit(hex.charCodeAt(1));
          const g = _parseHexDigit(hex.charCodeAt(2));
          const b = _parseHexDigit(hex.charCodeAt(3));
          const a = _parseHexDigit(hex.charCodeAt(4));
          return new Color(new (_get__("RGBA"))(16 * r + r, 16 * g + g, 16 * b + b, (16 * a + a) / 255));
        }
        // Invalid color
        return null;
      }
      CSS.parseHex = parseHex;
      function _parseHexDigit(charCode) {
        switch (charCode) {
          case 48 /* CharCode.Digit0 */:
            return 0;
          case 49 /* CharCode.Digit1 */:
            return 1;
          case 50 /* CharCode.Digit2 */:
            return 2;
          case 51 /* CharCode.Digit3 */:
            return 3;
          case 52 /* CharCode.Digit4 */:
            return 4;
          case 53 /* CharCode.Digit5 */:
            return 5;
          case 54 /* CharCode.Digit6 */:
            return 6;
          case 55 /* CharCode.Digit7 */:
            return 7;
          case 56 /* CharCode.Digit8 */:
            return 8;
          case 57 /* CharCode.Digit9 */:
            return 9;
          case 97 /* CharCode.a */:
            return 10;
          case 65 /* CharCode.A */:
            return 10;
          case 98 /* CharCode.b */:
            return 11;
          case 66 /* CharCode.B */:
            return 11;
          case 99 /* CharCode.c */:
            return 12;
          case 67 /* CharCode.C */:
            return 12;
          case 100 /* CharCode.d */:
            return 13;
          case 68 /* CharCode.D */:
            return 13;
          case 101 /* CharCode.e */:
            return 14;
          case 69 /* CharCode.E */:
            return 14;
          case 102 /* CharCode.f */:
            return 15;
          case 70 /* CharCode.F */:
            return 15;
        }
        return 0;
      }
    })(CSS = Format.CSS || (Format.CSS = {}));
  })(Format = Color.Format || (Color.Format = {}));
})(_get__("Color") || (exports.Color = _assign__("Color", {})));
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "roundFloat":
      return roundFloat;
    case "RGBA":
      return RGBA;
    case "HSLA":
      return HSLA;
    case "HSVA":
      return HSVA;
    case "Color":
      return Color;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {
    case "Color":
      return Color = _value;
  }
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/common/dom.js":
/*!******************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/common/dom.js ***!
  \******************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function () {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) _get__("__createBinding")(result, mod, k);
  _get__("__setModuleDefault")(result, mod);
  return result;
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.hide = exports.show = exports.join = exports.$ = exports.prepend = exports.append = exports.trackFocus = exports.restoreParentsScrollTop = exports.saveParentsScrollTop = exports.EventHelper = exports.EventType = exports.isHTMLElement = exports.removeCSSRulesContainingSelector = exports.createCSSRule = exports.createStyleSheet = exports.findParentWithClass = exports.isAncestor = exports.getLargestChildWidth = exports.getTotalHeight = exports.getContentHeight = exports.getTotalScrollWidth = exports.getContentWidth = exports.getTotalWidth = exports.StandardWindow = exports.getDomNodePagePosition = exports.position = exports.size = exports.getTopLeftOffset = exports.Dimension = exports.getDomNodeZoomLevel = exports.getClientArea = exports.getComputedStyle = exports.addDisposableThrottledListener = exports.modify = exports.measure = exports.scheduleAtNextAnimationFrame = exports.runAtThisOrScheduleAtNextAnimationFrame = exports.addDisposableNonBubblingMouseOutListener = exports.addStandardDisposableListener = exports.addDisposableListener = exports.toggleClass = exports.removeClasses = exports.removeClass = exports.addClasses = exports.addClass = exports.hasClass = exports.ModifierKeyEmitter = exports.isInDOM = exports.removeNode = exports.clearNode = void 0;
exports.animate = exports.windowOpenNoOpener = exports.computeScreenAwareSize = exports.domContentLoaded = exports.finalHandler = exports.getElementsByTagName = exports.removeTabIndexAndUpdateFocus = void 0;
const browser = _get__("__importStar")(__webpack_require__(/*! ../browser/browser */ "./node_modules/custom-electron-titlebar/base/browser/browser.js"));
const event_1 = __webpack_require__(/*! ../browser/event */ "./node_modules/custom-electron-titlebar/base/browser/event.js");
const keyboardEvent_1 = __webpack_require__(/*! ../browser/keyboardEvent */ "./node_modules/custom-electron-titlebar/base/browser/keyboardEvent.js");
const mouseEvent_1 = __webpack_require__(/*! ../browser/mouseEvent */ "./node_modules/custom-electron-titlebar/base/browser/mouseEvent.js");
const async_1 = __webpack_require__(/*! ../common/async */ "./node_modules/custom-electron-titlebar/base/common/async.js");
const event_2 = __webpack_require__(/*! ../common/event */ "./node_modules/custom-electron-titlebar/base/common/event.js");
const lifecycle_1 = __webpack_require__(/*! ../common/lifecycle */ "./node_modules/custom-electron-titlebar/base/common/lifecycle.js");
const platform = _get__("__importStar")(__webpack_require__(/*! ../common/platform */ "./node_modules/custom-electron-titlebar/base/common/platform.js"));
const arrays_1 = __webpack_require__(/*! ../common/arrays */ "./node_modules/custom-electron-titlebar/base/common/arrays.js");
function clearNode(node) {
  while (node.firstChild) {
    node.removeChild(node.firstChild);
  }
}
exports.clearNode = _get__("clearNode");
function removeNode(node) {
  if (node.parentNode) {
    node.parentNode.removeChild(node);
  }
}
exports.removeNode = _get__("removeNode");
function isInDOM(node) {
  while (node) {
    if (node === document.body) {
      return true;
    }
    node = node.parentNode;
  }
  return false;
}
exports.isInDOM = _get__("isInDOM");
class ModifierKeyEmitter extends _get__("event_2").Emitter {
  constructor() {
    super();
    this._keyStatus = {
      altKey: false,
      shiftKey: false,
      ctrlKey: false,
      metaKey: false
    };
    _get__("addDisposableListener")(window, 'keydown', e => {
      if (e.defaultPrevented) {
        return;
      }
      const event = new (_get__("keyboardEvent_1").StandardKeyboardEvent)(e);
      // If Alt-key keydown event is repeated, ignore it #112347
      // Only known to be necessary for Alt-Key at the moment #115810
      if (event.keyCode === 6 /* KeyCode.Alt */ && e.repeat) {
        return;
      }
      if (e.altKey && !this._keyStatus.altKey) {
        this._keyStatus.lastKeyPressed = 'alt';
      } else if (e.ctrlKey && !this._keyStatus.ctrlKey) {
        this._keyStatus.lastKeyPressed = 'ctrl';
      } else if (e.metaKey && !this._keyStatus.metaKey) {
        this._keyStatus.lastKeyPressed = 'meta';
      } else if (e.shiftKey && !this._keyStatus.shiftKey) {
        this._keyStatus.lastKeyPressed = 'shift';
      } else if (event.keyCode !== 6 /* KeyCode.Alt */) {
        this._keyStatus.lastKeyPressed = undefined;
      } else {
        return;
      }
      this._keyStatus.altKey = e.altKey;
      this._keyStatus.ctrlKey = e.ctrlKey;
      this._keyStatus.metaKey = e.metaKey;
      this._keyStatus.shiftKey = e.shiftKey;
      if (this._keyStatus.lastKeyPressed) {
        this._keyStatus.event = e;
        this.fire(this._keyStatus);
      }
    }, true);
    _get__("addDisposableListener")(window, 'keyup', e => {
      if (e.defaultPrevented) {
        return;
      }
      if (!e.altKey && this._keyStatus.altKey) {
        this._keyStatus.lastKeyReleased = 'alt';
      } else if (!e.ctrlKey && this._keyStatus.ctrlKey) {
        this._keyStatus.lastKeyReleased = 'ctrl';
      } else if (!e.metaKey && this._keyStatus.metaKey) {
        this._keyStatus.lastKeyReleased = 'meta';
      } else if (!e.shiftKey && this._keyStatus.shiftKey) {
        this._keyStatus.lastKeyReleased = 'shift';
      } else {
        this._keyStatus.lastKeyReleased = undefined;
      }
      if (this._keyStatus.lastKeyPressed !== this._keyStatus.lastKeyReleased) {
        this._keyStatus.lastKeyPressed = undefined;
      }
      this._keyStatus.altKey = e.altKey;
      this._keyStatus.ctrlKey = e.ctrlKey;
      this._keyStatus.metaKey = e.metaKey;
      this._keyStatus.shiftKey = e.shiftKey;
      if (this._keyStatus.lastKeyReleased) {
        this._keyStatus.event = e;
        this.fire(this._keyStatus);
      }
    }, true);
    _get__("addDisposableListener")(document.body, 'mousedown', () => {
      this._keyStatus.lastKeyPressed = undefined;
    }, true);
    _get__("addDisposableListener")(document.body, 'mouseup', () => {
      this._keyStatus.lastKeyPressed = undefined;
    }, true);
    _get__("addDisposableListener")(document.body, 'mousemove', e => {
      if (e.buttons) {
        this._keyStatus.lastKeyPressed = undefined;
      }
    }, true);
    _get__("addDisposableListener")(window, 'blur', () => {
      this.resetKeyStatus();
    });
  }
  get keyStatus() {
    return this._keyStatus;
  }
  get isModifierPressed() {
    return this._keyStatus.altKey || this._keyStatus.ctrlKey || this._keyStatus.metaKey || this._keyStatus.shiftKey;
  }
  /**
   * Allows to explicitly reset the key status based on more knowledge (#109062)
   */
  resetKeyStatus() {
    this.doResetKeyStatus();
    this.fire(this._keyStatus);
  }
  doResetKeyStatus() {
    this._keyStatus = {
      altKey: false,
      shiftKey: false,
      ctrlKey: false,
      metaKey: false
    };
  }
  static getInstance() {
    if (!_get__("ModifierKeyEmitter").instance) {
      _get__("ModifierKeyEmitter").instance = new (_get__("ModifierKeyEmitter"))();
    }
    return _get__("ModifierKeyEmitter").instance;
  }
  dispose() {
    super.dispose();
  }
}
exports.ModifierKeyEmitter = _get__("ModifierKeyEmitter");
const _manualClassList = new class {
  _findClassName(node, className) {
    const classes = node.className;
    if (!classes) {
      this._lastStart = -1;
      return;
    }
    className = className.trim();
    const classesLen = classes.length;
    const classLen = className.length;
    if (classLen === 0) {
      this._lastStart = -1;
      return;
    }
    if (classesLen < classLen) {
      this._lastStart = -1;
      return;
    }
    if (classes === className) {
      this._lastStart = 0;
      this._lastEnd = classesLen;
      return;
    }
    let idx = -1;
    let idxEnd;
    while ((idx = classes.indexOf(className, idx + 1)) >= 0) {
      idxEnd = idx + classLen;
      // a class that is followed by another class
      if ((idx === 0 || classes.charCodeAt(idx - 1) === 32 /* CharCode.Space */) && classes.charCodeAt(idxEnd) === 32 /* CharCode.Space */) {
        this._lastStart = idx;
        this._lastEnd = idxEnd + 1;
        return;
      }
      // last class
      if (idx > 0 && classes.charCodeAt(idx - 1) === 32 /* CharCode.Space */ && idxEnd === classesLen) {
        this._lastStart = idx - 1;
        this._lastEnd = idxEnd;
        return;
      }
      // equal - duplicate of cmp above
      if (idx === 0 && idxEnd === classesLen) {
        this._lastStart = 0;
        this._lastEnd = idxEnd;
        return;
      }
    }
    this._lastStart = -1;
  }
  hasClass(node, className) {
    this._findClassName(node, className);
    return this._lastStart !== -1;
  }
  addClasses(node, ...classNames) {
    classNames.forEach(nameValue => nameValue.split(' ').forEach(name => this.addClass(node, name)));
  }
  addClass(node, className) {
    if (!node.className) {
      // doesn't have it for sure
      node.className = className;
    } else {
      this._findClassName(node, className); // see if it's already there
      if (this._lastStart === -1) {
        node.className = node.className + ' ' + className;
      }
    }
  }
  removeClass(node, className) {
    this._findClassName(node, className);
    if (this._lastStart === -1) {
      // Prevent styles invalidation if not necessary
    } else {
      node.className = node.className.substring(0, this._lastStart) + node.className.substring(this._lastEnd || 0);
    }
  }
  removeClasses(node, ...classNames) {
    classNames.forEach(nameValue => nameValue.split(' ').forEach(name => this.removeClass(node, name)));
  }
  toggleClass(node, className, shouldHaveIt) {
    this._findClassName(node, className);
    if (this._lastStart !== -1 && (shouldHaveIt === undefined || !shouldHaveIt)) {
      this.removeClass(node, className);
    }
    if (this._lastStart === -1 && (shouldHaveIt === undefined || shouldHaveIt)) {
      this.addClass(node, className);
    }
  }
}();
const _nativeClassList = new class {
  hasClass(node, className) {
    return Boolean(className) && node.classList && node.classList.contains(className);
  }
  addClasses(node, ...classNames) {
    classNames.forEach(nameValue => nameValue.split(' ').forEach(name => this.addClass(node, name)));
  }
  addClass(node, className) {
    if (className && node.classList) {
      node.classList.add(className);
    }
  }
  removeClass(node, className) {
    if (className && node.classList) {
      node.classList.remove(className);
    }
  }
  removeClasses(node, ...classNames) {
    classNames.forEach(nameValue => nameValue.split(' ').forEach(name => this.removeClass(node, name)));
  }
  toggleClass(node, className, shouldHaveIt) {
    if (node.classList) {
      node.classList.toggle(className, shouldHaveIt);
    }
  }
}();
// In IE11 there is only partial support for `classList` which makes us keep our
// custom implementation. Otherwise use the native implementation, see: http://caniuse.com/#search=classlist
const _classList = _get__("browser").isIE ? _get__("_manualClassList") : _get__("_nativeClassList");
exports.hasClass = _get__("_classList").hasClass.bind(_get__("_classList"));
exports.addClass = _get__("_classList").addClass.bind(_get__("_classList"));
exports.addClasses = _get__("_classList").addClasses.bind(_get__("_classList"));
exports.removeClass = _get__("_classList").removeClass.bind(_get__("_classList"));
exports.removeClasses = _get__("_classList").removeClasses.bind(_get__("_classList"));
exports.toggleClass = _get__("_classList").toggleClass.bind(_get__("_classList"));
class DomListener {
  constructor(node, type, handler, options) {
    this._node = node;
    this._type = type;
    this._handler = handler;
    this._options = options || false;
    this._node.addEventListener(this._type, this._handler, this._options);
  }
  dispose() {
    if (!this._handler) {
      // Already disposed
      return;
    }
    this._node.removeEventListener(this._type, this._handler, this._options);
    // Prevent leakers from holding on to the dom or handler func
    this._node = null;
    this._handler = null;
  }
}
function addDisposableListener(node, type, handler, useCaptureOrOptions) {
  return new (_get__("DomListener"))(node, type, handler, useCaptureOrOptions);
}
exports.addDisposableListener = _get__("addDisposableListener");
function _wrapAsStandardMouseEvent(handler) {
  return function (e) {
    return handler(new (_get__("mouseEvent_1").StandardMouseEvent)(e));
  };
}
function _wrapAsStandardKeyboardEvent(handler) {
  return function (e) {
    return handler(new (_get__("keyboardEvent_1").StandardKeyboardEvent)(e));
  };
}
const addStandardDisposableListener = function addStandardDisposableListener(node, type, handler, useCapture) {
  let wrapHandler = handler;
  if (type === 'click' || type === 'mousedown') {
    wrapHandler = _get__("_wrapAsStandardMouseEvent")(handler);
  } else if (type === 'keydown' || type === 'keypress' || type === 'keyup') {
    wrapHandler = _get__("_wrapAsStandardKeyboardEvent")(handler);
  }
  return _get__("addDisposableListener")(node, type, wrapHandler, useCapture);
};
exports.addStandardDisposableListener = _get__("addStandardDisposableListener");
function addDisposableNonBubblingMouseOutListener(node, handler) {
  return _get__("addDisposableListener")(node, 'mouseout', e => {
    // Mouse out bubbles, so this is an attempt to ignore faux mouse outs coming from children elements
    let toElement = e.relatedTarget || e.target;
    while (toElement && toElement !== node) {
      toElement = toElement.parentNode;
    }
    if (toElement === node) {
      return;
    }
    handler(e);
  });
}
exports.addDisposableNonBubblingMouseOutListener = _get__("addDisposableNonBubblingMouseOutListener");
let _animationFrame = null;
function doRequestAnimationFrame(callback) {
  if (!_get__("_animationFrame")) {
    const emulatedRequestAnimationFrame = callback => {
      return setTimeout(() => callback(new Date().getTime()), 0);
    };
    _assign__("_animationFrame", self.requestAnimationFrame || self.msRequestAnimationFrame || self.webkitRequestAnimationFrame || self.mozRequestAnimationFrame || self.oRequestAnimationFrame || emulatedRequestAnimationFrame);
  }
  return _get__("_animationFrame").call(self, callback);
}
class AnimationFrameQueueItem {
  constructor(runner, priority = 0) {
    this._runner = runner;
    this.priority = priority;
    this._canceled = false;
  }
  dispose() {
    this._canceled = true;
  }
  execute() {
    if (this._canceled) {
      return;
    }
    try {
      this._runner();
    } catch (e) {
      console.error(e);
    }
  }
  // Sort by priority (largest to lowest)
  static sort(a, b) {
    return b.priority - a.priority;
  }
}
(function () {
  /**
   * The runners scheduled at the next animation frame
   */
  let NEXT_QUEUE = [];
  /**
   * The runners scheduled at the current animation frame
   */
  let CURRENT_QUEUE = null;
  /**
   * A flag to keep track if the native requestAnimationFrame was already called
   */
  let animFrameRequested = false;
  /**
   * A flag to indicate if currently handling a native requestAnimationFrame callback
   */
  let inAnimationFrameRunner = false;
  const animationFrameRunner = () => {
    animFrameRequested = false;
    CURRENT_QUEUE = NEXT_QUEUE;
    NEXT_QUEUE = [];
    inAnimationFrameRunner = true;
    while (CURRENT_QUEUE.length > 0) {
      CURRENT_QUEUE.sort(_get__("AnimationFrameQueueItem").sort);
      const top = CURRENT_QUEUE.shift();
      top.execute();
    }
    inAnimationFrameRunner = false;
  };
  exports.scheduleAtNextAnimationFrame = (runner, priority = 0) => {
    const item = new (_get__("AnimationFrameQueueItem"))(runner, priority);
    NEXT_QUEUE.push(item);
    if (!animFrameRequested) {
      animFrameRequested = true;
      _get__("doRequestAnimationFrame")(animationFrameRunner);
    }
    return item;
  };
  exports.runAtThisOrScheduleAtNextAnimationFrame = (runner, priority) => {
    if (inAnimationFrameRunner) {
      const item = new (_get__("AnimationFrameQueueItem"))(runner, priority);
      CURRENT_QUEUE.push(item);
      return item;
    } else {
      return (0, exports.scheduleAtNextAnimationFrame)(runner, priority);
    }
  };
})();
function measure(callback) {
  return (0, exports.scheduleAtNextAnimationFrame)(callback, 10000 /* must be early */);
}

exports.measure = _get__("measure");
function modify(callback) {
  return (0, exports.scheduleAtNextAnimationFrame)(callback, -10000 /* must be late */);
}

exports.modify = _get__("modify");
const MINIMUM_TIME_MS = 16;
const DEFAULT_EVENT_MERGER = function (lastEvent, currentEvent) {
  return currentEvent;
};
class TimeoutThrottledDomListener extends _get__("lifecycle_1").Disposable {
  constructor(node, type, handler, eventMerger = _get__("DEFAULT_EVENT_MERGER"), minimumTimeMs = _get__("MINIMUM_TIME_MS")) {
    super();
    let lastEvent = null;
    let lastHandlerTime = 0;
    const timeout = this._register(new (_get__("async_1").TimeoutTimer)());
    const invokeHandler = () => {
      lastHandlerTime = new Date().getTime();
      handler(lastEvent);
      lastEvent = null;
    };
    this._register(_get__("addDisposableListener")(node, type, e => {
      lastEvent = eventMerger(lastEvent, e);
      const elapsedTime = new Date().getTime() - lastHandlerTime;
      if (elapsedTime >= minimumTimeMs) {
        timeout.cancel();
        invokeHandler();
      } else {
        timeout.setIfNotSet(invokeHandler, minimumTimeMs - elapsedTime);
      }
    }));
  }
}
function addDisposableThrottledListener(node, type, handler, eventMerger, minimumTimeMs) {
  return new (_get__("TimeoutThrottledDomListener"))(node, type, handler, eventMerger, minimumTimeMs);
}
exports.addDisposableThrottledListener = _get__("addDisposableThrottledListener");
function getComputedStyle(el) {
  return document.defaultView.getComputedStyle(el, null);
}
exports.getComputedStyle = _get__("getComputedStyle");
// Adapted from WinJS
// Converts a CSS positioning string for the specified element to pixels.
const convertToPixels = function () {
  return function (element, value) {
    return parseFloat(value) || 0;
  };
}();
function getDimension(element, cssPropertyName, jsPropertyName) {
  const computedStyle = _get__("getComputedStyle")(element);
  let value = '0';
  if (computedStyle) {
    if (computedStyle.getPropertyValue) {
      value = computedStyle.getPropertyValue(cssPropertyName);
    } else {
      // IE8
      value = computedStyle.getAttribute(jsPropertyName);
    }
  }
  return _get__("convertToPixels")(element, value);
}
function getClientArea(element) {
  // Try with DOM clientWidth / clientHeight
  if (element !== document.body) {
    return new (_get__("Dimension"))(element.clientWidth, element.clientHeight);
  }
  // Try innerWidth / innerHeight
  if (window.innerWidth && window.innerHeight) {
    return new (_get__("Dimension"))(window.innerWidth, window.innerHeight);
  }
  // Try with document.body.clientWidth / document.body.clientHeight
  if (document.body && document.body.clientWidth && document.body.clientHeight) {
    return new (_get__("Dimension"))(document.body.clientWidth, document.body.clientHeight);
  }
  // Try with document.documentElement.clientWidth / document.documentElement.clientHeight
  if (document.documentElement && document.documentElement.clientWidth && document.documentElement.clientHeight) {
    return new (_get__("Dimension"))(document.documentElement.clientWidth, document.documentElement.clientHeight);
  }
  throw new Error('Unable to figure out browser width and height');
}
exports.getClientArea = _get__("getClientArea");
/**
 * Returns the effective zoom on a given element before window zoom level is applied
 */
function getDomNodeZoomLevel(domNode) {
  let testElement = domNode;
  let zoom = 1.0;
  do {
    const elementZoomLevel = _get__("getComputedStyle")(testElement).zoom;
    if (elementZoomLevel !== null && elementZoomLevel !== undefined && elementZoomLevel !== '1') {
      zoom *= elementZoomLevel;
    }
    testElement = testElement.parentElement;
  } while (testElement !== null && testElement !== document.documentElement);
  return zoom;
}
exports.getDomNodeZoomLevel = _get__("getDomNodeZoomLevel");
const sizeUtils = {
  getBorderLeftWidth: function (element) {
    return _get__("getDimension")(element, 'border-left-width', 'borderLeftWidth');
  },
  getBorderRightWidth: function (element) {
    return _get__("getDimension")(element, 'border-right-width', 'borderRightWidth');
  },
  getBorderTopWidth: function (element) {
    return _get__("getDimension")(element, 'border-top-width', 'borderTopWidth');
  },
  getBorderBottomWidth: function (element) {
    return _get__("getDimension")(element, 'border-bottom-width', 'borderBottomWidth');
  },
  getPaddingLeft: function (element) {
    return _get__("getDimension")(element, 'padding-left', 'paddingLeft');
  },
  getPaddingRight: function (element) {
    return _get__("getDimension")(element, 'padding-right', 'paddingRight');
  },
  getPaddingTop: function (element) {
    return _get__("getDimension")(element, 'padding-top', 'paddingTop');
  },
  getPaddingBottom: function (element) {
    return _get__("getDimension")(element, 'padding-bottom', 'paddingBottom');
  },
  getMarginLeft: function (element) {
    return _get__("getDimension")(element, 'margin-left', 'marginLeft');
  },
  getMarginTop: function (element) {
    return _get__("getDimension")(element, 'margin-top', 'marginTop');
  },
  getMarginRight: function (element) {
    return _get__("getDimension")(element, 'margin-right', 'marginRight');
  },
  getMarginBottom: function (element) {
    return _get__("getDimension")(element, 'margin-bottom', 'marginBottom');
  },
  __commaSentinel: false
};
// ----------------------------------------------------------------------------------------
// Position & Dimension
class Dimension {
  constructor(width, height) {
    this.width = width;
    this.height = height;
  }
  static equals(a, b) {
    if (a === b) {
      return true;
    }
    if (!a || !b) {
      return false;
    }
    return a.width === b.width && a.height === b.height;
  }
}
exports.Dimension = _get__("Dimension");
function getTopLeftOffset(element) {
  // Adapted from WinJS.Utilities.getPosition
  // and added borders to the mix
  let offsetParent = element.offsetParent;
  let top = element.offsetTop;
  let left = element.offsetLeft;
  while ((element = element.parentNode) !== null && element !== document.body && element !== document.documentElement) {
    top -= element.scrollTop;
    const c = _get__("getComputedStyle")(element);
    if (c) {
      left -= c.direction !== 'rtl' ? element.scrollLeft : -element.scrollLeft;
    }
    if (element === offsetParent) {
      left += _get__("sizeUtils").getBorderLeftWidth(element);
      top += _get__("sizeUtils").getBorderTopWidth(element);
      top += element.offsetTop;
      left += element.offsetLeft;
      offsetParent = element.offsetParent;
    }
  }
  return {
    left,
    top
  };
}
exports.getTopLeftOffset = _get__("getTopLeftOffset");
function size(element, width, height) {
  if (typeof width === 'number') {
    element.style.width = `${width}px`;
  }
  if (typeof height === 'number') {
    element.style.height = `${height}px`;
  }
}
exports.size = _get__("size");
function position(element, top, right, bottom, left, position = 'absolute') {
  if (typeof top === 'number') {
    element.style.top = `${top}px`;
  }
  if (typeof right === 'number') {
    element.style.right = `${right}px`;
  }
  if (typeof bottom === 'number') {
    element.style.bottom = `${bottom}px`;
  }
  if (typeof left === 'number') {
    element.style.left = `${left}px`;
  }
  element.style.position = position;
}
exports.position = _get__("position");
/**
 * Returns the position of a dom node relative to the entire page.
 */
function getDomNodePagePosition(domNode) {
  const bb = domNode.getBoundingClientRect();
  return {
    left: bb.left + exports.StandardWindow.scrollX,
    top: bb.top + exports.StandardWindow.scrollY,
    width: bb.width,
    height: bb.height
  };
}
exports.getDomNodePagePosition = _get__("getDomNodePagePosition");
exports.StandardWindow = new class {
  get scrollX() {
    if (typeof window.scrollX === 'number') {
      // modern browsers
      return window.scrollX;
    } else {
      return document.body.scrollLeft + document.documentElement.scrollLeft;
    }
  }
  get scrollY() {
    if (typeof window.scrollY === 'number') {
      // modern browsers
      return window.scrollY;
    } else {
      return document.body.scrollTop + document.documentElement.scrollTop;
    }
  }
}();
// Adapted from WinJS
// Gets the width of the element, including margins.
function getTotalWidth(element) {
  const margin = _get__("sizeUtils").getMarginLeft(element) + _get__("sizeUtils").getMarginRight(element);
  return element.offsetWidth + margin;
}
exports.getTotalWidth = _get__("getTotalWidth");
function getContentWidth(element) {
  const border = _get__("sizeUtils").getBorderLeftWidth(element) + _get__("sizeUtils").getBorderRightWidth(element);
  const padding = _get__("sizeUtils").getPaddingLeft(element) + _get__("sizeUtils").getPaddingRight(element);
  return element.offsetWidth - border - padding;
}
exports.getContentWidth = _get__("getContentWidth");
function getTotalScrollWidth(element) {
  const margin = _get__("sizeUtils").getMarginLeft(element) + _get__("sizeUtils").getMarginRight(element);
  return element.scrollWidth + margin;
}
exports.getTotalScrollWidth = _get__("getTotalScrollWidth");
// Adapted from WinJS
// Gets the height of the content of the specified element. The content height does not include borders or padding.
function getContentHeight(element) {
  const border = _get__("sizeUtils").getBorderTopWidth(element) + _get__("sizeUtils").getBorderBottomWidth(element);
  const padding = _get__("sizeUtils").getPaddingTop(element) + _get__("sizeUtils").getPaddingBottom(element);
  return element.offsetHeight - border - padding;
}
exports.getContentHeight = _get__("getContentHeight");
// Adapted from WinJS
// Gets the height of the element, including its margins.
function getTotalHeight(element) {
  const margin = _get__("sizeUtils").getMarginTop(element) + _get__("sizeUtils").getMarginBottom(element);
  return element.offsetHeight + margin;
}
exports.getTotalHeight = _get__("getTotalHeight");
// Gets the left coordinate of the specified element relative to the specified parent.
function getRelativeLeft(element, parent) {
  if (element === null) {
    return 0;
  }
  const elementPosition = _get__("getTopLeftOffset")(element);
  const parentPosition = _get__("getTopLeftOffset")(parent);
  return elementPosition.left - parentPosition.left;
}
function getLargestChildWidth(parent, children) {
  const childWidths = children.map(child => {
    return Math.max(_get__("getTotalScrollWidth")(child), _get__("getTotalWidth")(child)) + _get__("getRelativeLeft")(child, parent) || 0;
  });
  const maxWidth = Math.max(...childWidths);
  return maxWidth;
}
exports.getLargestChildWidth = _get__("getLargestChildWidth");
// ----------------------------------------------------------------------------------------
function isAncestor(testChild, testAncestor) {
  while (testChild) {
    if (testChild === testAncestor) {
      return true;
    }
    testChild = testChild.parentNode;
  }
  return false;
}
exports.isAncestor = _get__("isAncestor");
function findParentWithClass(node, clazz, stopAtClazzOrNode) {
  while (node) {
    if ((0, exports.hasClass)(node, clazz)) {
      return node;
    }
    if (stopAtClazzOrNode) {
      if (typeof stopAtClazzOrNode === 'string') {
        if ((0, exports.hasClass)(node, stopAtClazzOrNode)) {
          return null;
        }
      } else {
        if (node === stopAtClazzOrNode) {
          return null;
        }
      }
    }
    node = node.parentNode;
  }
  return null;
}
exports.findParentWithClass = _get__("findParentWithClass");
function createStyleSheet(container = document.getElementsByTagName('head')[0]) {
  const style = document.createElement('style');
  style.type = 'text/css';
  style.media = 'screen';
  container.appendChild(style);
  return style;
}
exports.createStyleSheet = _get__("createStyleSheet");
let _sharedStyleSheet = null;
function getSharedStyleSheet() {
  if (!_get__("_sharedStyleSheet")) {
    _assign__("_sharedStyleSheet", _get__("createStyleSheet")());
  }
  return _get__("_sharedStyleSheet");
}
function getDynamicStyleSheetRules(style) {
  if (style && style.sheet && style.sheet.rules) {
    // Chrome, IE
    return style.sheet.rules;
  }
  if (style && style.sheet && style.sheet.cssRules) {
    // FF
    return style.sheet.cssRules;
  }
  return [];
}
function createCSSRule(selector, cssText, style = _get__("getSharedStyleSheet")()) {
  if (!style || !cssText) {
    return;
  }
  style.sheet.insertRule(selector + '{' + cssText + '}', 0);
}
exports.createCSSRule = _get__("createCSSRule");
function removeCSSRulesContainingSelector(ruleName, style = _get__("getSharedStyleSheet")()) {
  if (!style) {
    return;
  }
  const rules = _get__("getDynamicStyleSheetRules")(style);
  const toDelete = [];
  for (let i = 0; i < rules.length; i++) {
    const rule = rules[i];
    if (rule.selectorText.indexOf(ruleName) !== -1) {
      toDelete.push(i);
    }
  }
  for (let i = toDelete.length - 1; i >= 0; i--) {
    style.sheet.deleteRule(toDelete[i]);
  }
}
exports.removeCSSRulesContainingSelector = _get__("removeCSSRulesContainingSelector");
function isHTMLElement(o) {
  if (typeof HTMLElement === 'object') {
    return o instanceof HTMLElement;
  }
  return o && typeof o === 'object' && o.nodeType === 1 && typeof o.nodeName === 'string';
}
exports.isHTMLElement = _get__("isHTMLElement");
exports.EventType = {
  // Mouse
  CLICK: 'click',
  AUXCLICK: 'auxclick',
  DBLCLICK: 'dblclick',
  MOUSE_UP: 'mouseup',
  MOUSE_DOWN: 'mousedown',
  MOUSE_OVER: 'mouseover',
  MOUSE_MOVE: 'mousemove',
  MOUSE_OUT: 'mouseout',
  MOUSE_ENTER: 'mouseenter',
  MOUSE_LEAVE: 'mouseleave',
  MOUSE_WHEEL: 'wheel',
  POINTER_UP: 'pointerup',
  POINTER_DOWN: 'pointerdown',
  POINTER_MOVE: 'pointermove',
  POINTER_LEAVE: 'pointerleave',
  CONTEXT_MENU: 'contextmenu',
  WHEEL: 'wheel',
  // Keyboard
  KEY_DOWN: 'keydown',
  KEY_PRESS: 'keypress',
  KEY_UP: 'keyup',
  // HTML Document
  LOAD: 'load',
  BEFORE_UNLOAD: 'beforeunload',
  UNLOAD: 'unload',
  PAGE_SHOW: 'pageshow',
  PAGE_HIDE: 'pagehide',
  ABORT: 'abort',
  ERROR: 'error',
  RESIZE: 'resize',
  SCROLL: 'scroll',
  FULLSCREEN_CHANGE: 'fullscreenchange',
  WK_FULLSCREEN_CHANGE: 'webkitfullscreenchange',
  // Form
  SELECT: 'select',
  CHANGE: 'change',
  SUBMIT: 'submit',
  RESET: 'reset',
  FOCUS: 'focus',
  FOCUS_IN: 'focusin',
  FOCUS_OUT: 'focusout',
  BLUR: 'blur',
  INPUT: 'input',
  // Local Storage
  STORAGE: 'storage',
  // Drag
  DRAG_START: 'dragstart',
  DRAG: 'drag',
  DRAG_ENTER: 'dragenter',
  DRAG_LEAVE: 'dragleave',
  DRAG_OVER: 'dragover',
  DROP: 'drop',
  DRAG_END: 'dragend',
  // Animation
  ANIMATION_START: _get__("browser").isWebKit ? 'webkitAnimationStart' : 'animationstart',
  ANIMATION_END: _get__("browser").isWebKit ? 'webkitAnimationEnd' : 'animationend',
  ANIMATION_ITERATION: _get__("browser").isWebKit ? 'webkitAnimationIteration' : 'animationiteration'
};
exports.EventHelper = {
  stop: function (e, cancelBubble) {
    if (e.preventDefault) {
      e.preventDefault();
    } else {
      // IE8
      e.returnValue = false;
    }
    if (cancelBubble) {
      if (e.stopPropagation) {
        e.stopPropagation();
      } else {
        // IE8
        e.cancelBubble = true;
      }
    }
  }
};
function saveParentsScrollTop(node) {
  const r = [];
  for (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {
    r[i] = node.scrollTop;
    node = node.parentNode;
  }
  return r;
}
exports.saveParentsScrollTop = _get__("saveParentsScrollTop");
function restoreParentsScrollTop(node, state) {
  for (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {
    if (node.scrollTop !== state[i]) {
      node.scrollTop = state[i];
    }
    node = node.parentNode;
  }
}
exports.restoreParentsScrollTop = _get__("restoreParentsScrollTop");
class FocusTracker {
  constructor(element) {
    this._onDidFocus = new (_get__("event_2").Emitter)();
    this.onDidFocus = this._onDidFocus.event;
    this._onDidBlur = new (_get__("event_2").Emitter)();
    this.onDidBlur = this._onDidBlur.event;
    this.disposables = [];
    let hasFocus = _get__("isAncestor")(document.activeElement, element);
    let loosingFocus = false;
    const onFocus = () => {
      loosingFocus = false;
      if (!hasFocus) {
        hasFocus = true;
        this._onDidFocus.fire();
      }
    };
    const onBlur = () => {
      if (hasFocus) {
        loosingFocus = true;
        window.setTimeout(() => {
          if (loosingFocus) {
            loosingFocus = false;
            hasFocus = false;
            this._onDidBlur.fire();
          }
        }, 0);
      }
    };
    (0, _get__("event_1").domEvent)(element, exports.EventType.FOCUS, true)(onFocus, null, this.disposables);
    (0, _get__("event_1").domEvent)(element, exports.EventType.BLUR, true)(onBlur, null, this.disposables);
  }
  dispose() {
    this.disposables = (0, _get__("lifecycle_1").dispose)(this.disposables);
    this._onDidFocus.dispose();
    this._onDidBlur.dispose();
  }
}
function trackFocus(element) {
  return new (_get__("FocusTracker"))(element);
}
exports.trackFocus = _get__("trackFocus");
function append(parent, ...children) {
  children.forEach(child => parent.appendChild(child));
  return children[children.length - 1];
}
exports.append = _get__("append");
function prepend(parent, child) {
  parent.insertBefore(child, parent.firstChild);
  return child;
}
exports.prepend = _get__("prepend");
const SELECTOR_REGEX = /([\w\\-]+)?(#([\w\\-]+))?((.([\w\\-]+))*)/;
function $(description, attrs, ...children) {
  const match = _get__("SELECTOR_REGEX").exec(description);
  if (!match) {
    throw new Error('Bad use of emmet');
  }
  const result = document.createElement(match[1] || 'div');
  if (match[3]) {
    result.id = match[3];
  }
  if (match[4]) {
    result.className = match[4].replace(/\./g, ' ').trim();
  }
  attrs = attrs || {};
  Object.keys(attrs).forEach(name => {
    const value = attrs[name];
    if (/^on\w+$/.test(name)) {
      result[name] = value;
    } else if (name === 'selected') {
      if (value) {
        result.setAttribute(name, 'true');
      }
    } else {
      result.setAttribute(name, value);
    }
  });
  (0, _get__("arrays_1").coalesce)(children).forEach(child => {
    if (child instanceof Node) {
      result.appendChild(child);
    } else {
      result.appendChild(document.createTextNode(child));
    }
  });
  return result;
}
exports.$ = _get__("$");
function join(nodes, separator) {
  const result = [];
  nodes.forEach((node, index) => {
    if (index > 0) {
      if (separator instanceof Node) {
        result.push(separator.cloneNode());
      } else {
        result.push(document.createTextNode(separator));
      }
    }
    result.push(node);
  });
  return result;
}
exports.join = _get__("join");
function show(...elements) {
  for (const element of elements) {
    if (element) {
      element.style.display = '';
      element.removeAttribute('aria-hidden');
    }
  }
}
exports.show = _get__("show");
function hide(...elements) {
  for (const element of elements) {
    if (element) {
      element.style.display = 'none';
      element.setAttribute('aria-hidden', 'true');
    }
  }
}
exports.hide = _get__("hide");
function findParentWithAttribute(node, attribute) {
  while (node) {
    if (node instanceof HTMLElement && node.hasAttribute(attribute)) {
      return node;
    }
    node = node.parentNode;
  }
  return null;
}
function removeTabIndexAndUpdateFocus(node) {
  if (!node || !node.hasAttribute('tabIndex')) {
    return;
  }
  // If we are the currently focused element and tabIndex is removed,
  // standard DOM behavior is to move focus to the <body> element. We
  // typically never want that, rather put focus to the closest element
  // in the hierarchy of the parent DOM nodes.
  if (document.activeElement === node) {
    const parentFocusable = _get__("findParentWithAttribute")(node.parentElement, 'tabIndex');
    if (parentFocusable) {
      parentFocusable.focus();
    }
  }
  node.removeAttribute('tabindex');
}
exports.removeTabIndexAndUpdateFocus = _get__("removeTabIndexAndUpdateFocus");
function getElementsByTagName(tag) {
  return Array.prototype.slice.call(document.getElementsByTagName(tag), 0);
}
exports.getElementsByTagName = _get__("getElementsByTagName");
function finalHandler(fn) {
  return e => {
    e.preventDefault();
    e.stopPropagation();
    fn(e);
  };
}
exports.finalHandler = _get__("finalHandler");
function domContentLoaded() {
  return new Promise(resolve => {
    const readyState = document.readyState;
    if (readyState === 'complete' || document && document.body !== null) {
      _get__("platform").setImmediate(resolve);
    } else {
      window.addEventListener('DOMContentLoaded', resolve, false);
    }
  });
}
exports.domContentLoaded = _get__("domContentLoaded");
/**
 * Find a value usable for a dom node size such that the likelihood that it would be
 * displayed with constant screen pixels size is as high as possible.
 *
 * e.g. We would desire for the cursors to be 2px (CSS px) wide. Under a devicePixelRatio
 * of 1.25, the cursor will be 2.5 screen pixels wide. Depending on how the dom node aligns/"snaps"
 * with the screen pixels, it will sometimes be rendered with 2 screen pixels, and sometimes with 3 screen pixels.
 */
function computeScreenAwareSize(cssPx) {
  const screenPx = window.devicePixelRatio * cssPx;
  return Math.max(1, Math.floor(screenPx)) / window.devicePixelRatio;
}
exports.computeScreenAwareSize = _get__("computeScreenAwareSize");
/**
 * See https://github.com/Microsoft/monaco-editor/issues/601
 * To protect against malicious code in the linked site, particularly phishing attempts,
 * the window.opener should be set to null to prevent the linked site from having access
 * to change the location of the current page.
 * See https://mathiasbynens.github.io/rel-noopener/
 */
function windowOpenNoOpener(url) {
  if (_get__("platform").isNative || _get__("browser").isEdgeWebView) {
    // In VSCode, window.open() always returns null...
    // The same is true for a WebView (see https://github.com/Microsoft/monaco-editor/issues/628)
    window.open(url);
  } else {
    const newTab = window.open();
    if (newTab) {
      newTab.opener = null;
      newTab.location.href = url;
    }
  }
}
exports.windowOpenNoOpener = _get__("windowOpenNoOpener");
function animate(fn) {
  const step = () => {
    fn();
    stepDisposable = (0, exports.scheduleAtNextAnimationFrame)(step);
  };
  let stepDisposable = (0, exports.scheduleAtNextAnimationFrame)(step);
  return (0, _get__("lifecycle_1").toDisposable)(() => stepDisposable.dispose());
}
exports.animate = _get__("animate");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "__createBinding":
      return __createBinding;
    case "__setModuleDefault":
      return __setModuleDefault;
    case "__importStar":
      return __importStar;
    case "clearNode":
      return clearNode;
    case "removeNode":
      return removeNode;
    case "isInDOM":
      return isInDOM;
    case "addDisposableListener":
      return addDisposableListener;
    case "keyboardEvent_1":
      return keyboardEvent_1;
    case "ModifierKeyEmitter":
      return ModifierKeyEmitter;
    case "event_2":
      return event_2;
    case "browser":
      return browser;
    case "_manualClassList":
      return _manualClassList;
    case "_nativeClassList":
      return _nativeClassList;
    case "_classList":
      return _classList;
    case "DomListener":
      return DomListener;
    case "mouseEvent_1":
      return mouseEvent_1;
    case "_wrapAsStandardMouseEvent":
      return _wrapAsStandardMouseEvent;
    case "_wrapAsStandardKeyboardEvent":
      return _wrapAsStandardKeyboardEvent;
    case "addStandardDisposableListener":
      return addStandardDisposableListener;
    case "addDisposableNonBubblingMouseOutListener":
      return addDisposableNonBubblingMouseOutListener;
    case "_animationFrame":
      return _animationFrame;
    case "AnimationFrameQueueItem":
      return AnimationFrameQueueItem;
    case "doRequestAnimationFrame":
      return doRequestAnimationFrame;
    case "measure":
      return measure;
    case "modify":
      return modify;
    case "DEFAULT_EVENT_MERGER":
      return DEFAULT_EVENT_MERGER;
    case "MINIMUM_TIME_MS":
      return MINIMUM_TIME_MS;
    case "async_1":
      return async_1;
    case "lifecycle_1":
      return lifecycle_1;
    case "TimeoutThrottledDomListener":
      return TimeoutThrottledDomListener;
    case "addDisposableThrottledListener":
      return addDisposableThrottledListener;
    case "getComputedStyle":
      return getComputedStyle;
    case "convertToPixels":
      return convertToPixels;
    case "Dimension":
      return Dimension;
    case "getClientArea":
      return getClientArea;
    case "getDomNodeZoomLevel":
      return getDomNodeZoomLevel;
    case "getDimension":
      return getDimension;
    case "sizeUtils":
      return sizeUtils;
    case "getTopLeftOffset":
      return getTopLeftOffset;
    case "size":
      return size;
    case "position":
      return position;
    case "getDomNodePagePosition":
      return getDomNodePagePosition;
    case "getTotalWidth":
      return getTotalWidth;
    case "getContentWidth":
      return getContentWidth;
    case "getTotalScrollWidth":
      return getTotalScrollWidth;
    case "getContentHeight":
      return getContentHeight;
    case "getTotalHeight":
      return getTotalHeight;
    case "getRelativeLeft":
      return getRelativeLeft;
    case "getLargestChildWidth":
      return getLargestChildWidth;
    case "isAncestor":
      return isAncestor;
    case "findParentWithClass":
      return findParentWithClass;
    case "createStyleSheet":
      return createStyleSheet;
    case "_sharedStyleSheet":
      return _sharedStyleSheet;
    case "getSharedStyleSheet":
      return getSharedStyleSheet;
    case "createCSSRule":
      return createCSSRule;
    case "getDynamicStyleSheetRules":
      return getDynamicStyleSheetRules;
    case "removeCSSRulesContainingSelector":
      return removeCSSRulesContainingSelector;
    case "isHTMLElement":
      return isHTMLElement;
    case "saveParentsScrollTop":
      return saveParentsScrollTop;
    case "restoreParentsScrollTop":
      return restoreParentsScrollTop;
    case "event_1":
      return event_1;
    case "FocusTracker":
      return FocusTracker;
    case "trackFocus":
      return trackFocus;
    case "append":
      return append;
    case "prepend":
      return prepend;
    case "SELECTOR_REGEX":
      return SELECTOR_REGEX;
    case "arrays_1":
      return arrays_1;
    case "$":
      return $;
    case "join":
      return join;
    case "show":
      return show;
    case "hide":
      return hide;
    case "findParentWithAttribute":
      return findParentWithAttribute;
    case "removeTabIndexAndUpdateFocus":
      return removeTabIndexAndUpdateFocus;
    case "getElementsByTagName":
      return getElementsByTagName;
    case "finalHandler":
      return finalHandler;
    case "platform":
      return platform;
    case "domContentLoaded":
      return domContentLoaded;
    case "computeScreenAwareSize":
      return computeScreenAwareSize;
    case "windowOpenNoOpener":
      return windowOpenNoOpener;
    case "animate":
      return animate;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {
    case "_animationFrame":
      return _animationFrame = _value;
    case "_sharedStyleSheet":
      return _sharedStyleSheet = _value;
  }
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/common/event.js":
/*!********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/common/event.js ***!
  \********************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Relay = exports.EventBufferer = exports.AsyncEmitter = exports.Emitter = exports.setGlobalLeakWarningThreshold = exports.Event = void 0;
const lifecycle_1 = __webpack_require__(/*! ../common/lifecycle */ "./node_modules/custom-electron-titlebar/base/common/lifecycle.js");
const linkedList_1 = __webpack_require__(/*! ../common/linkedList */ "./node_modules/custom-electron-titlebar/base/common/linkedList.js");
var Event;
(function (Event) {
  const _disposable = {
    dispose() {}
  };
  Event.None = function () {
    return _disposable;
  };
  /**
   * Given an event, returns another event which only fires once.
   */
  function once(event) {
    return (listener, thisArgs = null, disposables) => {
      // we need this, in case the event fires during the listener call
      let didFire = false;
      const result = event(e => {
        if (didFire) {
          return;
        } else if (result) {
          result.dispose();
        } else {
          didFire = true;
        }
        return listener.call(thisArgs, e);
      }, null, disposables);
      if (didFire) {
        result.dispose();
      }
      return result;
    };
  }
  Event.once = once;
  /**
   * Given an event and a `map` function, returns another event which maps each element
   * throught the mapping function.
   */
  function map(event, map) {
    return (listener, thisArgs = null, disposables) => event(i => listener.call(thisArgs, map(i)), null, disposables);
  }
  Event.map = map;
  /**
   * Given an event and an `each` function, returns another identical event and calls
   * the `each` function per each element.
   */
  function forEach(event, each) {
    return (listener, thisArgs = null, disposables) => event(i => {
      each(i);
      listener.call(thisArgs, i);
    }, null, disposables);
  }
  Event.forEach = forEach;
  function filter(event, filter) {
    return (listener, thisArgs = null, disposables) => event(e => filter(e) && listener.call(thisArgs, e), null, disposables);
  }
  Event.filter = filter;
  /**
   * Given an event, returns the same event but typed as `Event<void>`.
   */
  function signal(event) {
    return event;
  }
  Event.signal = signal;
  /**
   * Given a collection of events, returns a single event which emits
   * whenever any of the provided events emit.
   */
  function any(...events) {
    return (listener, thisArgs = null, disposables) => (0, _get__("lifecycle_1").combinedDisposable)(events.map(event => event(e => listener.call(thisArgs, e), null, disposables)));
  }
  Event.any = any;
  /**
   * Given an event and a `merge` function, returns another event which maps each element
   * and the cummulative result throught the `merge` function. Similar to `map`, but with memory.
   */
  function reduce(event, merge, initial) {
    let output = initial;
    return map(event, e => {
      output = merge(output, e);
      return output;
    });
  }
  Event.reduce = reduce;
  function debounce(event, merge, delay = 100, leading = false, leakWarningThreshold) {
    let subscription;
    let output;
    let handle;
    let numDebouncedCalls = 0;
    const emitter = new (_get__("Emitter"))({
      leakWarningThreshold,
      onFirstListenerAdd() {
        subscription = event(cur => {
          numDebouncedCalls++;
          output = merge(output, cur);
          if (leading && !handle) {
            emitter.fire(output);
          }
          clearTimeout(handle);
          handle = setTimeout(() => {
            const _output = output;
            output = undefined;
            handle = undefined;
            if (!leading || numDebouncedCalls > 1) {
              emitter.fire(_output);
            }
            numDebouncedCalls = 0;
          }, delay);
        });
      },
      onLastListenerRemove() {
        subscription.dispose();
      }
    });
    return emitter.event;
  }
  Event.debounce = debounce;
  /**
   * Given an event, it returns another event which fires only once and as soon as
   * the input event emits. The event data is the number of millis it took for the
   * event to fire.
   */
  function stopwatch(event) {
    const start = new Date().getTime();
    return map(once(event), _ => new Date().getTime() - start);
  }
  Event.stopwatch = stopwatch;
  /**
   * Given an event, it returns another event which fires only when the event
   * element changes.
   */
  function latch(event) {
    let firstCall = true;
    let cache;
    return filter(event, value => {
      const shouldEmit = firstCall || value !== cache;
      firstCall = false;
      cache = value;
      return shouldEmit;
    });
  }
  Event.latch = latch;
  /**
   * Buffers the provided event until a first listener comes
   * along, at which point fire all the events at once and
   * pipe the event from then on.
   *
   * ```typescript
   * const emitter = new Emitter<number>();
   * const event = emitter.event;
   * const bufferedEvent = buffer(event);
   *
   * emitter.fire(1);
   * emitter.fire(2);
   * emitter.fire(3);
   * // nothing...
   *
   * const listener = bufferedEvent(num => console.log(num));
   * // 1, 2, 3
   *
   * emitter.fire(4);
   * // 4
   * ```
   */
  function buffer(event, nextTick = false, _buffer = []) {
    let buffer = _buffer.slice();
    let listener = event(e => {
      if (buffer) {
        buffer.push(e);
      } else {
        emitter.fire(e);
      }
    });
    const flush = () => {
      if (buffer) {
        buffer.forEach(e => emitter.fire(e));
      }
      buffer = null;
    };
    const emitter = new (_get__("Emitter"))({
      onFirstListenerAdd() {
        if (!listener) {
          listener = event(e => emitter.fire(e));
        }
      },
      onFirstListenerDidAdd() {
        if (buffer) {
          if (nextTick) {
            setTimeout(flush);
          } else {
            flush();
          }
        }
      },
      onLastListenerRemove() {
        if (listener) {
          listener.dispose();
        }
        listener = null;
      }
    });
    return emitter.event;
  }
  Event.buffer = buffer;
  /**
   * Similar to `buffer` but it buffers indefinitely and repeats
   * the buffered events to every new listener.
   */
  function echo(event, nextTick = false, buffer = []) {
    buffer = buffer.slice();
    event(e => {
      buffer.push(e);
      emitter.fire(e);
    });
    const flush = (listener, thisArgs) => buffer.forEach(e => listener.call(thisArgs, e));
    const emitter = new (_get__("Emitter"))({
      onListenerDidAdd(emitter, listener, thisArgs) {
        if (nextTick) {
          setTimeout(() => flush(listener, thisArgs));
        } else {
          flush(listener, thisArgs);
        }
      }
    });
    return emitter.event;
  }
  Event.echo = echo;
  class ChainableEvent {
    get event() {
      return this._event;
    }
    constructor(_event) {
      this._event = _event;
    }
    map(fn) {
      return new ChainableEvent(map(this._event, fn));
    }
    forEach(fn) {
      return new ChainableEvent(forEach(this._event, fn));
    }
    filter(fn) {
      return new ChainableEvent(filter(this._event, fn));
    }
    reduce(merge, initial) {
      return new ChainableEvent(reduce(this._event, merge, initial));
    }
    latch() {
      return new ChainableEvent(latch(this._event));
    }
    on(listener, thisArgs, disposables) {
      return this._event(listener, thisArgs, disposables);
    }
    once(listener, thisArgs, disposables) {
      return once(this._event)(listener, thisArgs, disposables);
    }
  }
  function chain(event) {
    return new ChainableEvent(event);
  }
  Event.chain = chain;
  function fromNodeEventEmitter(emitter, eventName, map = id => id) {
    const fn = (...args) => result.fire(map(...args));
    const onFirstListenerAdd = () => emitter.on(eventName, fn);
    const onLastListenerRemove = () => emitter.removeListener(eventName, fn);
    const result = new (_get__("Emitter"))({
      onFirstListenerAdd,
      onLastListenerRemove
    });
    return result.event;
  }
  Event.fromNodeEventEmitter = fromNodeEventEmitter;
  function fromPromise(promise) {
    const emitter = new (_get__("Emitter"))();
    let shouldEmit = false;
    promise.then(undefined, () => null).then(() => {
      if (!shouldEmit) {
        setTimeout(() => emitter.fire(undefined), 0);
      } else {
        emitter.fire(undefined);
      }
    });
    shouldEmit = true;
    return emitter.event;
  }
  Event.fromPromise = fromPromise;
  function toPromise(event) {
    // eslint-disable-next-line promise/param-names
    return new Promise(c => once(event)(c));
  }
  Event.toPromise = toPromise;
})(_get__("Event") || (exports.Event = _assign__("Event", {})));
let _globalLeakWarningThreshold = -1;
function setGlobalLeakWarningThreshold(n) {
  const oldValue = _get__("_globalLeakWarningThreshold");
  _assign__("_globalLeakWarningThreshold", n);
  return {
    dispose() {
      _assign__("_globalLeakWarningThreshold", oldValue);
    }
  };
}
exports.setGlobalLeakWarningThreshold = _get__("setGlobalLeakWarningThreshold");
class LeakageMonitor {
  constructor(customThreshold, name = Math.random().toString(18).slice(2, 5)) {
    this.customThreshold = customThreshold;
    this.name = name;
    this._warnCountdown = 0;
  }
  dispose() {
    if (this._stacks) {
      this._stacks.clear();
    }
  }
  check(listenerCount) {
    let threshold = _get__("_globalLeakWarningThreshold");
    if (typeof this.customThreshold === 'number') {
      threshold = this.customThreshold;
    }
    if (threshold <= 0 || listenerCount < threshold) {
      return undefined;
    }
    if (!this._stacks) {
      this._stacks = new Map();
    }
    const stack = new Error().stack.split('\n').slice(3).join('\n');
    const count = this._stacks.get(stack) || 0;
    this._stacks.set(stack, count + 1);
    this._warnCountdown -= 1;
    if (this._warnCountdown <= 0) {
      // only warn on first exceed and then every time the limit
      // is exceeded by 50% again
      this._warnCountdown = threshold * 0.5;
      // find most frequent listener and print warning
      let topStack;
      let topCount = 0;
      this._stacks.forEach((count, stack) => {
        if (!topStack || topCount < count) {
          topStack = stack;
          topCount = count;
        }
      });
      console.warn(`[${this.name}] potential listener LEAK detected, having ${listenerCount} listeners already. MOST frequent listener (${topCount}):`);
      console.warn(topStack);
    }
    return () => {
      const count = this._stacks.get(stack) || 0;
      this._stacks.set(stack, count - 1);
    };
  }
}
/**
 * The Emitter can be used to expose an Event to the public
 * to fire it from the insides.
 * Sample:
    class Document {

        private _onDidChange = new Emitter<(value:string)=>any>();

        public onDidChange = this._onDidChange.event;

        // getter-style
        // get onDidChange(): Event<(value:string)=>any> {
        // 	return this._onDidChange.event;
        // }

        private _doIt() {
            //...
            this._onDidChange.fire(value);
        }
    }
 */
class Emitter {
  constructor(options) {
    this._disposed = false;
    this._options = options;
    this._leakageMon = _get__("_globalLeakWarningThreshold") > 0 ? new (_get__("LeakageMonitor"))(this._options && this._options.leakWarningThreshold) : undefined;
  }
  /**
   * For the public to allow to subscribe
   * to events from this Emitter
   */
  get event() {
    if (!this._event) {
      this._event = (listener, thisArgs, disposables) => {
        if (!this._listeners) {
          this._listeners = new (_get__("linkedList_1").LinkedList)();
        }
        const firstListener = this._listeners.isEmpty();
        if (firstListener && this._options && this._options.onFirstListenerAdd) {
          this._options.onFirstListenerAdd(this);
        }
        const remove = this._listeners.push(!thisArgs ? listener : [listener, thisArgs]);
        if (firstListener && this._options && this._options.onFirstListenerDidAdd) {
          this._options.onFirstListenerDidAdd(this);
        }
        if (this._options && this._options.onListenerDidAdd) {
          this._options.onListenerDidAdd(this, listener, thisArgs);
        }
        // check and record this emitter for potential leakage
        let removeMonitor;
        if (this._leakageMon) {
          removeMonitor = this._leakageMon.check(this._listeners.size);
        }
        const result = {
          dispose: () => {
            if (removeMonitor) {
              removeMonitor();
            }
            result.dispose = _get__("Emitter")._noop;
            if (!this._disposed) {
              remove();
              if (this._options && this._options.onLastListenerRemove) {
                const hasListeners = this._listeners && !this._listeners.isEmpty();
                if (!hasListeners) {
                  this._options.onLastListenerRemove(this);
                }
              }
            }
          }
        };
        if (Array.isArray(disposables)) {
          disposables.push(result);
        }
        return result;
      };
    }
    return this._event;
  }
  /**
   * To be kept private to fire an event to
   * subscribers
   */
  fire(event) {
    if (this._listeners) {
      // put all [listener,event]-pairs into delivery queue
      // then emit all event. an inner/nested event might be
      // the driver of this
      if (!this._deliveryQueue) {
        this._deliveryQueue = [];
      }
      for (let iter = this._listeners.iterator(), e = iter.next(); !e.done; e = iter.next()) {
        this._deliveryQueue.push([e.value, event]);
      }
      while (this._deliveryQueue.length > 0) {
        const [listener, event] = this._deliveryQueue.shift();
        try {
          if (typeof listener === 'function') {
            // eslint-disable-next-line no-useless-call
            listener.call(undefined, event);
          } else {
            listener[0].call(listener[1], event);
          }
        } catch (e) {
          console.error(e);
        }
      }
    }
  }
  dispose() {
    if (this._listeners) {
      this._listeners = undefined;
    }
    if (this._deliveryQueue) {
      this._deliveryQueue.length = 0;
    }
    if (this._leakageMon) {
      this._leakageMon.dispose();
    }
    this._disposed = true;
  }
}
exports.Emitter = _get__("Emitter");
_get__("Emitter")._noop = function () {};
class AsyncEmitter extends _get__("Emitter") {
  async fireAsync(eventFn) {
    if (!this._listeners) {
      return;
    }
    // put all [listener,event]-pairs into delivery queue
    // then emit all event. an inner/nested event might be
    // the driver of this
    if (!this._asyncDeliveryQueue) {
      this._asyncDeliveryQueue = [];
    }
    for (let iter = this._listeners.iterator(), e = iter.next(); !e.done; e = iter.next()) {
      const thenables = [];
      this._asyncDeliveryQueue.push([e.value, eventFn(thenables, typeof e.value === 'function' ? e.value : e.value[0]), thenables]);
    }
    while (this._asyncDeliveryQueue.length > 0) {
      const [listener, event, thenables] = this._asyncDeliveryQueue.shift();
      try {
        if (typeof listener === 'function') {
          // eslint-disable-next-line no-useless-call
          listener.call(undefined, event);
        } else {
          listener[0].call(listener[1], event);
        }
      } catch (e) {
        console.error(e);
        continue;
      }
      // freeze thenables-collection to enforce sync-calls to
      // wait until and then wait for all thenables to resolve
      Object.freeze(thenables);
      await Promise.all(thenables);
    }
  }
}
exports.AsyncEmitter = _get__("AsyncEmitter");
/**
 * The EventBufferer is useful in situations in which you want
 * to delay firing your events during some code.
 * You can wrap that code and be sure that the event will not
 * be fired during that wrap.
 *
 * ```
 * const emitter: Emitter;
 * const delayer = new EventDelayer();
 * const delayedEvent = delayer.wrapEvent(emitter.event);
 *
 * delayedEvent(console.log);
 *
 * delayer.bufferEvents(() => {
 *   emitter.fire(); // event will not be fired yet
 * });
 *
 * // event will only be fired at this point
 * ```
 */
class EventBufferer {
  constructor() {
    this.buffers = [];
  }
  wrapEvent(event) {
    return (listener, thisArgs, disposables) => {
      return event(i => {
        const buffer = this.buffers[this.buffers.length - 1];
        if (buffer) {
          buffer.push(() => listener.call(thisArgs, i));
        } else {
          listener.call(thisArgs, i);
        }
      }, undefined, disposables);
    };
  }
  bufferEvents(fn) {
    const buffer = [];
    this.buffers.push(buffer);
    const r = fn();
    this.buffers.pop();
    buffer.forEach(flush => flush());
    return r;
  }
}
exports.EventBufferer = _get__("EventBufferer");
/**
 * A Relay is an event forwarder which functions as a replugabble event pipe.
 * Once created, you can connect an input event to it and it will simply forward
 * events from that input event through its own `event` property. The `input`
 * can be changed at any point in time.
 */
class Relay {
  constructor() {
    this.listening = false;
    this.inputEvent = _get__("Event").None;
    this.inputEventListener = _get__("lifecycle_1").Disposable.None;
    this.emitter = new (_get__("Emitter"))({
      onFirstListenerDidAdd: () => {
        this.listening = true;
        this.inputEventListener = this.inputEvent(this.emitter.fire, this.emitter);
      },
      onLastListenerRemove: () => {
        this.listening = false;
        this.inputEventListener.dispose();
      }
    });
    this.event = this.emitter.event;
  }
  // eslint-disable-next-line accessor-pairs
  set input(event) {
    this.inputEvent = event;
    if (this.listening) {
      this.inputEventListener.dispose();
      this.inputEventListener = event(this.emitter.fire, this.emitter);
    }
  }
  dispose() {
    this.inputEventListener.dispose();
    this.emitter.dispose();
  }
}
exports.Relay = _get__("Relay");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "lifecycle_1":
      return lifecycle_1;
    case "Emitter":
      return Emitter;
    case "Event":
      return Event;
    case "_globalLeakWarningThreshold":
      return _globalLeakWarningThreshold;
    case "setGlobalLeakWarningThreshold":
      return setGlobalLeakWarningThreshold;
    case "LeakageMonitor":
      return LeakageMonitor;
    case "linkedList_1":
      return linkedList_1;
    case "AsyncEmitter":
      return AsyncEmitter;
    case "EventBufferer":
      return EventBufferer;
    case "Relay":
      return Relay;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {
    case "Event":
      return Event = _value;
    case "_globalLeakWarningThreshold":
      return _globalLeakWarningThreshold = _value;
  }
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/common/iterator.js":
/*!***********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/common/iterator.js ***!
  \***********************************************************************/
/***/ ((module, exports) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MappedNavigator = exports.MappedIterator = exports.ArrayNavigator = exports.ArrayIterator = exports.getSequenceIterator = exports.Iterator = exports.FIN = void 0;
exports.FIN = {
  done: true,
  value: undefined
};
var Iterator;
(function (Iterator) {
  const _empty = {
    next() {
      return exports.FIN;
    }
  };
  function empty() {
    return _empty;
  }
  Iterator.empty = empty;
  function fromArray(array, index = 0, length = array.length) {
    return {
      next() {
        if (index >= length) {
          return exports.FIN;
        }
        return {
          done: false,
          value: array[index++]
        };
      }
    };
  }
  Iterator.fromArray = fromArray;
  function from(elements) {
    if (!elements) {
      return Iterator.empty();
    } else if (Array.isArray(elements)) {
      return Iterator.fromArray(elements);
    } else {
      return elements;
    }
  }
  Iterator.from = from;
  function map(iterator, fn) {
    return {
      next() {
        const element = iterator.next();
        if (element.done) {
          return exports.FIN;
        } else {
          return {
            done: false,
            value: fn(element.value)
          };
        }
      }
    };
  }
  Iterator.map = map;
  function filter(iterator, fn) {
    return {
      next() {
        while (true) {
          const element = iterator.next();
          if (element.done) {
            return exports.FIN;
          }
          if (fn(element.value)) {
            return {
              done: false,
              value: element.value
            };
          }
        }
      }
    };
  }
  Iterator.filter = filter;
  function forEach(iterator, fn) {
    for (let next = iterator.next(); !next.done; next = iterator.next()) {
      fn(next.value);
    }
  }
  Iterator.forEach = forEach;
  function collect(iterator) {
    const result = [];
    forEach(iterator, value => result.push(value));
    return result;
  }
  Iterator.collect = collect;
})(_get__("Iterator") || (exports.Iterator = _assign__("Iterator", {})));
function getSequenceIterator(arg) {
  if (Array.isArray(arg)) {
    return _get__("Iterator").fromArray(arg);
  } else {
    return arg;
  }
}
exports.getSequenceIterator = _get__("getSequenceIterator");
class ArrayIterator {
  constructor(items, start = 0, end = items.length, index = start - 1) {
    this.items = items;
    this.start = start;
    this.end = end;
    this.index = index;
  }
  first() {
    this.index = this.start;
    return this.current();
  }
  next() {
    this.index = Math.min(this.index + 1, this.end);
    return this.current();
  }
  current() {
    if (this.index === this.start - 1 || this.index === this.end) {
      return null;
    }
    return this.items[this.index];
  }
}
exports.ArrayIterator = _get__("ArrayIterator");
class ArrayNavigator extends _get__("ArrayIterator") {
  constructor(items, start = 0, end = items.length, index = start - 1) {
    super(items, start, end, index);
  }
  current() {
    return super.current();
  }
  previous() {
    this.index = Math.max(this.index - 1, this.start - 1);
    return this.current();
  }
  first() {
    this.index = this.start;
    return this.current();
  }
  last() {
    this.index = this.end - 1;
    return this.current();
  }
  parent() {
    return null;
  }
}
exports.ArrayNavigator = _get__("ArrayNavigator");
class MappedIterator {
  constructor(iterator, fn) {
    this.iterator = iterator;
    this.fn = fn;
    // noop
  }

  next() {
    return this.fn(this.iterator.next());
  }
}
exports.MappedIterator = _get__("MappedIterator");
class MappedNavigator extends _get__("MappedIterator") {
  constructor(navigator, fn) {
    super(navigator, fn);
    this.navigator = navigator;
  }
  current() {
    return this.fn(this.navigator.current());
  }
  previous() {
    return this.fn(this.navigator.previous());
  }
  parent() {
    return this.fn(this.navigator.parent());
  }
  first() {
    return this.fn(this.navigator.first());
  }
  last() {
    return this.fn(this.navigator.last());
  }
  next() {
    return this.fn(this.navigator.next());
  }
}
exports.MappedNavigator = _get__("MappedNavigator");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "Iterator":
      return Iterator;
    case "getSequenceIterator":
      return getSequenceIterator;
    case "ArrayIterator":
      return ArrayIterator;
    case "ArrayNavigator":
      return ArrayNavigator;
    case "MappedIterator":
      return MappedIterator;
    case "MappedNavigator":
      return MappedNavigator;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {
    case "Iterator":
      return Iterator = _value;
  }
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/common/keyCodes.js":
/*!***********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/common/keyCodes.js ***!
  \***********************************************************************/
/***/ ((module, exports) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ResolvedKeybinding = exports.ResolvedKeybindingPart = exports.createSimpleKeybinding = exports.createKeybinding = exports.ChordKeybinding = exports.SimpleKeybinding = exports.KeyChord = exports.KeyCodeUtils = exports.ScanCodeUtils = void 0;
class KeyCodeStrMap {
  constructor() {
    this._keyCodeToStr = [];
    this._strToKeyCode = Object.create(null);
  }
  define(keyCode, str) {
    this._keyCodeToStr[keyCode] = str;
    this._strToKeyCode[str.toLowerCase()] = keyCode;
  }
  keyCodeToStr(keyCode) {
    return this._keyCodeToStr[keyCode];
  }
  strToKeyCode(str) {
    return this._strToKeyCode[str.toLowerCase()] || 0 /* KeyCode.Unknown */;
  }
}

const scanCodeIntToStr = [];
const scanCodeStrToInt = Object.create(null);
const scanCodeLowerCaseStrToInt = Object.create(null);
exports.ScanCodeUtils = {
  lowerCaseToEnum: scanCode => _get__("scanCodeLowerCaseStrToInt")[scanCode] || 0 /* ScanCode.None */,
  toEnum: scanCode => _get__("scanCodeStrToInt")[scanCode] || 0 /* ScanCode.None */,
  toString: scanCode => _get__("scanCodeIntToStr")[scanCode] || 'None'
};
const uiMap = new (_get__("KeyCodeStrMap"))();
const userSettingsUSMap = new (_get__("KeyCodeStrMap"))();
const userSettingsGeneralMap = new (_get__("KeyCodeStrMap"))();
(function () {
  function define(keyCode, uiLabel, usUserSettingsLabel = uiLabel, generalUserSettingsLabel = usUserSettingsLabel) {
    _get__("uiMap").define(keyCode, uiLabel);
    _get__("userSettingsUSMap").define(keyCode, usUserSettingsLabel);
    _get__("userSettingsGeneralMap").define(keyCode, generalUserSettingsLabel);
  }
  define(0 /* KeyCode.Unknown */, 'unknown');
  define(1 /* KeyCode.Backspace */, 'Backspace');
  define(2 /* KeyCode.Tab */, 'Tab');
  define(3 /* KeyCode.Enter */, 'Enter');
  define(4 /* KeyCode.Shift */, 'Shift');
  define(5 /* KeyCode.Ctrl */, 'Ctrl');
  define(6 /* KeyCode.Alt */, 'Alt');
  define(7 /* KeyCode.PauseBreak */, 'PauseBreak');
  define(8 /* KeyCode.CapsLock */, 'CapsLock');
  define(9 /* KeyCode.Escape */, 'Escape');
  define(10 /* KeyCode.Space */, 'Space');
  define(11 /* KeyCode.PageUp */, 'PageUp');
  define(12 /* KeyCode.PageDown */, 'PageDown');
  define(13 /* KeyCode.End */, 'End');
  define(14 /* KeyCode.Home */, 'Home');
  define(15 /* KeyCode.LeftArrow */, 'LeftArrow', 'Left');
  define(16 /* KeyCode.UpArrow */, 'UpArrow', 'Up');
  define(17 /* KeyCode.RightArrow */, 'RightArrow', 'Right');
  define(18 /* KeyCode.DownArrow */, 'DownArrow', 'Down');
  define(19 /* KeyCode.Insert */, 'Insert');
  define(20 /* KeyCode.Delete */, 'Delete');
  define(21 /* KeyCode.KEY_0 */, '0');
  define(22 /* KeyCode.KEY_1 */, '1');
  define(23 /* KeyCode.KEY_2 */, '2');
  define(24 /* KeyCode.KEY_3 */, '3');
  define(25 /* KeyCode.KEY_4 */, '4');
  define(26 /* KeyCode.KEY_5 */, '5');
  define(27 /* KeyCode.KEY_6 */, '6');
  define(28 /* KeyCode.KEY_7 */, '7');
  define(29 /* KeyCode.KEY_8 */, '8');
  define(30 /* KeyCode.KEY_9 */, '9');
  define(31 /* KeyCode.KEY_A */, 'A');
  define(32 /* KeyCode.KEY_B */, 'B');
  define(33 /* KeyCode.KEY_C */, 'C');
  define(34 /* KeyCode.KEY_D */, 'D');
  define(35 /* KeyCode.KEY_E */, 'E');
  define(36 /* KeyCode.KEY_F */, 'F');
  define(37 /* KeyCode.KEY_G */, 'G');
  define(38 /* KeyCode.KEY_H */, 'H');
  define(39 /* KeyCode.KEY_I */, 'I');
  define(40 /* KeyCode.KEY_J */, 'J');
  define(41 /* KeyCode.KEY_K */, 'K');
  define(42 /* KeyCode.KEY_L */, 'L');
  define(43 /* KeyCode.KEY_M */, 'M');
  define(44 /* KeyCode.KEY_N */, 'N');
  define(45 /* KeyCode.KEY_O */, 'O');
  define(46 /* KeyCode.KEY_P */, 'P');
  define(47 /* KeyCode.KEY_Q */, 'Q');
  define(48 /* KeyCode.KEY_R */, 'R');
  define(49 /* KeyCode.KEY_S */, 'S');
  define(50 /* KeyCode.KEY_T */, 'T');
  define(51 /* KeyCode.KEY_U */, 'U');
  define(52 /* KeyCode.KEY_V */, 'V');
  define(53 /* KeyCode.KEY_W */, 'W');
  define(54 /* KeyCode.KEY_X */, 'X');
  define(55 /* KeyCode.KEY_Y */, 'Y');
  define(56 /* KeyCode.KEY_Z */, 'Z');
  define(57 /* KeyCode.Meta */, 'Meta');
  define(58 /* KeyCode.ContextMenu */, 'ContextMenu');
  define(59 /* KeyCode.F1 */, 'F1');
  define(60 /* KeyCode.F2 */, 'F2');
  define(61 /* KeyCode.F3 */, 'F3');
  define(62 /* KeyCode.F4 */, 'F4');
  define(63 /* KeyCode.F5 */, 'F5');
  define(64 /* KeyCode.F6 */, 'F6');
  define(65 /* KeyCode.F7 */, 'F7');
  define(66 /* KeyCode.F8 */, 'F8');
  define(67 /* KeyCode.F9 */, 'F9');
  define(68 /* KeyCode.F10 */, 'F10');
  define(69 /* KeyCode.F11 */, 'F11');
  define(70 /* KeyCode.F12 */, 'F12');
  define(71 /* KeyCode.F13 */, 'F13');
  define(72 /* KeyCode.F14 */, 'F14');
  define(73 /* KeyCode.F15 */, 'F15');
  define(74 /* KeyCode.F16 */, 'F16');
  define(75 /* KeyCode.F17 */, 'F17');
  define(76 /* KeyCode.F18 */, 'F18');
  define(77 /* KeyCode.F19 */, 'F19');
  define(78 /* KeyCode.NumLock */, 'NumLock');
  define(79 /* KeyCode.ScrollLock */, 'ScrollLock');
  define(80 /* KeyCode.US_SEMICOLON */, ';', ';', 'OEM_1');
  define(81 /* KeyCode.US_EQUAL */, '=', '=', 'OEM_PLUS');
  define(82 /* KeyCode.US_COMMA */, ',', ',', 'OEM_COMMA');
  define(83 /* KeyCode.US_MINUS */, '-', '-', 'OEM_MINUS');
  define(84 /* KeyCode.US_DOT */, '.', '.', 'OEM_PERIOD');
  define(85 /* KeyCode.US_SLASH */, '/', '/', 'OEM_2');
  define(86 /* KeyCode.US_BACKTICK */, '`', '`', 'OEM_3');
  define(110 /* KeyCode.ABNT_C1 */, 'ABNT_C1');
  define(111 /* KeyCode.ABNT_C2 */, 'ABNT_C2');
  define(87 /* KeyCode.US_OPEN_SQUARE_BRACKET */, '[', '[', 'OEM_4');
  define(88 /* KeyCode.US_BACKSLASH */, '\\', '\\', 'OEM_5');
  define(89 /* KeyCode.US_CLOSE_SQUARE_BRACKET */, ']', ']', 'OEM_6');
  define(90 /* KeyCode.US_QUOTE */, '\'', '\'', 'OEM_7');
  define(91 /* KeyCode.OEM_8 */, 'OEM_8');
  define(92 /* KeyCode.OEM_102 */, 'OEM_102');
  define(93 /* KeyCode.NUMPAD_0 */, 'NumPad0');
  define(94 /* KeyCode.NUMPAD_1 */, 'NumPad1');
  define(95 /* KeyCode.NUMPAD_2 */, 'NumPad2');
  define(96 /* KeyCode.NUMPAD_3 */, 'NumPad3');
  define(97 /* KeyCode.NUMPAD_4 */, 'NumPad4');
  define(98 /* KeyCode.NUMPAD_5 */, 'NumPad5');
  define(99 /* KeyCode.NUMPAD_6 */, 'NumPad6');
  define(100 /* KeyCode.NUMPAD_7 */, 'NumPad7');
  define(101 /* KeyCode.NUMPAD_8 */, 'NumPad8');
  define(102 /* KeyCode.NUMPAD_9 */, 'NumPad9');
  define(103 /* KeyCode.NUMPAD_MULTIPLY */, 'NumPad_Multiply');
  define(104 /* KeyCode.NUMPAD_ADD */, 'NumPad_Add');
  define(105 /* KeyCode.NUMPAD_SEPARATOR */, 'NumPad_Separator');
  define(106 /* KeyCode.NUMPAD_SUBTRACT */, 'NumPad_Subtract');
  define(107 /* KeyCode.NUMPAD_DECIMAL */, 'NumPad_Decimal');
  define(108 /* KeyCode.NUMPAD_DIVIDE */, 'NumPad_Divide');
})();
var KeyCodeUtils;
(function (KeyCodeUtils) {
  function toString(keyCode) {
    return _get__("uiMap").keyCodeToStr(keyCode);
  }
  KeyCodeUtils.toString = toString;
  function fromString(key) {
    return _get__("uiMap").strToKeyCode(key);
  }
  KeyCodeUtils.fromString = fromString;
  function toUserSettingsUS(keyCode) {
    return _get__("userSettingsUSMap").keyCodeToStr(keyCode);
  }
  KeyCodeUtils.toUserSettingsUS = toUserSettingsUS;
  function toUserSettingsGeneral(keyCode) {
    return _get__("userSettingsGeneralMap").keyCodeToStr(keyCode);
  }
  KeyCodeUtils.toUserSettingsGeneral = toUserSettingsGeneral;
  function fromUserSettings(key) {
    return _get__("userSettingsUSMap").strToKeyCode(key) || _get__("userSettingsGeneralMap").strToKeyCode(key);
  }
  KeyCodeUtils.fromUserSettings = fromUserSettings;
})(_get__("KeyCodeUtils") || (exports.KeyCodeUtils = _assign__("KeyCodeUtils", {})));
function KeyChord(firstPart, secondPart) {
  const chordPart = (secondPart & 0x0000FFFF) << 16 >>> 0;
  return (firstPart | chordPart) >>> 0;
}
exports.KeyChord = _get__("KeyChord");
class SimpleKeybinding {
  constructor(ctrlKey, shiftKey, altKey, metaKey, keyCode) {
    this.type = 1 /* KeybindingType.Simple */;
    this.ctrlKey = ctrlKey;
    this.shiftKey = shiftKey;
    this.altKey = altKey;
    this.metaKey = metaKey;
    this.keyCode = keyCode;
  }
  // eslint-disable-next-line no-use-before-define
  equals(other) {
    if (other.type !== 1 /* KeybindingType.Simple */) {
      return false;
    }
    return this.ctrlKey === other.ctrlKey && this.shiftKey === other.shiftKey && this.altKey === other.altKey && this.metaKey === other.metaKey && this.keyCode === other.keyCode;
  }
  getHashCode() {
    const ctrl = this.ctrlKey ? '1' : '0';
    const shift = this.shiftKey ? '1' : '0';
    const alt = this.altKey ? '1' : '0';
    const meta = this.metaKey ? '1' : '0';
    return `${ctrl}${shift}${alt}${meta}${this.keyCode}`;
  }
  isModifierKey() {
    return this.keyCode === 0 /* KeyCode.Unknown */ || this.keyCode === 5 /* KeyCode.Ctrl */ || this.keyCode === 57 /* KeyCode.Meta */ || this.keyCode === 6 /* KeyCode.Alt */ || this.keyCode === 4 /* KeyCode.Shift */;
  }
  /**
   * Does this keybinding refer to the key code of a modifier and it also has the modifier flag?
   */
  isDuplicateModifierCase() {
    return this.ctrlKey && this.keyCode === 5 /* KeyCode.Ctrl */ || this.shiftKey && this.keyCode === 4 /* KeyCode.Shift */ || this.altKey && this.keyCode === 6 /* KeyCode.Alt */ || this.metaKey && this.keyCode === 57 /* KeyCode.Meta */;
  }
}

exports.SimpleKeybinding = _get__("SimpleKeybinding");
class ChordKeybinding {
  constructor(firstPart, chordPart) {
    this.type = 2 /* KeybindingType.Chord */;
    this.firstPart = firstPart;
    this.chordPart = chordPart;
  }
  getHashCode() {
    return `${this.firstPart.getHashCode()};${this.chordPart.getHashCode()}`;
  }
}
exports.ChordKeybinding = _get__("ChordKeybinding");
function createKeybinding(keybinding, OS) {
  if (keybinding === 0) {
    return null;
  }
  const firstPart = (keybinding & 0x0000FFFF) >>> 0;
  const chordPart = (keybinding & 0xFFFF0000) >>> 16;
  if (chordPart !== 0) {
    return new (_get__("ChordKeybinding"))(_get__("createSimpleKeybinding")(firstPart, OS), _get__("createSimpleKeybinding")(chordPart, OS));
  }
  return _get__("createSimpleKeybinding")(firstPart, OS);
}
exports.createKeybinding = _get__("createKeybinding");
function createSimpleKeybinding(keybinding, OS) {
  const ctrlCmd = !!(keybinding & 2048 /* BinaryKeybindingsMask.CtrlCmd */);
  const winCtrl = !!(keybinding & 256 /* BinaryKeybindingsMask.WinCtrl */);
  const ctrlKey = OS === 2 /* OperatingSystem.Macintosh */ ? winCtrl : ctrlCmd;
  const shiftKey = !!(keybinding & 1024 /* BinaryKeybindingsMask.Shift */);
  const altKey = !!(keybinding & 512 /* BinaryKeybindingsMask.Alt */);
  const metaKey = OS === 2 /* OperatingSystem.Macintosh */ ? ctrlCmd : winCtrl;
  const keyCode = keybinding & 255 /* BinaryKeybindingsMask.KeyCode */;
  return new (_get__("SimpleKeybinding"))(ctrlKey, shiftKey, altKey, metaKey, keyCode);
}
exports.createSimpleKeybinding = _get__("createSimpleKeybinding");
class ResolvedKeybindingPart {
  constructor(ctrlKey, shiftKey, altKey, metaKey, kbLabel, kbAriaLabel) {
    this.ctrlKey = ctrlKey;
    this.shiftKey = shiftKey;
    this.altKey = altKey;
    this.metaKey = metaKey;
    this.keyLabel = kbLabel;
    this.keyAriaLabel = kbAriaLabel;
  }
}
exports.ResolvedKeybindingPart = _get__("ResolvedKeybindingPart");
/**
 * A resolved keybinding. Can be a simple keybinding or a chord keybinding.
 */
class ResolvedKeybinding {}
exports.ResolvedKeybinding = _get__("ResolvedKeybinding");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "scanCodeLowerCaseStrToInt":
      return scanCodeLowerCaseStrToInt;
    case "scanCodeStrToInt":
      return scanCodeStrToInt;
    case "scanCodeIntToStr":
      return scanCodeIntToStr;
    case "KeyCodeStrMap":
      return KeyCodeStrMap;
    case "uiMap":
      return uiMap;
    case "userSettingsUSMap":
      return userSettingsUSMap;
    case "userSettingsGeneralMap":
      return userSettingsGeneralMap;
    case "KeyCodeUtils":
      return KeyCodeUtils;
    case "KeyChord":
      return KeyChord;
    case "SimpleKeybinding":
      return SimpleKeybinding;
    case "ChordKeybinding":
      return ChordKeybinding;
    case "createSimpleKeybinding":
      return createSimpleKeybinding;
    case "createKeybinding":
      return createKeybinding;
    case "ResolvedKeybindingPart":
      return ResolvedKeybindingPart;
    case "ResolvedKeybinding":
      return ResolvedKeybinding;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {
    case "KeyCodeUtils":
      return KeyCodeUtils = _value;
  }
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/common/lifecycle.js":
/*!************************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/common/lifecycle.js ***!
  \************************************************************************/
/***/ ((module, exports) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.Disposable = exports.toDisposable = exports.combinedDisposable = exports.dispose = exports.isDisposable = void 0;
function isDisposable(thing) {
  return typeof thing.dispose === 'function' && thing.dispose.length === 0;
}
exports.isDisposable = _get__("isDisposable");
function dispose(first, ...rest) {
  if (Array.isArray(first)) {
    first.forEach(d => d && d.dispose());
    return [];
  } else if (rest.length === 0) {
    if (first) {
      first.dispose();
      return first;
    }
    return undefined;
  } else {
    _get__("dispose")(first);
    _get__("dispose")(rest);
    return [];
  }
}
exports.dispose = _get__("dispose");
function combinedDisposable(disposables) {
  return {
    dispose: () => _get__("dispose")(disposables)
  };
}
exports.combinedDisposable = _get__("combinedDisposable");
function toDisposable(fn) {
  return {
    dispose() {
      fn();
    }
  };
}
exports.toDisposable = _get__("toDisposable");
class Disposable {
  constructor() {
    this._toDispose = [];
    this._lifecycle_disposable_isDisposed = false;
  }
  get toDispose() {
    return this._toDispose;
  }
  dispose() {
    this._lifecycle_disposable_isDisposed = true;
    this._toDispose = _get__("dispose")(this._toDispose);
  }
  _register(t) {
    if (this._lifecycle_disposable_isDisposed) {
      console.warn('Registering disposable on object that has already been disposed.');
      t.dispose();
    } else {
      this._toDispose.push(t);
    }
    return t;
  }
}
exports.Disposable = _get__("Disposable");
_get__("Disposable").None = Object.freeze({
  dispose() {}
});
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "isDisposable":
      return isDisposable;
    case "dispose":
      return dispose;
    case "combinedDisposable":
      return combinedDisposable;
    case "toDisposable":
      return toDisposable;
    case "Disposable":
      return Disposable;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/common/linkedList.js":
/*!*************************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/common/linkedList.js ***!
  \*************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.LinkedList = void 0;
const iterator_1 = __webpack_require__(/*! ../common/iterator */ "./node_modules/custom-electron-titlebar/base/common/iterator.js");
class Node {
  constructor(element) {
    this.element = element;
  }
}
class LinkedList {
  constructor() {
    this._size = 0;
  }
  get size() {
    return this._size;
  }
  isEmpty() {
    return !this._first;
  }
  clear() {
    this._first = undefined;
    this._last = undefined;
    this._size = 0;
  }
  unshift(element) {
    return this._insert(element, false);
  }
  push(element) {
    return this._insert(element, true);
  }
  _insert(element, atTheEnd) {
    const newNode = new (_get__("Node"))(element);
    if (!this._first) {
      this._first = newNode;
      this._last = newNode;
    } else if (atTheEnd) {
      // push
      const oldLast = this._last;
      this._last = newNode;
      newNode.prev = oldLast;
      oldLast.next = newNode;
    } else {
      // unshift
      const oldFirst = this._first;
      this._first = newNode;
      newNode.next = oldFirst;
      oldFirst.prev = newNode;
    }
    this._size += 1;
    return this._remove.bind(this, newNode);
  }
  shift() {
    if (!this._first) {
      return undefined;
    } else {
      const res = this._first.element;
      this._remove(this._first);
      return res;
    }
  }
  pop() {
    if (!this._last) {
      return undefined;
    } else {
      const res = this._last.element;
      this._remove(this._last);
      return res;
    }
  }
  _remove(node) {
    let candidate = this._first;
    while (candidate instanceof _get__("Node")) {
      if (candidate !== node) {
        candidate = candidate.next;
        continue;
      }
      if (candidate.prev && candidate.next) {
        // middle
        const anchor = candidate.prev;
        anchor.next = candidate.next;
        candidate.next.prev = anchor;
      } else if (!candidate.prev && !candidate.next) {
        // only node
        this._first = undefined;
        this._last = undefined;
      } else if (!candidate.next) {
        // last
        this._last = this._last.prev;
        this._last.next = undefined;
      } else if (!candidate.prev) {
        // first
        this._first = this._first.next;
        this._first.prev = undefined;
      }
      // done
      this._size -= 1;
      break;
    }
  }
  iterator() {
    let element;
    let node = this._first;
    return {
      next() {
        if (!node) {
          return _get__("iterator_1").FIN;
        }
        if (!element) {
          element = {
            done: false,
            value: node.element
          };
        } else {
          element.value = node.element;
        }
        node = node.next;
        return element;
      }
    };
  }
  toArray() {
    const result = [];
    for (let node = this._first; node instanceof _get__("Node"); node = node.next) {
      result.push(node.element);
    }
    return result;
  }
}
exports.LinkedList = _get__("LinkedList");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "Node":
      return Node;
    case "iterator_1":
      return iterator_1;
    case "LinkedList":
      return LinkedList;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/common/platform.js":
/*!***********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/common/platform.js ***!
  \***********************************************************************/
/***/ ((module, exports) => {

"use strict";


/* eslint-disable indent */
/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.OS = exports.setImmediate = exports.globals = exports.isRootUser = exports.platform = exports.isWeb = exports.isNative = exports.isFreeBSD = exports.isLinux = exports.isMacintosh = exports.isWindows = exports.PlatformToString = void 0;
let _isWindows = false;
let _isMacintosh = false;
let _isLinux = false;
let _isFreeBSD = false;
let _isNative = false;
let _isWeb = false;
const isElectronRenderer = typeof process !== 'undefined' && typeof process.versions !== 'undefined' && typeof process.versions.electron !== 'undefined' && process.type === 'renderer';
// OS detection
if (typeof navigator === 'object' && !_get__("isElectronRenderer")) {
  const userAgent = navigator.userAgent;
  _assign__("_isWindows", userAgent.indexOf('Windows') >= 0);
  _assign__("_isMacintosh", userAgent.indexOf('Macintosh') >= 0);
  _assign__("_isLinux", userAgent.indexOf('Linux') >= 0);
  _assign__("_isFreeBSD", userAgent.indexOf('FreeBSD') >= 0);
  _assign__("_isWeb", true);
} else if (typeof process === 'object') {
  _assign__("_isWindows", process.platform === 'win32');
  _assign__("_isMacintosh", process.platform === 'darwin');
  _assign__("_isLinux", process.platform === 'linux');
  _assign__("_isFreeBSD", process.platform === 'freebsd');
  _assign__("_isNative", true);
}
function PlatformToString(platform) {
  switch (platform) {
    case 0 /* Platform.Web */:
      return 'Web';
    case 1 /* Platform.Mac */:
      return 'Mac';
    case 2 /* Platform.Linux */:
      return 'Linux';
    case 3 /* Platform.FreeBSD */:
      return 'FreeBSD';
    case 4 /* Platform.Windows */:
      return 'Windows';
  }
}
exports.PlatformToString = _get__("PlatformToString");
let _platform = 0 /* Platform.Web */;
if (_get__("_isNative")) {
  if (_get__("_isMacintosh")) {
    _assign__("_platform", 1) /* Platform.Mac */;
  } else if (_get__("_isWindows")) {
    _assign__("_platform", 4) /* Platform.Windows */;
  } else if (_get__("_isLinux")) {
    _assign__("_platform", 2) /* Platform.Linux */;
  } else if (_get__("_isFreeBSD")) {
    _assign__("_platform", 3) /* Platform.FreeBSD */;
  }
}
exports.isWindows = _get__("_isWindows");
exports.isMacintosh = _get__("_isMacintosh");
exports.isLinux = _get__("_isLinux");
exports.isFreeBSD = _get__("_isFreeBSD");
exports.isNative = _get__("_isNative");
exports.isWeb = _get__("_isWeb");
exports.platform = _get__("_platform");
function isRootUser() {
  return _get__("_isNative") && !_get__("_isWindows") && process.getuid() === 0;
}
exports.isRootUser = _get__("isRootUser");
const g = typeof global === 'object' ? global : {};
const _globals = typeof self === 'object' ? self : _get__("g");
exports.globals = _get__("_globals");
let _setImmediate = null;
function setImmediate(callback) {
  if (_get__("_setImmediate") === null) {
    if (exports.globals.setImmediate) {
      _assign__("_setImmediate", exports.globals.setImmediate.bind(exports.globals));
    } else if (typeof process !== 'undefined' && typeof process.nextTick === 'function') {
      _assign__("_setImmediate", process.nextTick.bind(process));
    } else {
      _assign__("_setImmediate", exports.globals.setTimeout.bind(exports.globals));
    }
  }
  return _get__("_setImmediate")(callback);
}
exports.setImmediate = _get__("setImmediate");
const _wl = _get__("_isWindows") ? 1 /* OperatingSystem.Windows */ : 3 /* OperatingSystem.Linux */ | 4 /* OperatingSystem.FreeBSD */;
exports.OS = _get__("_isMacintosh") ? 2 /* OperatingSystem.Macintosh */ : _get__("_wl");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "isElectronRenderer":
      return isElectronRenderer;
    case "_isWindows":
      return _isWindows;
    case "_isMacintosh":
      return _isMacintosh;
    case "_isLinux":
      return _isLinux;
    case "_isFreeBSD":
      return _isFreeBSD;
    case "_isWeb":
      return _isWeb;
    case "_isNative":
      return _isNative;
    case "PlatformToString":
      return PlatformToString;
    case "_platform":
      return _platform;
    case "isRootUser":
      return isRootUser;
    case "g":
      return g;
    case "_globals":
      return _globals;
    case "_setImmediate":
      return _setImmediate;
    case "setImmediate":
      return setImmediate;
    case "_wl":
      return _wl;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {
    case "_isWindows":
      return _isWindows = _value;
    case "_isMacintosh":
      return _isMacintosh = _value;
    case "_isLinux":
      return _isLinux = _value;
    case "_isFreeBSD":
      return _isFreeBSD = _value;
    case "_isWeb":
      return _isWeb = _value;
    case "_isNative":
      return _isNative = _value;
    case "_platform":
      return _platform = _value;
    case "_setImmediate":
      return _setImmediate = _value;
  }
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/base/common/strings.js":
/*!**********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/base/common/strings.js ***!
  \**********************************************************************/
/***/ ((module, exports) => {

"use strict";


/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.rtrim = exports.ltrim = exports.trim = exports.escape = void 0;
/**
 * Converts HTML characters inside the string to use entities instead. Makes the string safe from
 * being used e.g. in HTMLElement.innerHTML.
 */
function escape(html) {
  return html.replace(/[<>&]/g, function (match) {
    switch (match) {
      case '<':
        return '&lt;';
      case '>':
        return '&gt;';
      case '&':
        return '&amp;';
      default:
        return match;
    }
  });
}
exports.escape = _get__("escape");
/**
 * Removes all occurrences of needle from the beginning and end of haystack.
 * @param haystack string to trim
 * @param needle the thing to trim (default is a blank)
 */
function trim(haystack, needle = ' ') {
  const trimmed = _get__("ltrim")(haystack, needle);
  return _get__("rtrim")(trimmed, needle);
}
exports.trim = _get__("trim");
/**
 * Removes all occurrences of needle from the beginning of haystack.
 * @param haystack string to trim
 * @param needle the thing to trim
 */
function ltrim(haystack, needle) {
  if (!haystack || !needle) {
    return haystack;
  }
  const needleLen = needle.length;
  if (needleLen === 0 || haystack.length === 0) {
    return haystack;
  }
  let offset = 0;
  while (haystack.indexOf(needle, offset) === offset) {
    offset = offset + needleLen;
  }
  return haystack.substring(offset);
}
exports.ltrim = _get__("ltrim");
/**
 * Removes all occurrences of needle from the end of haystack.
 * @param haystack string to trim
 * @param needle the thing to trim
 */
function rtrim(haystack, needle) {
  if (!haystack || !needle) {
    return haystack;
  }
  const needleLen = needle.length,
    haystackLen = haystack.length;
  if (needleLen === 0 || haystackLen === 0) {
    return haystack;
  }
  let offset = haystackLen,
    idx = -1;
  while (true) {
    idx = haystack.lastIndexOf(needle, offset - 1);
    if (idx === -1 || idx + needleLen !== offset) {
      break;
    }
    if (idx === 0) {
      return '';
    }
    offset = idx;
  }
  return haystack.substring(0, offset);
}
exports.rtrim = _get__("rtrim");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "escape":
      return escape;
    case "ltrim":
      return ltrim;
    case "rtrim":
      return rtrim;
    case "trim":
      return trim;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/consts.js":
/*!*********************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/consts.js ***!
  \*********************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) AlexTorresDev. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.loadWindowIcons = exports.applyFill = exports.parseAccelerator = exports.cleanMnemonic = exports.mnemonicButtonLabel = exports.mnemonicMenuLabel = exports.getPx = exports.menuIcons = exports.MENU_ESCAPED_MNEMONIC_REGEX = exports.MENU_MNEMONIC_REGEX = exports.WINDOW_MIN_HEIGHT = exports.WINDOW_MIN_WIDTH = exports.TOP_TITLEBAR_HEIGHT_WIN = exports.TOP_TITLEBAR_HEIGHT_MAC = exports.BOTTOM_TITLEBAR_HEIGHT = exports.IS_MAC_BIGSUR_OR_LATER = exports.DEFAULT_ITEM_SELECTOR = exports.ACTIVE_FOREGROUND = exports.INACTIVE_FOREGROUND = exports.ACTIVE_FOREGROUND_DARK = exports.INACTIVE_FOREGROUND_DARK = void 0;
const color_1 = __webpack_require__(/*! ./base/common/color */ "./node_modules/custom-electron-titlebar/base/common/color.js");
const platform_1 = __webpack_require__(/*! ./base/common/platform */ "./node_modules/custom-electron-titlebar/base/common/platform.js");
exports.INACTIVE_FOREGROUND_DARK = _get__("color_1").Color.fromHex('#222222');
exports.ACTIVE_FOREGROUND_DARK = _get__("color_1").Color.fromHex('#333333');
exports.INACTIVE_FOREGROUND = _get__("color_1").Color.fromHex('#EEEEEE');
exports.ACTIVE_FOREGROUND = _get__("color_1").Color.fromHex('#FFFFFF');
exports.DEFAULT_ITEM_SELECTOR = _get__("color_1").Color.fromHex('#0000001F');
exports.IS_MAC_BIGSUR_OR_LATER = _get__("platform_1").isMacintosh && parseInt(process.getSystemVersion().split('.')[0]) >= 11;
exports.BOTTOM_TITLEBAR_HEIGHT = 60;
exports.TOP_TITLEBAR_HEIGHT_MAC = exports.IS_MAC_BIGSUR_OR_LATER ? 28 : 22;
exports.TOP_TITLEBAR_HEIGHT_WIN = 30;
exports.WINDOW_MIN_WIDTH = 400;
exports.WINDOW_MIN_HEIGHT = 270;
exports.MENU_MNEMONIC_REGEX = /\(&([^\s&])\)|(^|[^&])&([^\s&])/;
exports.MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\s&])/g;
exports.menuIcons = {
  submenuIndicator: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none" /><polyline points="9 6 15 12 9 18" /></svg>',
  checkbox: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l5 5l10 -10" /></svg>',
  radioChecked: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M10,5 C7.2,5 5,7.2 5,10 C5,12.8 7.2,15 10,15 C12.8,15 15,12.8 15,10 C15,7.2 12.8,5 10,5 L10,5 Z M10,0 C4.5,0 0,4.5 0,10 C0,15.5 4.5,20 10,20 C15.5,20 20,15.5 20,10 C20,4.5 15.5,0 10,0 L10,0 Z M10,18 C5.6,18 2,14.4 2,10 C2,5.6 5.6,2 10,2 C14.4,2 18,5.6 18,10 C18,14.4 14.4,18 10,18 L10,18 Z" /></svg>',
  radioUnchecked: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M10,0 C4.5,0 0,4.5 0,10 C0,15.5 4.5,20 10,20 C15.5,20 20,15.5 20,10 C20,4.5 15.5,0 10,0 L10,0 Z M10,18 C5.6,18 2,14.4 2,10 C2,5.6 5.6,2 10,2 C14.4,2 18,5.6 18,10 C18,14.4 14.4,18 10,18 L10,18 Z" /></svg>',
  linux: {
    minimize: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M11,4.9v1.1H0V4.399h11z"/></svg>',
    maximize: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M0,1.7v7.6C0,10.2,0.8,11,1.7,11h7.6c0.9,0,1.7-0.8,1.7-1.7V1.7C11,0.8,10.2,0,9.3,0H1.7C0.8,0,0,0.8,0,1.7z M8.8,9.9H2.2c-0.6,0-1.1-0.5-1.1-1.1V2.2c0-0.6,0.5-1.1,1.1-1.1h6.7c0.6,0,1.1,0.5,1.1,1.1v6.7C9.9,9.4,9.4,9.9,8.8,9.9z"/></svg>',
    restore: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M7.9,2.2h-7C0.4,2.2,0,2.6,0,3.1v7C0,10.6,0.4,11,0.9,11h7c0.5,0,0.9-0.4,0.9-0.9v-7C8.8,2.6,8.4,2.2,7.9,2.2z M7.7,9.6 c0,0.2-0.1,0.3-0.3,0.3h-6c-0.2,0-0.3-0.1-0.3-0.3v-6c0-0.2,0.1-0.3,0.3-0.3h6c0.2,0,0.3,0.1,0.3,0.3V9.6z M10,0.9 c0,0.5-0.4,0.9-0.9,0.9h-2.1 c-0.5,0-0.9-0.4-0.9-0.9V0.9c0-0.5,0.4-0.9,0.9-0.9h2.1C9.6,0,10,0.4,10,0.9z"/></svg>',
    close: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M6.279 5.5L11 10.221l-.779.779L5.5 6.279.779 11 0 10.221 4.721 5.5 0 .779.779 0 5.5 4.721 10.221 0 11 .779 6.279 5.5z"/></svg>'
  },
  freebsd: {
    minimize: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M11,4.9v1.1H0V4.399h11z"/></svg>',
    maximize: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M0,1.7v7.6C0,10.2,0.8,11,1.7,11h7.6c0.9,0,1.7-0.8,1.7-1.7V1.7C11,0.8,10.2,0,9.3,0H1.7C0.8,0,0,0.8,0,1.7z M8.8,9.9H2.2c-0.6,0-1.1-0.5-1.1-1.1V2.2c0-0.6,0.5-1.1,1.1-1.1h6.7c0.6,0,1.1,0.5,1.1,1.1v6.7C9.9,9.4,9.4,9.9,8.8,9.9z"/></svg>',
    restore: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M7.9,2.2h-7C0.4,2.2,0,2.6,0,3.1v7C0,10.6,0.4,11,0.9,11h7c0.5,0,0.9-0.4,0.9-0.9v-7C8.8,2.6,8.4,2.2,7.9,2.2z M7.7,9.6 c0,0.2-0.1,0.3-0.3,0.3h-6c-0.2,0-0.3-0.1-0.3-0.3v-6c0-0.2,0.1-0.3,0.3-0.3h6c0.2,0,0.3,0.1,0.3,0.3V9.6z M10,0.9 c0,0.5-0.4,0.9-0.9,0.9h-2.1 c-0.5,0-0.9-0.4-0.9-0.9V0.9c0-0.5,0.4-0.9,0.9-0.9h2.1C9.6,0,10,0.4,10,0.9z"/></svg>',
    close: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M6.279 5.5L11 10.221l-.779.779L5.5 6.279.779 11 0 10.221 4.721 5.5 0 .779.779 0 5.5 4.721 10.221 0 11 .779 6.279 5.5z"/></svg>'
  },
  windows: {
    minimize: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M11,4.9v1.1H0V4.399h11z"/></svg>',
    maximize: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M0,1.7v7.6C0,10.2,0.8,11,1.7,11h7.6c0.9,0,1.7-0.8,1.7-1.7V1.7C11,0.8,10.2,0,9.3,0H1.7C0.8,0,0,0.8,0,1.7z M8.8,9.9H2.2c-0.6,0-1.1-0.5-1.1-1.1V2.2c0-0.6,0.5-1.1,1.1-1.1h6.7c0.6,0,1.1,0.5,1.1,1.1v6.7C9.9,9.4,9.4,9.9,8.8,9.9z"/></svg>',
    restore: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M7.9,2.2h-7C0.4,2.2,0,2.6,0,3.1v7C0,10.6,0.4,11,0.9,11h7c0.5,0,0.9-0.4,0.9-0.9v-7C8.8,2.6,8.4,2.2,7.9,2.2z M7.7,9.6 c0,0.2-0.1,0.3-0.3,0.3h-6c-0.2,0-0.3-0.1-0.3-0.3v-6c0-0.2,0.1-0.3,0.3-0.3h6c0.2,0,0.3,0.1,0.3,0.3V9.6z"/><path d="M10,0H3.5v1.1h6.1c0.2,0,0.3,0.1,0.3,0.3v6.1H11V1C11,0.4,10.6,0,10,0z"/></svg>',
    close: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 11 11"><path d="M6.279 5.5L11 10.221l-.779.779L5.5 6.279.779 11 0 10.221 4.721 5.5 0 .779.779 0 5.5 4.721 10.221 0 11 .779 6.279 5.5z"/></svg>'
  }
};
function getPx(value) {
  return `${value}px`;
}
exports.getPx = _get__("getPx");
/**
 * Handles mnemonics for menu items. Depending on OS:
 * - Windows: Supported via & character (replace && with &)
 * - Linux: Supported via & character (replace && with &)
 * - FreeBSD: Supported via & character (replace && with &)
 * - macOS: Unsupported (replace && with empty string)
 */
function mnemonicMenuLabel(label, forceDisableMnemonics) {
  if (_get__("platform_1").isMacintosh || forceDisableMnemonics) {
    return label.replace(/\(&&\w\)|&&/g, '').replace(/&/g, _get__("platform_1").isMacintosh ? '&' : '&&');
  }
  return label.replace(/&&|&/g, m => m === '&' ? '&&' : '&');
}
exports.mnemonicMenuLabel = _get__("mnemonicMenuLabel");
/**
 * Handles mnemonics for buttons. Depending on OS:
 * - Windows: Supported via & character (replace && with & and & with && for escaping)
 * - Linux: Supported via _ character (replace && with _)
 * - FreeBSD: Supported via _ character (replace && with _)
 * - macOS: Unsupported (replace && with empty string)
 */
function mnemonicButtonLabel(label, forceDisableMnemonics) {
  if (_get__("platform_1").isMacintosh || forceDisableMnemonics) {
    return label.replace(/\(&&\w\)|&&/g, '');
  }
  if (_get__("platform_1").isWindows) {
    return label.replace(/&&|&/g, m => m === '&' ? '&&' : '&');
  }
  return label.replace(/&&/g, '_');
}
exports.mnemonicButtonLabel = _get__("mnemonicButtonLabel");
function cleanMnemonic(label) {
  const regex = exports.MENU_MNEMONIC_REGEX;
  const matches = regex.exec(label);
  if (!matches) {
    return label;
  }
  const mnemonicInText = !matches[1];
  return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();
}
exports.cleanMnemonic = _get__("cleanMnemonic");
function parseAccelerator(accelerator) {
  let acc = accelerator.toString();
  if (!_get__("platform_1").isMacintosh) {
    acc = acc.replace(/(Cmd)|(Command)/gi, '');
  } else {
    acc = acc.replace(/(Ctrl)|(Control)/gi, '');
  }
  acc = acc.replace(/(Or)/gi, '');
  return acc;
}
exports.parseAccelerator = _get__("parseAccelerator");
function applyFill(element, svgColor, fgColor, color = true) {
  let fillColor = '';
  if (svgColor) fillColor = svgColor.toString();else if (fgColor) fillColor = fgColor.toString();
  if (element && element !== null) {
    if (color) element.style.color = fillColor;else element.style.backgroundColor = fillColor;
  }
}
exports.applyFill = _get__("applyFill");
function loadWindowIcons(icons) {
  if (!icons) return;
  const jWindowsIcons = __webpack_require__("./node_modules/custom-electron-titlebar sync recursive")(icons);
  return {
    icons: jWindowsIcons,
    platformIcons: jWindowsIcons[(0, _get__("platform_1").PlatformToString)(_get__("platform_1").platform).toLocaleLowerCase()]
  };
}
exports.loadWindowIcons = _get__("loadWindowIcons");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "color_1":
      return color_1;
    case "platform_1":
      return platform_1;
    case "getPx":
      return getPx;
    case "mnemonicMenuLabel":
      return mnemonicMenuLabel;
    case "mnemonicButtonLabel":
      return mnemonicButtonLabel;
    case "cleanMnemonic":
      return cleanMnemonic;
    case "parseAccelerator":
      return parseAccelerator;
    case "applyFill":
      return applyFill;
    case "loadWindowIcons":
      return loadWindowIcons;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/index.js":
/*!********************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/index.js ***!
  \********************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) AlexTorresDev. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.TitlebarColor = exports.Titlebar = exports.CustomTitlebar = void 0;
const titlebar_1 = __webpack_require__(/*! ./titlebar */ "./node_modules/custom-electron-titlebar/titlebar/index.js");
Object.defineProperty(exports, "CustomTitlebar", ({
  enumerable: true,
  get: function () {
    return _get__("titlebar_1").CustomTitlebar;
  }
}));
Object.defineProperty(exports, "Titlebar", ({
  enumerable: true,
  get: function () {
    return _get__("titlebar_1").CustomTitlebar;
  }
}));
const color_1 = __webpack_require__(/*! ./base/common/color */ "./node_modules/custom-electron-titlebar/base/common/color.js");
Object.defineProperty(exports, "TitlebarColor", ({
  enumerable: true,
  get: function () {
    return _get__("color_1").Color;
  }
}));
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "titlebar_1":
      return titlebar_1;
    case "color_1":
      return color_1;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/menubar/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/menubar/index.js ***!
  \****************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) AlexTorresDev. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function () {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) _get__("__createBinding")(result, mod, k);
  _get__("__setModuleDefault")(result, mod);
  return result;
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.MenuBar = void 0;
const electron_1 = __webpack_require__(/*! electron */ "electron");
const DOM = _get__("__importStar")(__webpack_require__(/*! ../base/common/dom */ "./node_modules/custom-electron-titlebar/base/common/dom.js"));
const event_1 = __webpack_require__(/*! ../base/common/event */ "./node_modules/custom-electron-titlebar/base/common/event.js");
const lifecycle_1 = __webpack_require__(/*! ../base/common/lifecycle */ "./node_modules/custom-electron-titlebar/base/common/lifecycle.js");
const platform_1 = __webpack_require__(/*! ../base/common/platform */ "./node_modules/custom-electron-titlebar/base/common/platform.js");
const keyboardEvent_1 = __webpack_require__(/*! ../base/browser/keyboardEvent */ "./node_modules/custom-electron-titlebar/base/browser/keyboardEvent.js");
const keyCodes_1 = __webpack_require__(/*! ../base/common/keyCodes */ "./node_modules/custom-electron-titlebar/base/common/keyCodes.js");
const consts_1 = __webpack_require__(/*! ../consts */ "./node_modules/custom-electron-titlebar/consts.js");
const menu_1 = __webpack_require__(/*! ./menu */ "./node_modules/custom-electron-titlebar/menubar/menu/index.js");
const async_1 = __webpack_require__(/*! ../base/common/async */ "./node_modules/custom-electron-titlebar/base/common/async.js");
const mouseEvent_1 = __webpack_require__(/*! ../base/browser/mouseEvent */ "./node_modules/custom-electron-titlebar/base/browser/mouseEvent.js");
const touch_1 = __webpack_require__(/*! ../base/browser/touch */ "./node_modules/custom-electron-titlebar/base/browser/touch.js");
const strings = _get__("__importStar")(__webpack_require__(/*! ../base/common/strings */ "./node_modules/custom-electron-titlebar/base/common/strings.js"));
const $ = _get__("DOM").$;
var MenubarState;
(function (MenubarState) {
  MenubarState[MenubarState["HIDDEN"] = 0] = "HIDDEN";
  MenubarState[MenubarState["VISIBLE"] = 1] = "VISIBLE";
  MenubarState[MenubarState["FOCUSED"] = 2] = "FOCUSED";
  MenubarState[MenubarState["OPEN"] = 3] = "OPEN";
})(_get__("MenubarState") || _assign__("MenubarState", {}));
class MenuBar extends _get__("lifecycle_1").Disposable {
  constructor(container, menuIcons, currentOptions, options, closeMenu = () => {}) {
    super();
    this.container = container;
    this.menuIcons = menuIcons;
    this.currentOptions = currentOptions;
    this.options = options;
    this.closeMenu = closeMenu;
    // Input-related
    this._mnemonicsInUse = false;
    this.openedViaKeyboard = false;
    this.awaitingAltRelease = false;
    this.ignoreNextMouseUp = false;
    this.updatePending = false;
    this.numMenusShown = 0;
    this.overflowLayoutScheduled = undefined;
    this.menuStyle = {};
    this.container.setAttribute('role', 'menubar');
    if (this.isCompact) {
      this.container.classList.add('compact');
    }
    this.menus = [];
    this.mnemonics = new Map();
    this._focusState = _get__("MenubarState").VISIBLE;
    this._onVisibilityChange = this._register(new (_get__("event_1").Emitter)());
    this._onFocusStateChange = this._register(new (_get__("event_1").Emitter)());
    this.createOverflowMenu();
    this.menuUpdater = this._register(new (_get__("async_1").RunOnceScheduler)(() => this.update(), 200));
    // this.actionRunner = this.options.actionRunner ?? this._register(new ActionRunner());
    this.registerListeners();
    this.setUnfocusedState();
  }
  registerListeners() {
    /* this._register(this.actionRunner.onWillRun(() => {
        this.setUnfocusedState();
    })); */
    if (!_get__("platform_1").isMacintosh) {
      this._register(_get__("DOM").addDisposableListener(window, _get__("DOM").EventType.RESIZE, () => {
        this.blur();
      }));
    }
    this._register(_get__("DOM").ModifierKeyEmitter.getInstance().event(this.onModifierKeyToggled, this));
    this._register(_get__("DOM").addDisposableListener(this.container, _get__("DOM").EventType.KEY_DOWN, e => {
      const event = new (_get__("keyboardEvent_1").StandardKeyboardEvent)(e);
      let eventHandled = true;
      const key = !!e.key ? e.key.toLocaleLowerCase() : '';
      const tabNav = _get__("platform_1").isMacintosh && !this.isCompact;
      if (event.equals(15 /* KeyCode.LeftArrow */) || tabNav && event.equals(2 /* KeyCode.Tab */ | 1024 /* KeyMod.Shift */)) {
        this.focusPrevious();
      } else if (event.equals(17 /* KeyCode.RightArrow */) || tabNav && event.equals(2 /* KeyCode.Tab */)) {
        this.focusNext();
      } else if (event.equals(9 /* KeyCode.Escape */) && this.isFocused && !this.isOpen) {
        this.setUnfocusedState();
      } else if (!this.isOpen && !event.ctrlKey && this.options.enableMnemonics && this.mnemonicsInUse && this.mnemonics.has(key)) {
        const menuIndex = this.mnemonics.get(key);
        this.onMenuTriggered(menuIndex, false);
      } else {
        eventHandled = false;
      }
      // Never allow default tab behavior when not compact
      if (!this.isCompact && (event.equals(2 /* KeyCode.Tab */ | 1024 /* KeyMod.Shift */) || event.equals(2 /* KeyCode.Tab */))) {
        event.preventDefault();
      }
      if (eventHandled) {
        event.preventDefault();
        event.stopPropagation();
      }
    }));
    this._register(_get__("DOM").addDisposableListener(window, _get__("DOM").EventType.MOUSE_DOWN, () => {
      // This mouse event is outside the menubar so it counts as a focus out
      if (this.isFocused) {
        this.setUnfocusedState();
      }
    }));
    this._register(_get__("DOM").addDisposableListener(this.container, _get__("DOM").EventType.FOCUS_IN, e => {
      const event = e;
      if (event.relatedTarget) {
        if (!this.container.contains(event.relatedTarget)) {
          this.focusToReturn = event.relatedTarget;
        }
      }
    }));
    this._register(_get__("DOM").addDisposableListener(this.container, _get__("DOM").EventType.FOCUS_OUT, e => {
      const event = e;
      // We are losing focus and there is a target, reset focusToReturn value as not to redirect
      if (event.relatedTarget && !this.container.contains(event.relatedTarget)) {
        this.focusToReturn = undefined;
        this.setUnfocusedState();
      }
    }));
    this._register(_get__("DOM").addDisposableListener(window, _get__("DOM").EventType.KEY_DOWN, e => {
      if (!this.options.enableMnemonics || !e.altKey || e.ctrlKey || e.defaultPrevented) {
        return;
      }
      const key = e.key.toLocaleLowerCase();
      if (!this.mnemonics.has(key)) {
        return;
      }
      this.mnemonicsInUse = true;
      this.updateMnemonicVisibility(true);
      const menuIndex = this.mnemonics.get(key);
      this.onMenuTriggered(menuIndex, false);
    }));
  }
  push(menu) {
    const topLevelMenus = menu.items;
    topLevelMenus.forEach(menuBarMenu => {
      const menuIndex = this.menus.length;
      const cleanMenuLabel = (0, _get__("consts_1").cleanMnemonic)(menuBarMenu.label);
      const mnemonicMatches = _get__("consts_1").MENU_MNEMONIC_REGEX.exec(menuBarMenu.label);
      // Register mnemonics
      if (mnemonicMatches) {
        const mnemonic = !!mnemonicMatches[1] ? mnemonicMatches[1] : mnemonicMatches[3];
        this.registerMnemonic(this.menus.length, mnemonic);
      }
      if (this.isCompact) {
        this.menus.push({
          label: '',
          actions: menuBarMenu.submenu
        });
      } else {
        const buttonElement = _get__("$")('.cet-menubar-menu-button', {
          role: 'menuitem',
          tabindex: -1,
          'aria-label': cleanMenuLabel,
          'aria-haspopup': true
        });
        const titleElement = _get__("$")('.cet-menubar-menu-title', {
          role: 'none',
          'aria-hidden': true
        });
        buttonElement.appendChild(titleElement);
        this.container.insertBefore(buttonElement, this.overflowMenu.buttonElement);
        this.updateLabels(titleElement, buttonElement, menuBarMenu.label);
        this._register(_get__("DOM").addDisposableListener(buttonElement, _get__("DOM").EventType.KEY_UP, e => {
          const event = new (_get__("keyboardEvent_1").StandardKeyboardEvent)(e);
          let eventHandled = true;
          if ((event.equals(18 /* KeyCode.DownArrow */) || event.equals(3 /* KeyCode.Enter */)) && !this.isOpen) {
            this.focusedMenu = {
              index: menuIndex
            };
            this.openedViaKeyboard = true;
            this.focusState = _get__("MenubarState").OPEN;
          } else {
            eventHandled = false;
          }
          if (eventHandled) {
            event.preventDefault();
            event.stopPropagation();
          }
        }));
        this._register(_get__("touch_1").Gesture.addTarget(buttonElement));
        this._register(_get__("DOM").addDisposableListener(buttonElement, _get__("touch_1").EventType.Tap, e => {
          // Ignore this touch if the menu is touched
          if (this.isOpen && this.focusedMenu && this.focusedMenu.holder && _get__("DOM").isAncestor(e.initialTarget, this.focusedMenu.holder)) {
            return;
          }
          this.ignoreNextMouseUp = false;
          this.onMenuTriggered(menuIndex, true);
          e.preventDefault();
          e.stopPropagation();
        }));
        this._register(_get__("DOM").addDisposableListener(buttonElement, _get__("DOM").EventType.MOUSE_DOWN, e => {
          // Ignore non-left-click
          const mouseEvent = new (_get__("mouseEvent_1").StandardMouseEvent)(e);
          if (!mouseEvent.leftButton) {
            e.preventDefault();
            return;
          }
          if (!this.isOpen) {
            // Open the menu with mouse down and ignore the following mouse up event
            this.ignoreNextMouseUp = true;
            this.onMenuTriggered(menuIndex, true);
          } else {
            this.ignoreNextMouseUp = false;
          }
          e.preventDefault();
          e.stopPropagation();
        }));
        this._register(_get__("DOM").addDisposableListener(buttonElement, _get__("DOM").EventType.MOUSE_UP, e => {
          if (e.defaultPrevented) {
            return;
          }
          if (!this.ignoreNextMouseUp) {
            if (this.isFocused) {
              this.onMenuTriggered(menuIndex, true);
            }
          } else {
            this.ignoreNextMouseUp = false;
          }
        }));
        this._register(_get__("DOM").addDisposableListener(buttonElement, _get__("DOM").EventType.MOUSE_ENTER, () => {
          if (this.isOpen && !this.isCurrentMenu(menuIndex)) {
            buttonElement.focus();
            this.cleanupMenu();
            this.showMenu(menuIndex, false);
          } else if (this.isFocused && !this.isOpen) {
            this.focusedMenu = {
              index: menuIndex
            };
            buttonElement.focus();
          }
        }));
        this.menus.push({
          label: menuBarMenu.label,
          actions: menuBarMenu.submenu,
          buttonElement,
          titleElement
        });
      }
    });
  }
  createOverflowMenu() {
    const label = this.isCompact ? 'Compact' : 'More';
    const buttonElement = _get__("$")('.cet-menubar-menu-button', {
      role: 'menuitem',
      tabindex: this.isCompact ? 0 : -1,
      'aria-label': label,
      'aria-haspopup': true
    });
    const titleElement = _get__("$")('.cet-menubar-menu-title.cet-toggle-more', {
      role: 'none',
      'aria-hidden': true
    });
    buttonElement.appendChild(titleElement);
    this.container.appendChild(buttonElement);
    buttonElement.style.visibility = 'hidden';
    this._register(_get__("DOM").addDisposableListener(buttonElement, _get__("DOM").EventType.KEY_UP, e => {
      const event = new (_get__("keyboardEvent_1").StandardKeyboardEvent)(e);
      let eventHandled = true;
      const triggerKeys = [3 /* KeyCode.Enter */];
      if (!this.isCompact) {
        triggerKeys.push(18 /* KeyCode.DownArrow */);
      } else {
        triggerKeys.push(10 /* KeyCode.Space */);
        if (this.options.compactMode === _get__("menu_1").Direction.Right) {
          triggerKeys.push(17 /* KeyCode.RightArrow */);
        } else if (this.options.compactMode === _get__("menu_1").Direction.Left) {
          triggerKeys.push(15 /* KeyCode.LeftArrow */);
        }
      }

      if (triggerKeys.some(k => event.equals(k)) && !this.isOpen) {
        this.focusedMenu = {
          index: _get__("MenuBar").OVERFLOW_INDEX
        };
        this.openedViaKeyboard = true;
        this.focusState = _get__("MenubarState").OPEN;
      } else {
        eventHandled = false;
      }
      if (eventHandled) {
        event.preventDefault();
        event.stopPropagation();
      }
    }));
    this._register(_get__("touch_1").Gesture.addTarget(buttonElement));
    this._register(_get__("DOM").addDisposableListener(buttonElement, _get__("touch_1").EventType.Tap, e => {
      // Ignore this touch if the menu is touched
      if (this.isOpen && this.focusedMenu && this.focusedMenu.holder && _get__("DOM").isAncestor(e.initialTarget, this.focusedMenu.holder)) {
        return;
      }
      this.ignoreNextMouseUp = false;
      this.onMenuTriggered(_get__("MenuBar").OVERFLOW_INDEX, true);
      e.preventDefault();
      e.stopPropagation();
    }));
    this._register(_get__("DOM").addDisposableListener(buttonElement, _get__("DOM").EventType.MOUSE_DOWN, e => {
      // Ignore non-left-click
      const mouseEvent = new (_get__("mouseEvent_1").StandardMouseEvent)(e);
      if (!mouseEvent.leftButton) {
        e.preventDefault();
        return;
      }
      if (!this.isOpen) {
        // Open the menu with mouse down and ignore the following mouse up event
        this.ignoreNextMouseUp = true;
        this.onMenuTriggered(_get__("MenuBar").OVERFLOW_INDEX, true);
      } else {
        this.ignoreNextMouseUp = false;
      }
      e.preventDefault();
      e.stopPropagation();
    }));
    this._register(_get__("DOM").addDisposableListener(buttonElement, _get__("DOM").EventType.MOUSE_UP, e => {
      if (e.defaultPrevented) {
        return;
      }
      if (!this.ignoreNextMouseUp) {
        if (this.isFocused) {
          this.onMenuTriggered(_get__("MenuBar").OVERFLOW_INDEX, true);
        }
      } else {
        this.ignoreNextMouseUp = false;
      }
    }));
    this._register(_get__("DOM").addDisposableListener(buttonElement, _get__("DOM").EventType.MOUSE_ENTER, () => {
      if (this.isOpen && !this.isCurrentMenu(_get__("MenuBar").OVERFLOW_INDEX)) {
        this.overflowMenu.buttonElement.focus();
        this.cleanupMenu();
        this.showMenu(_get__("MenuBar").OVERFLOW_INDEX, false);
      } else if (this.isFocused && !this.isOpen) {
        this.focusedMenu = {
          index: _get__("MenuBar").OVERFLOW_INDEX
        };
        buttonElement.focus();
      }
    }));
    this.overflowMenu = {
      buttonElement,
      titleElement,
      label: 'More'
    };
  }
  setStyles(style) {
    this.menuStyle = style;
  }
  updateMenu(menu) {
    const menuToUpdate = this.menus.filter(menuBarMenu => menuBarMenu.label === menu.label);
    if (menuToUpdate && menuToUpdate.length) {
      // menuToUpdate[0].actions = menu.actions;
    }
  }
  dispose() {
    super.dispose();
    this.menus.forEach(menuBarMenu => {
      menuBarMenu.titleElement?.remove();
      menuBarMenu.buttonElement?.remove();
    });
    this.overflowMenu.titleElement.remove();
    this.overflowMenu.buttonElement.remove();
    (0, _get__("lifecycle_1").dispose)(this.overflowLayoutScheduled);
    this.overflowLayoutScheduled = undefined;
  }
  blur() {
    this.setUnfocusedState();
  }
  getWidth() {
    if (!this.isCompact && this.menus) {
      const left = this.menus[0].buttonElement.getBoundingClientRect().left;
      const right = this.hasOverflow ? this.overflowMenu.buttonElement.getBoundingClientRect().right : this.menus[this.menus.length - 1].buttonElement.getBoundingClientRect().right;
      return right - left;
    }
    return 0;
  }
  getHeight() {
    return this.container.clientHeight;
  }
  toggleFocus() {
    if (!this.isFocused && this.options.visibility !== 'hidden') {
      this.mnemonicsInUse = true;
      this.focusedMenu = {
        index: this.numMenusShown > 0 ? 0 : _get__("MenuBar").OVERFLOW_INDEX
      };
      this.focusState = _get__("MenubarState").FOCUSED;
    } else if (!this.isOpen) {
      this.setUnfocusedState();
    }
  }
  updateOverflowAction() {
    if (!this.menus || !this.menus.length) {
      return;
    }
    const overflowMenuOnlyClass = 'overflow-menu-only';
    // Remove overflow only restriction to allow the most space
    this.container.classList.toggle(overflowMenuOnlyClass, false);
    const sizeAvailable = this.container.offsetWidth;
    let currentSize = 0;
    let full = this.isCompact;
    const prevNumMenusShown = this.numMenusShown;
    this.numMenusShown = 0;
    const showableMenus = this.menus.filter(menu => menu.buttonElement !== undefined && menu.titleElement !== undefined);
    for (const menuBarMenu of showableMenus) {
      if (!full) {
        const size = menuBarMenu.buttonElement.offsetWidth;
        if (currentSize + size > sizeAvailable) {
          full = true;
        } else {
          currentSize += size;
          this.numMenusShown++;
          if (this.numMenusShown > prevNumMenusShown) {
            menuBarMenu.buttonElement.style.visibility = 'visible';
          }
        }
      }
      if (full) {
        menuBarMenu.buttonElement.style.visibility = 'hidden';
      }
    }
    // If below minimium menu threshold, show the overflow menu only as hamburger menu
    if (this.numMenusShown - 1 <= showableMenus.length / 2) {
      for (const menuBarMenu of showableMenus) {
        menuBarMenu.buttonElement.style.visibility = 'hidden';
      }
      full = true;
      this.numMenusShown = 0;
      currentSize = 0;
    }
    // Overflow
    if (this.isCompact) {
      // this.overflowMenu.actions = [];
      for (let idx = this.numMenusShown; idx < this.menus.length; idx++) {
        // this.overflowMenu.actions.push(new SubmenuAction(`menubar.submenu.${this.menus[idx].label}`, this.menus[idx].label, this.menus[idx].actions || []));
      }
      /* const compactMenuActions = this.options.getCompactMenuActions?.();
      if (compactMenuActions && compactMenuActions.length) {
          //this.overflowMenu.actions.push(new Separator());
          this.overflowMenu.actions.push(...compactMenuActions);
      } */
      this.overflowMenu.buttonElement.style.visibility = 'visible';
    } else if (full) {
      // Can't fit the more button, need to remove more menus
      while (currentSize + this.overflowMenu.buttonElement.offsetWidth > sizeAvailable && this.numMenusShown > 0) {
        this.numMenusShown--;
        const size = showableMenus[this.numMenusShown].buttonElement.offsetWidth;
        showableMenus[this.numMenusShown].buttonElement.style.visibility = 'hidden';
        currentSize -= size;
      }
      // this.overflowMenu.actions = [];
      for (let idx = this.numMenusShown; idx < showableMenus.length; idx++) {
        // this.overflowMenu.actions.push(new SubmenuAction(`menubar.submenu.${showableMenus[idx].label}`, showableMenus[idx].label, showableMenus[idx].actions || []));
      }
      if (this.overflowMenu.buttonElement.nextElementSibling !== showableMenus[this.numMenusShown].buttonElement) {
        this.overflowMenu.buttonElement.remove();
        this.container.insertBefore(this.overflowMenu.buttonElement, showableMenus[this.numMenusShown].buttonElement);
      }
      this.overflowMenu.buttonElement.style.visibility = 'visible';
    } else {
      this.overflowMenu.buttonElement.remove();
      this.container.appendChild(this.overflowMenu.buttonElement);
      this.overflowMenu.buttonElement.style.visibility = 'hidden';
    }
    // If we are only showing the overflow, add this class to avoid taking up space
    this.container.classList.toggle(overflowMenuOnlyClass, this.numMenusShown === 0);
  }
  updateLabels(titleElement, buttonElement, label) {
    const cleanMenuLabel = (0, _get__("consts_1").cleanMnemonic)(label);
    // Update the button label to reflect mnemonics
    if (this.options.enableMnemonics) {
      const cleanLabel = _get__("strings").escape(label);
      // This is global so reset it
      _get__("consts_1").MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;
      let escMatch = _get__("consts_1").MENU_ESCAPED_MNEMONIC_REGEX.exec(cleanLabel);
      // We can't use negative lookbehind so we match our negative and skip
      while (escMatch && escMatch[1]) {
        escMatch = _get__("consts_1").MENU_ESCAPED_MNEMONIC_REGEX.exec(cleanLabel);
      }
      const replaceDoubleEscapes = str => str.replace(/&amp;&amp;/g, '&amp;');
      if (escMatch) {
        titleElement.innerText = '';
        titleElement.append(_get__("strings").ltrim(replaceDoubleEscapes(cleanLabel.substring(0, escMatch.index)), ' '), _get__("$")('mnemonic', {
          'aria-hidden': 'true'
        }, escMatch[3]), _get__("strings").rtrim(replaceDoubleEscapes(cleanLabel.substring(escMatch.index + escMatch[0].length)), ' '));
      } else {
        titleElement.innerText = replaceDoubleEscapes(cleanLabel).trim();
      }
    } else {
      titleElement.innerText = cleanMenuLabel.replace(/&&/g, '&');
    }
    const mnemonicMatches = _get__("consts_1").MENU_MNEMONIC_REGEX.exec(label);
    // Register mnemonics
    if (mnemonicMatches) {
      const mnemonic = !!mnemonicMatches[1] ? mnemonicMatches[1] : mnemonicMatches[3];
      if (this.options.enableMnemonics) {
        buttonElement.setAttribute('aria-keyshortcuts', 'Alt+' + mnemonic.toLocaleLowerCase());
      } else {
        buttonElement.removeAttribute('aria-keyshortcuts');
      }
    }
  }
  update(options) {
    if (options) {
      this.options = options;
    }
    // Don't update while using the menu
    if (this.isFocused) {
      this.updatePending = true;
      return;
    }
    this.menus.forEach(menuBarMenu => {
      if (!menuBarMenu.buttonElement || !menuBarMenu.titleElement) {
        return;
      }
      this.updateLabels(menuBarMenu.titleElement, menuBarMenu.buttonElement, menuBarMenu.label);
    });
    if (!this.overflowLayoutScheduled) {
      this.overflowLayoutScheduled = _get__("DOM").scheduleAtNextAnimationFrame(() => {
        this.updateOverflowAction();
        this.overflowLayoutScheduled = undefined;
      });
    }
    this.setUnfocusedState();
  }
  registerMnemonic(menuIndex, mnemonic) {
    this.mnemonics.set(mnemonic.toLocaleLowerCase(), menuIndex);
  }
  hideMenubar() {
    if (this.container.style.display !== 'none') {
      this.container.style.display = 'none';
      this._onVisibilityChange.fire(false);
    }
  }
  showMenubar() {
    if (this.container.style.display !== 'flex') {
      this.container.style.display = 'flex';
      this._onVisibilityChange.fire(true);
      this.updateOverflowAction();
    }
  }
  get focusState() {
    return this._focusState;
  }
  set focusState(value) {
    if (this._focusState >= _get__("MenubarState").FOCUSED && value < _get__("MenubarState").FOCUSED) {
      // Losing focus, update the menu if needed
      if (this.updatePending) {
        this.menuUpdater.schedule();
        this.updatePending = false;
      }
    }
    if (value === this._focusState) {
      return;
    }
    const isVisible = this.isVisible;
    const isOpen = this.isOpen;
    const isFocused = this.isFocused;
    this._focusState = value;
    switch (value) {
      case _get__("MenubarState").HIDDEN:
        if (isVisible) {
          this.hideMenubar();
        }
        if (isOpen) {
          this.cleanupMenu();
        }
        if (isFocused) {
          this.focusedMenu = undefined;
          if (this.focusToReturn) {
            this.focusToReturn.focus();
            this.focusToReturn = undefined;
          }
        }
        break;
      case _get__("MenubarState").VISIBLE:
        if (!isVisible) {
          this.showMenubar();
        }
        if (isOpen) {
          this.cleanupMenu();
        }
        if (isFocused) {
          if (this.focusedMenu) {
            if (this.focusedMenu.index === _get__("MenuBar").OVERFLOW_INDEX) {
              this.overflowMenu.buttonElement.blur();
            } else {
              this.menus[this.focusedMenu.index].buttonElement?.blur();
            }
          }
          this.focusedMenu = undefined;
          if (this.focusToReturn) {
            this.focusToReturn.focus();
            this.focusToReturn = undefined;
          }
        }
        break;
      case _get__("MenubarState").FOCUSED:
        if (!isVisible) {
          this.showMenubar();
        }
        if (isOpen) {
          this.cleanupMenu();
        }
        if (this.focusedMenu) {
          if (this.focusedMenu.index === _get__("MenuBar").OVERFLOW_INDEX) {
            this.overflowMenu.buttonElement.focus();
          } else {
            this.menus[this.focusedMenu.index].buttonElement?.focus();
          }
        }
        break;
      case _get__("MenubarState").OPEN:
        if (!isVisible) {
          this.showMenubar();
        }
        if (this.focusedMenu) {
          this.showMenu(this.focusedMenu.index, this.openedViaKeyboard);
        }
        break;
    }
    this._focusState = value;
    this._onFocusStateChange.fire(this.focusState >= _get__("MenubarState").FOCUSED);
  }
  get isVisible() {
    return this.focusState >= _get__("MenubarState").VISIBLE;
  }
  get isFocused() {
    return this.focusState >= _get__("MenubarState").FOCUSED;
  }
  get isOpen() {
    return this.focusState >= _get__("MenubarState").OPEN;
  }
  get hasOverflow() {
    return this.isCompact || this.numMenusShown < this.menus.length;
  }
  get isCompact() {
    return this.options.compactMode !== undefined;
  }
  setUnfocusedState() {
    if (this.options.visibility === 'toggle' || this.options.visibility === 'hidden') {
      this.focusState = _get__("MenubarState").HIDDEN;
    } else if (this.options.visibility === 'classic') {
      this.focusState = _get__("MenubarState").HIDDEN;
    } else {
      this.focusState = _get__("MenubarState").VISIBLE;
    }
    this.ignoreNextMouseUp = false;
    this.mnemonicsInUse = false;
    this.updateMnemonicVisibility(false);
  }
  focusPrevious() {
    if (!this.focusedMenu || this.numMenusShown === 0) {
      return;
    }
    let newFocusedIndex = (this.focusedMenu.index - 1 + this.numMenusShown) % this.numMenusShown;
    if (this.focusedMenu.index === _get__("MenuBar").OVERFLOW_INDEX) {
      newFocusedIndex = this.numMenusShown - 1;
    } else if (this.focusedMenu.index === 0 && this.hasOverflow) {
      newFocusedIndex = _get__("MenuBar").OVERFLOW_INDEX;
    }
    if (newFocusedIndex === this.focusedMenu.index) {
      return;
    }
    if (this.isOpen) {
      this.cleanupMenu();
      this.showMenu(newFocusedIndex);
    } else if (this.isFocused) {
      this.focusedMenu.index = newFocusedIndex;
      if (newFocusedIndex === _get__("MenuBar").OVERFLOW_INDEX) {
        this.overflowMenu.buttonElement.focus();
      } else {
        this.menus[newFocusedIndex].buttonElement?.focus();
      }
    }
  }
  focusNext() {
    if (!this.focusedMenu || this.numMenusShown === 0) {
      return;
    }
    let newFocusedIndex = (this.focusedMenu.index + 1) % this.numMenusShown;
    if (this.focusedMenu.index === _get__("MenuBar").OVERFLOW_INDEX) {
      newFocusedIndex = 0;
    } else if (this.focusedMenu.index === this.numMenusShown - 1) {
      newFocusedIndex = _get__("MenuBar").OVERFLOW_INDEX;
    }
    if (newFocusedIndex === this.focusedMenu.index) {
      return;
    }
    if (this.isOpen) {
      this.cleanupMenu();
      this.showMenu(newFocusedIndex);
    } else if (this.isFocused) {
      this.focusedMenu.index = newFocusedIndex;
      if (newFocusedIndex === _get__("MenuBar").OVERFLOW_INDEX) {
        this.overflowMenu.buttonElement.focus();
      } else {
        this.menus[newFocusedIndex].buttonElement?.focus();
      }
    }
  }
  updateMnemonicVisibility(visible) {
    if (this.menus) {
      this.menus.forEach(menuBarMenu => {
        if (menuBarMenu.titleElement && menuBarMenu.titleElement.children.length) {
          const child = menuBarMenu.titleElement.children.item(0);
          if (child) {
            child.style.textDecoration = this.options.alwaysOnMnemonics || visible ? 'underline' : '';
          }
        }
      });
    }
  }
  get mnemonicsInUse() {
    return this._mnemonicsInUse;
  }
  set mnemonicsInUse(value) {
    this._mnemonicsInUse = value;
  }
  get shouldAltKeyFocus() {
    if (_get__("platform_1").isMacintosh) {
      return false;
    }
    if (!this.options.disableAltFocus) {
      return true;
    }
    if (this.options.visibility === 'toggle') {
      return true;
    }
    return false;
  }
  get onVisibilityChange() {
    return this._onVisibilityChange.event;
  }
  get onFocusStateChange() {
    return this._onFocusStateChange.event;
  }
  onMenuTriggered(menuIndex, clicked) {
    if (!this.menus[menuIndex].actions) {
      _get__("electron_1").ipcRenderer.send('menu-event', menuIndex + 1);
      return;
    }
    if (this.isOpen) {
      if (this.isCurrentMenu(menuIndex)) {
        this.setUnfocusedState();
      } else {
        this.cleanupMenu();
        this.showMenu(menuIndex, this.openedViaKeyboard);
      }
    } else {
      this.focusedMenu = {
        index: menuIndex
      };
      this.openedViaKeyboard = !clicked;
      this.focusState = _get__("MenubarState").OPEN;
    }
  }
  onModifierKeyToggled(modifierKeyStatus) {
    const allModifiersReleased = !modifierKeyStatus.altKey && !modifierKeyStatus.ctrlKey && !modifierKeyStatus.shiftKey && !modifierKeyStatus.metaKey;
    if (this.options.visibility === 'hidden') {
      return;
    }
    // Prevent alt-key default if the menu is not hidden and we use alt to focus
    if (modifierKeyStatus.event && this.shouldAltKeyFocus) {
      if (_get__("keyCodes_1").ScanCodeUtils.toEnum(modifierKeyStatus.event.code) === 159 /* ScanCode.AltLeft */) {
        modifierKeyStatus.event.preventDefault();
      }
    }
    // Alt key pressed while menu is focused. This should return focus away from the menubar
    if (this.isFocused && modifierKeyStatus.lastKeyPressed === 'alt' && modifierKeyStatus.altKey) {
      this.setUnfocusedState();
      this.mnemonicsInUse = false;
      this.awaitingAltRelease = true;
    }
    // Clean alt key press and release
    if (allModifiersReleased && modifierKeyStatus.lastKeyPressed === 'alt' && modifierKeyStatus.lastKeyReleased === 'alt') {
      if (!this.awaitingAltRelease) {
        if (!this.isFocused && this.shouldAltKeyFocus) {
          this.mnemonicsInUse = true;
          this.focusedMenu = {
            index: this.numMenusShown > 0 ? 0 : _get__("MenuBar").OVERFLOW_INDEX
          };
          this.focusState = _get__("MenubarState").FOCUSED;
        } else if (!this.isOpen) {
          this.setUnfocusedState();
        }
      }
    }
    // Alt key released
    if (!modifierKeyStatus.altKey && modifierKeyStatus.lastKeyReleased === 'alt') {
      this.awaitingAltRelease = false;
    }
    if (this.options.enableMnemonics && this.menus && !this.isOpen) {
      this.updateMnemonicVisibility(!this.awaitingAltRelease && modifierKeyStatus.altKey || this.mnemonicsInUse);
    }
  }
  isCurrentMenu(menuIndex) {
    if (!this.focusedMenu) {
      return false;
    }
    return this.focusedMenu.index === menuIndex;
  }
  cleanupMenu() {
    if (this.focusedMenu) {
      // Remove focus from the menus first
      if (this.focusedMenu.index === _get__("MenuBar").OVERFLOW_INDEX) {
        this.overflowMenu.buttonElement.focus();
      } else {
        this.menus[this.focusedMenu.index].buttonElement?.focus();
      }
      if (this.focusedMenu.holder) {
        this.focusedMenu.holder.parentElement?.classList.remove('open');
        this.focusedMenu.holder.remove();
      }
      this.focusedMenu.widget?.dispose();
      this.focusedMenu = {
        index: this.focusedMenu.index
      };
    }
  }
  showMenu(menuIndex, selectFirst = true) {
    const actualMenuIndex = menuIndex >= this.numMenusShown ? _get__("MenuBar").OVERFLOW_INDEX : menuIndex;
    const customMenu = actualMenuIndex === _get__("MenuBar").OVERFLOW_INDEX ? this.overflowMenu : this.menus[actualMenuIndex];
    if (!customMenu.actions || !customMenu.buttonElement || !customMenu.titleElement) {
      return;
    }
    const menuHolder = _get__("$")('.cet-menubar-menu-container', {
      title: ''
    });
    customMenu.buttonElement.classList.add('open');
    const titleBoundingRect = customMenu.titleElement.getBoundingClientRect();
    const titleBoundingRectZoom = _get__("DOM").getDomNodeZoomLevel(customMenu.titleElement);
    if (this.options.compactMode === _get__("menu_1").Direction.Right) {
      menuHolder.style.top = `${titleBoundingRect.top}px`;
      menuHolder.style.left = `${titleBoundingRect.left + this.container.clientWidth}px`;
    } else if (this.options.compactMode === _get__("menu_1").Direction.Left) {
      menuHolder.style.top = `${titleBoundingRect.top}px`;
      menuHolder.style.right = `${this.container.clientWidth}px`;
      menuHolder.style.left = 'auto';
    } else {
      menuHolder.style.top = `${titleBoundingRect.bottom * titleBoundingRectZoom}px`;
      menuHolder.style.left = `${titleBoundingRect.left * titleBoundingRectZoom}px`;
    }
    customMenu.buttonElement.appendChild(menuHolder);
    const menuOptions = {
      // getKeyBinding: this.options.getKeybinding,
      // actionRunner: this.actionRunner,
      enableMnemonics: this.options.alwaysOnMnemonics || this.mnemonicsInUse && this.options.enableMnemonics,
      ariaLabel: customMenu.buttonElement.getAttribute('aria-label') ?? undefined
      // expandDirection: this.isCompact ? this.options.compactMode : Direction.Right,
      // useEventAsContext: true
    };

    const menuWidget = this._register(new (_get__("menu_1").CETMenu)(menuHolder, this.menuIcons, this.currentOptions, menuOptions, this.closeMenu));
    menuWidget.createMenu(customMenu.actions?.items ?? []);
    menuWidget.applyStyle(this.menuStyle);
    this._register(menuWidget.onDidCancel(() => {
      this.focusState = _get__("MenubarState").FOCUSED;
    }));
    if (actualMenuIndex !== menuIndex) {
      menuWidget.trigger(menuIndex - this.numMenusShown);
    } else {
      menuWidget.focus(selectFirst);
    }
    this.focusedMenu = {
      index: actualMenuIndex,
      holder: menuHolder,
      widget: menuWidget
    };
  }
}
exports.MenuBar = _get__("MenuBar");
_get__("MenuBar").OVERFLOW_INDEX = -1;
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "__createBinding":
      return __createBinding;
    case "__setModuleDefault":
      return __setModuleDefault;
    case "__importStar":
      return __importStar;
    case "DOM":
      return DOM;
    case "MenubarState":
      return MenubarState;
    case "event_1":
      return event_1;
    case "async_1":
      return async_1;
    case "platform_1":
      return platform_1;
    case "keyboardEvent_1":
      return keyboardEvent_1;
    case "consts_1":
      return consts_1;
    case "$":
      return $;
    case "touch_1":
      return touch_1;
    case "mouseEvent_1":
      return mouseEvent_1;
    case "menu_1":
      return menu_1;
    case "MenuBar":
      return MenuBar;
    case "lifecycle_1":
      return lifecycle_1;
    case "strings":
      return strings;
    case "electron_1":
      return electron_1;
    case "keyCodes_1":
      return keyCodes_1;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {
    case "MenubarState":
      return MenubarState = _value;
  }
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/menubar/menu/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/menubar/menu/index.js ***!
  \*********************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) AlexTorresDev. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CETMenu = exports.Direction = void 0;
const dom_1 = __webpack_require__(/*! ../../base/common/dom */ "./node_modules/custom-electron-titlebar/base/common/dom.js");
const lifecycle_1 = __webpack_require__(/*! ../../base/common/lifecycle */ "./node_modules/custom-electron-titlebar/base/common/lifecycle.js");
const item_1 = __webpack_require__(/*! ./item */ "./node_modules/custom-electron-titlebar/menubar/menu/item.js");
const keyCodes_1 = __webpack_require__(/*! ../../base/common/keyCodes */ "./node_modules/custom-electron-titlebar/base/common/keyCodes.js");
const keyboardEvent_1 = __webpack_require__(/*! ../../base/browser/keyboardEvent */ "./node_modules/custom-electron-titlebar/base/browser/keyboardEvent.js");
const event_1 = __webpack_require__(/*! ../../base/common/event */ "./node_modules/custom-electron-titlebar/base/common/event.js");
const separator_1 = __webpack_require__(/*! ./separator */ "./node_modules/custom-electron-titlebar/menubar/menu/separator.js");
const submenu_1 = __webpack_require__(/*! ./submenu */ "./node_modules/custom-electron-titlebar/menubar/menu/submenu.js");
const platform_1 = __webpack_require__(/*! ../../base/common/platform */ "./node_modules/custom-electron-titlebar/base/common/platform.js");
var Direction;
(function (Direction) {
  Direction[Direction["Right"] = 0] = "Right";
  Direction[Direction["Left"] = 1] = "Left";
})(_get__("Direction") || (exports.Direction = _assign__("Direction", {})));
class CETMenu extends _get__("lifecycle_1").Disposable {
  constructor(menuContainer, menuIcons, parentOptions, currentOptions, closeSubMenu = () => {}) {
    super();
    this.menuContainer = menuContainer;
    this.menuIcons = menuIcons;
    this.parentOptions = parentOptions;
    this.currentOptions = currentOptions;
    this.closeSubMenu = closeSubMenu;
    this.focusedItem = undefined;
    this.items = [];
    this.triggerKeys = {
      keys: [3 /* KeyCode.Enter */, 10 /* KeyCode.Space */],
      keyDown: true
    };
    this.parentData = {
      parent: this
    };
    this._onDidCancel = this._register(new (_get__("event_1").Emitter)());
    this.mnemonics = new Map();
    this._register((0, _get__("dom_1").addDisposableListener)(this.menuContainer, _get__("dom_1").EventType.KEY_DOWN, e => {
      const event = new (_get__("keyboardEvent_1").StandardKeyboardEvent)(e);
      let eventHandled = true;
      if (event.equals(16 /* KeyCode.UpArrow */)) {
        this.focusPrevious();
      } else if (event.equals(18 /* KeyCode.DownArrow */)) {
        this.focusNext();
      } else if (event.equals(9 /* KeyCode.Escape */)) {
        this.cancel();
      } else if (this.isTriggerKeyEvent(event)) {
        // Staying out of the else branch even if not triggered
        if (this.triggerKeys && this.triggerKeys.keyDown) {
          this.doTrigger(event);
        }
      } else {
        eventHandled = false;
      }
      if (eventHandled) {
        event.preventDefault();
        event.stopPropagation();
      }
    }));
    this._register((0, _get__("dom_1").addDisposableListener)(this.menuContainer, _get__("dom_1").EventType.KEY_UP, e => {
      const event = new (_get__("keyboardEvent_1").StandardKeyboardEvent)(e);
      // Run action on Enter/Space
      if (this.isTriggerKeyEvent(event)) {
        if (this.triggerKeys && !this.triggerKeys.keyDown) {
          this.doTrigger(event);
        }
        event.preventDefault();
        event.stopPropagation();
        // Recompute focused item
      } else if (event.equals(2 /* KeyCode.Tab */) || event.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {
        this.updateFocusedItem();
      }
    }));
    if (this.currentOptions.enableMnemonics) {
      this._register((0, _get__("dom_1").addDisposableListener)(this.menuContainer, _get__("dom_1").EventType.KEY_DOWN, e => {
        const key = _get__("keyCodes_1").KeyCodeUtils.fromString(e.key);
        if (this.mnemonics.has(key)) {
          const items = this.mnemonics.get(key);
          if (items.length === 1) {
            if (items[0] instanceof _get__("submenu_1").CETSubMenu) {
              this.focusItemByElement(items[0].element);
            }
            items[0].onClick(e);
          }
          if (items.length > 1) {
            const item = items.shift();
            if (item) {
              this.focusItemByElement(item.element);
              items.push(item);
            }
            this.mnemonics.set(key, items);
          }
        }
      }));
    }
    if (_get__("platform_1").isLinux) {
      this._register((0, _get__("dom_1").addDisposableListener)(this.menuContainer, _get__("dom_1").EventType.KEY_DOWN, e => {
        const event = new (_get__("keyboardEvent_1").StandardKeyboardEvent)(e);
        if (event.equals(14 /* KeyCode.Home */) || event.equals(11 /* KeyCode.PageUp */)) {
          this.focusedItem = this.items.length - 1;
          this.focusNext();
          _get__("dom_1").EventHelper.stop(e, true);
        } else if (event.equals(13 /* KeyCode.End */) || event.equals(12 /* KeyCode.PageDown */)) {
          this.focusedItem = 0;
          this.focusPrevious();
          _get__("dom_1").EventHelper.stop(e, true);
        }
      }));
    }
    if (_get__("platform_1").isFreeBSD) {
      this._register((0, _get__("dom_1").addDisposableListener)(this.menuContainer, _get__("dom_1").EventType.KEY_DOWN, e => {
        const event = new (_get__("keyboardEvent_1").StandardKeyboardEvent)(e);
        if (event.equals(14 /* KeyCode.Home */) || event.equals(11 /* KeyCode.PageUp */)) {
          this.focusedItem = this.items.length - 1;
          this.focusNext();
          _get__("dom_1").EventHelper.stop(e, true);
        } else if (event.equals(13 /* KeyCode.End */) || event.equals(12 /* KeyCode.PageDown */)) {
          this.focusedItem = 0;
          this.focusPrevious();
          _get__("dom_1").EventHelper.stop(e, true);
        }
      }));
    }
    this._register((0, _get__("dom_1").addDisposableListener)(this.menuContainer, _get__("dom_1").EventType.MOUSE_OUT, e => {
      const relatedTarget = e.relatedTarget;
      if (!(0, _get__("dom_1").isAncestor)(relatedTarget, this.menuContainer)) {
        this.focusedItem = undefined;
        this.updateFocus();
        e.stopPropagation();
      }
    }));
    this._register((0, _get__("dom_1").addDisposableListener)(this.menuContainer, _get__("dom_1").EventType.MOUSE_UP, e => {
      // Absorb clicks in menu dead space https://github.com/Microsoft/vscode/issues/63575
      _get__("dom_1").EventHelper.stop(e, true);
    }));
    this._register((0, _get__("dom_1").addDisposableListener)(this.menuContainer, _get__("dom_1").EventType.MOUSE_OVER, e => {
      let target = e.target;
      if (!target || !(0, _get__("dom_1").isAncestor)(target, this.menuContainer) || target === this.menuContainer) {
        return;
      }
      while (target.parentElement !== this.menuContainer && target.parentElement !== null) {
        target = target.parentElement;
      }
      if ((0, _get__("dom_1").hasClass)(target, 'cet-action-item')) {
        const lastFocusedItem = this.focusedItem;
        this.setFocusedItem(target);
        if (lastFocusedItem !== this.focusedItem) {
          this.updateFocus();
        }
      }
    }));
    if (this.currentOptions.ariaLabel) {
      this.menuContainer.setAttribute('aria-label', this.currentOptions.ariaLabel);
    }
  }
  trigger(index) {
    if (index <= this.items.length && index >= 0) {
      const item = this.items[index];
      if (item instanceof _get__("submenu_1").CETSubMenu) {
        this.focus(index);
      }
    }
  }
  createMenu(menuItems) {
    if (!menuItems) return;
    menuItems.forEach(menuItem => {
      if (!menuItem) return;
      const itemElement = (0, _get__("dom_1").$)('li.cet-action-item', {
        role: 'presentation'
      });
      // Prevent native context menu on actions
      this._register((0, _get__("dom_1").addDisposableListener)(itemElement, _get__("dom_1").EventType.CONTEXT_MENU, e => {
        e.preventDefault();
        e.stopPropagation();
      }));
      let item;
      if (menuItem.type === 'separator') {
        item = new (_get__("separator_1").CETSeparator)(menuItem, this.menuIcons, this.parentOptions, this.currentOptions);
      } else if (menuItem.type === 'submenu' || menuItem.submenu) {
        const submenuItems = menuItem.submenu.items;
        item = new (_get__("submenu_1").CETSubMenu)(menuItem, this.menuIcons, submenuItems, this.parentData, this.parentOptions, this.currentOptions, this.closeSubMenu);
        if (this.currentOptions.enableMnemonics) {
          const mnemonic = item.mnemonic;
          if (mnemonic && item.isEnabled()) {
            let actionItems = [];
            if (this.mnemonics.has(mnemonic)) {
              actionItems = this.mnemonics.get(mnemonic);
            }
            actionItems.push(item);
            this.mnemonics.set(mnemonic, actionItems);
          }
        }
      } else {
        item = new (_get__("item_1").CETMenuItem)(menuItem, this.menuIcons, this.parentOptions, this.currentOptions, this.items, this.closeSubMenu);
        if (this.currentOptions.enableMnemonics) {
          const mnemonic = item.mnemonic;
          if (mnemonic && item.isEnabled()) {
            let actionItems = [];
            if (this.mnemonics.has(mnemonic)) {
              actionItems = this.mnemonics.get(mnemonic);
            }
            actionItems.push(item);
            this.mnemonics.set(mnemonic, actionItems);
          }
        }
      }
      item.render(itemElement);
      this.items.push(item);
      (0, _get__("dom_1").append)(this.menuContainer, itemElement);
    });
  }
  isTriggerKeyEvent(event) {
    let ret = false;
    if (this.triggerKeys) {
      this.triggerKeys.keys.forEach(keyCode => {
        ret = ret || event.equals(keyCode);
      });
    }
    return ret;
  }
  updateFocusedItem() {
    for (let i = 0; i < this.menuContainer.children.length; i++) {
      const elem = this.menuContainer.children[i];
      if ((0, _get__("dom_1").isAncestor)(document.activeElement, elem)) {
        this.focusedItem = i;
        break;
      }
    }
  }
  focus(arg) {
    let selectFirst = false;
    let index;
    if (arg === undefined) {
      selectFirst = true;
    } else if (typeof arg === 'number') {
      index = arg;
    } else if (typeof arg === 'boolean') {
      selectFirst = arg;
    }
    if (selectFirst && typeof this.focusedItem === 'undefined') {
      // Focus the first enabled item
      this.focusedItem = this.items.length - 1;
      this.focusNext();
    } else {
      if (index !== undefined) {
        this.focusedItem = index;
      }
      this.updateFocus();
    }
  }
  focusNext() {
    if (typeof this.focusedItem === 'undefined') {
      this.focusedItem = this.items.length - 1;
    }
    const startIndex = this.focusedItem;
    let item;
    do {
      this.focusedItem = (this.focusedItem + 1) % this.items.length;
      item = this.items[this.focusedItem];
    } while (this.focusedItem !== startIndex && !item.isEnabled() || item.isSeparator());
    if (this.focusedItem === startIndex && !item.isEnabled() || item.isSeparator()) {
      this.focusedItem = undefined;
    }
    this.updateFocus();
  }
  focusPrevious() {
    if (typeof this.focusedItem === 'undefined') {
      this.focusedItem = 0;
    }
    const startIndex = this.focusedItem;
    let item;
    do {
      this.focusedItem = this.focusedItem - 1;
      if (this.focusedItem < 0) {
        this.focusedItem = this.items.length - 1;
      }
      item = this.items[this.focusedItem];
    } while (this.focusedItem !== startIndex && !item.isEnabled() || item.isSeparator());
    if (this.focusedItem === startIndex && !item.isEnabled() || item.isSeparator()) {
      this.focusedItem = undefined;
    }
    this.updateFocus();
  }
  updateFocus() {
    if (typeof this.focusedItem === 'undefined') {
      this.menuContainer.focus();
    }
    for (let i = 0; i < this.items.length; i++) {
      const item = this.items[i];
      if (i === this.focusedItem) {
        if (item.isEnabled()) {
          item.focus();
        } else {
          this.menuContainer.focus();
        }
      } else {
        item.blur();
      }
    }
  }
  doTrigger(event) {
    if (typeof this.focusedItem === 'undefined') {
      return; // nothing to focus
    }
    // trigger action
    const item = this.items[this.focusedItem];
    if (item instanceof _get__("item_1").CETMenuItem) {
      item.onClick(event);
    }
  }
  cancel() {
    if (document.activeElement instanceof HTMLElement) {
      document.activeElement.blur(); // remove focus from focused action
    }

    this._onDidCancel.fire();
  }
  focusItemByElement(element) {
    const lastFocusedItem = this.focusedItem;
    if (element) this.setFocusedItem(element);
    if (lastFocusedItem !== this.focusedItem) {
      this.updateFocus();
    }
  }
  setFocusedItem(element) {
    this.focusedItem = Array.prototype.findIndex.call(this.container.children, elem => elem === element);
  }
  applyStyle(style) {
    const container = this.menuContainer;
    if (style?.backgroundColor) {
      let transparency = this.parentOptions?.menuTransparency;
      if (transparency < 0) transparency = 0;
      if (transparency > 1) transparency = 1;
      const rgba = style.backgroundColor?.rgba;
      container.style.backgroundColor = `rgb(${rgba.r} ${rgba.g} ${rgba.b} / ${1 - transparency})`;
    }
    if (this.items) {
      this.items.forEach(item => {
        if (item instanceof _get__("item_1").CETMenuItem || item instanceof _get__("separator_1").CETSeparator) {
          item.updateStyle(style);
        }
      });
    }
  }
  get container() {
    return this.menuContainer;
  }
  get onDidCancel() {
    return this._onDidCancel.event;
  }
  dispose() {
    (0, _get__("lifecycle_1").dispose)(this.items);
    this.items = [];
    (0, _get__("dom_1").removeNode)(this.container);
    super.dispose();
  }
}
exports.CETMenu = _get__("CETMenu");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "Direction":
      return Direction;
    case "event_1":
      return event_1;
    case "dom_1":
      return dom_1;
    case "keyboardEvent_1":
      return keyboardEvent_1;
    case "keyCodes_1":
      return keyCodes_1;
    case "submenu_1":
      return submenu_1;
    case "platform_1":
      return platform_1;
    case "separator_1":
      return separator_1;
    case "item_1":
      return item_1;
    case "lifecycle_1":
      return lifecycle_1;
    case "CETMenu":
      return CETMenu;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {
    case "Direction":
      return Direction = _value;
  }
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/menubar/menu/item.js":
/*!********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/menubar/menu/item.js ***!
  \********************************************************************/
/***/ (function(module, exports, __webpack_require__) {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) AlexTorresDev. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
var __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function () {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = this && this.__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) _get__("__createBinding")(result, mod, k);
  _get__("__setModuleDefault")(result, mod);
  return result;
};
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CETMenuItem = void 0;
const electron_1 = __webpack_require__(/*! electron */ "electron");
const dom_1 = __webpack_require__(/*! ../../base/common/dom */ "./node_modules/custom-electron-titlebar/base/common/dom.js");
const keyCodes_1 = __webpack_require__(/*! ../../base/common/keyCodes */ "./node_modules/custom-electron-titlebar/base/common/keyCodes.js");
const lifecycle_1 = __webpack_require__(/*! ../../base/common/lifecycle */ "./node_modules/custom-electron-titlebar/base/common/lifecycle.js");
const consts_1 = __webpack_require__(/*! ../../consts */ "./node_modules/custom-electron-titlebar/consts.js");
const strings = _get__("__importStar")(__webpack_require__(/*! ../../base/common/strings */ "./node_modules/custom-electron-titlebar/base/common/strings.js"));
class CETMenuItem extends _get__("lifecycle_1").Disposable {
  constructor(_item, menuIcons, parentOptions, options, menuItems, closeSubMenu = () => {}) {
    super();
    this._item = _item;
    this.menuIcons = menuIcons;
    this.parentOptions = parentOptions;
    this.options = options;
    this.menuItems = menuItems;
    this.closeSubMenu = closeSubMenu;
    // Set mnemonic
    if (this._item.label && options.enableMnemonics) {
      const label = this._item.label;
      if (label) {
        const matches = _get__("consts_1").MENU_MNEMONIC_REGEX.exec(label);
        if (matches) {
          this._mnemonic = _get__("keyCodes_1").KeyCodeUtils.fromString((!!matches[1] ? matches[1] : matches[2]).toLocaleUpperCase());
        }
      }
    }
  }
  render(el) {
    this._currentElement = el;
    this._register((0, _get__("dom_1").addDisposableListener)(this.element, _get__("dom_1").EventType.MOUSE_DOWN, e => {
      if (this.item.enabled && e.button === 0 && this.element) {
        (0, _get__("dom_1").addClass)(this.element, 'active');
      }
    }));
    this._register((0, _get__("dom_1").addDisposableListener)(this.element, _get__("dom_1").EventType.CLICK, e => {
      if (this.item.enabled) {
        this.onClick(e);
      }
    }));
    this._register((0, _get__("dom_1").addDisposableListener)(this.element, _get__("dom_1").EventType.DBLCLICK, e => {
      _get__("dom_1").EventHelper.stop(e, true);
    }));
    [_get__("dom_1").EventType.MOUSE_UP, _get__("dom_1").EventType.MOUSE_OUT].forEach(event => {
      this._register((0, _get__("dom_1").addDisposableListener)(this.element, event, e => {
        _get__("dom_1").EventHelper.stop(e);
        (0, _get__("dom_1").removeClass)(this.element, 'active');
      }));
    });
    this.itemElement = (0, _get__("dom_1").append)(this.element, (0, _get__("dom_1").$)('a.cet-action-menu-item'));
    if (this.mnemonic) {
      this.itemElement.setAttribute('aria-keyshortcuts', `${this.mnemonic}`);
    }
    this.iconElement = (0, _get__("dom_1").append)(this.itemElement, (0, _get__("dom_1").$)('span.cet-menu-item-icon'));
    this.iconElement.setAttribute('role', 'none');
    this.labelElement = (0, _get__("dom_1").append)(this.itemElement, (0, _get__("dom_1").$)('span.cet-action-label'));
    this.updateLabel();
    this.setAccelerator();
    this.updateIcon();
    this.updateTooltip();
    this.updateEnabled();
    this.updateChecked();
    this.updateVisibility();
  }
  onClick(event) {
    _get__("dom_1").EventHelper.stop(event, true);
    _get__("electron_1").ipcRenderer.send('menu-event', this.item.commandId);
    if (this.item.type === 'checkbox') {
      this.item.checked = !this.item.checked;
      this.updateChecked();
    } else if (this.item.type === 'radio') {
      this.updateRadioGroup();
    }
    this.closeSubMenu();
  }
  applyStyle() {
    if (!this.menuStyle) {
      return;
    }
    const isSelected = this.element && (0, _get__("dom_1").hasClass)(this.element, 'focused');
    const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;
    const bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : null;
    if (this.itemElement) {
      this.itemElement.style.color = fgColor ? fgColor.toString() : '';
      this.itemElement.style.backgroundColor = bgColor ? bgColor.toString() : '';
      if (this.iconElement) {
        if (this.iconElement.firstElementChild?.className === 'icon') {
          (0, _get__("consts_1").applyFill)(this.iconElement.firstElementChild, this.parentOptions?.svgColor, fgColor, false);
        } else {
          (0, _get__("consts_1").applyFill)(this.iconElement, this.parentOptions?.svgColor, fgColor);
        }
      }
    }
  }
  updateStyle(style) {
    this.menuStyle = style;
    this.applyStyle();
  }
  focus() {
    if (this.element) {
      this.element.focus();
      (0, _get__("dom_1").addClass)(this.element, 'focused');
    }
    this.applyStyle();
  }
  blur() {
    if (this.element) {
      this.element.blur();
      (0, _get__("dom_1").removeClass)(this.element, 'focused');
    }
    this.applyStyle();
  }
  setAccelerator() {
    let accelerator = null;
    if (this.item.role) {
      switch (this.item.role.toLocaleLowerCase()) {
        case 'undo':
          accelerator = 'CtrlOrCmd+Z';
          break;
        case 'redo':
          accelerator = 'CtrlOrCmd+Y';
          break;
        case 'cut':
          accelerator = 'CtrlOrCmd+X';
          break;
        case 'copy':
          accelerator = 'CtrlOrCmd+C';
          break;
        case 'paste':
          accelerator = 'CtrlOrCmd+V';
          break;
        case 'selectall':
          accelerator = 'CtrlOrCmd+A';
          break;
        case 'minimize':
          accelerator = 'CtrlOrCmd+M';
          break;
        case 'close':
          accelerator = 'CtrlOrCmd+W';
          break;
        case 'reload':
          accelerator = 'CtrlOrCmd+R';
          break;
        case 'forcereload':
          accelerator = 'CtrlOrCmd+Shift+R';
          break;
        case 'toggledevtools':
          accelerator = 'CtrlOrCmd+Shift+I';
          break;
        case 'togglefullscreen':
          accelerator = 'F11';
          break;
        case 'resetzoom':
          accelerator = 'CtrlOrCmd+0';
          break;
        case 'zoomin':
          accelerator = 'CtrlOrCmd++';
          break;
        case 'zoomout':
          accelerator = 'CtrlOrCmd+-';
          break;
      }
    }
    if (this.item.label && this.item.accelerator) {
      accelerator = this.item.accelerator;
    }
    if (this.itemElement && accelerator !== null) {
      (0, _get__("dom_1").append)(this.itemElement, (0, _get__("dom_1").$)('span.keybinding')).textContent = (0, _get__("consts_1").parseAccelerator)(accelerator);
    }
  }
  updateLabel() {
    const label = this.item.label || '';
    const cleanMenuLabel = (0, _get__("consts_1").cleanMnemonic)(label);
    // Update the button label to reflect mnemonics
    if (this.options.enableMnemonics) {
      const cleanLabel = _get__("strings").escape(label);
      // This is global so reset it
      _get__("consts_1").MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;
      let escMatch = _get__("consts_1").MENU_ESCAPED_MNEMONIC_REGEX.exec(cleanLabel);
      // We can't use negative lookbehind so we match our negative and skip
      while (escMatch && escMatch[1]) {
        escMatch = _get__("consts_1").MENU_ESCAPED_MNEMONIC_REGEX.exec(cleanLabel);
      }
      const replaceDoubleEscapes = str => str.replace(/&amp;&amp;/g, '&amp;');
      if (escMatch) {
        this.labelElement.innerText = '';
        this.labelElement.append(_get__("strings").ltrim(replaceDoubleEscapes(cleanLabel.substring(0, escMatch.index)), ' '), (0, _get__("dom_1").$)('mnemonic', {
          'aria-hidden': 'true'
        }, escMatch[3]), _get__("strings").rtrim(replaceDoubleEscapes(cleanLabel.substring(escMatch.index + escMatch[0].length)), ' '));
      } else {
        this.labelElement.innerText = replaceDoubleEscapes(cleanLabel).trim();
      }
    } else {
      this.labelElement.innerText = cleanMenuLabel.replace(/&&/g, '&');
    }
    const mnemonicMatches = _get__("consts_1").MENU_MNEMONIC_REGEX.exec(label);
    // Register mnemonics
    if (mnemonicMatches) {
      const mnemonic = !!mnemonicMatches[1] ? mnemonicMatches[1] : mnemonicMatches[3];
      if (this.options.enableMnemonics) {
        this.itemElement?.setAttribute('aria-keyshortcuts', 'Alt+' + mnemonic.toLocaleLowerCase());
      } else {
        this.itemElement?.removeAttribute('aria-keyshortcuts');
      }
    }
  }
  updateIcon() {
    if (this.item.icon) {
      const icon = this.item.icon;
      if (this.iconElement && icon) {
        const iconE = (0, _get__("dom_1").append)(this.iconElement, (0, _get__("dom_1").$)('.icon'));
        let iconData;
        if (typeof this.item.icon !== 'string') {
          iconData = _get__("electron_1").ipcRenderer.sendSync('menu-icon', this.item.commandId);
        } else {
          const iconPath = this.item.icon;
          iconData = _get__("electron_1").nativeImage.createFromPath(iconPath).toDataURL();
        }
        if (iconData) iconE.style.webkitMaskBoxImage = `url(${iconData})`;
      }
    } else if (this.iconElement && this.item.type === 'checkbox') {
      (0, _get__("dom_1").addClass)(this.iconElement, 'checkbox');
      this.iconElement.innerHTML = this.menuIcons.checkbox;
    } else if (this.item.type === 'radio') {
      (0, _get__("dom_1").addClass)(this.iconElement, 'radio');
      this.iconElement.innerHTML = this.item.checked ? this.menuIcons.radioChecked : this.menuIcons.radioUnchecked;
    }
    (0, _get__("consts_1").applyFill)(this.iconElement, this.parentOptions?.svgColor, this.menuStyle?.foregroundColor);
  }
  updateTooltip() {
    let title = null;
    if (this.item.sublabel) {
      title = this.item.sublabel;
    } else if (!this.item.label && this.item.label && this.item.icon) {
      title = this.item.label;
      if (this.item.accelerator) {
        title = (0, _get__("consts_1").parseAccelerator)(this.item.accelerator);
      }
    }
    if (this.itemElement && title) {
      this.itemElement.title = title;
    }
  }
  updateEnabled() {
    if (this.element) {
      if (this.item.enabled && this.item.type !== 'separator') {
        (0, _get__("dom_1").removeClass)(this.element, 'disabled');
        this.element.tabIndex = 0;
      } else {
        (0, _get__("dom_1").addClass)(this.element, 'disabled');
      }
    }
  }
  updateVisibility() {
    if (this.item.visible === false && this.itemElement) {
      this.itemElement.remove();
    }
  }
  updateChecked() {
    if (this.itemElement) {
      if (this.item.checked) {
        (0, _get__("dom_1").addClass)(this.itemElement, 'checked');
        this.itemElement.setAttribute('aria-checked', 'true');
      } else {
        (0, _get__("dom_1").removeClass)(this.itemElement, 'checked');
        this.itemElement.setAttribute('aria-checked', 'false');
      }
    }
  }
  updateRadioGroup() {
    if (this.radioGroup === undefined) {
      this.radioGroup = this.getRadioGroup();
    }
    if (this.menuItems) {
      for (let i = this.radioGroup.start; i < this.radioGroup.end; i++) {
        const menuItem = this.menuItems[i];
        if (menuItem instanceof _get__("CETMenuItem") && menuItem.item.type === 'radio') {
          // update item.checked for each radio button in group
          menuItem.item.checked = menuItem === this;
          menuItem.updateIcon();
          // updateChecked() *all* radio buttons in group
          menuItem.updateChecked();
          // set the radioGroup property of all the other radio buttons since it was already calculated
          if (menuItem !== this) {
            menuItem.radioGroup = this.radioGroup;
          }
        }
      }
    }
  }
  /** radioGroup index's starts with (previous separator +1 OR menuItems[0]) and ends with (next separator OR menuItems[length]) */
  getRadioGroup() {
    let startIndex = 0;
    let endIndex = this.menuItems ? this.menuItems.length : 0;
    let found = false;
    if (this.menuItems) {
      for (const index in this.menuItems) {
        const menuItem = this.menuItems[index];
        if (menuItem === this) {
          found = true;
        } else if (menuItem instanceof _get__("CETMenuItem") && menuItem.isSeparator()) {
          if (found) {
            endIndex = Number.parseInt(index);
            break;
          } else {
            startIndex = Number.parseInt(index) + 1;
          }
        }
      }
    }
    return {
      start: startIndex,
      end: endIndex
    };
  }
  get element() {
    return this._currentElement;
  }
  get item() {
    return this._item;
  }
  isEnabled() {
    return this.item.enabled;
  }
  isSeparator() {
    return this.item.type === 'separator';
  }
  get mnemonic() {
    return this._mnemonic;
  }
  dispose() {
    if (this.itemElement) {
      (0, _get__("dom_1").removeNode)(this.itemElement);
      this.itemElement = undefined;
    }
    super.dispose();
  }
}
exports.CETMenuItem = _get__("CETMenuItem");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "__createBinding":
      return __createBinding;
    case "__setModuleDefault":
      return __setModuleDefault;
    case "__importStar":
      return __importStar;
    case "consts_1":
      return consts_1;
    case "keyCodes_1":
      return keyCodes_1;
    case "dom_1":
      return dom_1;
    case "electron_1":
      return electron_1;
    case "strings":
      return strings;
    case "CETMenuItem":
      return CETMenuItem;
    case "lifecycle_1":
      return lifecycle_1;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/menubar/menu/separator.js":
/*!*************************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/menubar/menu/separator.js ***!
  \*************************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) AlexTorresDev. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CETSeparator = void 0;
const item_1 = __webpack_require__(/*! ./item */ "./node_modules/custom-electron-titlebar/menubar/menu/item.js");
const dom_1 = __webpack_require__(/*! ../../base/common/dom */ "./node_modules/custom-electron-titlebar/base/common/dom.js");
class CETSeparator extends _get__("item_1").CETMenuItem {
  constructor(item, submenuIcons, submenuParentOptions, submenuOptions) {
    super(item, submenuIcons, submenuParentOptions, submenuOptions);
  }
  render(container) {
    if (container) {
      this.separatorElement = (0, _get__("dom_1").append)(container, (0, _get__("dom_1").$)('a.cet-action-label.separator', {
        role: 'presentation'
      }));
    }
  }
  updateStyle(style) {
    if (this.separatorElement && style.separatorColor) {
      this.separatorElement.style.borderBottomColor = style.separatorColor.toString();
    }
  }
}
exports.CETSeparator = _get__("CETSeparator");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "dom_1":
      return dom_1;
    case "item_1":
      return item_1;
    case "CETSeparator":
      return CETSeparator;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/menubar/menu/submenu.js":
/*!***********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/menubar/menu/submenu.js ***!
  \***********************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) AlexTorresDev. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CETSubMenu = void 0;
const consts_1 = __webpack_require__(/*! ../../consts */ "./node_modules/custom-electron-titlebar/consts.js");
const item_1 = __webpack_require__(/*! ./item */ "./node_modules/custom-electron-titlebar/menubar/menu/item.js");
const lifecycle_1 = __webpack_require__(/*! ../../base/common/lifecycle */ "./node_modules/custom-electron-titlebar/base/common/lifecycle.js");
const dom_1 = __webpack_require__(/*! ../../base/common/dom */ "./node_modules/custom-electron-titlebar/base/common/dom.js");
const keyboardEvent_1 = __webpack_require__(/*! ../../base/browser/keyboardEvent */ "./node_modules/custom-electron-titlebar/base/browser/keyboardEvent.js");
const index_1 = __webpack_require__(/*! ./index */ "./node_modules/custom-electron-titlebar/menubar/menu/index.js");
const async_1 = __webpack_require__(/*! ../../base/common/async */ "./node_modules/custom-electron-titlebar/base/common/async.js");
class CETSubMenu extends _get__("item_1").CETMenuItem {
  constructor(item, submenuIcons, submenuItems, parentData, submenuParentOptions, submenuOptions, closeSubMenu = () => {}) {
    super(item, submenuIcons, submenuParentOptions, submenuOptions);
    this.submenuIcons = submenuIcons;
    this.submenuItems = submenuItems;
    this.parentData = parentData;
    this.submenuParentOptions = submenuParentOptions;
    this.submenuOptions = submenuOptions;
    this.submenuDisposables = [];
    this.mouseOver = false;
    this._closeSubMenu = () => {};
    this._closeSubMenu = closeSubMenu;
    this.showScheduler = new (_get__("async_1").RunOnceScheduler)(() => {
      if (this.mouseOver) {
        this.cleanupExistingSubmenu(false);
        this.createSubmenu(false);
      }
    }, 250);
    this.hideScheduler = new (_get__("async_1").RunOnceScheduler)(() => {
      if (this.element && !(0, _get__("dom_1").isAncestor)(document.activeElement, this.element) && this.parentData.submenu === this.mySubmenu) {
        this.parentData.parent.focus(false);
        this.cleanupExistingSubmenu(true);
      }
    }, 750);
  }
  render(el) {
    super.render(el);
    if (!this.itemElement) {
      return;
    }
    (0, _get__("dom_1").addClass)(this.itemElement, 'cet-submenu-item');
    this.itemElement.setAttribute('aria-haspopup', 'true');
    this.submenuIndicator = (0, _get__("dom_1").append)(this.itemElement, (0, _get__("dom_1").$)('span.cet-submenu-indicator'));
    this.submenuIndicator.innerHTML = this.submenuIcons.submenuIndicator;
    this.submenuIndicator.setAttribute('aria-hidden', 'true');
    (0, _get__("consts_1").applyFill)(this.submenuIndicator, this.menuStyle?.svgColor, this.menuStyle?.foregroundColor);
    if (this.element) {
      (0, _get__("dom_1").addDisposableListener)(this.element, _get__("dom_1").EventType.KEY_UP, e => {
        const event = new (_get__("keyboardEvent_1").StandardKeyboardEvent)(e);
        if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {
          _get__("dom_1").EventHelper.stop(e, true);
          this.createSubmenu(true);
        }
      });
      (0, _get__("dom_1").addDisposableListener)(this.element, _get__("dom_1").EventType.KEY_DOWN, e => {
        const event = new (_get__("keyboardEvent_1").StandardKeyboardEvent)(e);
        if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {
          _get__("dom_1").EventHelper.stop(e, true);
        }
      });
      (0, _get__("dom_1").addDisposableListener)(this.element, _get__("dom_1").EventType.MOUSE_OVER, e => {
        if (!this.mouseOver) {
          this.mouseOver = true;
          this.showScheduler.schedule();
        }
      });
      (0, _get__("dom_1").addDisposableListener)(this.element, _get__("dom_1").EventType.MOUSE_LEAVE, e => {
        this.mouseOver = false;
      });
      (0, _get__("dom_1").addDisposableListener)(this.element, _get__("dom_1").EventType.FOCUS_OUT, e => {
        if (this.element && !(0, _get__("dom_1").isAncestor)(document.activeElement, this.element)) {
          this.hideScheduler.schedule();
        }
      });
    }
  }
  cleanupExistingSubmenu(force) {
    if (this.parentData.submenu && (force || this.parentData.submenu !== this.mySubmenu)) {
      this.parentData.submenu.dispose();
      this.parentData.submenu = undefined;
      if (this.submenuContainer) {
        this.submenuContainer = undefined;
      }
    }
  }
  createSubmenu(selectFirstItem = true) {
    if (!this.itemElement) {
      return;
    }
    if (this.element) {
      if (!this.parentData.submenu) {
        this.submenuContainer = (0, _get__("dom_1").append)(this.element, (0, _get__("dom_1").$)('.cet-submenu'));
        (0, _get__("dom_1").addClasses)(this.submenuContainer, 'cet-menubar-menu-container');
        this.parentData.submenu = new (_get__("index_1").CETMenu)(this.submenuContainer, this.submenuIcons, this.submenuParentOptions, this.submenuOptions, this._closeSubMenu);
        this.parentData.submenu.createMenu(this.submenuItems);
        if (this.menuStyle) {
          this.parentData.submenu.applyStyle(this.menuStyle);
        }
        const boundingRect = this.element.getBoundingClientRect();
        const childBoundingRect = this.submenuContainer.getBoundingClientRect();
        const computedStyles = getComputedStyle(this.parentData.parent.container);
        const paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;
        if (window.innerWidth <= boundingRect.right + childBoundingRect.width) {
          this.submenuContainer.style.left = '10px';
          this.submenuContainer.style.top = `${this.element.offsetTop + boundingRect.height}px`;
        } else {
          this.submenuContainer.style.left = `${this.element.offsetWidth}px`;
          this.submenuContainer.style.top = `${this.element.offsetTop - paddingTop}px`;
        }
        this.submenuDisposables.push((0, _get__("dom_1").addDisposableListener)(this.submenuContainer, _get__("dom_1").EventType.KEY_UP, e => {
          const event = new (_get__("keyboardEvent_1").StandardKeyboardEvent)(e);
          if (event.equals(15 /* KeyCode.LeftArrow */)) {
            _get__("dom_1").EventHelper.stop(e, true);
            this.parentData.parent.focus();
            if (this.parentData.submenu) {
              this.parentData.submenu.dispose();
              this.parentData.submenu = undefined;
            }
            this.submenuDisposables = (0, _get__("lifecycle_1").dispose)(this.submenuDisposables);
            this.submenuContainer = undefined;
          }
        }));
        this.submenuDisposables.push((0, _get__("dom_1").addDisposableListener)(this.submenuContainer, _get__("dom_1").EventType.KEY_DOWN, e => {
          const event = new (_get__("keyboardEvent_1").StandardKeyboardEvent)(e);
          if (event.equals(15 /* KeyCode.LeftArrow */)) {
            _get__("dom_1").EventHelper.stop(e, true);
          }
        }));
        this.submenuDisposables.push(this.parentData.submenu.onDidCancel(() => {
          this.parentData.parent.focus();
          if (this.parentData.submenu) {
            this.parentData.submenu.dispose();
            this.parentData.submenu = undefined;
          }
          this.submenuDisposables = (0, _get__("lifecycle_1").dispose)(this.submenuDisposables);
          this.submenuContainer = undefined;
        }));
        this.parentData.submenu.focus(selectFirstItem);
        this.mySubmenu = this.parentData.submenu;
      } else {
        this.parentData.submenu.focus(false);
      }
    }
  }
  applyStyle() {
    super.applyStyle();
    if (!this.menuStyle) return;
    const isSelected = this.element && (0, _get__("dom_1").hasClass)(this.element, 'focused');
    const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;
    (0, _get__("consts_1").applyFill)(this.submenuIndicator, this.submenuParentOptions.svgColor, fgColor);
    if (this.parentData.submenu) this.parentData.submenu.applyStyle(this.menuStyle);
  }
  onClick(e) {
    // stop clicking from trying to run an action
    _get__("dom_1").EventHelper.stop(e, true);
    this.cleanupExistingSubmenu(false);
    this.createSubmenu(false);
  }
  dispose() {
    super.dispose();
    this.hideScheduler.dispose();
    if (this.mySubmenu) {
      this.mySubmenu.dispose();
      this.mySubmenu = null;
    }
    if (this.submenuContainer) {
      this.submenuDisposables = (0, _get__("lifecycle_1").dispose)(this.submenuDisposables);
      this.submenuContainer = undefined;
    }
  }
}
exports.CETSubMenu = _get__("CETSubMenu");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "async_1":
      return async_1;
    case "dom_1":
      return dom_1;
    case "consts_1":
      return consts_1;
    case "keyboardEvent_1":
      return keyboardEvent_1;
    case "index_1":
      return index_1;
    case "lifecycle_1":
      return lifecycle_1;
    case "item_1":
      return item_1;
    case "CETSubMenu":
      return CETSubMenu;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/titlebar/index.js":
/*!*****************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/titlebar/index.js ***!
  \*****************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) AlexTorresDev. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.CustomTitlebar = void 0;
const electron_1 = __webpack_require__(/*! electron */ "electron");
const color_1 = __webpack_require__(/*! ../base/common/color */ "./node_modules/custom-electron-titlebar/base/common/color.js");
const dom_1 = __webpack_require__(/*! ../base/common/dom */ "./node_modules/custom-electron-titlebar/base/common/dom.js");
const platform_1 = __webpack_require__(/*! ../base/common/platform */ "./node_modules/custom-electron-titlebar/base/common/platform.js");
const menubar_1 = __webpack_require__(/*! ../menubar */ "./node_modules/custom-electron-titlebar/menubar/index.js");
const themebar_1 = __webpack_require__(/*! ./themebar */ "./node_modules/custom-electron-titlebar/titlebar/themebar.js");
const consts_1 = __webpack_require__(/*! ../consts */ "./node_modules/custom-electron-titlebar/consts.js");
class CustomTitlebar extends _get__("themebar_1").ThemeBar {
  /**
   * Create a new TitleBar instance
   * @param options The options for the title bar
   */
  constructor(options) {
    super();
    this.isInactive = false;
    this.currentOptions = {
      closeable: true,
      enableMnemonics: true,
      // hideWhenClickingClose: false,
      iconSize: 16,
      itemBackgroundColor: undefined,
      maximizable: true,
      menuPosition: 'left',
      menuTransparency: 0,
      minimizable: true,
      onlyShowMenuBar: false,
      shadow: false,
      titleHorizontalAlignment: 'center',
      tooltips: {
        close: 'Close',
        maximize: 'Maximize',
        minimize: 'Minimize',
        restoreDown: 'Restore Down'
      }
    };
    // TODO: Refactor, verify if is possible use into menubar
    this.closeMenu = () => {
      if (this.menuBar) {
        this.menuBar.blur();
      }
    };
    this.currentOptions = {
      ...this.currentOptions,
      ...options
    };
    const jWindowIcons = _get__("consts_1").menuIcons[(0, _get__("platform_1").PlatformToString)(_get__("platform_1").platform)?.toLocaleLowerCase()];
    this.platformIcons = jWindowIcons;
    this.titlebar = (0, _get__("dom_1").$)('.cet-titlebar');
    this.dragRegion = (0, _get__("dom_1").$)('.cet-drag-region');
    this.icon = (0, _get__("dom_1").$)('.cet-icon');
    this.menuBarContainer = (0, _get__("dom_1").$)('.cet-menubar');
    this.title = (0, _get__("dom_1").$)('.cet-title');
    this.controlsContainer = (0, _get__("dom_1").$)('.cet-window-controls');
    this.container = (0, _get__("dom_1").$)('.cet-container');
    this.controls = {
      minimize: (0, _get__("dom_1").$)('.cet-control-minimize'),
      maximize: (0, _get__("dom_1").$)('.cet-control-maximize'),
      close: (0, _get__("dom_1").$)('.cet-control-close')
    };
    this.resizer = {
      top: (0, _get__("dom_1").$)('.cet-resizer.top'),
      left: (0, _get__("dom_1").$)('.cet-resizer.left')
    };
    (0, _get__("dom_1").append)(this.titlebar, this.dragRegion);
    (0, _get__("dom_1").append)(this.titlebar, this.resizer.left);
    (0, _get__("dom_1").append)(this.titlebar, this.resizer.top);
    this.loadIcons();
    this.setupBackgroundColor();
    this.createIcon();
    this.setupMenubar();
    this.setupTitle();
    this.setupWindowControls();
    this.setupContainer();
    this.setupTitleBar();
    this.loadEvents();
    // this.registerTheme(ThemeBar.win)
  }

  loadIcons() {
    const icons = this.currentOptions.icons;
    if (icons) {
      const {
        platformIcons
      } = (0, _get__("consts_1").loadWindowIcons)(icons);
      this.platformIcons = platformIcons;
    }
  }
  /**
   * Setup the background color of the title bar
   * By default, it will use the meta theme-color or msapplication-TileColor and if it doesn't exist, it will use white
   */
  setupBackgroundColor() {
    let color = this.currentOptions.backgroundColor;
    if (!color) {
      const metaColor = document.querySelectorAll('meta[name="theme-color"]') || document.querySelectorAll('meta[name="msapplication-TileColor"]');
      metaColor.forEach(meta => {
        color = _get__("color_1").Color.fromHex(meta.getAttribute('content'));
      });
      if (!color) color = _get__("color_1").Color.WHITE;
      this.currentOptions.backgroundColor = color;
    }
    this.titlebar.style.backgroundColor = color.toString();
  }
  /**
   * Render the icon of the title bar, if is mac, it will not render
   * By default, it will use the first icon found in the head of the document
   */
  createIcon() {
    // const onlyRendererMenuBar = this.currentOptions.onlyShowMenuBar
    if (_get__("platform_1").isMacintosh) return;
    let icon = this.currentOptions.icon;
    if (!icon) {
      const tagLink = document.querySelectorAll('link');
      tagLink.forEach(link => {
        if (link.getAttribute('rel') === 'icon' || link.getAttribute('rel') === 'shortcut icon') {
          icon = link.getAttribute('href');
        }
        this.currentOptions.icon = icon;
      });
    }
    if (icon) {
      const windowIcon = (0, _get__("dom_1").append)(this.icon, (0, _get__("dom_1").$)('img'));
      if (typeof icon === 'string') {
        windowIcon.setAttribute('src', icon);
      } else {
        windowIcon.setAttribute('src', icon.toDataURL());
      }
      this.setIconSize(this.currentOptions.iconSize);
      (0, _get__("dom_1").append)(this.titlebar, this.icon);
    }
  }
  setIconSize(size) {
    if (size < 16) size = 16;
    if (size > 24) size = 24;
    this.icon.firstElementChild.setAttribute('style', `height: ${size}px`);
  }
  setupMenubar() {
    _get__("electron_1").ipcRenderer.invoke('request-application-menu')?.then(menu => this.updateMenu(menu));
    const menuPosition = this.currentOptions.menuPosition;
    if (menuPosition) {
      this.updateMenuPosition(menuPosition);
    }
    (0, _get__("dom_1").append)(this.titlebar, this.menuBarContainer);
  }
  setupTitle() {
    const onlyRendererMenuBar = this.currentOptions.onlyShowMenuBar;
    if (onlyRendererMenuBar) return;
    this.updateTitle(document.title);
    this.updateTitleAlignment(this.currentOptions.titleHorizontalAlignment);
    (0, _get__("dom_1").append)(this.titlebar, this.title);
  }
  createControlButton(element, icon, title, active = true) {
    (0, _get__("dom_1").addClass)(element, 'cet-control-icon');
    element.innerHTML = icon;
    element.title = title;
    if (!active) {
      (0, _get__("dom_1").addClass)(element, 'inactive');
    }
    (0, _get__("dom_1").append)(this.controlsContainer, element);
  }
  setupWindowControls() {
    const onlyRendererMenuBar = this.currentOptions.onlyShowMenuBar;
    const tooltips = this.currentOptions.tooltips;
    if (_get__("platform_1").isMacintosh || onlyRendererMenuBar) return;
    this.createControlButton(this.controls.minimize, this.platformIcons?.minimize, tooltips.minimize, this.currentOptions.minimizable);
    this.createControlButton(this.controls.maximize, this.platformIcons?.maximize, tooltips.maximize, this.currentOptions.maximizable);
    this.createControlButton(this.controls.close, this.platformIcons?.close, tooltips.close, this.currentOptions.closeable);
    (0, _get__("dom_1").append)(this.titlebar, this.controlsContainer);
  }
  setupContainer() {
    const containerOverflow = this.currentOptions.containerOverflow;
    if (containerOverflow) {
      this.container.style.overflow = containerOverflow;
    }
    while (document.body.firstChild) {
      (0, _get__("dom_1").append)(this.container, document.body.firstChild);
    }
    (0, _get__("dom_1").append)(document.body, this.container);
  }
  setupTitleBar() {
    const order = this.currentOptions.order;
    const hasShadow = this.currentOptions.shadow;
    (0, _get__("dom_1").addClass)(this.titlebar, `cet-${(0, _get__("platform_1").PlatformToString)(_get__("platform_1").platform)?.toLocaleLowerCase()}`);
    if (order) {
      (0, _get__("dom_1").addClass)(this.titlebar, `cet-${order}`);
    }
    if (hasShadow) {
      (0, _get__("dom_1").addClass)(this.titlebar, 'cet-shadow');
    }
    if (!_get__("platform_1").isMacintosh) {
      this.title.style.cursor = 'default';
    }
    (0, _get__("dom_1").prepend)(document.body, this.titlebar);
  }
  loadEvents() {
    const onlyRendererMenuBar = this.currentOptions.onlyShowMenuBar;
    if (onlyRendererMenuBar) return;
    const minimizable = this.currentOptions.minimizable;
    const maximizable = this.currentOptions.maximizable;
    const closeable = this.currentOptions.closeable;
    this.onDidChangeMaximized(_get__("electron_1").ipcRenderer.sendSync('window-event', 'window-is-maximized'));
    _get__("electron_1").ipcRenderer.on('window-maximize', (_, isMaximized) => this.onDidChangeMaximized(isMaximized));
    _get__("electron_1").ipcRenderer.on('window-fullscreen', (_, isFullScreen) => this.onWindowFullScreen(isFullScreen));
    _get__("electron_1").ipcRenderer.on('window-focus', (_, isFocused) => this.onWindowFocus(isFocused));
    if (minimizable) {
      (0, _get__("dom_1").addDisposableListener)(this.controls.minimize, _get__("dom_1").EventType.CLICK, () => {
        _get__("electron_1").ipcRenderer.send('window-event', 'window-minimize');
      });
    }
    if (_get__("platform_1").isMacintosh) {
      (0, _get__("dom_1").addDisposableListener)(this.titlebar, _get__("dom_1").EventType.DBLCLICK, () => {
        _get__("electron_1").ipcRenderer.send('window-event', 'window-maximize');
      });
    }
    if (maximizable) {
      (0, _get__("dom_1").addDisposableListener)(this.controls.maximize, _get__("dom_1").EventType.CLICK, () => {
        _get__("electron_1").ipcRenderer.send('window-event', 'window-maximize');
      });
    }
    if (closeable) {
      (0, _get__("dom_1").addDisposableListener)(this.controls.close, _get__("dom_1").EventType.CLICK, () => {
        _get__("electron_1").ipcRenderer.send('window-event', 'window-close');
      });
    }
  }
  onBlur() {
    this.isInactive = true;
    this.updateStyles();
  }
  onFocus() {
    this.isInactive = false;
    this.updateStyles();
  }
  onMenuBarVisibilityChanged(visible) {
    if (_get__("platform_1").isWindows || _get__("platform_1").isLinux || _get__("platform_1").isFreeBSD) {
      if (visible) {
        // Hack to fix issue #52522 with layered webkit-app-region elements appearing under cursor
        (0, _get__("dom_1").hide)(this.dragRegion);
        setTimeout(() => (0, _get__("dom_1").show)(this.dragRegion), 50);
      }
    }
  }
  onMenuBarFocusChanged(focused) {
    if (_get__("platform_1").isWindows || _get__("platform_1").isLinux || _get__("platform_1").isFreeBSD) {
      if (focused) (0, _get__("dom_1").hide)(this.dragRegion);else (0, _get__("dom_1").show)(this.dragRegion);
    }
  }
  onDidChangeMaximized(isMaximized) {
    const maximize = this.controls.maximize;
    if (maximize) {
      maximize.title = isMaximized ? this.currentOptions.tooltips?.restoreDown : this.currentOptions.tooltips?.maximize;
      maximize.innerHTML = isMaximized ? this.platformIcons?.restore : this.platformIcons?.maximize;
    }
    if (this.resizer) {
      if (isMaximized) (0, _get__("dom_1").hide)(this.resizer.top, this.resizer.left);else (0, _get__("dom_1").show)(this.resizer.top, this.resizer.left);
    }
  }
  updateMenu(menu) {
    if (_get__("platform_1").isMacintosh || !menu) return;
    if (this.menuBar) this.menuBar.dispose();
    this.menuBar = new (_get__("menubar_1").MenuBar)(this.menuBarContainer, _get__("consts_1").menuIcons, this.currentOptions, {
      enableMnemonics: true
    }, this.closeMenu); // TODO: Verify menubar options
    this.menuBar.push(menu);
    this.menuBar.update();
    this.menuBar.onVisibilityChange(e => this.onMenuBarVisibilityChanged(e));
    this.menuBar.onFocusStateChange(e => this.onMenuBarFocusChanged(e));
    this.updateStyles();
  }
  updateStyles() {
    if (this.isInactive) {
      (0, _get__("dom_1").addClass)(this.titlebar, 'inactive');
    } else {
      (0, _get__("dom_1").removeClass)(this.titlebar, 'inactive');
    }
    const backgroundColor = this.isInactive ? this.currentOptions.backgroundColor?.lighten(0.12) : this.currentOptions.backgroundColor;
    if (backgroundColor) {
      this.titlebar.style.backgroundColor = backgroundColor?.toString();
    }
    let foregroundColor;
    if (backgroundColor?.isLighter()) {
      (0, _get__("dom_1").addClass)(this.titlebar, 'light');
      foregroundColor = this.isInactive ? _get__("consts_1").INACTIVE_FOREGROUND_DARK : _get__("consts_1").ACTIVE_FOREGROUND_DARK;
    } else {
      (0, _get__("dom_1").removeClass)(this.titlebar, 'light');
      foregroundColor = this.isInactive ? _get__("consts_1").INACTIVE_FOREGROUND : _get__("consts_1").ACTIVE_FOREGROUND;
    }
    this.titlebar.style.color = foregroundColor?.toString();
    const updatedWindowControls = _get__("electron_1").ipcRenderer.sendSync('update-window-controls', {
      color: backgroundColor?.toString(),
      symbolColor: foregroundColor?.toString(),
      height: _get__("consts_1").TOP_TITLEBAR_HEIGHT_WIN
    });
    if (updatedWindowControls) {
      (0, _get__("dom_1").hide)(this.controlsContainer);
    } else {
      (0, _get__("dom_1").show)(this.controlsContainer);
    }
    if (this.menuBar) {
      let fgColor;
      const backgroundColor = this.currentOptions.menuBarBackgroundColor || this.currentOptions.backgroundColor.darken(0.12);
      const foregroundColor = backgroundColor?.isLighter() ? _get__("consts_1").INACTIVE_FOREGROUND_DARK : _get__("consts_1").INACTIVE_FOREGROUND;
      const bgColor = this.currentOptions.itemBackgroundColor && !this.currentOptions.itemBackgroundColor.equals(backgroundColor) ? this.currentOptions.itemBackgroundColor : _get__("consts_1").DEFAULT_ITEM_SELECTOR;
      if (bgColor?.equals(_get__("consts_1").DEFAULT_ITEM_SELECTOR)) {
        fgColor = backgroundColor?.isLighter() ? _get__("consts_1").ACTIVE_FOREGROUND_DARK : _get__("consts_1").ACTIVE_FOREGROUND;
      } else {
        fgColor = bgColor?.isLighter() ? _get__("consts_1").ACTIVE_FOREGROUND_DARK : _get__("consts_1").ACTIVE_FOREGROUND;
      }
      this.menuBar.setStyles({
        backgroundColor,
        foregroundColor,
        selectionBackgroundColor: bgColor,
        selectionForegroundColor: fgColor,
        separatorColor: this.currentOptions.menuSeparatorColor ?? foregroundColor,
        svgColor: this.currentOptions.svgColor
      });
    }
  }
  /// Public methods
  /**
   * Update title bar styles based on focus state.
   * @param hasFocus focus state of the window
   */
  onWindowFocus(focus) {
    if (this.titlebar) {
      if (focus) {
        (0, _get__("dom_1").removeClass)(this.titlebar, 'inactive');
        this.onFocus();
      } else {
        (0, _get__("dom_1").addClass)(this.titlebar, 'inactive');
        this.menuBar?.blur();
        this.onBlur();
      }
    }
  }
  /**
   * Update the full screen state and hide or show the title bar.
   * @param fullscreen Fullscreen state of the window
   */
  onWindowFullScreen(fullscreen) {
    const height = _get__("platform_1").isMacintosh ? _get__("consts_1").TOP_TITLEBAR_HEIGHT_MAC : _get__("consts_1").TOP_TITLEBAR_HEIGHT_WIN;
    const hasShadow = this.currentOptions.shadow;
    if (!_get__("platform_1").isMacintosh) {
      if (fullscreen) {
        (0, _get__("dom_1").hide)(this.titlebar);
        this.container.style.top = '0px';
      } else {
        (0, _get__("dom_1").show)(this.titlebar);
        if (this.currentOptions.menuPosition === 'bottom') {
          this.container.style.top = (0, _get__("consts_1").getPx)(_get__("consts_1").BOTTOM_TITLEBAR_HEIGHT);
          this.controlsContainer.style.height = (0, _get__("consts_1").getPx)(_get__("consts_1").TOP_TITLEBAR_HEIGHT_WIN);
        } else {
          this.container.style.top = (0, _get__("consts_1").getPx)(height + (hasShadow ? 1 : 0));
        }
      }
    }
  }
  /**
   * Update the title of the title bar.
   * You can use this method if change the content of `<title>` tag on your html.
   * @param title The title of the title bar and document.
   */
  updateTitle(title) {
    this.title.innerText = title;
    document.title = title;
    return this;
  }
  /**
   * It method set new icon to title-bar-icon of title-bar.
   * @param path path to icon
   */
  updateIcon(path) {
    if (this.icon) {
      this.icon.firstElementChild.setAttribute('src', path);
    }
    return this;
  }
  /**
   * Horizontal alignment of the title.
   * @param side `left`, `center` or `right`.
   */
  updateTitleAlignment(side) {
    const order = this.currentOptions.order;
    const menuPosition = this.currentOptions.menuPosition;
    if (side === 'left' || side === 'right' && order === 'inverted') {
      (0, _get__("dom_1").removeClass)(this.title, 'cet-title-left');
      (0, _get__("dom_1").removeClass)(this.title, 'cet-title-right');
      (0, _get__("dom_1").removeClass)(this.title, 'cet-title-center');
      (0, _get__("dom_1").addClass)(this.title, 'cet-title-left');
    }
    if (side === 'right' || side === 'left' && order === 'inverted') {
      if (side !== 'left' && order !== 'inverted') {
        this.controlsContainer.style.marginLeft = '10px';
      }
      (0, _get__("dom_1").removeClass)(this.title, 'cet-title-left');
      (0, _get__("dom_1").removeClass)(this.title, 'cet-title-right');
      (0, _get__("dom_1").removeClass)(this.title, 'cet-title-center');
      (0, _get__("dom_1").addClass)(this.title, 'cet-title-right');
    }
    if (side === 'center') {
      (0, _get__("dom_1").removeClass)(this.title, 'cet-title-left');
      (0, _get__("dom_1").removeClass)(this.title, 'cet-title-right');
      (0, _get__("dom_1").removeClass)(this.title, 'cet-title-center');
      if (menuPosition !== 'bottom') {
        (0, _get__("dom_1").addDisposableListener)(window, 'resize', () => {
          if (window.innerWidth >= 1188) {
            (0, _get__("dom_1").addClass)(this.title, 'cet-title-center');
          } else {
            (0, _get__("dom_1").removeClass)(this.title, 'cet-title-center');
          }
        });
        (0, _get__("dom_1").addClass)(this.title, 'cet-title-center');
      }
      if (!_get__("platform_1").isMacintosh && order === 'first-buttons') {
        this.controlsContainer.style.marginLeft = 'auto';
      }
      this.title.style.maxWidth = 'calc(100% - 296px)';
    }
    return this;
  }
  /**
   * Update the background color of the title bar
   * @param backgroundColor The color for the background
   */
  updateBackground(backgroundColor) {
    if (typeof backgroundColor === 'string') backgroundColor = _get__("color_1").Color.fromHex(backgroundColor);
    this.currentOptions.backgroundColor = backgroundColor;
    this.updateStyles();
    return this;
  }
  /**
   * Update the item background color of the menubar
   * @param itemBGColor The color for the item background
   */
  updateItemBGColor(itemBGColor) {
    if (typeof itemBGColor === 'string') itemBGColor = _get__("color_1").Color.fromHex(itemBGColor);
    this.currentOptions.itemBackgroundColor = itemBGColor;
    this.updateStyles();
    return this;
  }
  /**
   * Update the menu from Menu.getApplicationMenu()
   */
  async refreshMenu() {
    if (!_get__("platform_1").isMacintosh) {
      _get__("electron_1").ipcRenderer.invoke('request-application-menu').then(menu => this.updateMenu(menu));
    }
    return this;
  }
  /**
   * Update the position of menubar.
   * @param menuPosition The position of the menu `left` or `bottom`.
   */
  updateMenuPosition(menuPosition) {
    const height = _get__("platform_1").isMacintosh ? _get__("consts_1").TOP_TITLEBAR_HEIGHT_MAC : _get__("consts_1").TOP_TITLEBAR_HEIGHT_WIN;
    const onlyRendererMenuBar = this.currentOptions.onlyShowMenuBar;
    const hasShadow = this.currentOptions.shadow;
    this.currentOptions.menuPosition = menuPosition;
    if (menuPosition === 'left' || onlyRendererMenuBar) {
      this.titlebar.style.height = (0, _get__("consts_1").getPx)(height + (hasShadow ? 1 : 0));
      this.container.style.top = (0, _get__("consts_1").getPx)(height + (hasShadow ? 1 : 0));
      (0, _get__("dom_1").removeClass)(this.menuBarContainer, 'bottom');
    } else {
      this.titlebar.style.height = (0, _get__("consts_1").getPx)(_get__("consts_1").BOTTOM_TITLEBAR_HEIGHT);
      this.container.style.top = (0, _get__("consts_1").getPx)(_get__("consts_1").BOTTOM_TITLEBAR_HEIGHT);
      this.controlsContainer.style.height = (0, _get__("consts_1").getPx)(height);
      (0, _get__("dom_1").addClass)(this.menuBarContainer, 'bottom');
    }
    return this;
  }
  /**
   * Remove the titlebar, menubar and all methods.
   */
  dispose() {
    // if (this.menuBar) this.menuBar.dispose()
    this.titlebar.remove();
    while (this.container.firstChild) (0, _get__("dom_1").append)(document.body, this.container.firstChild);
    this.container.remove();
  }
  get titlebarElement() {
    return this.titlebar;
  }
  get menubarElement() {
    return this.menuBar;
  }
  get containerElement() {
    return this.container;
  }
  get titleElement() {
    return this.title;
  }
}
exports.CustomTitlebar = _get__("CustomTitlebar");
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "consts_1":
      return consts_1;
    case "platform_1":
      return platform_1;
    case "dom_1":
      return dom_1;
    case "color_1":
      return color_1;
    case "electron_1":
      return electron_1;
    case "menubar_1":
      return menubar_1;
    case "themebar_1":
      return themebar_1;
    case "CustomTitlebar":
      return CustomTitlebar;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar/titlebar/themebar.js":
/*!********************************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/titlebar/themebar.js ***!
  \********************************************************************/
/***/ ((module, exports, __webpack_require__) => {

"use strict";


/* ---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *-------------------------------------------------------------------------------------------- */
Object.defineProperty(exports, "__esModule", ({
  value: true
}));
exports.ThemeBar = void 0;
const lifecycle_1 = __webpack_require__(/*! ../base/common/lifecycle */ "./node_modules/custom-electron-titlebar/base/common/lifecycle.js");
const baseTheme = "body {\n  margin: 0 !important;\n  overflow: hidden !important;\n}\n\n/* Titlebar */\n.cet-titlebar {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  flex-wrap: wrap;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  font-size: 13px;\n  font-family: Arial, Helvetica, sans-serif;\n  box-sizing: border-box;\n  padding: 0 16px;\n  overflow: hidden;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  zoom: 1;\n  width: 100%;\n  height: 31px;\n  line-height: 31px;\n  z-index: 99999;\n}\n\n.cet-titlebar *,\n.cet-titlebar *:before,\n.cet-titlebar *:after {\n  box-sizing: border-box;\n}\n\n.cet-titlebar.cet-windows,\n.cet-titlebar.cet-linux,\n.cet-titlebar.cet-freebsd {\n  padding: 0;\n  height: 30px;\n  line-height: 30px;\n  justify-content: left;\n  overflow: visible;\n}\n\n/* Inverted */\n.cet-titlebar.cet-inverted {\n  flex-direction: row-reverse;\n}\n\n.cet-titlebar.cet-inverted .cet-menubar,\n.cet-titlebar.cet-inverted .cet-window-controls {\n  flex-direction: row-reverse;\n  margin-left: 20px;\n  margin-right: 0;\n}\n\n/* First buttons */\n.cet-titlebar.cet-first-buttons .cet-window-controls {\n  order: -1;\n  margin: 0 5px 0 0;\n}\n\n.cet-titlebar.cet-inverted .cet-window-controls {\n  margin: 0 5px 0 0;\n}\n\n/* Shadow */\n.cet-titlebar.cet-shadow {\n  box-shadow: 0 2px 1px -1px rgba(0, 0, 0, 0.2), 0 1px 1px 0 rgba(0, 0, 0, 0.14), 0 1px 3px 0 rgba(0, 0, 0, 0.12);\n}\n\n/* Drag region */\n.cet-drag-region {\n  top: 0;\n  left: 0;\n  display: block;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: -1;\n  -webkit-app-region: drag;\n}\n\n/* Icon */\n.cet-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 34px;\n  height: 30px;\n  z-index: 99;\n  overflow: hidden;\n}\n\n/* Title */\n.cet-title {\n  flex: 0 1 auto;\n  font-size: 12px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  zoom: 1;\n}\n\n/* Title alignment */\n.cet-title.cet-title-left {\n  margin-left: 8px;\n  margin-right: auto;\n}\n\n.cet-title.cet-title-right {\n  margin-left: auto;\n  margin-right: 8px;\n}\n\n.cet-title.cet-title-center {\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.cet-title.cet-bigsur {\n  font-size: 13px;\n  font-weight: 600;\n}\n\n/* Window controls */\n.cet-window-controls {\n  display: flex;\n  flex-grow: 0;\n  flex-shrink: 0;\n  text-align: center;\n  position: relative;\n  z-index: 99;\n  -webkit-app-region: no-drag;\n  height: 30px;\n  font-family: initial !important;\n  margin-left: auto;\n}\n\n.cet-control-icon {\n  width: 2.85rem;\n}\n\n.cet-control-icon:not(.inactive):hover {\n  background-color: rgb(255 255 255 / 12%);\n}\n\n.light .cet-control-icon:not(.inactive):hover {\n  background-color: rgb(0 0 0 / 12%);\n}\n\n.cet-control-icon.inactive svg {\n  opacity: 0.4;\n}\n\n.cet-control-icon svg {\n  width: 10px;\n  height: -webkit-fill-available;\n  fill: #fff;\n  display: initial !important;\n  vertical-align: unset !important;\n}\n\n.cet-titlebar.light .cet-control-icon svg {\n  fill: #222222 !important;\n}\n\n.cet-control-close:not(.inactive):hover {\n  background-color: rgb(232 17 35 / 90%) !important;\n}\n\n.cet-control-close:not(.inactive):hover svg {\n  fill: #fff !important;\n}\n\n/* Resizer */\n.cet-resizer {\n  -webkit-app-region: no-drag;\n  position: absolute;\n}\n\n.cet-resizer.left {\n  top: 0;\n  left: 0;\n  width: 6px;\n  height: 100%;\n}\n\n.cet-resizer.top {\n  top: 0;\n  width: 100%;\n  height: 6px;\n}\n\n/* Container */\n.cet-container {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: auto;\n  z-index: 1;\n}\n\n/* MenuBar */\n.cet-menubar {\n  display: flex;\n  flex-shrink: 1;\n  box-sizing: border-box;\n  overflow: hidden;\n  flex-wrap: wrap;\n  margin-right: 20px;\n}\n\n.cet-menubar.bottom {\n  order: 1;\n  width: 100%;\n  padding: 0 5px 5px;\n  margin-right: 0;\n}\n\n.cet-menubar.bottom .cet-menubar-menu-button {\n  border-radius: 4px;\n}\n\n.cet-menubar.bottom .cet-menubar-menu-button .cet-menubar-menu-title {\n  line-height: 26px;\n}\n\n.cet-menubar .cet-menubar-menu-button {\n  box-sizing: border-box;\n  padding: 0px 8px;\n  height: 100%;\n  cursor: default;\n  zoom: 1;\n  white-space: nowrap;\n  -webkit-app-region: no-drag;\n  outline: 0;\n}\n\n.cet-menubar .cet-menubar-menu-button .cet-menubar-menu-title {\n  font-size: 12px;\n}\n\n.cet-menubar .cet-menubar-menu-button.disabled {\n  opacity: 0.4;\n}\n\n.cet-menubar .cet-menubar-menu-button:not(.disabled):hover,\n.cet-menubar .cet-menubar-menu-button:not(.disabled).open {\n  background-color: rgb(255 255 255 / 12%);\n}\n\n.cet-titlebar.light .cet-menubar .cet-menubar-menu-button:not(.disabled):hover,\n.cet-titlebar.light .cet-menubar .cet-menubar-menu-button:not(.disabled).open {\n  background-color: rgb(0 0 0 / 12%);\n}\n\n.cet-menubar-menu-container {\n  position: absolute;\n  display: block;\n  left: 0px;\n  opacity: 1;\n  outline: 0;\n  border: none;\n  text-align: left;\n  margin: 0 auto;\n  margin-left: 0;\n  font-size: inherit;\n  overflow-x: visible;\n  overflow-y: visible;\n  -webkit-overflow-scrolling: touch;\n  justify-content: flex-end;\n  white-space: nowrap;\n  border-radius: 7px;\n  backdrop-filter: blur(10px);\n  box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12);\n  z-index: 99999;\n}\n\n.cet-menubar-menu-container::-webkit-scrollbar {\n  width: 8px;\n  height: 4px;\n  cursor: pointer;\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.cet-menubar-menu-container::-webkit-scrollbar-track {\n  border: none;\n  background-color: rgba(0, 0, 0, 0);\n}\n\n.cet-menubar-menu-container::-webkit-scrollbar-thumb {\n  border-radius: 10px;\n  background-color: rgba(110, 110, 110, 0.2);\n}\n\n.cet-menubar-menu-container:focus {\n  outline: 0;\n}\n\n.cet-menubar-menu-container .cet-action-item {\n  padding: 0;\n  margin: 0;\n  transform: none;\n  display: -ms-flexbox;\n  display: flex;\n  outline: none;\n}\n\n.cet-menubar-menu-container .cet-action-item.active {\n  transform: none;\n}\n\n.cet-menubar-menu-container .cet-action-item.disabled .cet-action-menu-item {\n  opacity: 0.4;\n}\n\n.cet-menubar-menu-container .cet-action-item .cet-submenu {\n  position: absolute;\n}\n\n.cet-menubar-menu-container .cet-action-menu-item {\n  -ms-flex: 1 1 auto;\n  flex: 1 1 auto;\n  display: -ms-flexbox;\n  display: flex;\n  height: 2.231em;\n  margin: 4px 3px;\n  align-items: center;\n  position: relative;\n  border-radius: 4px;\n  text-decoration: none;\n}\n\n.cet-menubar-menu-container .cet-action-label {\n  -ms-flex: 1 1 auto;\n  flex: 1 1 auto;\n  text-decoration: none;\n  padding: 0 1em;\n  background: none;\n  font-size: 12px;\n  line-height: 1;\n}\n\n.cet-menubar-menu-container .cet-action-label:not(.separator) {\n  display: inline-block;\n  -webkit-box-sizing: border-box;\n  -o-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -ms-box-sizing: border-box;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0 2em 0 0.8em;\n}\n\n.cet-menubar-menu-container .cet-action-label.separator {\n  opacity: 0.1;\n  font-size: inherit;\n  width: 100%;\n  border-bottom: 1px solid transparent;\n}\n\n.cet-menubar-menu-container .cet-action-label.separator.text {\n  padding: 0.7em 1em 0.1em 1em;\n  font-weight: bold;\n  opacity: 1;\n}\n\n.cet-menubar-menu-container .cet-action-label:hover {\n  color: inherit;\n}\n\n.cet-menubar-menu-container .keybinding,\n.cet-menubar-menu-container .cet-submenu-indicator {\n  display: inline-block;\n  -ms-flex: 2 1 auto;\n  flex: 2 1 auto;\n  padding: 0 2em 0 1em;\n  text-align: right;\n  font-size: 11px;\n  line-height: 1;\n}\n\n.cet-menubar-menu-container .cet-submenu-indicator {\n  position: absolute;\n  right: 4px;\n  height: 12px;\n  width: 12px;\n  padding: 0;\n}\n\n.cet-menubar-menu-container .cet-submenu-indicator img,\n.cet-menubar-menu-container .cet-menu-item-icon .icon,\n.cet-menubar-menu-container .cet-submenu-indicator svg,\n.cet-menubar-menu-container .cet-menu-item-icon svg {\n  display: inherit;\n  width: 100%;\n  height: 100%;\n}\n\n.cet-menubar-menu-container .cet-action-menu-item.checked>.cet-menu-item-icon.checkbox {\n  visibility: visible;\n}\n\n.cet-menubar-menu-container .cet-menu-item-icon {\n  width: 14px;\n  height: 14px;\n  margin: 0 0 0 12px;\n}\n\n.cet-menubar-menu-container .cet-menu-item-icon.checkbox {\n  visibility: hidden;\n}";
const macTheme = "";
const winTheme = "";
class ThemingRegistry extends _get__("lifecycle_1").Disposable {
  constructor() {
    super();
    this.theming = [];
    this.theming = [];
  }
  onThemeChange(theme) {
    this.theming.push(theme);
    return (0, _get__("lifecycle_1").toDisposable)(() => {
      const idx = this.theming.indexOf(theme);
      this.theming.splice(idx, 1);
    });
  }
  getTheming() {
    return this.theming;
  }
}
class ThemeBar extends _get__("ThemingRegistry") {
  constructor() {
    super();
    this.registerTheme(collector => {
      collector.addRule(_get__("baseTheme"));
    });
  }
  registerTheme(theme) {
    this.onThemeChange(theme);
    const cssRules = [];
    const hasRule = {};
    const ruleCollector = {
      addRule: rule => {
        if (!hasRule[rule]) {
          cssRules.push(rule);
          hasRule[rule] = true;
        }
      }
    };
    this.getTheming().forEach(p => p(ruleCollector));
    _get__("_applyRules")(cssRules.join('\n'), 'titlebar-style');
  }
  static get win() {
    return collector => {
      collector.addRule(_get__("winTheme"));
    };
  }
  static get mac() {
    return collector => {
      collector.addRule(_get__("macTheme"));
    };
  }
}
exports.ThemeBar = _get__("ThemeBar");
function _applyRules(styleSheetContent, rulesClassName) {
  const themeStyles = document.head.getElementsByClassName(rulesClassName);
  if (themeStyles.length === 0) {
    const styleElement = document.createElement('style');
    styleElement.className = rulesClassName;
    styleElement.innerHTML = styleSheetContent;
    document.head.appendChild(styleElement);
  } else {
    themeStyles[0].innerHTML = styleSheetContent;
  }
}
function _getGlobalObject() {
  try {
    if (!!global) {
      return global;
    }
  } catch (e) {
    try {
      if (!!window) {
        return window;
      }
    } catch (e) {
      return this;
    }
  }
}
;
var _RewireModuleId__ = null;
function _getRewireModuleId__() {
  if (_RewireModuleId__ === null) {
    let globalVariable = _getGlobalObject();
    if (!globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__) {
      globalVariable.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__ = 0;
    }
    _RewireModuleId__ = __$$GLOBAL_REWIRE_NEXT_MODULE_ID__++;
  }
  return _RewireModuleId__;
}
function _getRewireRegistry__() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__) {
    theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
  }
  return theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__;
}
function _getRewiredData__() {
  let moduleId = _getRewireModuleId__();
  let registry = _getRewireRegistry__();
  let rewireData = registry[moduleId];
  if (!rewireData) {
    registry[moduleId] = Object.create(null);
    rewireData = registry[moduleId];
  }
  return rewireData;
}
(function registerResetAll() {
  let theGlobalVariable = _getGlobalObject();
  if (!theGlobalVariable['__rewire_reset_all__']) {
    theGlobalVariable['__rewire_reset_all__'] = function () {
      theGlobalVariable.__$$GLOBAL_REWIRE_REGISTRY__ = Object.create(null);
    };
  }
})();
var INTENTIONAL_UNDEFINED = '__INTENTIONAL_UNDEFINED__';
let _RewireAPI__ = {};
(function () {
  function addPropertyToAPIObject(name, value) {
    Object.defineProperty(_RewireAPI__, name, {
      value: value,
      enumerable: false,
      configurable: true
    });
  }
  addPropertyToAPIObject('__get__', _get__);
  addPropertyToAPIObject('__GetDependency__', _get__);
  addPropertyToAPIObject('__Rewire__', _set__);
  addPropertyToAPIObject('__set__', _set__);
  addPropertyToAPIObject('__reset__', _reset__);
  addPropertyToAPIObject('__ResetDependency__', _reset__);
  addPropertyToAPIObject('__with__', _with__);
})();
function _get__(variableName) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _get_original__(variableName);
  } else {
    var value = rewireData[variableName];
    if (value === INTENTIONAL_UNDEFINED) {
      return undefined;
    } else {
      return value;
    }
  }
}
function _get_original__(variableName) {
  switch (variableName) {
    case "lifecycle_1":
      return lifecycle_1;
    case "baseTheme":
      return baseTheme;
    case "_applyRules":
      return _applyRules;
    case "winTheme":
      return winTheme;
    case "macTheme":
      return macTheme;
    case "ThemingRegistry":
      return ThemingRegistry;
    case "ThemeBar":
      return ThemeBar;
  }
  return undefined;
}
function _assign__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (rewireData[variableName] === undefined) {
    return _set_original__(variableName, value);
  } else {
    return rewireData[variableName] = value;
  }
}
function _set_original__(variableName, _value) {
  switch (variableName) {}
  return undefined;
}
function _update_operation__(operation, variableName, prefix) {
  var oldValue = _get__(variableName);
  var newValue = operation === '++' ? oldValue + 1 : oldValue - 1;
  _assign__(variableName, newValue);
  return prefix ? newValue : oldValue;
}
function _set__(variableName, value) {
  let rewireData = _getRewiredData__();
  if (typeof variableName === 'object') {
    Object.keys(variableName).forEach(function (name) {
      rewireData[name] = variableName[name];
    });
    return function () {
      Object.keys(variableName).forEach(function (name) {
        _reset__(variableName);
      });
    };
  } else {
    if (value === undefined) {
      rewireData[variableName] = INTENTIONAL_UNDEFINED;
    } else {
      rewireData[variableName] = value;
    }
    return function () {
      _reset__(variableName);
    };
  }
}
function _reset__(variableName) {
  let rewireData = _getRewiredData__();
  delete rewireData[variableName];
  if (Object.keys(rewireData).length == 0) {
    delete _getRewireRegistry__()[_getRewireModuleId__];
  }
  ;
}
function _with__(object) {
  let rewireData = _getRewiredData__();
  var rewiredVariableNames = Object.keys(object);
  var previousValues = {};
  function reset() {
    rewiredVariableNames.forEach(function (variableName) {
      rewireData[variableName] = previousValues[variableName];
    });
  }
  return function (callback) {
    rewiredVariableNames.forEach(function (variableName) {
      previousValues[variableName] = rewireData[variableName];
      rewireData[variableName] = object[variableName];
    });
    let result = callback();
    if (!!result && typeof result.then == 'function') {
      result.then(reset).catch(reset);
    } else {
      reset();
    }
    return result;
  };
}
let _typeOfOriginalExport = typeof module.exports;
function addNonEnumerableProperty(name, value) {
  Object.defineProperty(module.exports, name, {
    value: value,
    enumerable: false,
    configurable: true
  });
}
if ((_typeOfOriginalExport === 'object' || _typeOfOriginalExport === 'function') && Object.isExtensible(module.exports)) {
  addNonEnumerableProperty('__get__', _get__);
  addNonEnumerableProperty('__GetDependency__', _get__);
  addNonEnumerableProperty('__Rewire__', _set__);
  addNonEnumerableProperty('__set__', _set__);
  addNonEnumerableProperty('__reset__', _reset__);
  addNonEnumerableProperty('__ResetDependency__', _reset__);
  addNonEnumerableProperty('__with__', _with__);
  addNonEnumerableProperty('__RewireAPI__', _RewireAPI__);
}

/***/ }),

/***/ "./node_modules/custom-electron-titlebar sync recursive":
/*!*****************************************************!*\
  !*** ./node_modules/custom-electron-titlebar/ sync ***!
  \*****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "./node_modules/custom-electron-titlebar sync recursive";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "electron":
/*!***************************!*\
  !*** external "electron" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("electron");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!*****************************!*\
  !*** ./src/main/preload.ts ***!
  \*****************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var electron__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! electron */ "electron");
/* harmony import */ var electron__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(electron__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var custom_electron_titlebar__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! custom-electron-titlebar */ "./node_modules/custom-electron-titlebar/index.js");
/* harmony import */ var custom_electron_titlebar__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(custom_electron_titlebar__WEBPACK_IMPORTED_MODULE_1__);
// Disable no-unused-vars, broken for spread args
/* eslint no-unused-vars: off */


const electronHandler = {
    ipcRenderer: {
        sendMessage(channel, ...args) {
            electron__WEBPACK_IMPORTED_MODULE_0__.ipcRenderer.send(channel, ...args);
        },
        on(channel, func) {
            const subscription = (_event, ...args) => func(...args);
            electron__WEBPACK_IMPORTED_MODULE_0__.ipcRenderer.on(channel, subscription);
            return () => {
                electron__WEBPACK_IMPORTED_MODULE_0__.ipcRenderer.removeListener(channel, subscription);
            };
        },
        once(channel, func) {
            electron__WEBPACK_IMPORTED_MODULE_0__.ipcRenderer.once(channel, (_event, ...args) => func(...args));
        },
    },
    store: {
        get(key) {
            return electron__WEBPACK_IMPORTED_MODULE_0__.ipcRenderer.sendSync('electron-store-get', key);
        },
        set(property, val) {
            electron__WEBPACK_IMPORTED_MODULE_0__.ipcRenderer.send('electron-store-set', property, val);
        },
        // Other method you want to add like has(), reset(), etc.
    },
};
window.addEventListener('DOMContentLoaded', () => {
    // Title bar implementation
    new custom_electron_titlebar__WEBPACK_IMPORTED_MODULE_1__.Titlebar({
        backgroundColor: custom_electron_titlebar__WEBPACK_IMPORTED_MODULE_1__.TitlebarColor.TRANSPARENT,
        titleHorizontalAlignment: 'left',
    });
});
electron__WEBPACK_IMPORTED_MODULE_0__.contextBridge.exposeInMainWorld('electron', electronHandler);

})();

/******/ 	return __webpack_exports__;
/******/ })()
;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJlbG9hZC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsTzs7Ozs7Ozs7OztBQ1ZhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YscUJBQXFCLEdBQUcsY0FBYyxHQUFHLHVCQUF1QixHQUFHLGdCQUFnQixHQUFHLGdCQUFnQixHQUFHLGdCQUFnQixHQUFHLGlCQUFpQixHQUFHLGVBQWUsR0FBRyxrQkFBa0IsR0FBRyxjQUFjLEdBQUcsWUFBWSxHQUFHLDZCQUE2QixHQUFHLG9CQUFvQixHQUFHLHFCQUFxQixHQUFHLHFCQUFxQixHQUFHLHFCQUFxQixHQUFHLHFCQUFxQixHQUFHLDRCQUE0QixHQUFHLHdDQUF3QyxHQUFHLG9CQUFvQixHQUFHLG9CQUFvQjtBQUNuZSxnQkFBZ0IsbUJBQU8sQ0FBQyxxRkFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLDZCQUE2QjtBQUM3QjtBQUNBLFlBQVk7QUFDWixjQUFjO0FBQ2Qsa0JBQWtCO0FBQ2xCLGVBQWU7QUFDZixpQkFBaUI7QUFDakIsZ0JBQWdCO0FBQ2hCLGdCQUFnQjtBQUNoQixnQkFBZ0I7QUFDaEIsdUJBQXVCO0FBQ3ZCLGNBQWM7QUFDZCxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDNVRhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsWUFBWSxHQUFHLGdCQUFnQjtBQUMvQixnQkFBZ0IsbUJBQU8sQ0FBQyxxRkFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ3ROYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLDZCQUE2QixHQUFHLHlCQUF5QjtBQUN6RCxtQkFBbUIsbUJBQU8sQ0FBQywyRkFBb0I7QUFDL0Msd0NBQXdDLG1CQUFPLENBQUMsMkZBQW9CO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwyQ0FBMkM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUMvY2E7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRiwwQkFBMEIsR0FBRyxzQkFBc0IsR0FBRywwQkFBMEI7QUFDaEYsdUNBQXVDLG1CQUFPLENBQUMsMkZBQW9CO0FBQ25FLHdDQUF3QyxtQkFBTyxDQUFDLDJGQUFvQjtBQUNwRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUN0VWE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixlQUFlLEdBQUcsaUJBQWlCO0FBQ25DLHdDQUF3QyxtQkFBTyxDQUFDLGlGQUFlO0FBQy9ELHNDQUFzQyxtQkFBTyxDQUFDLHVGQUFrQjtBQUNoRSxvQkFBb0IsbUJBQU8sQ0FBQyw2RkFBcUI7QUFDakQscUJBQXFCLG1CQUFPLENBQUMsK0ZBQXNCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywwQkFBMEIsaUJBQWlCLDRCQUE0QjtBQUN4RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxTQUFTO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQSxtREFBbUQsU0FBUztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGtDQUFrQztBQUNsQyxtREFBbUQsU0FBUztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQSw4Q0FBOEM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDcmNhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsZ0JBQWdCLEdBQUcsWUFBWTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ2pOYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLHdCQUF3QixHQUFHLG9CQUFvQjtBQUMvQyxvQkFBb0IsbUJBQU8sQ0FBQyw2RkFBcUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDdlJhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsYUFBYSxHQUFHLFlBQVksR0FBRyxZQUFZLEdBQUcsWUFBWTtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGFBQWEsSUFBSSxhQUFhLElBQUksYUFBYTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGFBQWEsSUFBSSxhQUFhLElBQUksYUFBYSxJQUFJLHlCQUF5QjtBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixhQUFhLElBQUksZ0NBQWdDLEtBQUssZ0NBQWdDO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsYUFBYSxJQUFJLGdDQUFnQyxLQUFLLGdDQUFnQyxLQUFLLHdCQUF3QjtBQUMxSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQiw2QkFBNkIsRUFBRSw2QkFBNkIsRUFBRSw2QkFBNkI7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsNkJBQTZCLEVBQUUsNkJBQTZCLEVBQUUsNkJBQTZCLEVBQUUsK0NBQStDO0FBQy9KO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssc0NBQXNDO0FBQzNDLEdBQUcsNkNBQTZDO0FBQ2hELENBQUMsc0JBQXNCLGFBQWEsd0JBQXdCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDbnNCYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLFlBQVksR0FBRyxZQUFZLEdBQUcsWUFBWSxHQUFHLFNBQVMsR0FBRyxlQUFlLEdBQUcsY0FBYyxHQUFHLGtCQUFrQixHQUFHLCtCQUErQixHQUFHLDRCQUE0QixHQUFHLG1CQUFtQixHQUFHLGlCQUFpQixHQUFHLHFCQUFxQixHQUFHLHdDQUF3QyxHQUFHLHFCQUFxQixHQUFHLHdCQUF3QixHQUFHLDJCQUEyQixHQUFHLGtCQUFrQixHQUFHLDRCQUE0QixHQUFHLHNCQUFzQixHQUFHLHdCQUF3QixHQUFHLDJCQUEyQixHQUFHLHVCQUF1QixHQUFHLHFCQUFxQixHQUFHLHNCQUFzQixHQUFHLDhCQUE4QixHQUFHLGdCQUFnQixHQUFHLFlBQVksR0FBRyx3QkFBd0IsR0FBRyxpQkFBaUIsR0FBRywyQkFBMkIsR0FBRyxxQkFBcUIsR0FBRyx3QkFBd0IsR0FBRyxzQ0FBc0MsR0FBRyxjQUFjLEdBQUcsZUFBZSxHQUFHLG9DQUFvQyxHQUFHLCtDQUErQyxHQUFHLGdEQUFnRCxHQUFHLHFDQUFxQyxHQUFHLDZCQUE2QixHQUFHLG1CQUFtQixHQUFHLHFCQUFxQixHQUFHLG1CQUFtQixHQUFHLGtCQUFrQixHQUFHLGdCQUFnQixHQUFHLGdCQUFnQixHQUFHLDBCQUEwQixHQUFHLGVBQWUsR0FBRyxrQkFBa0IsR0FBRyxpQkFBaUI7QUFDeHZDLGVBQWUsR0FBRywwQkFBMEIsR0FBRyw4QkFBOEIsR0FBRyx3QkFBd0IsR0FBRyxvQkFBb0IsR0FBRyw0QkFBNEIsR0FBRyxvQ0FBb0M7QUFDck0sdUNBQXVDLG1CQUFPLENBQUMsMkZBQW9CO0FBQ25FLGdCQUFnQixtQkFBTyxDQUFDLHVGQUFrQjtBQUMxQyx3QkFBd0IsbUJBQU8sQ0FBQyx1R0FBMEI7QUFDMUQscUJBQXFCLG1CQUFPLENBQUMsaUdBQXVCO0FBQ3BELGdCQUFnQixtQkFBTyxDQUFDLHFGQUFpQjtBQUN6QyxnQkFBZ0IsbUJBQU8sQ0FBQyxxRkFBaUI7QUFDekMsb0JBQW9CLG1CQUFPLENBQUMsNkZBQXFCO0FBQ2pELHdDQUF3QyxtQkFBTyxDQUFDLDJGQUFvQjtBQUNwRSxpQkFBaUIsbUJBQU8sQ0FBQyx1RkFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTiw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEIsZ0JBQWdCO0FBQ2hCLGtCQUFrQjtBQUNsQixtQkFBbUI7QUFDbkIscUJBQXFCO0FBQ3JCLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLG9DQUFvQztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRSwrQ0FBK0M7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTs7QUFFQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBLDZCQUE2QixNQUFNO0FBQ25DO0FBQ0E7QUFDQSw4QkFBOEIsT0FBTztBQUNyQztBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSwyQkFBMkIsSUFBSTtBQUMvQjtBQUNBO0FBQ0EsNkJBQTZCLE1BQU07QUFDbkM7QUFDQTtBQUNBLDhCQUE4QixPQUFPO0FBQ3JDO0FBQ0E7QUFDQSw0QkFBNEIsS0FBSztBQUNqQztBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGdCQUFnQjtBQUN0RDtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsUUFBUTtBQUM1QztBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw2Q0FBNkM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBLGtCQUFrQiw2Q0FBNkM7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ3I4Q2E7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixhQUFhLEdBQUcscUJBQXFCLEdBQUcsb0JBQW9CLEdBQUcsZUFBZSxHQUFHLHFDQUFxQyxHQUFHLGFBQWE7QUFDdEksb0JBQW9CLG1CQUFPLENBQUMsNkZBQXFCO0FBQ2pELHFCQUFxQixtQkFBTyxDQUFDLCtGQUFzQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0JBQXNCLGFBQWEsd0JBQXdCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsdUJBQXVCLFVBQVUsNkNBQTZDLGVBQWUsNkNBQTZDLFNBQVM7QUFDbko7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQW1FLFNBQVM7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsU0FBUztBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDbnlCYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLHVCQUF1QixHQUFHLHNCQUFzQixHQUFHLHNCQUFzQixHQUFHLHFCQUFxQixHQUFHLDJCQUEyQixHQUFHLGdCQUFnQixHQUFHLFdBQVc7QUFDaEssV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsWUFBWTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMseUJBQXlCLGdCQUFnQiwyQkFBMkI7QUFDckU7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDNVhhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsMEJBQTBCLEdBQUcsOEJBQThCLEdBQUcsOEJBQThCLEdBQUcsd0JBQXdCLEdBQUcsdUJBQXVCLEdBQUcsd0JBQXdCLEdBQUcsZ0JBQWdCLEdBQUcsb0JBQW9CLEdBQUcscUJBQXFCO0FBQzlPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsS0FBSztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDZCQUE2QixvQkFBb0IsK0JBQStCO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLGFBQWE7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDhCQUE4QixFQUFFLDZCQUE2QjtBQUMzRTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDOWRhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWtCLEdBQUcsb0JBQW9CLEdBQUcsMEJBQTBCLEdBQUcsZUFBZSxHQUFHLG9CQUFvQjtBQUMvRztBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDalFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysa0JBQWtCO0FBQ2xCLG1CQUFtQixtQkFBTyxDQUFDLDJGQUFvQjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsZ0NBQWdDO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDOVRhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixVQUFVLEdBQUcsb0JBQW9CLEdBQUcsZUFBZSxHQUFHLGtCQUFrQixHQUFHLGdCQUFnQixHQUFHLGFBQWEsR0FBRyxnQkFBZ0IsR0FBRyxpQkFBaUIsR0FBRyxlQUFlLEdBQUcsbUJBQW1CLEdBQUcsaUJBQWlCLEdBQUcsd0JBQXdCO0FBQ3pPO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixtQkFBbUI7QUFDbkIsZUFBZTtBQUNmLGlCQUFpQjtBQUNqQixnQkFBZ0I7QUFDaEIsYUFBYTtBQUNiLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ3pUYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGFBQWEsR0FBRyxhQUFhLEdBQUcsWUFBWSxHQUFHLGNBQWM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNoUmE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRix1QkFBdUIsR0FBRyxpQkFBaUIsR0FBRyx3QkFBd0IsR0FBRyxxQkFBcUIsR0FBRywyQkFBMkIsR0FBRyx5QkFBeUIsR0FBRyxhQUFhLEdBQUcsaUJBQWlCLEdBQUcsbUNBQW1DLEdBQUcsMkJBQTJCLEdBQUcseUJBQXlCLEdBQUcsd0JBQXdCLEdBQUcsK0JBQStCLEdBQUcsK0JBQStCLEdBQUcsOEJBQThCLEdBQUcsOEJBQThCLEdBQUcsNkJBQTZCLEdBQUcseUJBQXlCLEdBQUcsMkJBQTJCLEdBQUcsOEJBQThCLEdBQUcsZ0NBQWdDO0FBQzNsQixnQkFBZ0IsbUJBQU8sQ0FBQyx5RkFBcUI7QUFDN0MsbUJBQW1CLG1CQUFPLENBQUMsK0ZBQXdCO0FBQ25ELGdDQUFnQztBQUNoQyw4QkFBOEI7QUFDOUIsMkJBQTJCO0FBQzNCLHlCQUF5QjtBQUN6Qiw2QkFBNkI7QUFDN0IsOEJBQThCO0FBQzlCLDhCQUE4QjtBQUM5QiwrQkFBK0I7QUFDL0IsK0JBQStCO0FBQy9CLHdCQUF3QjtBQUN4Qix5QkFBeUI7QUFDekIsMkJBQTJCO0FBQzNCLG1DQUFtQyxVQUFVLFFBQVE7QUFDckQsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLE1BQU07QUFDbEI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSx3QkFBd0IsOEVBQVEsS0FBSyxDQUFDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDNVRhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YscUJBQXFCLEdBQUcsZ0JBQWdCLEdBQUcsc0JBQXNCO0FBQ2pFLG1CQUFtQixtQkFBTyxDQUFDLDZFQUFZO0FBQ3ZDLGtEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQztBQUNGLDRDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsRUFBQztBQUNGLGdCQUFnQixtQkFBTyxDQUFDLHlGQUFxQjtBQUM3QyxpREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLEVBQUM7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ2xOYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE2QztBQUM3QztBQUNBLENBQUMsRUFBQztBQUNGLGVBQWU7QUFDZixtQkFBbUIsbUJBQU8sQ0FBQywwQkFBVTtBQUNyQyxtQ0FBbUMsbUJBQU8sQ0FBQyxzRkFBb0I7QUFDL0QsZ0JBQWdCLG1CQUFPLENBQUMsMEZBQXNCO0FBQzlDLG9CQUFvQixtQkFBTyxDQUFDLGtHQUEwQjtBQUN0RCxtQkFBbUIsbUJBQU8sQ0FBQyxnR0FBeUI7QUFDcEQsd0JBQXdCLG1CQUFPLENBQUMsNEdBQStCO0FBQy9ELG1CQUFtQixtQkFBTyxDQUFDLGdHQUF5QjtBQUNwRCxpQkFBaUIsbUJBQU8sQ0FBQyxvRUFBVztBQUNwQyxlQUFlLG1CQUFPLENBQUMsNkVBQVE7QUFDL0IsZ0JBQWdCLG1CQUFPLENBQUMsMEZBQXNCO0FBQzlDLHFCQUFxQixtQkFBTyxDQUFDLHNHQUE0QjtBQUN6RCxnQkFBZ0IsbUJBQU8sQ0FBQyw0RkFBdUI7QUFDL0MsdUNBQXVDLG1CQUFPLENBQUMsOEZBQXdCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx3REFBd0Q7QUFDekQ7QUFDQSxpRkFBaUY7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qyx5QkFBeUI7QUFDbEUsK0VBQStFLHNCQUFzQjtBQUNyRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsNEJBQTRCO0FBQ3JFLCtFQUErRSx5QkFBeUI7QUFDeEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELEtBQUssVUFBVTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msc0JBQXNCO0FBQ3RELGlDQUFpQyxvREFBb0Q7QUFDckYsTUFBTTtBQUNOLGdDQUFnQyxzQkFBc0I7QUFDdEQsa0NBQWtDLDJCQUEyQjtBQUM3RDtBQUNBLE1BQU07QUFDTixnQ0FBZ0MsaURBQWlEO0FBQ2pGLGlDQUFpQywrQ0FBK0M7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNobUNhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsZUFBZSxHQUFHLGlCQUFpQjtBQUNuQyxjQUFjLG1CQUFPLENBQUMseUZBQXVCO0FBQzdDLG9CQUFvQixtQkFBTyxDQUFDLHFHQUE2QjtBQUN6RCxlQUFlLG1CQUFPLENBQUMsNEVBQVE7QUFDL0IsbUJBQW1CLG1CQUFPLENBQUMsbUdBQTRCO0FBQ3ZELHdCQUF3QixtQkFBTyxDQUFDLCtHQUFrQztBQUNsRSxnQkFBZ0IsbUJBQU8sQ0FBQyw2RkFBeUI7QUFDakQsb0JBQW9CLG1CQUFPLENBQUMsc0ZBQWE7QUFDekMsa0JBQWtCLG1CQUFPLENBQUMsa0ZBQVc7QUFDckMsbUJBQW1CLG1CQUFPLENBQUMsbUdBQTRCO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywwQkFBMEIsaUJBQWlCLDRCQUE0QjtBQUN4RTtBQUNBLDhGQUE4RjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0Isd0NBQXdDO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVCQUF1QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLElBQUksaUJBQWlCO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNyakJhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0YsbUJBQW1CO0FBQ25CLG1CQUFtQixtQkFBTyxDQUFDLDBCQUFVO0FBQ3JDLGNBQWMsbUJBQU8sQ0FBQyx5RkFBdUI7QUFDN0MsbUJBQW1CLG1CQUFPLENBQUMsbUdBQTRCO0FBQ3ZELG9CQUFvQixtQkFBTyxDQUFDLHFHQUE2QjtBQUN6RCxpQkFBaUIsbUJBQU8sQ0FBQyx1RUFBYztBQUN2Qyx1Q0FBdUMsbUJBQU8sQ0FBQyxpR0FBMkI7QUFDMUU7QUFDQSwwRkFBMEY7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQSw0REFBNEQsY0FBYztBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCxLQUFLLFVBQVU7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsUUFBUTtBQUNSO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0EsOERBQThELFNBQVM7QUFDdkU7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHlCQUF5QjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUM5akJhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysb0JBQW9CO0FBQ3BCLGVBQWUsbUJBQU8sQ0FBQyw0RUFBUTtBQUMvQixjQUFjLG1CQUFPLENBQUMseUZBQXVCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNwTmE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixrQkFBa0I7QUFDbEIsaUJBQWlCLG1CQUFPLENBQUMsdUVBQWM7QUFDdkMsZUFBZSxtQkFBTyxDQUFDLDRFQUFRO0FBQy9CLG9CQUFvQixtQkFBTyxDQUFDLHFHQUE2QjtBQUN6RCxjQUFjLG1CQUFPLENBQUMseUZBQXVCO0FBQzdDLHdCQUF3QixtQkFBTyxDQUFDLCtHQUFrQztBQUNsRSxnQkFBZ0IsbUJBQU8sQ0FBQyw4RUFBUztBQUNqQyxnQkFBZ0IsbUJBQU8sQ0FBQyw2RkFBeUI7QUFDakQ7QUFDQSx5SEFBeUg7QUFDekg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDZDQUE2QztBQUM1RixVQUFVO0FBQ1YsZ0RBQWdELHlCQUF5QjtBQUN6RSwrQ0FBK0Msb0NBQW9DO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDblhhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQTZDO0FBQzdDO0FBQ0EsQ0FBQyxFQUFDO0FBQ0Ysc0JBQXNCO0FBQ3RCLG1CQUFtQixtQkFBTyxDQUFDLDBCQUFVO0FBQ3JDLGdCQUFnQixtQkFBTyxDQUFDLDBGQUFzQjtBQUM5QyxjQUFjLG1CQUFPLENBQUMsc0ZBQW9CO0FBQzFDLG1CQUFtQixtQkFBTyxDQUFDLGdHQUF5QjtBQUNwRCxrQkFBa0IsbUJBQU8sQ0FBQyw0RUFBWTtBQUN0QyxtQkFBbUIsbUJBQU8sQ0FBQyxnRkFBWTtBQUN2QyxpQkFBaUIsbUJBQU8sQ0FBQyxvRUFBVztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsS0FBSztBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELCtGQUErRjtBQUN2SjtBQUNBLDBEQUEwRCxNQUFNO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RDtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRkFBc0Y7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLG1CQUFtQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQ3ZyQmE7O0FBRWI7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBNkM7QUFDN0M7QUFDQSxDQUFDLEVBQUM7QUFDRixnQkFBZ0I7QUFDaEIsb0JBQW9CLG1CQUFPLENBQUMsa0dBQTBCO0FBQ3RELHlCQUF5Qix5QkFBeUIsZ0NBQWdDLEdBQUcsbUNBQW1DLGtCQUFrQix3QkFBd0IsNEJBQTRCLG1CQUFtQixvQkFBb0IsdUJBQXVCLFdBQVcsWUFBWSxhQUFhLG9CQUFvQiw4Q0FBOEMsMkJBQTJCLG9CQUFvQixxQkFBcUIsOEJBQThCLDBCQUEwQixzQkFBc0IsWUFBWSxnQkFBZ0IsaUJBQWlCLHNCQUFzQixtQkFBbUIsR0FBRyxzRUFBc0UsMkJBQTJCLEdBQUcscUZBQXFGLGVBQWUsaUJBQWlCLHNCQUFzQiwwQkFBMEIsc0JBQXNCLEdBQUcsZ0RBQWdELGdDQUFnQyxHQUFHLCtGQUErRixnQ0FBZ0Msc0JBQXNCLG9CQUFvQixHQUFHLCtFQUErRSxjQUFjLHNCQUFzQixHQUFHLHFEQUFxRCxzQkFBc0IsR0FBRyw0Q0FBNEMsb0hBQW9ILEdBQUcseUNBQXlDLFdBQVcsWUFBWSxtQkFBbUIsdUJBQXVCLGdCQUFnQixpQkFBaUIsZ0JBQWdCLDZCQUE2QixHQUFHLDJCQUEyQixrQkFBa0Isd0JBQXdCLDRCQUE0QixnQkFBZ0IsaUJBQWlCLGdCQUFnQixxQkFBcUIsR0FBRyw2QkFBNkIsbUJBQW1CLG9CQUFvQixxQkFBcUIsd0JBQXdCLDRCQUE0QixZQUFZLEdBQUcsc0RBQXNELHFCQUFxQix1QkFBdUIsR0FBRyxnQ0FBZ0Msc0JBQXNCLHNCQUFzQixHQUFHLGlDQUFpQyx1QkFBdUIsY0FBYyxnQ0FBZ0MsR0FBRywyQkFBMkIsb0JBQW9CLHFCQUFxQixHQUFHLGlEQUFpRCxrQkFBa0IsaUJBQWlCLG1CQUFtQix1QkFBdUIsdUJBQXVCLGdCQUFnQixnQ0FBZ0MsaUJBQWlCLG9DQUFvQyxzQkFBc0IsR0FBRyx1QkFBdUIsbUJBQW1CLEdBQUcsNENBQTRDLDZDQUE2QyxHQUFHLG1EQUFtRCx1Q0FBdUMsR0FBRyxvQ0FBb0MsaUJBQWlCLEdBQUcsMkJBQTJCLGdCQUFnQixtQ0FBbUMsZUFBZSxnQ0FBZ0MscUNBQXFDLEdBQUcsK0NBQStDLDZCQUE2QixHQUFHLDZDQUE2QyxzREFBc0QsR0FBRyxpREFBaUQsMEJBQTBCLEdBQUcsaUNBQWlDLGdDQUFnQyx1QkFBdUIsR0FBRyx1QkFBdUIsV0FBVyxZQUFZLGVBQWUsaUJBQWlCLEdBQUcsc0JBQXNCLFdBQVcsZ0JBQWdCLGdCQUFnQixHQUFHLHFDQUFxQyx1QkFBdUIsWUFBWSxhQUFhLGNBQWMsbUJBQW1CLGVBQWUsR0FBRyxpQ0FBaUMsa0JBQWtCLG1CQUFtQiwyQkFBMkIscUJBQXFCLG9CQUFvQix1QkFBdUIsR0FBRyx5QkFBeUIsYUFBYSxnQkFBZ0IsdUJBQXVCLG9CQUFvQixHQUFHLGtEQUFrRCx1QkFBdUIsR0FBRywwRUFBMEUsc0JBQXNCLEdBQUcsMkNBQTJDLDJCQUEyQixxQkFBcUIsaUJBQWlCLG9CQUFvQixZQUFZLHdCQUF3QixnQ0FBZ0MsZUFBZSxHQUFHLG1FQUFtRSxvQkFBb0IsR0FBRyxvREFBb0QsaUJBQWlCLEdBQUcsNEhBQTRILDZDQUE2QyxHQUFHLG9LQUFvSyx1Q0FBdUMsR0FBRyxpQ0FBaUMsdUJBQXVCLG1CQUFtQixjQUFjLGVBQWUsZUFBZSxpQkFBaUIscUJBQXFCLG1CQUFtQixtQkFBbUIsdUJBQXVCLHdCQUF3Qix3QkFBd0Isc0NBQXNDLDhCQUE4Qix3QkFBd0IsdUJBQXVCLGdDQUFnQywwSEFBMEgsbUJBQW1CLEdBQUcsb0RBQW9ELGVBQWUsZ0JBQWdCLG9CQUFvQix1Q0FBdUMsR0FBRywwREFBMEQsaUJBQWlCLHVDQUF1QyxHQUFHLDBEQUEwRCx3QkFBd0IsK0NBQStDLEdBQUcsdUNBQXVDLGVBQWUsR0FBRyxrREFBa0QsZUFBZSxjQUFjLG9CQUFvQix5QkFBeUIsa0JBQWtCLGtCQUFrQixHQUFHLHlEQUF5RCxvQkFBb0IsR0FBRyxpRkFBaUYsaUJBQWlCLEdBQUcsK0RBQStELHVCQUF1QixHQUFHLHVEQUF1RCx1QkFBdUIsbUJBQW1CLHlCQUF5QixrQkFBa0Isb0JBQW9CLG9CQUFvQix3QkFBd0IsdUJBQXVCLHVCQUF1QiwwQkFBMEIsR0FBRyxtREFBbUQsdUJBQXVCLG1CQUFtQiwwQkFBMEIsbUJBQW1CLHFCQUFxQixvQkFBb0IsbUJBQW1CLEdBQUcsbUVBQW1FLDBCQUEwQixtQ0FBbUMsOEJBQThCLGdDQUFnQywrQkFBK0IsMkJBQTJCLGNBQWMsMkJBQTJCLEdBQUcsNkRBQTZELGlCQUFpQix1QkFBdUIsZ0JBQWdCLHlDQUF5QyxHQUFHLGtFQUFrRSxpQ0FBaUMsc0JBQXNCLGVBQWUsR0FBRyx5REFBeUQsbUJBQW1CLEdBQUcsa0dBQWtHLDBCQUEwQix1QkFBdUIsbUJBQW1CLHlCQUF5QixzQkFBc0Isb0JBQW9CLG1CQUFtQixHQUFHLHdEQUF3RCx1QkFBdUIsZUFBZSxpQkFBaUIsZ0JBQWdCLGVBQWUsR0FBRyxtT0FBbU8scUJBQXFCLGdCQUFnQixpQkFBaUIsR0FBRyw0RkFBNEYsd0JBQXdCLEdBQUcscURBQXFELGdCQUFnQixpQkFBaUIsdUJBQXVCLEdBQUcsOERBQThELHVCQUF1QixHQUFHO0FBQy96UTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FDMVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7QUNSQTs7Ozs7O1VDQUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTs7VUFFQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTs7Ozs7V0N0QkE7V0FDQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLGlDQUFpQyxXQUFXO1dBQzVDO1dBQ0E7Ozs7O1dDUEE7V0FDQTtXQUNBO1dBQ0E7V0FDQSx5Q0FBeUMsd0NBQXdDO1dBQ2pGO1dBQ0E7V0FDQTs7Ozs7V0NQQTs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSx1REFBdUQsaUJBQWlCO1dBQ3hFO1dBQ0EsZ0RBQWdELGFBQWE7V0FDN0Q7Ozs7Ozs7Ozs7Ozs7Ozs7QUNOQSxpREFBaUQ7QUFDakQsZ0NBQWdDO0FBQ3dDO0FBQ0w7QUFJbkUsTUFBTSxlQUFlLEdBQUc7SUFDdEIsV0FBVyxFQUFFO1FBQ1gsV0FBVyxDQUFDLE9BQWlCLEVBQUUsR0FBRyxJQUFlO1lBQy9DLGlEQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ3JDLENBQUM7UUFDRCxFQUFFLENBQUMsT0FBaUIsRUFBRSxJQUFrQztZQUN0RCxNQUFNLFlBQVksR0FBRyxDQUFDLE1BQXdCLEVBQUUsR0FBRyxJQUFlLEVBQUUsRUFBRSxDQUNwRSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztZQUNoQixpREFBVyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsWUFBWSxDQUFDLENBQUM7WUFFdEMsT0FBTyxHQUFHLEVBQUU7Z0JBQ1YsaURBQVcsQ0FBQyxjQUFjLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUFDO1lBQ3BELENBQUMsQ0FBQztRQUNKLENBQUM7UUFDRCxJQUFJLENBQUMsT0FBaUIsRUFBRSxJQUFrQztZQUN4RCxpREFBVyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxNQUFNLEVBQUUsR0FBRyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDaEUsQ0FBQztLQUNGO0lBQ0QsS0FBSyxFQUFFO1FBQ0wsR0FBRyxDQUFDLEdBQUc7WUFDTCxPQUFPLGlEQUFXLENBQUMsUUFBUSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3pELENBQUM7UUFDRCxHQUFHLENBQUMsUUFBUSxFQUFFLEdBQUc7WUFDZixpREFBVyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDeEQsQ0FBQztRQUNELHlEQUF5RDtLQUMxRDtDQUNGLENBQUM7QUFFRixNQUFNLENBQUMsZ0JBQWdCLENBQUMsa0JBQWtCLEVBQUUsR0FBRyxFQUFFO0lBQy9DLDJCQUEyQjtJQUMzQixJQUFJLDhEQUFRLENBQUM7UUFDWCxlQUFlLEVBQUUsbUVBQWEsQ0FBQyxXQUFXO1FBQzFDLHdCQUF3QixFQUFFLE1BQU07S0FDakMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUM7QUFFSCxtREFBYSxDQUFDLGlCQUFpQixDQUFDLFVBQVUsRUFBRSxlQUFlLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2N1c3RvbS1lbGVjdHJvbi10aXRsZWJhci9iYXNlL2Jyb3dzZXIvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3VzdG9tLWVsZWN0cm9uLXRpdGxlYmFyL2Jhc2UvYnJvd3Nlci9ldmVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3VzdG9tLWVsZWN0cm9uLXRpdGxlYmFyL2Jhc2UvYnJvd3Nlci9rZXlib2FyZEV2ZW50LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jdXN0b20tZWxlY3Ryb24tdGl0bGViYXIvYmFzZS9icm93c2VyL21vdXNlRXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2N1c3RvbS1lbGVjdHJvbi10aXRsZWJhci9iYXNlL2Jyb3dzZXIvdG91Y2guanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2N1c3RvbS1lbGVjdHJvbi10aXRsZWJhci9iYXNlL2NvbW1vbi9hcnJheXMuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2N1c3RvbS1lbGVjdHJvbi10aXRsZWJhci9iYXNlL2NvbW1vbi9hc3luYy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3VzdG9tLWVsZWN0cm9uLXRpdGxlYmFyL2Jhc2UvY29tbW9uL2NvbG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jdXN0b20tZWxlY3Ryb24tdGl0bGViYXIvYmFzZS9jb21tb24vZG9tLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jdXN0b20tZWxlY3Ryb24tdGl0bGViYXIvYmFzZS9jb21tb24vZXZlbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2N1c3RvbS1lbGVjdHJvbi10aXRsZWJhci9iYXNlL2NvbW1vbi9pdGVyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3VzdG9tLWVsZWN0cm9uLXRpdGxlYmFyL2Jhc2UvY29tbW9uL2tleUNvZGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jdXN0b20tZWxlY3Ryb24tdGl0bGViYXIvYmFzZS9jb21tb24vbGlmZWN5Y2xlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jdXN0b20tZWxlY3Ryb24tdGl0bGViYXIvYmFzZS9jb21tb24vbGlua2VkTGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3VzdG9tLWVsZWN0cm9uLXRpdGxlYmFyL2Jhc2UvY29tbW9uL3BsYXRmb3JtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jdXN0b20tZWxlY3Ryb24tdGl0bGViYXIvYmFzZS9jb21tb24vc3RyaW5ncy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3VzdG9tLWVsZWN0cm9uLXRpdGxlYmFyL2NvbnN0cy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3VzdG9tLWVsZWN0cm9uLXRpdGxlYmFyL2luZGV4LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jdXN0b20tZWxlY3Ryb24tdGl0bGViYXIvbWVudWJhci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3VzdG9tLWVsZWN0cm9uLXRpdGxlYmFyL21lbnViYXIvbWVudS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3VzdG9tLWVsZWN0cm9uLXRpdGxlYmFyL21lbnViYXIvbWVudS9pdGVtLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jdXN0b20tZWxlY3Ryb24tdGl0bGViYXIvbWVudWJhci9tZW51L3NlcGFyYXRvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3VzdG9tLWVsZWN0cm9uLXRpdGxlYmFyL21lbnViYXIvbWVudS9zdWJtZW51LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jdXN0b20tZWxlY3Ryb24tdGl0bGViYXIvdGl0bGViYXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2N1c3RvbS1lbGVjdHJvbi10aXRsZWJhci90aXRsZWJhci90aGVtZWJhci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY3VzdG9tLWVsZWN0cm9uLXRpdGxlYmFyLyBzeW5jIiwid2VicGFjazovLy9leHRlcm5hbCBub2RlLWNvbW1vbmpzIFwiZWxlY3Ryb25cIiIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4vcHJlbG9hZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gZmFjdG9yeSgpO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkoZ2xvYmFsLCAoKSA9PiB7XG5yZXR1cm4gIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5pc0VkZ2VXZWJWaWV3ID0gZXhwb3J0cy5pc0lQYWQgPSBleHBvcnRzLmlzV2Via2l0V2ViVmlldyA9IGV4cG9ydHMuaXNTYWZhcmkgPSBleHBvcnRzLmlzQ2hyb21lID0gZXhwb3J0cy5pc1dlYktpdCA9IGV4cG9ydHMuaXNGaXJlZm94ID0gZXhwb3J0cy5pc09wZXJhID0gZXhwb3J0cy5pc0VkZ2VPcklFID0gZXhwb3J0cy5pc0VkZ2UgPSBleHBvcnRzLmlzSUUgPSBleHBvcnRzLm9uRGlkQ2hhbmdlRnVsbHNjcmVlbiA9IGV4cG9ydHMuaXNGdWxsc2NyZWVuID0gZXhwb3J0cy5zZXRGdWxsc2NyZWVuID0gZXhwb3J0cy5nZXRQaXhlbFJhdGlvID0gZXhwb3J0cy5zZXRab29tRmFjdG9yID0gZXhwb3J0cy5nZXRab29tRmFjdG9yID0gZXhwb3J0cy5vbkRpZENoYW5nZVpvb21MZXZlbCA9IGV4cG9ydHMuZ2V0VGltZVNpbmNlTGFzdFpvb21MZXZlbENoYW5nZWQgPSBleHBvcnRzLmdldFpvb21MZXZlbCA9IGV4cG9ydHMuc2V0Wm9vbUxldmVsID0gdm9pZCAwO1xuY29uc3QgZXZlbnRfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24vZXZlbnRcIik7XG5jbGFzcyBXaW5kb3dNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fem9vbUxldmVsID0gMDtcbiAgICB0aGlzLl9sYXN0Wm9vbUxldmVsQ2hhbmdlVGltZSA9IDA7XG4gICAgdGhpcy5fb25EaWRDaGFuZ2Vab29tTGV2ZWwgPSBuZXcgKF9nZXRfXyhcImV2ZW50XzFcIikuRW1pdHRlcikoKTtcbiAgICB0aGlzLm9uRGlkQ2hhbmdlWm9vbUxldmVsID0gdGhpcy5fb25EaWRDaGFuZ2Vab29tTGV2ZWwuZXZlbnQ7XG4gICAgLy8gLS0tIFpvb20gRmFjdG9yXG4gICAgdGhpcy5fem9vbUZhY3RvciA9IDA7XG4gICAgLy8gLS0tIEZ1bGxzY3JlZW5cbiAgICB0aGlzLl9mdWxsc2NyZWVuID0gZmFsc2U7XG4gICAgdGhpcy5fb25EaWRDaGFuZ2VGdWxsc2NyZWVuID0gbmV3IChfZ2V0X18oXCJldmVudF8xXCIpLkVtaXR0ZXIpKCk7XG4gICAgdGhpcy5vbkRpZENoYW5nZUZ1bGxzY3JlZW4gPSB0aGlzLl9vbkRpZENoYW5nZUZ1bGxzY3JlZW4uZXZlbnQ7XG4gIH1cbiAgZ2V0Wm9vbUxldmVsKCkge1xuICAgIHJldHVybiB0aGlzLl96b29tTGV2ZWw7XG4gIH1cbiAgZ2V0VGltZVNpbmNlTGFzdFpvb21MZXZlbENoYW5nZWQoKSB7XG4gICAgcmV0dXJuIERhdGUubm93KCkgLSB0aGlzLl9sYXN0Wm9vbUxldmVsQ2hhbmdlVGltZTtcbiAgfVxuICBzZXRab29tTGV2ZWwoem9vbUxldmVsLCBpc1RydXN0ZWQpIHtcbiAgICBpZiAodGhpcy5fem9vbUxldmVsID09PSB6b29tTGV2ZWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fem9vbUxldmVsID0gem9vbUxldmVsO1xuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L3ZzY29kZS9pc3N1ZXMvMjYxNTFcbiAgICB0aGlzLl9sYXN0Wm9vbUxldmVsQ2hhbmdlVGltZSA9IGlzVHJ1c3RlZCA/IDAgOiBEYXRlLm5vdygpO1xuICAgIHRoaXMuX29uRGlkQ2hhbmdlWm9vbUxldmVsLmZpcmUodGhpcy5fem9vbUxldmVsKTtcbiAgfVxuICBnZXRab29tRmFjdG9yKCkge1xuICAgIHJldHVybiB0aGlzLl96b29tRmFjdG9yO1xuICB9XG4gIHNldFpvb21GYWN0b3Ioem9vbUZhY3Rvcikge1xuICAgIHRoaXMuX3pvb21GYWN0b3IgPSB6b29tRmFjdG9yO1xuICB9XG4gIC8vIC0tLSBQaXhlbCBSYXRpb1xuICBnZXRQaXhlbFJhdGlvKCkge1xuICAgIGNvbnN0IGN0eCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLmdldENvbnRleHQoJzJkJyk7XG4gICAgY29uc3QgZHByID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTtcbiAgICBjb25zdCBic3IgPSBjdHgud2Via2l0QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fCBjdHgubW96QmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fCBjdHgubXNCYWNraW5nU3RvcmVQaXhlbFJhdGlvIHx8IGN0eC5vQmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fCBjdHguYmFja2luZ1N0b3JlUGl4ZWxSYXRpbyB8fCAxO1xuICAgIHJldHVybiBkcHIgLyBic3I7XG4gIH1cbiAgc2V0RnVsbHNjcmVlbihmdWxsc2NyZWVuKSB7XG4gICAgaWYgKHRoaXMuX2Z1bGxzY3JlZW4gPT09IGZ1bGxzY3JlZW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZnVsbHNjcmVlbiA9IGZ1bGxzY3JlZW47XG4gICAgdGhpcy5fb25EaWRDaGFuZ2VGdWxsc2NyZWVuLmZpcmUoKTtcbiAgfVxuICBpc0Z1bGxzY3JlZW4oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Z1bGxzY3JlZW47XG4gIH1cbn1cbl9nZXRfXyhcIldpbmRvd01hbmFnZXJcIikuSU5TVEFOQ0UgPSBuZXcgKF9nZXRfXyhcIldpbmRvd01hbmFnZXJcIikpKCk7XG4vKiogQSB6b29tIGluZGV4LCBlLmcuIDEsIDIsIDMgKi9cbmZ1bmN0aW9uIHNldFpvb21MZXZlbCh6b29tTGV2ZWwsIGlzVHJ1c3RlZCkge1xuICBfZ2V0X18oXCJXaW5kb3dNYW5hZ2VyXCIpLklOU1RBTkNFLnNldFpvb21MZXZlbCh6b29tTGV2ZWwsIGlzVHJ1c3RlZCk7XG59XG5leHBvcnRzLnNldFpvb21MZXZlbCA9IF9nZXRfXyhcInNldFpvb21MZXZlbFwiKTtcbmZ1bmN0aW9uIGdldFpvb21MZXZlbCgpIHtcbiAgcmV0dXJuIF9nZXRfXyhcIldpbmRvd01hbmFnZXJcIikuSU5TVEFOQ0UuZ2V0Wm9vbUxldmVsKCk7XG59XG5leHBvcnRzLmdldFpvb21MZXZlbCA9IF9nZXRfXyhcImdldFpvb21MZXZlbFwiKTtcbi8qKiBSZXR1cm5zIHRoZSB0aW1lIChpbiBtcykgc2luY2UgdGhlIHpvb20gbGV2ZWwgd2FzIGNoYW5nZWQgKi9cbmZ1bmN0aW9uIGdldFRpbWVTaW5jZUxhc3Rab29tTGV2ZWxDaGFuZ2VkKCkge1xuICByZXR1cm4gX2dldF9fKFwiV2luZG93TWFuYWdlclwiKS5JTlNUQU5DRS5nZXRUaW1lU2luY2VMYXN0Wm9vbUxldmVsQ2hhbmdlZCgpO1xufVxuZXhwb3J0cy5nZXRUaW1lU2luY2VMYXN0Wm9vbUxldmVsQ2hhbmdlZCA9IF9nZXRfXyhcImdldFRpbWVTaW5jZUxhc3Rab29tTGV2ZWxDaGFuZ2VkXCIpO1xuZnVuY3Rpb24gb25EaWRDaGFuZ2Vab29tTGV2ZWwoY2FsbGJhY2spIHtcbiAgcmV0dXJuIF9nZXRfXyhcIldpbmRvd01hbmFnZXJcIikuSU5TVEFOQ0Uub25EaWRDaGFuZ2Vab29tTGV2ZWwoY2FsbGJhY2spO1xufVxuZXhwb3J0cy5vbkRpZENoYW5nZVpvb21MZXZlbCA9IF9nZXRfXyhcIm9uRGlkQ2hhbmdlWm9vbUxldmVsXCIpO1xuLyoqIFRoZSB6b29tIHNjYWxlIGZvciBhbiBpbmRleCwgZS5nLiAxLCAxLjIsIDEuNCAqL1xuZnVuY3Rpb24gZ2V0Wm9vbUZhY3RvcigpIHtcbiAgcmV0dXJuIF9nZXRfXyhcIldpbmRvd01hbmFnZXJcIikuSU5TVEFOQ0UuZ2V0Wm9vbUZhY3RvcigpO1xufVxuZXhwb3J0cy5nZXRab29tRmFjdG9yID0gX2dldF9fKFwiZ2V0Wm9vbUZhY3RvclwiKTtcbmZ1bmN0aW9uIHNldFpvb21GYWN0b3Ioem9vbUZhY3Rvcikge1xuICBfZ2V0X18oXCJXaW5kb3dNYW5hZ2VyXCIpLklOU1RBTkNFLnNldFpvb21GYWN0b3Ioem9vbUZhY3Rvcik7XG59XG5leHBvcnRzLnNldFpvb21GYWN0b3IgPSBfZ2V0X18oXCJzZXRab29tRmFjdG9yXCIpO1xuZnVuY3Rpb24gZ2V0UGl4ZWxSYXRpbygpIHtcbiAgcmV0dXJuIF9nZXRfXyhcIldpbmRvd01hbmFnZXJcIikuSU5TVEFOQ0UuZ2V0UGl4ZWxSYXRpbygpO1xufVxuZXhwb3J0cy5nZXRQaXhlbFJhdGlvID0gX2dldF9fKFwiZ2V0UGl4ZWxSYXRpb1wiKTtcbmZ1bmN0aW9uIHNldEZ1bGxzY3JlZW4oZnVsbHNjcmVlbikge1xuICBfZ2V0X18oXCJXaW5kb3dNYW5hZ2VyXCIpLklOU1RBTkNFLnNldEZ1bGxzY3JlZW4oZnVsbHNjcmVlbik7XG59XG5leHBvcnRzLnNldEZ1bGxzY3JlZW4gPSBfZ2V0X18oXCJzZXRGdWxsc2NyZWVuXCIpO1xuZnVuY3Rpb24gaXNGdWxsc2NyZWVuKCkge1xuICByZXR1cm4gX2dldF9fKFwiV2luZG93TWFuYWdlclwiKS5JTlNUQU5DRS5pc0Z1bGxzY3JlZW4oKTtcbn1cbmV4cG9ydHMuaXNGdWxsc2NyZWVuID0gX2dldF9fKFwiaXNGdWxsc2NyZWVuXCIpO1xuZXhwb3J0cy5vbkRpZENoYW5nZUZ1bGxzY3JlZW4gPSBfZ2V0X18oXCJXaW5kb3dNYW5hZ2VyXCIpLklOU1RBTkNFLm9uRGlkQ2hhbmdlRnVsbHNjcmVlbjtcbmNvbnN0IHVzZXJBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG5leHBvcnRzLmlzSUUgPSBfZ2V0X18oXCJ1c2VyQWdlbnRcIikuaW5kZXhPZignVHJpZGVudCcpID49IDA7XG5leHBvcnRzLmlzRWRnZSA9IF9nZXRfXyhcInVzZXJBZ2VudFwiKS5pbmRleE9mKCdFZGdlLycpID49IDA7XG5leHBvcnRzLmlzRWRnZU9ySUUgPSBleHBvcnRzLmlzSUUgfHwgZXhwb3J0cy5pc0VkZ2U7XG5leHBvcnRzLmlzT3BlcmEgPSBfZ2V0X18oXCJ1c2VyQWdlbnRcIikuaW5kZXhPZignT3BlcmEnKSA+PSAwO1xuZXhwb3J0cy5pc0ZpcmVmb3ggPSBfZ2V0X18oXCJ1c2VyQWdlbnRcIikuaW5kZXhPZignRmlyZWZveCcpID49IDA7XG5leHBvcnRzLmlzV2ViS2l0ID0gX2dldF9fKFwidXNlckFnZW50XCIpLmluZGV4T2YoJ0FwcGxlV2ViS2l0JykgPj0gMDtcbmV4cG9ydHMuaXNDaHJvbWUgPSBfZ2V0X18oXCJ1c2VyQWdlbnRcIikuaW5kZXhPZignQ2hyb21lJykgPj0gMDtcbmV4cG9ydHMuaXNTYWZhcmkgPSAhZXhwb3J0cy5pc0Nocm9tZSAmJiBfZ2V0X18oXCJ1c2VyQWdlbnRcIikuaW5kZXhPZignU2FmYXJpJykgPj0gMDtcbmV4cG9ydHMuaXNXZWJraXRXZWJWaWV3ID0gIWV4cG9ydHMuaXNDaHJvbWUgJiYgIWV4cG9ydHMuaXNTYWZhcmkgJiYgZXhwb3J0cy5pc1dlYktpdDtcbmV4cG9ydHMuaXNJUGFkID0gX2dldF9fKFwidXNlckFnZW50XCIpLmluZGV4T2YoJ2lQYWQnKSA+PSAwO1xuZXhwb3J0cy5pc0VkZ2VXZWJWaWV3ID0gZXhwb3J0cy5pc0VkZ2UgJiYgX2dldF9fKFwidXNlckFnZW50XCIpLmluZGV4T2YoJ1dlYlZpZXcvJykgPj0gMDtcbmZ1bmN0aW9uIF9nZXRHbG9iYWxPYmplY3QoKSB7XG4gIHRyeSB7XG4gICAgaWYgKCEhZ2xvYmFsKSB7XG4gICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoISF3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH1cbn1cbjtcbnZhciBfUmV3aXJlTW9kdWxlSWRfXyA9IG51bGw7XG5mdW5jdGlvbiBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpIHtcbiAgaWYgKF9SZXdpcmVNb2R1bGVJZF9fID09PSBudWxsKSB7XG4gICAgbGV0IGdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICAgIGlmICghZ2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXykge1xuICAgICAgZ2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXyA9IDA7XG4gICAgfVxuICAgIF9SZXdpcmVNb2R1bGVJZF9fID0gX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXysrO1xuICB9XG4gIHJldHVybiBfUmV3aXJlTW9kdWxlSWRfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVSZWdpc3RyeV9fKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXykge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG4gIHJldHVybiB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZWREYXRhX18oKSB7XG4gIGxldCBtb2R1bGVJZCA9IF9nZXRSZXdpcmVNb2R1bGVJZF9fKCk7XG4gIGxldCByZWdpc3RyeSA9IF9nZXRSZXdpcmVSZWdpc3RyeV9fKCk7XG4gIGxldCByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICBpZiAoIXJld2lyZURhdGEpIHtcbiAgICByZWdpc3RyeVttb2R1bGVJZF0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIH1cbiAgcmV0dXJuIHJld2lyZURhdGE7XG59XG4oZnVuY3Rpb24gcmVnaXN0ZXJSZXNldEFsbCgpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9O1xuICB9XG59KSgpO1xudmFyIElOVEVOVElPTkFMX1VOREVGSU5FRCA9ICdfX0lOVEVOVElPTkFMX1VOREVGSU5FRF9fJztcbmxldCBfUmV3aXJlQVBJX18gPSB7fTtcbihmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGFkZFByb3BlcnR5VG9BUElPYmplY3QobmFtZSwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX1Jld2lyZUFQSV9fLCBuYW1lLCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3dpdGhfXycsIF93aXRoX18pO1xufSkoKTtcbmZ1bmN0aW9uIF9nZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHZhbHVlID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgIGlmICh2YWx1ZSA9PT0gSU5URU5USU9OQUxfVU5ERUZJTkVEKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7XG4gICAgY2FzZSBcImV2ZW50XzFcIjpcbiAgICAgIHJldHVybiBldmVudF8xO1xuICAgIGNhc2UgXCJXaW5kb3dNYW5hZ2VyXCI6XG4gICAgICByZXR1cm4gV2luZG93TWFuYWdlcjtcbiAgICBjYXNlIFwic2V0Wm9vbUxldmVsXCI6XG4gICAgICByZXR1cm4gc2V0Wm9vbUxldmVsO1xuICAgIGNhc2UgXCJnZXRab29tTGV2ZWxcIjpcbiAgICAgIHJldHVybiBnZXRab29tTGV2ZWw7XG4gICAgY2FzZSBcImdldFRpbWVTaW5jZUxhc3Rab29tTGV2ZWxDaGFuZ2VkXCI6XG4gICAgICByZXR1cm4gZ2V0VGltZVNpbmNlTGFzdFpvb21MZXZlbENoYW5nZWQ7XG4gICAgY2FzZSBcIm9uRGlkQ2hhbmdlWm9vbUxldmVsXCI6XG4gICAgICByZXR1cm4gb25EaWRDaGFuZ2Vab29tTGV2ZWw7XG4gICAgY2FzZSBcImdldFpvb21GYWN0b3JcIjpcbiAgICAgIHJldHVybiBnZXRab29tRmFjdG9yO1xuICAgIGNhc2UgXCJzZXRab29tRmFjdG9yXCI6XG4gICAgICByZXR1cm4gc2V0Wm9vbUZhY3RvcjtcbiAgICBjYXNlIFwiZ2V0UGl4ZWxSYXRpb1wiOlxuICAgICAgcmV0dXJuIGdldFBpeGVsUmF0aW87XG4gICAgY2FzZSBcInNldEZ1bGxzY3JlZW5cIjpcbiAgICAgIHJldHVybiBzZXRGdWxsc2NyZWVuO1xuICAgIGNhc2UgXCJpc0Z1bGxzY3JlZW5cIjpcbiAgICAgIHJldHVybiBpc0Z1bGxzY3JlZW47XG4gICAgY2FzZSBcInVzZXJBZ2VudFwiOlxuICAgICAgcmV0dXJuIHVzZXJBZ2VudDtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgX3ZhbHVlKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7fVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX3VwZGF0ZV9vcGVyYXRpb25fXyhvcGVyYXRpb24sIHZhcmlhYmxlTmFtZSwgcHJlZml4KSB7XG4gIHZhciBvbGRWYWx1ZSA9IF9nZXRfXyh2YXJpYWJsZU5hbWUpO1xuICB2YXIgbmV3VmFsdWUgPSBvcGVyYXRpb24gPT09ICcrKycgPyBvbGRWYWx1ZSArIDEgOiBvbGRWYWx1ZSAtIDE7XG4gIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIG5ld1ZhbHVlKTtcbiAgcmV0dXJuIHByZWZpeCA/IG5ld1ZhbHVlIDogb2xkVmFsdWU7XG59XG5mdW5jdGlvbiBfc2V0X18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmICh0eXBlb2YgdmFyaWFibGVOYW1lID09PSAnb2JqZWN0Jykge1xuICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVtuYW1lXSA9IHZhcmlhYmxlTmFtZVtuYW1lXTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBJTlRFTlRJT05BTF9VTkRFRklORUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBkZWxldGUgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICBpZiAoT2JqZWN0LmtleXMocmV3aXJlRGF0YSkubGVuZ3RoID09IDApIHtcbiAgICBkZWxldGUgX2dldFJld2lyZVJlZ2lzdHJ5X18oKVtfZ2V0UmV3aXJlTW9kdWxlSWRfX107XG4gIH1cbiAgO1xufVxuZnVuY3Rpb24gX3dpdGhfXyhvYmplY3QpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICB2YXIgcmV3aXJlZFZhcmlhYmxlTmFtZXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICB2YXIgcHJldmlvdXNWYWx1ZXMgPSB7fTtcbiAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV0gPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBvYmplY3RbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgICBsZXQgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgICBpZiAoISFyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlc3VsdC50aGVuKHJlc2V0KS5jYXRjaChyZXNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc2V0KCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5sZXQgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID0gdHlwZW9mIG1vZHVsZS5leHBvcnRzO1xuZnVuY3Rpb24gYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgbmFtZSwge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5pZiAoKF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ29iamVjdCcgfHwgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnZnVuY3Rpb24nKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKG1vZHVsZS5leHBvcnRzKSkge1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3dpdGhfXycsIF93aXRoX18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlQVBJX18nLCBfUmV3aXJlQVBJX18pO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuc3RvcCA9IGV4cG9ydHMuZG9tRXZlbnQgPSB2b2lkIDA7XG5jb25zdCBldmVudF8xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9ldmVudFwiKTtcbmNvbnN0IGRvbUV2ZW50ID0gKGVsZW1lbnQsIHR5cGUsIHVzZUNhcHR1cmUpID0+IHtcbiAgY29uc3QgZm4gPSBlID0+IGVtaXR0ZXIuZmlyZShlKTtcbiAgY29uc3QgZW1pdHRlciA9IG5ldyAoX2dldF9fKFwiZXZlbnRfMVwiKS5FbWl0dGVyKSh7XG4gICAgb25GaXJzdExpc3RlbmVyQWRkOiAoKSA9PiB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIHVzZUNhcHR1cmUpO1xuICAgIH0sXG4gICAgb25MYXN0TGlzdGVuZXJSZW1vdmU6ICgpID0+IHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgdXNlQ2FwdHVyZSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGVtaXR0ZXIuZXZlbnQ7XG59O1xuZXhwb3J0cy5kb21FdmVudCA9IF9nZXRfXyhcImRvbUV2ZW50XCIpO1xuZnVuY3Rpb24gc3RvcChldmVudCkge1xuICByZXR1cm4gX2dldF9fKFwiZXZlbnRfMVwiKS5FdmVudC5tYXAoZXZlbnQsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHJldHVybiBlO1xuICB9KTtcbn1cbmV4cG9ydHMuc3RvcCA9IF9nZXRfXyhcInN0b3BcIik7XG5mdW5jdGlvbiBfZ2V0R2xvYmFsT2JqZWN0KCkge1xuICB0cnkge1xuICAgIGlmICghIWdsb2JhbCkge1xuICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCEhd2luZG93KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG59XG47XG52YXIgX1Jld2lyZU1vZHVsZUlkX18gPSBudWxsO1xuZnVuY3Rpb24gX2dldFJld2lyZU1vZHVsZUlkX18oKSB7XG4gIGlmIChfUmV3aXJlTW9kdWxlSWRfXyA9PT0gbnVsbCkge1xuICAgIGxldCBnbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgICBpZiAoIWdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18pIHtcbiAgICAgIGdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18gPSAwO1xuICAgIH1cbiAgICBfUmV3aXJlTW9kdWxlSWRfXyA9IF9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18rKztcbiAgfVxuICByZXR1cm4gX1Jld2lyZU1vZHVsZUlkX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuICByZXR1cm4gdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVkRGF0YV9fKCkge1xuICBsZXQgbW9kdWxlSWQgPSBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpO1xuICBsZXQgcmVnaXN0cnkgPSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpO1xuICBsZXQgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgaWYgKCFyZXdpcmVEYXRhKSB7XG4gICAgcmVnaXN0cnlbbW9kdWxlSWRdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICB9XG4gIHJldHVybiByZXdpcmVEYXRhO1xufVxuKGZ1bmN0aW9uIHJlZ2lzdGVyUmVzZXRBbGwoKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSkge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfTtcbiAgfVxufSkoKTtcbnZhciBJTlRFTlRJT05BTF9VTkRFRklORUQgPSAnX19JTlRFTlRJT05BTF9VTkRFRklORURfXyc7XG5sZXQgX1Jld2lyZUFQSV9fID0ge307XG4oZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KG5hbWUsIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9SZXdpcmVBUElfXywgbmFtZSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfVxuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX193aXRoX18nLCBfd2l0aF9fKTtcbn0pKCk7XG5mdW5jdGlvbiBfZ2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB2YWx1ZSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICBpZiAodmFsdWUgPT09IElOVEVOVElPTkFMX1VOREVGSU5FRCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJldmVudF8xXCI6XG4gICAgICByZXR1cm4gZXZlbnRfMTtcbiAgICBjYXNlIFwiZG9tRXZlbnRcIjpcbiAgICAgIHJldHVybiBkb21FdmVudDtcbiAgICBjYXNlIFwic3RvcFwiOlxuICAgICAgcmV0dXJuIHN0b3A7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIF92YWx1ZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge31cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF91cGRhdGVfb3BlcmF0aW9uX18ob3BlcmF0aW9uLCB2YXJpYWJsZU5hbWUsIHByZWZpeCkge1xuICB2YXIgb2xkVmFsdWUgPSBfZ2V0X18odmFyaWFibGVOYW1lKTtcbiAgdmFyIG5ld1ZhbHVlID0gb3BlcmF0aW9uID09PSAnKysnID8gb2xkVmFsdWUgKyAxIDogb2xkVmFsdWUgLSAxO1xuICBfYXNzaWduX18odmFyaWFibGVOYW1lLCBuZXdWYWx1ZSk7XG4gIHJldHVybiBwcmVmaXggPyBuZXdWYWx1ZSA6IG9sZFZhbHVlO1xufVxuZnVuY3Rpb24gX3NldF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAodHlwZW9mIHZhcmlhYmxlTmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbbmFtZV0gPSB2YXJpYWJsZU5hbWVbbmFtZV07XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gSU5URU5USU9OQUxfVU5ERUZJTkVEO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gX3Jlc2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgZGVsZXRlIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgaWYgKE9iamVjdC5rZXlzKHJld2lyZURhdGEpLmxlbmd0aCA9PSAwKSB7XG4gICAgZGVsZXRlIF9nZXRSZXdpcmVSZWdpc3RyeV9fKClbX2dldFJld2lyZU1vZHVsZUlkX19dO1xuICB9XG4gIDtcbn1cbmZ1bmN0aW9uIF93aXRoX18ob2JqZWN0KSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgdmFyIHJld2lyZWRWYXJpYWJsZU5hbWVzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcbiAgdmFyIHByZXZpb3VzVmFsdWVzID0ge307XG4gIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gb2JqZWN0W3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gICAgbGV0IHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gICAgaWYgKCEhcmVzdWx0ICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXN1bHQudGhlbihyZXNldCkuY2F0Y2gocmVzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNldCgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxubGV0IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9IHR5cGVvZiBtb2R1bGUuZXhwb3J0cztcbmZ1bmN0aW9uIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsIG5hbWUsIHtcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuaWYgKChfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdvYmplY3QnIHx8IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ2Z1bmN0aW9uJykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShtb2R1bGUuZXhwb3J0cykpIHtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX193aXRoX18nLCBfd2l0aF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZUFQSV9fJywgX1Jld2lyZUFQSV9fKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSB0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nIHx8IChPYmplY3QuY3JlYXRlID8gZnVuY3Rpb24gKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICBkZXNjID0ge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbVtrXTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59IDogZnVuY3Rpb24gKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIG9bazJdID0gbVtrXTtcbn0pO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQgfHwgKE9iamVjdC5jcmVhdGUgPyBmdW5jdGlvbiAobywgdikge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIHZhbHVlOiB2XG4gIH0pO1xufSA6IGZ1bmN0aW9uIChvLCB2KSB7XG4gIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9IHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIgfHwgZnVuY3Rpb24gKG1vZCkge1xuICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICB2YXIgcmVzdWx0ID0ge307XG4gIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX2dldF9fKFwiX19jcmVhdGVCaW5kaW5nXCIpKHJlc3VsdCwgbW9kLCBrKTtcbiAgX2dldF9fKFwiX19zZXRNb2R1bGVEZWZhdWx0XCIpKHJlc3VsdCwgbW9kKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5TdGFuZGFyZEtleWJvYXJkRXZlbnQgPSBleHBvcnRzLmdldENvZGVGb3JLZXlDb2RlID0gdm9pZCAwO1xuY29uc3Qga2V5Q29kZXNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24va2V5Q29kZXNcIik7XG5jb25zdCBwbGF0Zm9ybSA9IF9nZXRfXyhcIl9faW1wb3J0U3RhclwiKShyZXF1aXJlKFwiLi4vY29tbW9uL3BsYXRmb3JtXCIpKTtcbmNvbnN0IEtFWV9DT0RFX01BUCA9IG5ldyBBcnJheSgyMzApO1xuY29uc3QgSU5WRVJTRV9LRVlfQ09ERV9NQVAgPSBuZXcgQXJyYXkoMTEyIC8qIEtleUNvZGUuTUFYX1ZBTFVFICovKTtcbihmdW5jdGlvbiAoKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgX2dldF9fKFwiSU5WRVJTRV9LRVlfQ09ERV9NQVBcIikubGVuZ3RoOyBpKyspIHtcbiAgICBfZ2V0X18oXCJJTlZFUlNFX0tFWV9DT0RFX01BUFwiKVtpXSA9IDA7XG4gIH1cbiAgZnVuY3Rpb24gZGVmaW5lKGNvZGUsIGtleUNvZGUpIHtcbiAgICBfZ2V0X18oXCJLRVlfQ09ERV9NQVBcIilbY29kZV0gPSBrZXlDb2RlO1xuICAgIF9nZXRfXyhcIklOVkVSU0VfS0VZX0NPREVfTUFQXCIpW2tleUNvZGVdID0gY29kZTtcbiAgfVxuICBkZWZpbmUoMywgNyAvKiBLZXlDb2RlLlBhdXNlQnJlYWsgKi8pOyAvLyBWS19DQU5DRUwgMHgwMyBDb250cm9sLWJyZWFrIHByb2Nlc3NpbmdcbiAgZGVmaW5lKDgsIDEgLyogS2V5Q29kZS5CYWNrc3BhY2UgKi8pO1xuICBkZWZpbmUoOSwgMiAvKiBLZXlDb2RlLlRhYiAqLyk7XG4gIGRlZmluZSgxMywgMyAvKiBLZXlDb2RlLkVudGVyICovKTtcbiAgZGVmaW5lKDE2LCA0IC8qIEtleUNvZGUuU2hpZnQgKi8pO1xuICBkZWZpbmUoMTcsIDUgLyogS2V5Q29kZS5DdHJsICovKTtcbiAgZGVmaW5lKDE4LCA2IC8qIEtleUNvZGUuQWx0ICovKTtcbiAgZGVmaW5lKDE5LCA3IC8qIEtleUNvZGUuUGF1c2VCcmVhayAqLyk7XG4gIGRlZmluZSgyMCwgOCAvKiBLZXlDb2RlLkNhcHNMb2NrICovKTtcbiAgZGVmaW5lKDI3LCA5IC8qIEtleUNvZGUuRXNjYXBlICovKTtcbiAgZGVmaW5lKDMyLCAxMCAvKiBLZXlDb2RlLlNwYWNlICovKTtcbiAgZGVmaW5lKDMzLCAxMSAvKiBLZXlDb2RlLlBhZ2VVcCAqLyk7XG4gIGRlZmluZSgzNCwgMTIgLyogS2V5Q29kZS5QYWdlRG93biAqLyk7XG4gIGRlZmluZSgzNSwgMTMgLyogS2V5Q29kZS5FbmQgKi8pO1xuICBkZWZpbmUoMzYsIDE0IC8qIEtleUNvZGUuSG9tZSAqLyk7XG4gIGRlZmluZSgzNywgMTUgLyogS2V5Q29kZS5MZWZ0QXJyb3cgKi8pO1xuICBkZWZpbmUoMzgsIDE2IC8qIEtleUNvZGUuVXBBcnJvdyAqLyk7XG4gIGRlZmluZSgzOSwgMTcgLyogS2V5Q29kZS5SaWdodEFycm93ICovKTtcbiAgZGVmaW5lKDQwLCAxOCAvKiBLZXlDb2RlLkRvd25BcnJvdyAqLyk7XG4gIGRlZmluZSg0NSwgMTkgLyogS2V5Q29kZS5JbnNlcnQgKi8pO1xuICBkZWZpbmUoNDYsIDIwIC8qIEtleUNvZGUuRGVsZXRlICovKTtcbiAgZGVmaW5lKDQ4LCAyMSAvKiBLZXlDb2RlLktFWV8wICovKTtcbiAgZGVmaW5lKDQ5LCAyMiAvKiBLZXlDb2RlLktFWV8xICovKTtcbiAgZGVmaW5lKDUwLCAyMyAvKiBLZXlDb2RlLktFWV8yICovKTtcbiAgZGVmaW5lKDUxLCAyNCAvKiBLZXlDb2RlLktFWV8zICovKTtcbiAgZGVmaW5lKDUyLCAyNSAvKiBLZXlDb2RlLktFWV80ICovKTtcbiAgZGVmaW5lKDUzLCAyNiAvKiBLZXlDb2RlLktFWV81ICovKTtcbiAgZGVmaW5lKDU0LCAyNyAvKiBLZXlDb2RlLktFWV82ICovKTtcbiAgZGVmaW5lKDU1LCAyOCAvKiBLZXlDb2RlLktFWV83ICovKTtcbiAgZGVmaW5lKDU2LCAyOSAvKiBLZXlDb2RlLktFWV84ICovKTtcbiAgZGVmaW5lKDU3LCAzMCAvKiBLZXlDb2RlLktFWV85ICovKTtcbiAgZGVmaW5lKDY1LCAzMSAvKiBLZXlDb2RlLktFWV9BICovKTtcbiAgZGVmaW5lKDY2LCAzMiAvKiBLZXlDb2RlLktFWV9CICovKTtcbiAgZGVmaW5lKDY3LCAzMyAvKiBLZXlDb2RlLktFWV9DICovKTtcbiAgZGVmaW5lKDY4LCAzNCAvKiBLZXlDb2RlLktFWV9EICovKTtcbiAgZGVmaW5lKDY5LCAzNSAvKiBLZXlDb2RlLktFWV9FICovKTtcbiAgZGVmaW5lKDcwLCAzNiAvKiBLZXlDb2RlLktFWV9GICovKTtcbiAgZGVmaW5lKDcxLCAzNyAvKiBLZXlDb2RlLktFWV9HICovKTtcbiAgZGVmaW5lKDcyLCAzOCAvKiBLZXlDb2RlLktFWV9IICovKTtcbiAgZGVmaW5lKDczLCAzOSAvKiBLZXlDb2RlLktFWV9JICovKTtcbiAgZGVmaW5lKDc0LCA0MCAvKiBLZXlDb2RlLktFWV9KICovKTtcbiAgZGVmaW5lKDc1LCA0MSAvKiBLZXlDb2RlLktFWV9LICovKTtcbiAgZGVmaW5lKDc2LCA0MiAvKiBLZXlDb2RlLktFWV9MICovKTtcbiAgZGVmaW5lKDc3LCA0MyAvKiBLZXlDb2RlLktFWV9NICovKTtcbiAgZGVmaW5lKDc4LCA0NCAvKiBLZXlDb2RlLktFWV9OICovKTtcbiAgZGVmaW5lKDc5LCA0NSAvKiBLZXlDb2RlLktFWV9PICovKTtcbiAgZGVmaW5lKDgwLCA0NiAvKiBLZXlDb2RlLktFWV9QICovKTtcbiAgZGVmaW5lKDgxLCA0NyAvKiBLZXlDb2RlLktFWV9RICovKTtcbiAgZGVmaW5lKDgyLCA0OCAvKiBLZXlDb2RlLktFWV9SICovKTtcbiAgZGVmaW5lKDgzLCA0OSAvKiBLZXlDb2RlLktFWV9TICovKTtcbiAgZGVmaW5lKDg0LCA1MCAvKiBLZXlDb2RlLktFWV9UICovKTtcbiAgZGVmaW5lKDg1LCA1MSAvKiBLZXlDb2RlLktFWV9VICovKTtcbiAgZGVmaW5lKDg2LCA1MiAvKiBLZXlDb2RlLktFWV9WICovKTtcbiAgZGVmaW5lKDg3LCA1MyAvKiBLZXlDb2RlLktFWV9XICovKTtcbiAgZGVmaW5lKDg4LCA1NCAvKiBLZXlDb2RlLktFWV9YICovKTtcbiAgZGVmaW5lKDg5LCA1NSAvKiBLZXlDb2RlLktFWV9ZICovKTtcbiAgZGVmaW5lKDkwLCA1NiAvKiBLZXlDb2RlLktFWV9aICovKTtcbiAgZGVmaW5lKDkzLCA1OCAvKiBLZXlDb2RlLkNvbnRleHRNZW51ICovKTtcbiAgZGVmaW5lKDk2LCA5MyAvKiBLZXlDb2RlLk5VTVBBRF8wICovKTtcbiAgZGVmaW5lKDk3LCA5NCAvKiBLZXlDb2RlLk5VTVBBRF8xICovKTtcbiAgZGVmaW5lKDk4LCA5NSAvKiBLZXlDb2RlLk5VTVBBRF8yICovKTtcbiAgZGVmaW5lKDk5LCA5NiAvKiBLZXlDb2RlLk5VTVBBRF8zICovKTtcbiAgZGVmaW5lKDEwMCwgOTcgLyogS2V5Q29kZS5OVU1QQURfNCAqLyk7XG4gIGRlZmluZSgxMDEsIDk4IC8qIEtleUNvZGUuTlVNUEFEXzUgKi8pO1xuICBkZWZpbmUoMTAyLCA5OSAvKiBLZXlDb2RlLk5VTVBBRF82ICovKTtcbiAgZGVmaW5lKDEwMywgMTAwIC8qIEtleUNvZGUuTlVNUEFEXzcgKi8pO1xuICBkZWZpbmUoMTA0LCAxMDEgLyogS2V5Q29kZS5OVU1QQURfOCAqLyk7XG4gIGRlZmluZSgxMDUsIDEwMiAvKiBLZXlDb2RlLk5VTVBBRF85ICovKTtcbiAgZGVmaW5lKDEwNiwgMTAzIC8qIEtleUNvZGUuTlVNUEFEX01VTFRJUExZICovKTtcbiAgZGVmaW5lKDEwNywgMTA0IC8qIEtleUNvZGUuTlVNUEFEX0FERCAqLyk7XG4gIGRlZmluZSgxMDgsIDEwNSAvKiBLZXlDb2RlLk5VTVBBRF9TRVBBUkFUT1IgKi8pO1xuICBkZWZpbmUoMTA5LCAxMDYgLyogS2V5Q29kZS5OVU1QQURfU1VCVFJBQ1QgKi8pO1xuICBkZWZpbmUoMTEwLCAxMDcgLyogS2V5Q29kZS5OVU1QQURfREVDSU1BTCAqLyk7XG4gIGRlZmluZSgxMTEsIDEwOCAvKiBLZXlDb2RlLk5VTVBBRF9ESVZJREUgKi8pO1xuICBkZWZpbmUoMTEyLCA1OSAvKiBLZXlDb2RlLkYxICovKTtcbiAgZGVmaW5lKDExMywgNjAgLyogS2V5Q29kZS5GMiAqLyk7XG4gIGRlZmluZSgxMTQsIDYxIC8qIEtleUNvZGUuRjMgKi8pO1xuICBkZWZpbmUoMTE1LCA2MiAvKiBLZXlDb2RlLkY0ICovKTtcbiAgZGVmaW5lKDExNiwgNjMgLyogS2V5Q29kZS5GNSAqLyk7XG4gIGRlZmluZSgxMTcsIDY0IC8qIEtleUNvZGUuRjYgKi8pO1xuICBkZWZpbmUoMTE4LCA2NSAvKiBLZXlDb2RlLkY3ICovKTtcbiAgZGVmaW5lKDExOSwgNjYgLyogS2V5Q29kZS5GOCAqLyk7XG4gIGRlZmluZSgxMjAsIDY3IC8qIEtleUNvZGUuRjkgKi8pO1xuICBkZWZpbmUoMTIxLCA2OCAvKiBLZXlDb2RlLkYxMCAqLyk7XG4gIGRlZmluZSgxMjIsIDY5IC8qIEtleUNvZGUuRjExICovKTtcbiAgZGVmaW5lKDEyMywgNzAgLyogS2V5Q29kZS5GMTIgKi8pO1xuICBkZWZpbmUoMTI0LCA3MSAvKiBLZXlDb2RlLkYxMyAqLyk7XG4gIGRlZmluZSgxMjUsIDcyIC8qIEtleUNvZGUuRjE0ICovKTtcbiAgZGVmaW5lKDEyNiwgNzMgLyogS2V5Q29kZS5GMTUgKi8pO1xuICBkZWZpbmUoMTI3LCA3NCAvKiBLZXlDb2RlLkYxNiAqLyk7XG4gIGRlZmluZSgxMjgsIDc1IC8qIEtleUNvZGUuRjE3ICovKTtcbiAgZGVmaW5lKDEyOSwgNzYgLyogS2V5Q29kZS5GMTggKi8pO1xuICBkZWZpbmUoMTMwLCA3NyAvKiBLZXlDb2RlLkYxOSAqLyk7XG4gIGRlZmluZSgxNDQsIDc4IC8qIEtleUNvZGUuTnVtTG9jayAqLyk7XG4gIGRlZmluZSgxNDUsIDc5IC8qIEtleUNvZGUuU2Nyb2xsTG9jayAqLyk7XG4gIGRlZmluZSgxODYsIDgwIC8qIEtleUNvZGUuVVNfU0VNSUNPTE9OICovKTtcbiAgZGVmaW5lKDE4NywgODEgLyogS2V5Q29kZS5VU19FUVVBTCAqLyk7XG4gIGRlZmluZSgxODgsIDgyIC8qIEtleUNvZGUuVVNfQ09NTUEgKi8pO1xuICBkZWZpbmUoMTg5LCA4MyAvKiBLZXlDb2RlLlVTX01JTlVTICovKTtcbiAgZGVmaW5lKDE5MCwgODQgLyogS2V5Q29kZS5VU19ET1QgKi8pO1xuICBkZWZpbmUoMTkxLCA4NSAvKiBLZXlDb2RlLlVTX1NMQVNIICovKTtcbiAgZGVmaW5lKDE5MiwgODYgLyogS2V5Q29kZS5VU19CQUNLVElDSyAqLyk7XG4gIGRlZmluZSgxOTMsIDExMCAvKiBLZXlDb2RlLkFCTlRfQzEgKi8pO1xuICBkZWZpbmUoMTk0LCAxMTEgLyogS2V5Q29kZS5BQk5UX0MyICovKTtcbiAgZGVmaW5lKDIxOSwgODcgLyogS2V5Q29kZS5VU19PUEVOX1NRVUFSRV9CUkFDS0VUICovKTtcbiAgZGVmaW5lKDIyMCwgODggLyogS2V5Q29kZS5VU19CQUNLU0xBU0ggKi8pO1xuICBkZWZpbmUoMjIxLCA4OSAvKiBLZXlDb2RlLlVTX0NMT1NFX1NRVUFSRV9CUkFDS0VUICovKTtcbiAgZGVmaW5lKDIyMiwgOTAgLyogS2V5Q29kZS5VU19RVU9URSAqLyk7XG4gIGRlZmluZSgyMjMsIDkxIC8qIEtleUNvZGUuT0VNXzggKi8pO1xuICBkZWZpbmUoMjI2LCA5MiAvKiBLZXlDb2RlLk9FTV8xMDIgKi8pO1xuICAvKipcbiAgICogaHR0cHM6Ly9saXN0cy53My5vcmcvQXJjaGl2ZXMvUHVibGljL3d3dy1kb20vMjAxMEp1bFNlcC9hdHQtMDE4Mi9rZXlDb2RlLXNwZWMuaHRtbFxuICAgKiBJZiBhbiBJbnB1dCBNZXRob2QgRWRpdG9yIGlzIHByb2Nlc3Npbmcga2V5IGlucHV0IGFuZCB0aGUgZXZlbnQgaXMga2V5ZG93biwgcmV0dXJuIDIyOS5cbiAgICovXG4gIGRlZmluZSgyMjksIDEwOSAvKiBLZXlDb2RlLktFWV9JTl9DT01QT1NJVElPTiAqLyk7XG4gIGRlZmluZSg5MSwgNTcgLyogS2V5Q29kZS5NZXRhICovKTtcbiAgaWYgKF9nZXRfXyhcInBsYXRmb3JtXCIpLmlzTWFjaW50b3NoKSB7XG4gICAgLy8gdGhlIHR3byBtZXRhIGtleXMgaW4gdGhlIE1hYyBoYXZlIGRpZmZlcmVudCBrZXkgY29kZXMgKDkxIGFuZCA5MylcbiAgICBkZWZpbmUoOTMsIDU3IC8qIEtleUNvZGUuTWV0YSAqLyk7XG4gIH0gZWxzZSB7XG4gICAgZGVmaW5lKDkyLCA1NyAvKiBLZXlDb2RlLk1ldGEgKi8pO1xuICB9XG59KSgpO1xuXG5mdW5jdGlvbiBleHRyYWN0S2V5Q29kZShlKSB7XG4gIGlmIChlLmNoYXJDb2RlKSB7XG4gICAgLy8gXCJrZXlwcmVzc1wiIGV2ZW50cyBtb3N0bHlcbiAgICBjb25zdCBjaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZShlLmNoYXJDb2RlKS50b1VwcGVyQ2FzZSgpO1xuICAgIHJldHVybiBfZ2V0X18oXCJrZXlDb2Rlc18xXCIpLktleUNvZGVVdGlscy5mcm9tU3RyaW5nKGNoYXIpO1xuICB9XG4gIHJldHVybiBfZ2V0X18oXCJLRVlfQ09ERV9NQVBcIilbZS5rZXlDb2RlXSB8fCAwIC8qIEtleUNvZGUuVW5rbm93biAqLztcbn1cblxuZnVuY3Rpb24gZ2V0Q29kZUZvcktleUNvZGUoa2V5Q29kZSkge1xuICByZXR1cm4gX2dldF9fKFwiSU5WRVJTRV9LRVlfQ09ERV9NQVBcIilba2V5Q29kZV07XG59XG5leHBvcnRzLmdldENvZGVGb3JLZXlDb2RlID0gX2dldF9fKFwiZ2V0Q29kZUZvcktleUNvZGVcIik7XG5jb25zdCBjdHJsS2V5TW9kID0gX2dldF9fKFwicGxhdGZvcm1cIikuaXNNYWNpbnRvc2ggPyAyNTYgLyogS2V5TW9kLldpbkN0cmwgKi8gOiAyMDQ4IC8qIEtleU1vZC5DdHJsQ21kICovO1xuY29uc3QgYWx0S2V5TW9kID0gNTEyIC8qIEtleU1vZC5BbHQgKi87XG5jb25zdCBzaGlmdEtleU1vZCA9IDEwMjQgLyogS2V5TW9kLlNoaWZ0ICovO1xuY29uc3QgbWV0YUtleU1vZCA9IF9nZXRfXyhcInBsYXRmb3JtXCIpLmlzTWFjaW50b3NoID8gMjA0OCAvKiBLZXlNb2QuQ3RybENtZCAqLyA6IDI1NiAvKiBLZXlNb2QuV2luQ3RybCAqLztcbmNsYXNzIFN0YW5kYXJkS2V5Ym9hcmRFdmVudCB7XG4gIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xuICAgIGNvbnN0IGUgPSBzb3VyY2U7XG4gICAgdGhpcy5icm93c2VyRXZlbnQgPSBlO1xuICAgIHRoaXMudGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgdGhpcy5jdHJsS2V5ID0gZS5jdHJsS2V5O1xuICAgIHRoaXMuc2hpZnRLZXkgPSBlLnNoaWZ0S2V5O1xuICAgIHRoaXMuYWx0S2V5ID0gZS5hbHRLZXk7XG4gICAgdGhpcy5tZXRhS2V5ID0gZS5tZXRhS2V5O1xuICAgIHRoaXMua2V5Q29kZSA9IF9nZXRfXyhcImV4dHJhY3RLZXlDb2RlXCIpKGUpO1xuICAgIHRoaXMuY29kZSA9IGUuY29kZTtcbiAgICAvLyBjb25zb2xlLmluZm8oZS50eXBlICsgXCI6IGtleUNvZGU6IFwiICsgZS5rZXlDb2RlICsgXCIsIHdoaWNoOiBcIiArIGUud2hpY2ggKyBcIiwgY2hhckNvZGU6IFwiICsgZS5jaGFyQ29kZSArIFwiLCBkZXRhaWw6IFwiICsgZS5kZXRhaWwgKyBcIiA9PT09PiBcIiArIHRoaXMua2V5Q29kZSArICcgLS0gJyArIEtleUNvZGVbdGhpcy5rZXlDb2RlXSk7XG4gICAgdGhpcy5jdHJsS2V5ID0gdGhpcy5jdHJsS2V5IHx8IHRoaXMua2V5Q29kZSA9PT0gNSAvKiBLZXlDb2RlLkN0cmwgKi87XG4gICAgdGhpcy5hbHRLZXkgPSB0aGlzLmFsdEtleSB8fCB0aGlzLmtleUNvZGUgPT09IDYgLyogS2V5Q29kZS5BbHQgKi87XG4gICAgdGhpcy5zaGlmdEtleSA9IHRoaXMuc2hpZnRLZXkgfHwgdGhpcy5rZXlDb2RlID09PSA0IC8qIEtleUNvZGUuU2hpZnQgKi87XG4gICAgdGhpcy5tZXRhS2V5ID0gdGhpcy5tZXRhS2V5IHx8IHRoaXMua2V5Q29kZSA9PT0gNTcgLyogS2V5Q29kZS5NZXRhICovO1xuICAgIHRoaXMuX2FzS2V5YmluZGluZyA9IHRoaXMuX2NvbXB1dGVLZXliaW5kaW5nKCk7XG4gICAgdGhpcy5fYXNSdW50aW1lS2V5YmluZGluZyA9IHRoaXMuX2NvbXB1dGVSdW50aW1lS2V5YmluZGluZygpO1xuICB9XG4gIHByZXZlbnREZWZhdWx0KCkge1xuICAgIGlmICh0aGlzLmJyb3dzZXJFdmVudCAmJiB0aGlzLmJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgdGhpcy5icm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cbiAgc3RvcFByb3BhZ2F0aW9uKCkge1xuICAgIGlmICh0aGlzLmJyb3dzZXJFdmVudCAmJiB0aGlzLmJyb3dzZXJFdmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgIHRoaXMuYnJvd3NlckV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxuICB0b0tleWJpbmRpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FzUnVudGltZUtleWJpbmRpbmc7XG4gIH1cbiAgZXF1YWxzKG90aGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FzS2V5YmluZGluZyA9PT0gb3RoZXI7XG4gIH1cbiAgX2NvbXB1dGVLZXliaW5kaW5nKCkge1xuICAgIGxldCBrZXkgPSAwIC8qIEtleUNvZGUuVW5rbm93biAqLztcbiAgICBpZiAodGhpcy5rZXlDb2RlICE9PSA1IC8qIEtleUNvZGUuQ3RybCAqLyAmJiB0aGlzLmtleUNvZGUgIT09IDQgLyogS2V5Q29kZS5TaGlmdCAqLyAmJiB0aGlzLmtleUNvZGUgIT09IDYgLyogS2V5Q29kZS5BbHQgKi8gJiYgdGhpcy5rZXlDb2RlICE9PSA1NyAvKiBLZXlDb2RlLk1ldGEgKi8pIHtcbiAgICAgIGtleSA9IHRoaXMua2V5Q29kZTtcbiAgICB9XG4gICAgbGV0IHJlc3VsdCA9IDA7XG4gICAgaWYgKHRoaXMuY3RybEtleSkge1xuICAgICAgcmVzdWx0IHw9IF9nZXRfXyhcImN0cmxLZXlNb2RcIik7XG4gICAgfVxuICAgIGlmICh0aGlzLmFsdEtleSkge1xuICAgICAgcmVzdWx0IHw9IF9nZXRfXyhcImFsdEtleU1vZFwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuc2hpZnRLZXkpIHtcbiAgICAgIHJlc3VsdCB8PSBfZ2V0X18oXCJzaGlmdEtleU1vZFwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubWV0YUtleSkge1xuICAgICAgcmVzdWx0IHw9IF9nZXRfXyhcIm1ldGFLZXlNb2RcIik7XG4gICAgfVxuICAgIHJlc3VsdCB8PSBrZXk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBfY29tcHV0ZVJ1bnRpbWVLZXliaW5kaW5nKCkge1xuICAgIGxldCBrZXkgPSAwIC8qIEtleUNvZGUuVW5rbm93biAqLztcbiAgICBpZiAodGhpcy5rZXlDb2RlICE9PSA1IC8qIEtleUNvZGUuQ3RybCAqLyAmJiB0aGlzLmtleUNvZGUgIT09IDQgLyogS2V5Q29kZS5TaGlmdCAqLyAmJiB0aGlzLmtleUNvZGUgIT09IDYgLyogS2V5Q29kZS5BbHQgKi8gJiYgdGhpcy5rZXlDb2RlICE9PSA1NyAvKiBLZXlDb2RlLk1ldGEgKi8pIHtcbiAgICAgIGtleSA9IHRoaXMua2V5Q29kZTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyAoX2dldF9fKFwia2V5Q29kZXNfMVwiKS5TaW1wbGVLZXliaW5kaW5nKSh0aGlzLmN0cmxLZXksIHRoaXMuc2hpZnRLZXksIHRoaXMuYWx0S2V5LCB0aGlzLm1ldGFLZXksIGtleSk7XG4gIH1cbn1cbmV4cG9ydHMuU3RhbmRhcmRLZXlib2FyZEV2ZW50ID0gX2dldF9fKFwiU3RhbmRhcmRLZXlib2FyZEV2ZW50XCIpO1xuZnVuY3Rpb24gX2dldEdsb2JhbE9iamVjdCgpIHtcbiAgdHJ5IHtcbiAgICBpZiAoISFnbG9iYWwpIHtcbiAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghIXdpbmRvdykge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxufVxuO1xudmFyIF9SZXdpcmVNb2R1bGVJZF9fID0gbnVsbDtcbmZ1bmN0aW9uIF9nZXRSZXdpcmVNb2R1bGVJZF9fKCkge1xuICBpZiAoX1Jld2lyZU1vZHVsZUlkX18gPT09IG51bGwpIHtcbiAgICBsZXQgZ2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gICAgaWYgKCFnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKSB7XG4gICAgICBnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fID0gMDtcbiAgICB9XG4gICAgX1Jld2lyZU1vZHVsZUlkX18gPSBfXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKys7XG4gIH1cbiAgcmV0dXJuIF9SZXdpcmVNb2R1bGVJZF9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZVJlZ2lzdHJ5X18oKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cbiAgcmV0dXJuIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlZERhdGFfXygpIHtcbiAgbGV0IG1vZHVsZUlkID0gX2dldFJld2lyZU1vZHVsZUlkX18oKTtcbiAgbGV0IHJlZ2lzdHJ5ID0gX2dldFJld2lyZVJlZ2lzdHJ5X18oKTtcbiAgbGV0IHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIGlmICghcmV3aXJlRGF0YSkge1xuICAgIHJlZ2lzdHJ5W21vZHVsZUlkXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgfVxuICByZXR1cm4gcmV3aXJlRGF0YTtcbn1cbihmdW5jdGlvbiByZWdpc3RlclJlc2V0QWxsKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH07XG4gIH1cbn0pKCk7XG52YXIgSU5URU5USU9OQUxfVU5ERUZJTkVEID0gJ19fSU5URU5USU9OQUxfVU5ERUZJTkVEX18nO1xubGV0IF9SZXdpcmVBUElfXyA9IHt9O1xuKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gYWRkUHJvcGVydHlUb0FQSU9iamVjdChuYW1lLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfUmV3aXJlQVBJX18sIG5hbWUsIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG59KSgpO1xuZnVuY3Rpb24gX2dldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdmFsdWUgPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgaWYgKHZhbHVlID09PSBJTlRFTlRJT05BTF9VTkRFRklORUQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHtcbiAgICBjYXNlIFwiX19jcmVhdGVCaW5kaW5nXCI6XG4gICAgICByZXR1cm4gX19jcmVhdGVCaW5kaW5nO1xuICAgIGNhc2UgXCJfX3NldE1vZHVsZURlZmF1bHRcIjpcbiAgICAgIHJldHVybiBfX3NldE1vZHVsZURlZmF1bHQ7XG4gICAgY2FzZSBcIl9faW1wb3J0U3RhclwiOlxuICAgICAgcmV0dXJuIF9faW1wb3J0U3RhcjtcbiAgICBjYXNlIFwiSU5WRVJTRV9LRVlfQ09ERV9NQVBcIjpcbiAgICAgIHJldHVybiBJTlZFUlNFX0tFWV9DT0RFX01BUDtcbiAgICBjYXNlIFwiS0VZX0NPREVfTUFQXCI6XG4gICAgICByZXR1cm4gS0VZX0NPREVfTUFQO1xuICAgIGNhc2UgXCJwbGF0Zm9ybVwiOlxuICAgICAgcmV0dXJuIHBsYXRmb3JtO1xuICAgIGNhc2UgXCJrZXlDb2Rlc18xXCI6XG4gICAgICByZXR1cm4ga2V5Q29kZXNfMTtcbiAgICBjYXNlIFwiZ2V0Q29kZUZvcktleUNvZGVcIjpcbiAgICAgIHJldHVybiBnZXRDb2RlRm9yS2V5Q29kZTtcbiAgICBjYXNlIFwiZXh0cmFjdEtleUNvZGVcIjpcbiAgICAgIHJldHVybiBleHRyYWN0S2V5Q29kZTtcbiAgICBjYXNlIFwiY3RybEtleU1vZFwiOlxuICAgICAgcmV0dXJuIGN0cmxLZXlNb2Q7XG4gICAgY2FzZSBcImFsdEtleU1vZFwiOlxuICAgICAgcmV0dXJuIGFsdEtleU1vZDtcbiAgICBjYXNlIFwic2hpZnRLZXlNb2RcIjpcbiAgICAgIHJldHVybiBzaGlmdEtleU1vZDtcbiAgICBjYXNlIFwibWV0YUtleU1vZFwiOlxuICAgICAgcmV0dXJuIG1ldGFLZXlNb2Q7XG4gICAgY2FzZSBcIlN0YW5kYXJkS2V5Ym9hcmRFdmVudFwiOlxuICAgICAgcmV0dXJuIFN0YW5kYXJkS2V5Ym9hcmRFdmVudDtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgX3ZhbHVlKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7fVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX3VwZGF0ZV9vcGVyYXRpb25fXyhvcGVyYXRpb24sIHZhcmlhYmxlTmFtZSwgcHJlZml4KSB7XG4gIHZhciBvbGRWYWx1ZSA9IF9nZXRfXyh2YXJpYWJsZU5hbWUpO1xuICB2YXIgbmV3VmFsdWUgPSBvcGVyYXRpb24gPT09ICcrKycgPyBvbGRWYWx1ZSArIDEgOiBvbGRWYWx1ZSAtIDE7XG4gIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIG5ld1ZhbHVlKTtcbiAgcmV0dXJuIHByZWZpeCA/IG5ld1ZhbHVlIDogb2xkVmFsdWU7XG59XG5mdW5jdGlvbiBfc2V0X18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmICh0eXBlb2YgdmFyaWFibGVOYW1lID09PSAnb2JqZWN0Jykge1xuICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVtuYW1lXSA9IHZhcmlhYmxlTmFtZVtuYW1lXTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBJTlRFTlRJT05BTF9VTkRFRklORUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBkZWxldGUgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICBpZiAoT2JqZWN0LmtleXMocmV3aXJlRGF0YSkubGVuZ3RoID09IDApIHtcbiAgICBkZWxldGUgX2dldFJld2lyZVJlZ2lzdHJ5X18oKVtfZ2V0UmV3aXJlTW9kdWxlSWRfX107XG4gIH1cbiAgO1xufVxuZnVuY3Rpb24gX3dpdGhfXyhvYmplY3QpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICB2YXIgcmV3aXJlZFZhcmlhYmxlTmFtZXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICB2YXIgcHJldmlvdXNWYWx1ZXMgPSB7fTtcbiAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV0gPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBvYmplY3RbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgICBsZXQgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgICBpZiAoISFyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlc3VsdC50aGVuKHJlc2V0KS5jYXRjaChyZXNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc2V0KCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5sZXQgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID0gdHlwZW9mIG1vZHVsZS5leHBvcnRzO1xuZnVuY3Rpb24gYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgbmFtZSwge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5pZiAoKF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ29iamVjdCcgfHwgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnZnVuY3Rpb24nKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKG1vZHVsZS5leHBvcnRzKSkge1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3dpdGhfXycsIF93aXRoX18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlQVBJX18nLCBfUmV3aXJlQVBJX18pO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIF9fY3JlYXRlQmluZGluZyA9IHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcgfHwgKE9iamVjdC5jcmVhdGUgPyBmdW5jdGlvbiAobywgbSwgaywgazIpIHtcbiAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgIGRlc2MgPSB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtW2tdO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0gOiBmdW5jdGlvbiAobywgbSwgaywgazIpIHtcbiAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgb1trMl0gPSBtW2tdO1xufSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gdGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCB8fCAoT2JqZWN0LmNyZWF0ZSA/IGZ1bmN0aW9uIChvLCB2KSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgdmFsdWU6IHZcbiAgfSk7XG59IDogZnVuY3Rpb24gKG8sIHYpIHtcbiAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gdGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhciB8fCBmdW5jdGlvbiAobW9kKSB7XG4gIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfZ2V0X18oXCJfX2NyZWF0ZUJpbmRpbmdcIikocmVzdWx0LCBtb2QsIGspO1xuICBfZ2V0X18oXCJfX3NldE1vZHVsZURlZmF1bHRcIikocmVzdWx0LCBtb2QpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLlN0YW5kYXJkV2hlZWxFdmVudCA9IGV4cG9ydHMuRHJhZ01vdXNlRXZlbnQgPSBleHBvcnRzLlN0YW5kYXJkTW91c2VFdmVudCA9IHZvaWQgMDtcbmNvbnN0IGJyb3dzZXIgPSBfZ2V0X18oXCJfX2ltcG9ydFN0YXJcIikocmVxdWlyZShcIi4uL2Jyb3dzZXIvYnJvd3NlclwiKSk7XG5jb25zdCBwbGF0Zm9ybSA9IF9nZXRfXyhcIl9faW1wb3J0U3RhclwiKShyZXF1aXJlKFwiLi4vY29tbW9uL3BsYXRmb3JtXCIpKTtcbmNsYXNzIFN0YW5kYXJkTW91c2VFdmVudCB7XG4gIGNvbnN0cnVjdG9yKGUpIHtcbiAgICB0aGlzLnRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgdGhpcy5icm93c2VyRXZlbnQgPSBlO1xuICAgIHRoaXMubGVmdEJ1dHRvbiA9IGUuYnV0dG9uID09PSAwO1xuICAgIHRoaXMubWlkZGxlQnV0dG9uID0gZS5idXR0b24gPT09IDE7XG4gICAgdGhpcy5yaWdodEJ1dHRvbiA9IGUuYnV0dG9uID09PSAyO1xuICAgIHRoaXMudGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgdGhpcy5kZXRhaWwgPSBlLmRldGFpbCB8fCAxO1xuICAgIGlmIChlLnR5cGUgPT09ICdkYmxjbGljaycpIHtcbiAgICAgIHRoaXMuZGV0YWlsID0gMjtcbiAgICB9XG4gICAgdGhpcy5jdHJsS2V5ID0gZS5jdHJsS2V5O1xuICAgIHRoaXMuc2hpZnRLZXkgPSBlLnNoaWZ0S2V5O1xuICAgIHRoaXMuYWx0S2V5ID0gZS5hbHRLZXk7XG4gICAgdGhpcy5tZXRhS2V5ID0gZS5tZXRhS2V5O1xuICAgIGlmICh0eXBlb2YgZS5wYWdlWCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRoaXMucG9zeCA9IGUucGFnZVg7XG4gICAgICB0aGlzLnBvc3kgPSBlLnBhZ2VZO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBQcm9iYWJseSBoaXQgYnkgTVNHZXN0dXJlRXZlbnRcbiAgICAgIHRoaXMucG9zeCA9IGUuY2xpZW50WCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudD8uc2Nyb2xsTGVmdDtcbiAgICAgIHRoaXMucG9zeSA9IGUuY2xpZW50WSArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICsgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Py5zY3JvbGxUb3A7XG4gICAgfVxuICB9XG4gIHByZXZlbnREZWZhdWx0KCkge1xuICAgIGlmICh0aGlzLmJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgdGhpcy5icm93c2VyRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cbiAgc3RvcFByb3BhZ2F0aW9uKCkge1xuICAgIGlmICh0aGlzLmJyb3dzZXJFdmVudC5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgIHRoaXMuYnJvd3NlckV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0cy5TdGFuZGFyZE1vdXNlRXZlbnQgPSBfZ2V0X18oXCJTdGFuZGFyZE1vdXNlRXZlbnRcIik7XG5jbGFzcyBEcmFnTW91c2VFdmVudCBleHRlbmRzIF9nZXRfXyhcIlN0YW5kYXJkTW91c2VFdmVudFwiKSB7XG4gIGNvbnN0cnVjdG9yKGUpIHtcbiAgICBzdXBlcihlKTtcbiAgICB0aGlzLmRhdGFUcmFuc2ZlciA9IGUuZGF0YVRyYW5zZmVyO1xuICB9XG59XG5leHBvcnRzLkRyYWdNb3VzZUV2ZW50ID0gX2dldF9fKFwiRHJhZ01vdXNlRXZlbnRcIik7XG5jbGFzcyBTdGFuZGFyZFdoZWVsRXZlbnQge1xuICBjb25zdHJ1Y3RvcihlLCBkZWx0YVggPSAwLCBkZWx0YVkgPSAwKSB7XG4gICAgdGhpcy5icm93c2VyRXZlbnQgPSBlIHx8IG51bGw7XG4gICAgdGhpcy50YXJnZXQgPSBlID8gZS50YXJnZXQgfHwgZS50YXJnZXROb2RlIHx8IGUuc3JjRWxlbWVudCA6IG51bGw7XG4gICAgdGhpcy5kZWx0YVkgPSBkZWx0YVk7XG4gICAgdGhpcy5kZWx0YVggPSBkZWx0YVg7XG4gICAgaWYgKGUpIHtcbiAgICAgIGNvbnN0IGUxID0gZTtcbiAgICAgIGNvbnN0IGUyID0gZTtcbiAgICAgIC8vIHZlcnRpY2FsIGRlbHRhIHNjcm9sbFxuICAgICAgaWYgKHR5cGVvZiBlMS53aGVlbERlbHRhWSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5kZWx0YVkgPSBlMS53aGVlbERlbHRhWSAvIDEyMDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGUyLlZFUlRJQ0FMX0FYSVMgIT09ICd1bmRlZmluZWQnICYmIGUyLmF4aXMgPT09IGUyLlZFUlRJQ0FMX0FYSVMpIHtcbiAgICAgICAgdGhpcy5kZWx0YVkgPSAtZTIuZGV0YWlsIC8gMztcbiAgICAgIH1cbiAgICAgIC8vIGhvcml6b250YWwgZGVsdGEgc2Nyb2xsXG4gICAgICBpZiAodHlwZW9mIGUxLndoZWVsRGVsdGFYICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAoX2dldF9fKFwiYnJvd3NlclwiKS5pc1NhZmFyaSAmJiBfZ2V0X18oXCJwbGF0Zm9ybVwiKS5pc1dpbmRvd3MpIHtcbiAgICAgICAgICB0aGlzLmRlbHRhWCA9IC0oZTEud2hlZWxEZWx0YVggLyAxMjApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZGVsdGFYID0gZTEud2hlZWxEZWx0YVggLyAxMjA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGUyLkhPUklaT05UQUxfQVhJUyAhPT0gJ3VuZGVmaW5lZCcgJiYgZTIuYXhpcyA9PT0gZTIuSE9SSVpPTlRBTF9BWElTKSB7XG4gICAgICAgIHRoaXMuZGVsdGFYID0gLWUuZGV0YWlsIC8gMztcbiAgICAgIH1cbiAgICAgIC8vIEFzc3VtZSBhIHZlcnRpY2FsIHNjcm9sbCBpZiBub3RoaW5nIGVsc2Ugd29ya2VkXG4gICAgICBpZiAodGhpcy5kZWx0YVkgPT09IDAgJiYgdGhpcy5kZWx0YVggPT09IDAgJiYgZS53aGVlbERlbHRhKSB7XG4gICAgICAgIHRoaXMuZGVsdGFZID0gZS53aGVlbERlbHRhIC8gMTIwO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBwcmV2ZW50RGVmYXVsdCgpIHtcbiAgICBpZiAodGhpcy5icm93c2VyRXZlbnQpIHtcbiAgICAgIGlmICh0aGlzLmJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICB0aGlzLmJyb3dzZXJFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBzdG9wUHJvcGFnYXRpb24oKSB7XG4gICAgaWYgKHRoaXMuYnJvd3NlckV2ZW50KSB7XG4gICAgICBpZiAodGhpcy5icm93c2VyRXZlbnQuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgIHRoaXMuYnJvd3NlckV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZXhwb3J0cy5TdGFuZGFyZFdoZWVsRXZlbnQgPSBfZ2V0X18oXCJTdGFuZGFyZFdoZWVsRXZlbnRcIik7XG5mdW5jdGlvbiBfZ2V0R2xvYmFsT2JqZWN0KCkge1xuICB0cnkge1xuICAgIGlmICghIWdsb2JhbCkge1xuICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCEhd2luZG93KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG59XG47XG52YXIgX1Jld2lyZU1vZHVsZUlkX18gPSBudWxsO1xuZnVuY3Rpb24gX2dldFJld2lyZU1vZHVsZUlkX18oKSB7XG4gIGlmIChfUmV3aXJlTW9kdWxlSWRfXyA9PT0gbnVsbCkge1xuICAgIGxldCBnbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgICBpZiAoIWdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18pIHtcbiAgICAgIGdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18gPSAwO1xuICAgIH1cbiAgICBfUmV3aXJlTW9kdWxlSWRfXyA9IF9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18rKztcbiAgfVxuICByZXR1cm4gX1Jld2lyZU1vZHVsZUlkX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuICByZXR1cm4gdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVkRGF0YV9fKCkge1xuICBsZXQgbW9kdWxlSWQgPSBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpO1xuICBsZXQgcmVnaXN0cnkgPSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpO1xuICBsZXQgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgaWYgKCFyZXdpcmVEYXRhKSB7XG4gICAgcmVnaXN0cnlbbW9kdWxlSWRdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICB9XG4gIHJldHVybiByZXdpcmVEYXRhO1xufVxuKGZ1bmN0aW9uIHJlZ2lzdGVyUmVzZXRBbGwoKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSkge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfTtcbiAgfVxufSkoKTtcbnZhciBJTlRFTlRJT05BTF9VTkRFRklORUQgPSAnX19JTlRFTlRJT05BTF9VTkRFRklORURfXyc7XG5sZXQgX1Jld2lyZUFQSV9fID0ge307XG4oZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KG5hbWUsIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9SZXdpcmVBUElfXywgbmFtZSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfVxuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX193aXRoX18nLCBfd2l0aF9fKTtcbn0pKCk7XG5mdW5jdGlvbiBfZ2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB2YWx1ZSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICBpZiAodmFsdWUgPT09IElOVEVOVElPTkFMX1VOREVGSU5FRCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJfX2NyZWF0ZUJpbmRpbmdcIjpcbiAgICAgIHJldHVybiBfX2NyZWF0ZUJpbmRpbmc7XG4gICAgY2FzZSBcIl9fc2V0TW9kdWxlRGVmYXVsdFwiOlxuICAgICAgcmV0dXJuIF9fc2V0TW9kdWxlRGVmYXVsdDtcbiAgICBjYXNlIFwiX19pbXBvcnRTdGFyXCI6XG4gICAgICByZXR1cm4gX19pbXBvcnRTdGFyO1xuICAgIGNhc2UgXCJTdGFuZGFyZE1vdXNlRXZlbnRcIjpcbiAgICAgIHJldHVybiBTdGFuZGFyZE1vdXNlRXZlbnQ7XG4gICAgY2FzZSBcIkRyYWdNb3VzZUV2ZW50XCI6XG4gICAgICByZXR1cm4gRHJhZ01vdXNlRXZlbnQ7XG4gICAgY2FzZSBcImJyb3dzZXJcIjpcbiAgICAgIHJldHVybiBicm93c2VyO1xuICAgIGNhc2UgXCJwbGF0Zm9ybVwiOlxuICAgICAgcmV0dXJuIHBsYXRmb3JtO1xuICAgIGNhc2UgXCJTdGFuZGFyZFdoZWVsRXZlbnRcIjpcbiAgICAgIHJldHVybiBTdGFuZGFyZFdoZWVsRXZlbnQ7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIF92YWx1ZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge31cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF91cGRhdGVfb3BlcmF0aW9uX18ob3BlcmF0aW9uLCB2YXJpYWJsZU5hbWUsIHByZWZpeCkge1xuICB2YXIgb2xkVmFsdWUgPSBfZ2V0X18odmFyaWFibGVOYW1lKTtcbiAgdmFyIG5ld1ZhbHVlID0gb3BlcmF0aW9uID09PSAnKysnID8gb2xkVmFsdWUgKyAxIDogb2xkVmFsdWUgLSAxO1xuICBfYXNzaWduX18odmFyaWFibGVOYW1lLCBuZXdWYWx1ZSk7XG4gIHJldHVybiBwcmVmaXggPyBuZXdWYWx1ZSA6IG9sZFZhbHVlO1xufVxuZnVuY3Rpb24gX3NldF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAodHlwZW9mIHZhcmlhYmxlTmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbbmFtZV0gPSB2YXJpYWJsZU5hbWVbbmFtZV07XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gSU5URU5USU9OQUxfVU5ERUZJTkVEO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gX3Jlc2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgZGVsZXRlIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgaWYgKE9iamVjdC5rZXlzKHJld2lyZURhdGEpLmxlbmd0aCA9PSAwKSB7XG4gICAgZGVsZXRlIF9nZXRSZXdpcmVSZWdpc3RyeV9fKClbX2dldFJld2lyZU1vZHVsZUlkX19dO1xuICB9XG4gIDtcbn1cbmZ1bmN0aW9uIF93aXRoX18ob2JqZWN0KSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgdmFyIHJld2lyZWRWYXJpYWJsZU5hbWVzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcbiAgdmFyIHByZXZpb3VzVmFsdWVzID0ge307XG4gIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gb2JqZWN0W3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gICAgbGV0IHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gICAgaWYgKCEhcmVzdWx0ICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXN1bHQudGhlbihyZXNldCkuY2F0Y2gocmVzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNldCgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxubGV0IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9IHR5cGVvZiBtb2R1bGUuZXhwb3J0cztcbmZ1bmN0aW9uIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsIG5hbWUsIHtcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuaWYgKChfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdvYmplY3QnIHx8IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ2Z1bmN0aW9uJykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShtb2R1bGUuZXhwb3J0cykpIHtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX193aXRoX18nLCBfd2l0aF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZUFQSV9fJywgX1Jld2lyZUFQSV9fKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG52YXIgX19jcmVhdGVCaW5kaW5nID0gdGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZyB8fCAoT2JqZWN0LmNyZWF0ZSA/IGZ1bmN0aW9uIChvLCBtLCBrLCBrMikge1xuICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgZGVzYyA9IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG1ba107XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSA6IGZ1bmN0aW9uIChvLCBtLCBrLCBrMikge1xuICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICBvW2syXSA9IG1ba107XG59KTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSB0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0IHx8IChPYmplY3QuY3JlYXRlID8gZnVuY3Rpb24gKG8sIHYpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICB2YWx1ZTogdlxuICB9KTtcbn0gOiBmdW5jdGlvbiAobywgdikge1xuICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSB0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9nZXRfXyhcIl9fY3JlYXRlQmluZGluZ1wiKShyZXN1bHQsIG1vZCwgayk7XG4gIF9nZXRfXyhcIl9fc2V0TW9kdWxlRGVmYXVsdFwiKShyZXN1bHQsIG1vZCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuR2VzdHVyZSA9IGV4cG9ydHMuRXZlbnRUeXBlID0gdm9pZCAwO1xuY29uc3QgRG9tVXRpbHMgPSBfZ2V0X18oXCJfX2ltcG9ydFN0YXJcIikocmVxdWlyZShcIi4uL2NvbW1vbi9kb21cIikpO1xuY29uc3QgYXJyYXlzID0gX2dldF9fKFwiX19pbXBvcnRTdGFyXCIpKHJlcXVpcmUoXCIuLi9jb21tb24vYXJyYXlzXCIpKTtcbmNvbnN0IGxpZmVjeWNsZV8xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9saWZlY3ljbGVcIik7XG5jb25zdCBsaW5rZWRMaXN0XzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL2xpbmtlZExpc3RcIik7XG52YXIgRXZlbnRUeXBlO1xuKGZ1bmN0aW9uIChFdmVudFR5cGUpIHtcbiAgRXZlbnRUeXBlLlRhcCA9ICctbW9uYWNvLWdlc3R1cmV0YXAnO1xuICBFdmVudFR5cGUuQ2hhbmdlID0gJy1tb25hY28tZ2VzdHVyZWNoYW5nZSc7XG4gIEV2ZW50VHlwZS5TdGFydCA9ICctbW9uYWNvLWdlc3R1cmVzdGFydCc7XG4gIEV2ZW50VHlwZS5FbmQgPSAnLW1vbmFjby1nZXN0dXJlc2VuZCc7XG4gIEV2ZW50VHlwZS5Db250ZXh0bWVudSA9ICctbW9uYWNvLWdlc3R1cmVjb250ZXh0bWVudSc7XG59KShfZ2V0X18oXCJFdmVudFR5cGVcIikgfHwgKGV4cG9ydHMuRXZlbnRUeXBlID0gX2Fzc2lnbl9fKFwiRXZlbnRUeXBlXCIsIHt9KSkpO1xuY2xhc3MgR2VzdHVyZSBleHRlbmRzIF9nZXRfXyhcImxpZmVjeWNsZV8xXCIpLkRpc3Bvc2FibGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZGlzcGF0Y2hlZCA9IGZhbHNlO1xuICAgIHRoaXMudGFyZ2V0cyA9IG5ldyAoX2dldF9fKFwibGlua2VkTGlzdF8xXCIpLkxpbmtlZExpc3QpKCk7XG4gICAgdGhpcy5pZ25vcmVUYXJnZXRzID0gbmV3IChfZ2V0X18oXCJsaW5rZWRMaXN0XzFcIikuTGlua2VkTGlzdCkoKTtcbiAgICB0aGlzLmFjdGl2ZVRvdWNoZXMgPSB7fTtcbiAgICB0aGlzLmhhbmRsZSA9IG51bGw7XG4gICAgdGhpcy5fbGFzdFNldFRhcENvdW50VGltZSA9IDA7XG4gICAgdGhpcy5fcmVnaXN0ZXIoX2dldF9fKFwiRG9tVXRpbHNcIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKGRvY3VtZW50LCAndG91Y2hzdGFydCcsIGUgPT4gdGhpcy5vblRvdWNoU3RhcnQoZSksIHtcbiAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgfSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKF9nZXRfXyhcIkRvbVV0aWxzXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcihkb2N1bWVudCwgJ3RvdWNoZW5kJywgZSA9PiB0aGlzLm9uVG91Y2hFbmQoZSkpKTtcbiAgICB0aGlzLl9yZWdpc3RlcihfZ2V0X18oXCJEb21VdGlsc1wiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoZG9jdW1lbnQsICd0b3VjaG1vdmUnLCBlID0+IHRoaXMub25Ub3VjaE1vdmUoZSksIHtcbiAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgfSkpO1xuICB9XG4gIHN0YXRpYyBhZGRUYXJnZXQoZWxlbWVudCkge1xuICAgIGlmICghX2dldF9fKFwiR2VzdHVyZVwiKS5pc1RvdWNoRGV2aWNlKCkpIHtcbiAgICAgIHJldHVybiBfZ2V0X18oXCJsaWZlY3ljbGVfMVwiKS5EaXNwb3NhYmxlLk5vbmU7XG4gICAgfVxuICAgIGlmICghX2dldF9fKFwiR2VzdHVyZVwiKS5JTlNUQU5DRSkge1xuICAgICAgX2dldF9fKFwiR2VzdHVyZVwiKS5JTlNUQU5DRSA9IG5ldyAoX2dldF9fKFwiR2VzdHVyZVwiKSkoKTtcbiAgICB9XG4gICAgY29uc3QgcmVtb3ZlID0gX2dldF9fKFwiR2VzdHVyZVwiKS5JTlNUQU5DRS50YXJnZXRzLnB1c2goZWxlbWVudCk7XG4gICAgcmV0dXJuICgwLCBfZ2V0X18oXCJsaWZlY3ljbGVfMVwiKS50b0Rpc3Bvc2FibGUpKHJlbW92ZSk7XG4gIH1cbiAgc3RhdGljIGlnbm9yZVRhcmdldChlbGVtZW50KSB7XG4gICAgaWYgKCFfZ2V0X18oXCJHZXN0dXJlXCIpLmlzVG91Y2hEZXZpY2UoKSkge1xuICAgICAgcmV0dXJuIF9nZXRfXyhcImxpZmVjeWNsZV8xXCIpLkRpc3Bvc2FibGUuTm9uZTtcbiAgICB9XG4gICAgaWYgKCFfZ2V0X18oXCJHZXN0dXJlXCIpLklOU1RBTkNFKSB7XG4gICAgICBfZ2V0X18oXCJHZXN0dXJlXCIpLklOU1RBTkNFID0gbmV3IChfZ2V0X18oXCJHZXN0dXJlXCIpKSgpO1xuICAgIH1cbiAgICBjb25zdCByZW1vdmUgPSBfZ2V0X18oXCJHZXN0dXJlXCIpLklOU1RBTkNFLmlnbm9yZVRhcmdldHMucHVzaChlbGVtZW50KTtcbiAgICByZXR1cm4gKDAsIF9nZXRfXyhcImxpZmVjeWNsZV8xXCIpLnRvRGlzcG9zYWJsZSkocmVtb3ZlKTtcbiAgfVxuICBzdGF0aWMgaXNUb3VjaERldmljZSgpIHtcbiAgICAvLyBgJ29udG91Y2hzdGFydCcgaW4gd2luZG93YCBhbHdheXMgZXZhbHVhdGVzIHRvIHRydWUgd2l0aCB0eXBlc2NyaXB0J3MgbW9kZXJuIHR5cGluZ3MuIFRoaXMgY2F1c2VzIGB3aW5kb3dgIHRvIGJlXG4gICAgLy8gYG5ldmVyYCBsYXRlciBpbiBgd2luZG93Lm5hdmlnYXRvcmAuIFRoYXQncyB3aHkgd2UgbmVlZCB0aGUgZXhwbGljaXQgYHdpbmRvdyBhcyBXaW5kb3dgIGNhc3RcbiAgICByZXR1cm4gJ29udG91Y2hzdGFydCcgaW4gd2luZG93IHx8IG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDA7XG4gIH1cbiAgZGlzcG9zZSgpIHtcbiAgICBpZiAodGhpcy5oYW5kbGUpIHtcbiAgICAgIHRoaXMuaGFuZGxlLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuaGFuZGxlID0gbnVsbDtcbiAgICB9XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG4gIG9uVG91Y2hTdGFydChlKSB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTsgLy8gdXNlIERhdGUubm93KCkgYmVjYXVzZSBvbiBGRiBlLnRpbWVTdGFtcCBpcyBub3QgZXBvY2ggYmFzZWQuXG4gICAgaWYgKHRoaXMuaGFuZGxlKSB7XG4gICAgICB0aGlzLmhhbmRsZS5kaXNwb3NlKCk7XG4gICAgICB0aGlzLmhhbmRsZSA9IG51bGw7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBlLnRhcmdldFRvdWNoZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGNvbnN0IHRvdWNoID0gZS50YXJnZXRUb3VjaGVzLml0ZW0oaSk7XG4gICAgICB0aGlzLmFjdGl2ZVRvdWNoZXNbdG91Y2guaWRlbnRpZmllcl0gPSB7XG4gICAgICAgIGlkOiB0b3VjaC5pZGVudGlmaWVyLFxuICAgICAgICBpbml0aWFsVGFyZ2V0OiB0b3VjaC50YXJnZXQsXG4gICAgICAgIGluaXRpYWxUaW1lU3RhbXA6IHRpbWVzdGFtcCxcbiAgICAgICAgaW5pdGlhbFBhZ2VYOiB0b3VjaC5wYWdlWCxcbiAgICAgICAgaW5pdGlhbFBhZ2VZOiB0b3VjaC5wYWdlWSxcbiAgICAgICAgcm9sbGluZ1RpbWVzdGFtcHM6IFt0aW1lc3RhbXBdLFxuICAgICAgICByb2xsaW5nUGFnZVg6IFt0b3VjaC5wYWdlWF0sXG4gICAgICAgIHJvbGxpbmdQYWdlWTogW3RvdWNoLnBhZ2VZXVxuICAgICAgfTtcbiAgICAgIGNvbnN0IGV2dCA9IHRoaXMubmV3R2VzdHVyZUV2ZW50KF9nZXRfXyhcIkV2ZW50VHlwZVwiKS5TdGFydCwgdG91Y2gudGFyZ2V0KTtcbiAgICAgIGV2dC5wYWdlWCA9IHRvdWNoLnBhZ2VYO1xuICAgICAgZXZ0LnBhZ2VZID0gdG91Y2gucGFnZVk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZXZ0KTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZGlzcGF0Y2hlZCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBvblRvdWNoRW5kKGUpIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpOyAvLyB1c2UgRGF0ZS5ub3coKSBiZWNhdXNlIG9uIEZGIGUudGltZVN0YW1wIGlzIG5vdCBlcG9jaCBiYXNlZC5cbiAgICBjb25zdCBhY3RpdmVUb3VjaENvdW50ID0gT2JqZWN0LmtleXModGhpcy5hY3RpdmVUb3VjaGVzKS5sZW5ndGg7XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGUuY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGNvbnN0IHRvdWNoID0gZS5jaGFuZ2VkVG91Y2hlcy5pdGVtKGkpO1xuICAgICAgaWYgKCF0aGlzLmFjdGl2ZVRvdWNoZXMuaGFzT3duUHJvcGVydHkoU3RyaW5nKHRvdWNoLmlkZW50aWZpZXIpKSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ21vdmUgb2YgYW4gVU5LTk9XTiB0b3VjaCcsIHRvdWNoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5hY3RpdmVUb3VjaGVzW3RvdWNoLmlkZW50aWZpZXJdLFxuICAgICAgICBob2xkVGltZSA9IERhdGUubm93KCkgLSBkYXRhLmluaXRpYWxUaW1lU3RhbXA7XG4gICAgICBpZiAoaG9sZFRpbWUgPCBfZ2V0X18oXCJHZXN0dXJlXCIpLkhPTERfREVMQVkgJiYgTWF0aC5hYnMoZGF0YS5pbml0aWFsUGFnZVggLSBfZ2V0X18oXCJhcnJheXNcIikudGFpbChkYXRhLnJvbGxpbmdQYWdlWCkpIDwgMzAgJiYgTWF0aC5hYnMoZGF0YS5pbml0aWFsUGFnZVkgLSBfZ2V0X18oXCJhcnJheXNcIikudGFpbChkYXRhLnJvbGxpbmdQYWdlWSkpIDwgMzApIHtcbiAgICAgICAgY29uc3QgZXZ0ID0gdGhpcy5uZXdHZXN0dXJlRXZlbnQoX2dldF9fKFwiRXZlbnRUeXBlXCIpLlRhcCwgZGF0YS5pbml0aWFsVGFyZ2V0KTtcbiAgICAgICAgZXZ0LnBhZ2VYID0gX2dldF9fKFwiYXJyYXlzXCIpLnRhaWwoZGF0YS5yb2xsaW5nUGFnZVgpO1xuICAgICAgICBldnQucGFnZVkgPSBfZ2V0X18oXCJhcnJheXNcIikudGFpbChkYXRhLnJvbGxpbmdQYWdlWSk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChldnQpO1xuICAgICAgfSBlbHNlIGlmIChob2xkVGltZSA+PSBfZ2V0X18oXCJHZXN0dXJlXCIpLkhPTERfREVMQVkgJiYgTWF0aC5hYnMoZGF0YS5pbml0aWFsUGFnZVggLSBfZ2V0X18oXCJhcnJheXNcIikudGFpbChkYXRhLnJvbGxpbmdQYWdlWCkpIDwgMzAgJiYgTWF0aC5hYnMoZGF0YS5pbml0aWFsUGFnZVkgLSBfZ2V0X18oXCJhcnJheXNcIikudGFpbChkYXRhLnJvbGxpbmdQYWdlWSkpIDwgMzApIHtcbiAgICAgICAgY29uc3QgZXZ0ID0gdGhpcy5uZXdHZXN0dXJlRXZlbnQoX2dldF9fKFwiRXZlbnRUeXBlXCIpLkNvbnRleHRtZW51LCBkYXRhLmluaXRpYWxUYXJnZXQpO1xuICAgICAgICBldnQucGFnZVggPSBfZ2V0X18oXCJhcnJheXNcIikudGFpbChkYXRhLnJvbGxpbmdQYWdlWCk7XG4gICAgICAgIGV2dC5wYWdlWSA9IF9nZXRfXyhcImFycmF5c1wiKS50YWlsKGRhdGEucm9sbGluZ1BhZ2VZKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgICB9IGVsc2UgaWYgKGFjdGl2ZVRvdWNoQ291bnQgPT09IDEpIHtcbiAgICAgICAgY29uc3QgZmluYWxYID0gX2dldF9fKFwiYXJyYXlzXCIpLnRhaWwoZGF0YS5yb2xsaW5nUGFnZVgpO1xuICAgICAgICBjb25zdCBmaW5hbFkgPSBfZ2V0X18oXCJhcnJheXNcIikudGFpbChkYXRhLnJvbGxpbmdQYWdlWSk7XG4gICAgICAgIGNvbnN0IGRlbHRhVCA9IF9nZXRfXyhcImFycmF5c1wiKS50YWlsKGRhdGEucm9sbGluZ1RpbWVzdGFtcHMpIC0gZGF0YS5yb2xsaW5nVGltZXN0YW1wc1swXTtcbiAgICAgICAgY29uc3QgZGVsdGFYID0gZmluYWxYIC0gZGF0YS5yb2xsaW5nUGFnZVhbMF07XG4gICAgICAgIGNvbnN0IGRlbHRhWSA9IGZpbmFsWSAtIGRhdGEucm9sbGluZ1BhZ2VZWzBdO1xuICAgICAgfVxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMubmV3R2VzdHVyZUV2ZW50KF9nZXRfXyhcIkV2ZW50VHlwZVwiKS5FbmQsIGRhdGEuaW5pdGlhbFRhcmdldCkpO1xuICAgICAgLy8gZm9yZ2V0IGFib3V0IHRoaXMgdG91Y2hcbiAgICAgIGRlbGV0ZSB0aGlzLmFjdGl2ZVRvdWNoZXNbdG91Y2guaWRlbnRpZmllcl07XG4gICAgfVxuICAgIGlmICh0aGlzLmRpc3BhdGNoZWQpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLmRpc3BhdGNoZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgbmV3R2VzdHVyZUV2ZW50KHR5cGUsIGluaXRpYWxUYXJnZXQpIHtcbiAgICBjb25zdCBldmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICAgIGV2ZW50LmluaXRFdmVudCh0eXBlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgZXZlbnQuaW5pdGlhbFRhcmdldCA9IGluaXRpYWxUYXJnZXQ7XG4gICAgZXZlbnQudGFwQ291bnQgPSAwO1xuICAgIHJldHVybiBldmVudDtcbiAgfVxuICBkaXNwYXRjaEV2ZW50KGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT09IF9nZXRfXyhcIkV2ZW50VHlwZVwiKS5UYXApIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICBsZXQgc2V0VGFwQ291bnQgPSAwO1xuICAgICAgaWYgKGN1cnJlbnRUaW1lIC0gdGhpcy5fbGFzdFNldFRhcENvdW50VGltZSA+IF9nZXRfXyhcIkdlc3R1cmVcIikuQ0xFQVJfVEFQX0NPVU5UX1RJTUUpIHtcbiAgICAgICAgc2V0VGFwQ291bnQgPSAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0VGFwQ291bnQgPSAyO1xuICAgICAgfVxuICAgICAgdGhpcy5fbGFzdFNldFRhcENvdW50VGltZSA9IGN1cnJlbnRUaW1lO1xuICAgICAgZXZlbnQudGFwQ291bnQgPSBzZXRUYXBDb3VudDtcbiAgICB9IGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09IF9nZXRfXyhcIkV2ZW50VHlwZVwiKS5DaGFuZ2UgfHwgZXZlbnQudHlwZSA9PT0gX2dldF9fKFwiRXZlbnRUeXBlXCIpLkNvbnRleHRtZW51KSB7XG4gICAgICAvLyB0YXAgaXMgY2FuY2VsZWQgYnkgc2Nyb2xsaW5nIG9yIGNvbnRleHQgbWVudVxuICAgICAgdGhpcy5fbGFzdFNldFRhcENvdW50VGltZSA9IDA7XG4gICAgfVxuICB9XG4gIGluZXJ0aWEoZGlzcGF0Y2hUbywgdDEsIHZYLCBkaXJYLCB4LCB2WSwgZGlyWSwgeSkge1xuICAgIHRoaXMuaGFuZGxlID0gX2dldF9fKFwiRG9tVXRpbHNcIikuc2NoZWR1bGVBdE5leHRBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgLy8gdmVsb2NpdHk6IG9sZCBzcGVlZCArIGFjY2VsX292ZXJfdGltZVxuICAgICAgY29uc3QgZGVsdGFUID0gbm93IC0gdDE7XG4gICAgICBsZXQgZGVsdGFfcG9zX3ggPSAwLFxuICAgICAgICBkZWx0YV9wb3NfeSA9IDA7XG4gICAgICBsZXQgc3RvcHBlZCA9IHRydWU7XG4gICAgICB2WCArPSBfZ2V0X18oXCJHZXN0dXJlXCIpLlNDUk9MTF9GUklDVElPTiAqIGRlbHRhVDtcbiAgICAgIHZZICs9IF9nZXRfXyhcIkdlc3R1cmVcIikuU0NST0xMX0ZSSUNUSU9OICogZGVsdGFUO1xuICAgICAgaWYgKHZYID4gMCkge1xuICAgICAgICBzdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIGRlbHRhX3Bvc194ID0gZGlyWCAqIHZYICogZGVsdGFUO1xuICAgICAgfVxuICAgICAgaWYgKHZZID4gMCkge1xuICAgICAgICBzdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIGRlbHRhX3Bvc195ID0gZGlyWSAqIHZZICogZGVsdGFUO1xuICAgICAgfVxuICAgICAgLy8gZGlzcGF0Y2ggdHJhbnNsYXRpb24gZXZlbnRcbiAgICAgIGNvbnN0IGV2dCA9IHRoaXMubmV3R2VzdHVyZUV2ZW50KF9nZXRfXyhcIkV2ZW50VHlwZVwiKS5DaGFuZ2UpO1xuICAgICAgZXZ0LnRyYW5zbGF0aW9uWCA9IGRlbHRhX3Bvc194O1xuICAgICAgZXZ0LnRyYW5zbGF0aW9uWSA9IGRlbHRhX3Bvc195O1xuICAgICAgZGlzcGF0Y2hUby5mb3JFYWNoKGQgPT4gZC5kaXNwYXRjaEV2ZW50KGV2dCkpO1xuICAgICAgaWYgKCFzdG9wcGVkKSB7XG4gICAgICAgIHRoaXMuaW5lcnRpYShkaXNwYXRjaFRvLCBub3csIHZYLCBkaXJYLCB4ICsgZGVsdGFfcG9zX3gsIHZZLCBkaXJZLCB5ICsgZGVsdGFfcG9zX3kpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIG9uVG91Y2hNb3ZlKGUpIHtcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpOyAvLyB1c2UgRGF0ZS5ub3coKSBiZWNhdXNlIG9uIEZGIGUudGltZVN0YW1wIGlzIG5vdCBlcG9jaCBiYXNlZC5cbiAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgY29uc3QgdG91Y2ggPSBlLmNoYW5nZWRUb3VjaGVzLml0ZW0oaSk7XG4gICAgICBpZiAoIXRoaXMuYWN0aXZlVG91Y2hlcy5oYXNPd25Qcm9wZXJ0eShTdHJpbmcodG91Y2guaWRlbnRpZmllcikpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignZW5kIG9mIGFuIFVOS05PV04gdG91Y2gnLCB0b3VjaCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuYWN0aXZlVG91Y2hlc1t0b3VjaC5pZGVudGlmaWVyXTtcbiAgICAgIGNvbnN0IGV2dCA9IHRoaXMubmV3R2VzdHVyZUV2ZW50KF9nZXRfXyhcIkV2ZW50VHlwZVwiKS5DaGFuZ2UsIGRhdGEuaW5pdGlhbFRhcmdldCk7XG4gICAgICBldnQudHJhbnNsYXRpb25YID0gdG91Y2gucGFnZVggLSBfZ2V0X18oXCJhcnJheXNcIikudGFpbChkYXRhLnJvbGxpbmdQYWdlWCk7XG4gICAgICBldnQudHJhbnNsYXRpb25ZID0gdG91Y2gucGFnZVkgLSBfZ2V0X18oXCJhcnJheXNcIikudGFpbChkYXRhLnJvbGxpbmdQYWdlWSk7XG4gICAgICBldnQucGFnZVggPSB0b3VjaC5wYWdlWDtcbiAgICAgIGV2dC5wYWdlWSA9IHRvdWNoLnBhZ2VZO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgICAvLyBvbmx5IGtlZXAgYSBmZXcgZGF0YSBwb2ludHMsIHRvIGF2ZXJhZ2UgdGhlIGZpbmFsIHNwZWVkXG4gICAgICBpZiAoZGF0YS5yb2xsaW5nUGFnZVgubGVuZ3RoID4gMykge1xuICAgICAgICBkYXRhLnJvbGxpbmdQYWdlWC5zaGlmdCgpO1xuICAgICAgICBkYXRhLnJvbGxpbmdQYWdlWS5zaGlmdCgpO1xuICAgICAgICBkYXRhLnJvbGxpbmdUaW1lc3RhbXBzLnNoaWZ0KCk7XG4gICAgICB9XG4gICAgICBkYXRhLnJvbGxpbmdQYWdlWC5wdXNoKHRvdWNoLnBhZ2VYKTtcbiAgICAgIGRhdGEucm9sbGluZ1BhZ2VZLnB1c2godG91Y2gucGFnZVkpO1xuICAgICAgZGF0YS5yb2xsaW5nVGltZXN0YW1wcy5wdXNoKHRpbWVzdGFtcCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmRpc3BhdGNoZWQpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB0aGlzLmRpc3BhdGNoZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbn1cbmV4cG9ydHMuR2VzdHVyZSA9IF9nZXRfXyhcIkdlc3R1cmVcIik7XG5fZ2V0X18oXCJHZXN0dXJlXCIpLlNDUk9MTF9GUklDVElPTiA9IC0wLjAwNTtcbl9nZXRfXyhcIkdlc3R1cmVcIikuSE9MRF9ERUxBWSA9IDcwMDtcbl9nZXRfXyhcIkdlc3R1cmVcIikuQ0xFQVJfVEFQX0NPVU5UX1RJTUUgPSA0MDA7IC8vIG1zXG5mdW5jdGlvbiBfZ2V0R2xvYmFsT2JqZWN0KCkge1xuICB0cnkge1xuICAgIGlmICghIWdsb2JhbCkge1xuICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCEhd2luZG93KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG59XG47XG52YXIgX1Jld2lyZU1vZHVsZUlkX18gPSBudWxsO1xuZnVuY3Rpb24gX2dldFJld2lyZU1vZHVsZUlkX18oKSB7XG4gIGlmIChfUmV3aXJlTW9kdWxlSWRfXyA9PT0gbnVsbCkge1xuICAgIGxldCBnbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgICBpZiAoIWdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18pIHtcbiAgICAgIGdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18gPSAwO1xuICAgIH1cbiAgICBfUmV3aXJlTW9kdWxlSWRfXyA9IF9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18rKztcbiAgfVxuICByZXR1cm4gX1Jld2lyZU1vZHVsZUlkX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuICByZXR1cm4gdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVkRGF0YV9fKCkge1xuICBsZXQgbW9kdWxlSWQgPSBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpO1xuICBsZXQgcmVnaXN0cnkgPSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpO1xuICBsZXQgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgaWYgKCFyZXdpcmVEYXRhKSB7XG4gICAgcmVnaXN0cnlbbW9kdWxlSWRdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICB9XG4gIHJldHVybiByZXdpcmVEYXRhO1xufVxuKGZ1bmN0aW9uIHJlZ2lzdGVyUmVzZXRBbGwoKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSkge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfTtcbiAgfVxufSkoKTtcbnZhciBJTlRFTlRJT05BTF9VTkRFRklORUQgPSAnX19JTlRFTlRJT05BTF9VTkRFRklORURfXyc7XG5sZXQgX1Jld2lyZUFQSV9fID0ge307XG4oZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KG5hbWUsIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9SZXdpcmVBUElfXywgbmFtZSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfVxuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX193aXRoX18nLCBfd2l0aF9fKTtcbn0pKCk7XG5mdW5jdGlvbiBfZ2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB2YWx1ZSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICBpZiAodmFsdWUgPT09IElOVEVOVElPTkFMX1VOREVGSU5FRCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJfX2NyZWF0ZUJpbmRpbmdcIjpcbiAgICAgIHJldHVybiBfX2NyZWF0ZUJpbmRpbmc7XG4gICAgY2FzZSBcIl9fc2V0TW9kdWxlRGVmYXVsdFwiOlxuICAgICAgcmV0dXJuIF9fc2V0TW9kdWxlRGVmYXVsdDtcbiAgICBjYXNlIFwiX19pbXBvcnRTdGFyXCI6XG4gICAgICByZXR1cm4gX19pbXBvcnRTdGFyO1xuICAgIGNhc2UgXCJFdmVudFR5cGVcIjpcbiAgICAgIHJldHVybiBFdmVudFR5cGU7XG4gICAgY2FzZSBcImxpbmtlZExpc3RfMVwiOlxuICAgICAgcmV0dXJuIGxpbmtlZExpc3RfMTtcbiAgICBjYXNlIFwiRG9tVXRpbHNcIjpcbiAgICAgIHJldHVybiBEb21VdGlscztcbiAgICBjYXNlIFwiR2VzdHVyZVwiOlxuICAgICAgcmV0dXJuIEdlc3R1cmU7XG4gICAgY2FzZSBcImxpZmVjeWNsZV8xXCI6XG4gICAgICByZXR1cm4gbGlmZWN5Y2xlXzE7XG4gICAgY2FzZSBcImFycmF5c1wiOlxuICAgICAgcmV0dXJuIGFycmF5cztcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgX3ZhbHVlKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7XG4gICAgY2FzZSBcIkV2ZW50VHlwZVwiOlxuICAgICAgcmV0dXJuIEV2ZW50VHlwZSA9IF92YWx1ZTtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX3VwZGF0ZV9vcGVyYXRpb25fXyhvcGVyYXRpb24sIHZhcmlhYmxlTmFtZSwgcHJlZml4KSB7XG4gIHZhciBvbGRWYWx1ZSA9IF9nZXRfXyh2YXJpYWJsZU5hbWUpO1xuICB2YXIgbmV3VmFsdWUgPSBvcGVyYXRpb24gPT09ICcrKycgPyBvbGRWYWx1ZSArIDEgOiBvbGRWYWx1ZSAtIDE7XG4gIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIG5ld1ZhbHVlKTtcbiAgcmV0dXJuIHByZWZpeCA/IG5ld1ZhbHVlIDogb2xkVmFsdWU7XG59XG5mdW5jdGlvbiBfc2V0X18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmICh0eXBlb2YgdmFyaWFibGVOYW1lID09PSAnb2JqZWN0Jykge1xuICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVtuYW1lXSA9IHZhcmlhYmxlTmFtZVtuYW1lXTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBJTlRFTlRJT05BTF9VTkRFRklORUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBkZWxldGUgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICBpZiAoT2JqZWN0LmtleXMocmV3aXJlRGF0YSkubGVuZ3RoID09IDApIHtcbiAgICBkZWxldGUgX2dldFJld2lyZVJlZ2lzdHJ5X18oKVtfZ2V0UmV3aXJlTW9kdWxlSWRfX107XG4gIH1cbiAgO1xufVxuZnVuY3Rpb24gX3dpdGhfXyhvYmplY3QpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICB2YXIgcmV3aXJlZFZhcmlhYmxlTmFtZXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICB2YXIgcHJldmlvdXNWYWx1ZXMgPSB7fTtcbiAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV0gPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBvYmplY3RbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgICBsZXQgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgICBpZiAoISFyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlc3VsdC50aGVuKHJlc2V0KS5jYXRjaChyZXNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc2V0KCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5sZXQgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID0gdHlwZW9mIG1vZHVsZS5leHBvcnRzO1xuZnVuY3Rpb24gYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgbmFtZSwge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5pZiAoKF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ29iamVjdCcgfHwgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnZnVuY3Rpb24nKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKG1vZHVsZS5leHBvcnRzKSkge1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3dpdGhfXycsIF93aXRoX18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlQVBJX18nLCBfUmV3aXJlQVBJX18pO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuY29hbGVzY2UgPSBleHBvcnRzLnRhaWwgPSB2b2lkIDA7XG4vKipcbiAqIFJldHVybnMgdGhlIGxhc3QgZWxlbWVudCBvZiBhbiBhcnJheS5cbiAqIEBwYXJhbSBhcnJheSBUaGUgYXJyYXkuXG4gKiBAcGFyYW0gbiBXaGljaCBlbGVtZW50IGZyb20gdGhlIGVuZCAoZGVmYXVsdCBpcyB6ZXJvKS5cbiAqL1xuZnVuY3Rpb24gdGFpbChhcnJheSwgbiA9IDApIHtcbiAgcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aCAtICgxICsgbildO1xufVxuZXhwb3J0cy50YWlsID0gX2dldF9fKFwidGFpbFwiKTtcbi8qKlxuICogQHJldHVybnMgYSBuZXcgYXJyYXkgd2l0aCBhbGwgZmFsc3kgdmFsdWVzIHJlbW92ZWQuIFRoZSBvcmlnaW5hbCBhcnJheSBJUyBOT1QgbW9kaWZpZWQuXG4gKi9cbmZ1bmN0aW9uIGNvYWxlc2NlKGFycmF5KSB7XG4gIGlmICghYXJyYXkpIHtcbiAgICByZXR1cm4gYXJyYXk7XG4gIH1cbiAgcmV0dXJuIGFycmF5LmZpbHRlcihlID0+ICEhZSk7XG59XG5leHBvcnRzLmNvYWxlc2NlID0gX2dldF9fKFwiY29hbGVzY2VcIik7XG5mdW5jdGlvbiBfZ2V0R2xvYmFsT2JqZWN0KCkge1xuICB0cnkge1xuICAgIGlmICghIWdsb2JhbCkge1xuICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCEhd2luZG93KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG59XG47XG52YXIgX1Jld2lyZU1vZHVsZUlkX18gPSBudWxsO1xuZnVuY3Rpb24gX2dldFJld2lyZU1vZHVsZUlkX18oKSB7XG4gIGlmIChfUmV3aXJlTW9kdWxlSWRfXyA9PT0gbnVsbCkge1xuICAgIGxldCBnbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgICBpZiAoIWdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18pIHtcbiAgICAgIGdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18gPSAwO1xuICAgIH1cbiAgICBfUmV3aXJlTW9kdWxlSWRfXyA9IF9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18rKztcbiAgfVxuICByZXR1cm4gX1Jld2lyZU1vZHVsZUlkX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuICByZXR1cm4gdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVkRGF0YV9fKCkge1xuICBsZXQgbW9kdWxlSWQgPSBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpO1xuICBsZXQgcmVnaXN0cnkgPSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpO1xuICBsZXQgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgaWYgKCFyZXdpcmVEYXRhKSB7XG4gICAgcmVnaXN0cnlbbW9kdWxlSWRdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICB9XG4gIHJldHVybiByZXdpcmVEYXRhO1xufVxuKGZ1bmN0aW9uIHJlZ2lzdGVyUmVzZXRBbGwoKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSkge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfTtcbiAgfVxufSkoKTtcbnZhciBJTlRFTlRJT05BTF9VTkRFRklORUQgPSAnX19JTlRFTlRJT05BTF9VTkRFRklORURfXyc7XG5sZXQgX1Jld2lyZUFQSV9fID0ge307XG4oZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KG5hbWUsIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9SZXdpcmVBUElfXywgbmFtZSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfVxuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX193aXRoX18nLCBfd2l0aF9fKTtcbn0pKCk7XG5mdW5jdGlvbiBfZ2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB2YWx1ZSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICBpZiAodmFsdWUgPT09IElOVEVOVElPTkFMX1VOREVGSU5FRCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJ0YWlsXCI6XG4gICAgICByZXR1cm4gdGFpbDtcbiAgICBjYXNlIFwiY29hbGVzY2VcIjpcbiAgICAgIHJldHVybiBjb2FsZXNjZTtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgX3ZhbHVlKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7fVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX3VwZGF0ZV9vcGVyYXRpb25fXyhvcGVyYXRpb24sIHZhcmlhYmxlTmFtZSwgcHJlZml4KSB7XG4gIHZhciBvbGRWYWx1ZSA9IF9nZXRfXyh2YXJpYWJsZU5hbWUpO1xuICB2YXIgbmV3VmFsdWUgPSBvcGVyYXRpb24gPT09ICcrKycgPyBvbGRWYWx1ZSArIDEgOiBvbGRWYWx1ZSAtIDE7XG4gIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIG5ld1ZhbHVlKTtcbiAgcmV0dXJuIHByZWZpeCA/IG5ld1ZhbHVlIDogb2xkVmFsdWU7XG59XG5mdW5jdGlvbiBfc2V0X18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmICh0eXBlb2YgdmFyaWFibGVOYW1lID09PSAnb2JqZWN0Jykge1xuICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVtuYW1lXSA9IHZhcmlhYmxlTmFtZVtuYW1lXTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBJTlRFTlRJT05BTF9VTkRFRklORUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBkZWxldGUgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICBpZiAoT2JqZWN0LmtleXMocmV3aXJlRGF0YSkubGVuZ3RoID09IDApIHtcbiAgICBkZWxldGUgX2dldFJld2lyZVJlZ2lzdHJ5X18oKVtfZ2V0UmV3aXJlTW9kdWxlSWRfX107XG4gIH1cbiAgO1xufVxuZnVuY3Rpb24gX3dpdGhfXyhvYmplY3QpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICB2YXIgcmV3aXJlZFZhcmlhYmxlTmFtZXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICB2YXIgcHJldmlvdXNWYWx1ZXMgPSB7fTtcbiAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV0gPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBvYmplY3RbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgICBsZXQgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgICBpZiAoISFyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlc3VsdC50aGVuKHJlc2V0KS5jYXRjaChyZXNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc2V0KCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5sZXQgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID0gdHlwZW9mIG1vZHVsZS5leHBvcnRzO1xuZnVuY3Rpb24gYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgbmFtZSwge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5pZiAoKF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ29iamVjdCcgfHwgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnZnVuY3Rpb24nKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKG1vZHVsZS5leHBvcnRzKSkge1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3dpdGhfXycsIF93aXRoX18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlQVBJX18nLCBfUmV3aXJlQVBJX18pO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuUnVuT25jZVNjaGVkdWxlciA9IGV4cG9ydHMuVGltZW91dFRpbWVyID0gdm9pZCAwO1xuY29uc3QgbGlmZWN5Y2xlXzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL2xpZmVjeWNsZVwiKTtcbmNsYXNzIFRpbWVvdXRUaW1lciBleHRlbmRzIF9nZXRfXyhcImxpZmVjeWNsZV8xXCIpLkRpc3Bvc2FibGUge1xuICBjb25zdHJ1Y3RvcihydW5uZXIsIHRpbWVvdXQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3Rva2VuID0gLTE7XG4gICAgaWYgKHR5cGVvZiBydW5uZXIgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIHRpbWVvdXQgPT09ICdudW1iZXInKSB7XG4gICAgICB0aGlzLnNldElmTm90U2V0KHJ1bm5lciwgdGltZW91dCk7XG4gICAgfVxuICB9XG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5jYW5jZWwoKTtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cbiAgY2FuY2VsKCkge1xuICAgIGlmICh0aGlzLl90b2tlbiAhPT0gLTEpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl90b2tlbik7XG4gICAgICB0aGlzLl90b2tlbiA9IC0xO1xuICAgIH1cbiAgfVxuICBjYW5jZWxBbmRTZXQocnVubmVyLCB0aW1lb3V0KSB7XG4gICAgdGhpcy5jYW5jZWwoKTtcbiAgICB0aGlzLl90b2tlbiA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5fdG9rZW4gPSAtMTtcbiAgICAgIHJ1bm5lcigpO1xuICAgIH0sIHRpbWVvdXQpO1xuICB9XG4gIHNldElmTm90U2V0KHJ1bm5lciwgdGltZW91dCkge1xuICAgIGlmICh0aGlzLl90b2tlbiAhPT0gLTEpIHtcbiAgICAgIC8vIHRpbWVyIGlzIGFscmVhZHkgc2V0XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX3Rva2VuID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLl90b2tlbiA9IC0xO1xuICAgICAgcnVubmVyKCk7XG4gICAgfSwgdGltZW91dCk7XG4gIH1cbn1cbmV4cG9ydHMuVGltZW91dFRpbWVyID0gX2dldF9fKFwiVGltZW91dFRpbWVyXCIpO1xuY2xhc3MgUnVuT25jZVNjaGVkdWxlciB7XG4gIGNvbnN0cnVjdG9yKHJ1bm5lciwgdGltZW91dCkge1xuICAgIHRoaXMudGltZW91dFRva2VuID0gLTE7XG4gICAgdGhpcy5ydW5uZXIgPSBydW5uZXI7XG4gICAgdGhpcy50aW1lb3V0ID0gdGltZW91dDtcbiAgICB0aGlzLnRpbWVvdXRIYW5kbGVyID0gdGhpcy5vblRpbWVvdXQuYmluZCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogRGlzcG9zZSBSdW5PbmNlU2NoZWR1bGVyXG4gICAqL1xuICBkaXNwb3NlKCkge1xuICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgdGhpcy5ydW5uZXIgPSBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBDYW5jZWwgY3VycmVudCBzY2hlZHVsZWQgcnVubmVyIChpZiBhbnkpLlxuICAgKi9cbiAgY2FuY2VsKCkge1xuICAgIGlmICh0aGlzLmlzU2NoZWR1bGVkKCkpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRUb2tlbik7XG4gICAgICB0aGlzLnRpbWVvdXRUb2tlbiA9IC0xO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2FuY2VsIHByZXZpb3VzIHJ1bm5lciAoaWYgYW55KSAmIHNjaGVkdWxlIGEgbmV3IHJ1bm5lci5cbiAgICovXG4gIHNjaGVkdWxlKGRlbGF5ID0gdGhpcy50aW1lb3V0KSB7XG4gICAgdGhpcy5jYW5jZWwoKTtcbiAgICB0aGlzLnRpbWVvdXRUb2tlbiA9IHNldFRpbWVvdXQodGhpcy50aW1lb3V0SGFuZGxlciwgZGVsYXkpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgc2NoZWR1bGVkLlxuICAgKi9cbiAgaXNTY2hlZHVsZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMudGltZW91dFRva2VuICE9PSAtMTtcbiAgfVxuICBvblRpbWVvdXQoKSB7XG4gICAgdGhpcy50aW1lb3V0VG9rZW4gPSAtMTtcbiAgICBpZiAodGhpcy5ydW5uZXIpIHtcbiAgICAgIHRoaXMuZG9SdW4oKTtcbiAgICB9XG4gIH1cbiAgZG9SdW4oKSB7XG4gICAgaWYgKHRoaXMucnVubmVyKSB7XG4gICAgICB0aGlzLnJ1bm5lcigpO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0cy5SdW5PbmNlU2NoZWR1bGVyID0gX2dldF9fKFwiUnVuT25jZVNjaGVkdWxlclwiKTtcbmZ1bmN0aW9uIF9nZXRHbG9iYWxPYmplY3QoKSB7XG4gIHRyeSB7XG4gICAgaWYgKCEhZ2xvYmFsKSB7XG4gICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoISF3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH1cbn1cbjtcbnZhciBfUmV3aXJlTW9kdWxlSWRfXyA9IG51bGw7XG5mdW5jdGlvbiBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpIHtcbiAgaWYgKF9SZXdpcmVNb2R1bGVJZF9fID09PSBudWxsKSB7XG4gICAgbGV0IGdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICAgIGlmICghZ2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXykge1xuICAgICAgZ2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXyA9IDA7XG4gICAgfVxuICAgIF9SZXdpcmVNb2R1bGVJZF9fID0gX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXysrO1xuICB9XG4gIHJldHVybiBfUmV3aXJlTW9kdWxlSWRfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVSZWdpc3RyeV9fKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXykge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG4gIHJldHVybiB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZWREYXRhX18oKSB7XG4gIGxldCBtb2R1bGVJZCA9IF9nZXRSZXdpcmVNb2R1bGVJZF9fKCk7XG4gIGxldCByZWdpc3RyeSA9IF9nZXRSZXdpcmVSZWdpc3RyeV9fKCk7XG4gIGxldCByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICBpZiAoIXJld2lyZURhdGEpIHtcbiAgICByZWdpc3RyeVttb2R1bGVJZF0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIH1cbiAgcmV0dXJuIHJld2lyZURhdGE7XG59XG4oZnVuY3Rpb24gcmVnaXN0ZXJSZXNldEFsbCgpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9O1xuICB9XG59KSgpO1xudmFyIElOVEVOVElPTkFMX1VOREVGSU5FRCA9ICdfX0lOVEVOVElPTkFMX1VOREVGSU5FRF9fJztcbmxldCBfUmV3aXJlQVBJX18gPSB7fTtcbihmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGFkZFByb3BlcnR5VG9BUElPYmplY3QobmFtZSwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX1Jld2lyZUFQSV9fLCBuYW1lLCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3dpdGhfXycsIF93aXRoX18pO1xufSkoKTtcbmZ1bmN0aW9uIF9nZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHZhbHVlID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgIGlmICh2YWx1ZSA9PT0gSU5URU5USU9OQUxfVU5ERUZJTkVEKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7XG4gICAgY2FzZSBcImxpZmVjeWNsZV8xXCI6XG4gICAgICByZXR1cm4gbGlmZWN5Y2xlXzE7XG4gICAgY2FzZSBcIlRpbWVvdXRUaW1lclwiOlxuICAgICAgcmV0dXJuIFRpbWVvdXRUaW1lcjtcbiAgICBjYXNlIFwiUnVuT25jZVNjaGVkdWxlclwiOlxuICAgICAgcmV0dXJuIFJ1bk9uY2VTY2hlZHVsZXI7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIF92YWx1ZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge31cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF91cGRhdGVfb3BlcmF0aW9uX18ob3BlcmF0aW9uLCB2YXJpYWJsZU5hbWUsIHByZWZpeCkge1xuICB2YXIgb2xkVmFsdWUgPSBfZ2V0X18odmFyaWFibGVOYW1lKTtcbiAgdmFyIG5ld1ZhbHVlID0gb3BlcmF0aW9uID09PSAnKysnID8gb2xkVmFsdWUgKyAxIDogb2xkVmFsdWUgLSAxO1xuICBfYXNzaWduX18odmFyaWFibGVOYW1lLCBuZXdWYWx1ZSk7XG4gIHJldHVybiBwcmVmaXggPyBuZXdWYWx1ZSA6IG9sZFZhbHVlO1xufVxuZnVuY3Rpb24gX3NldF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAodHlwZW9mIHZhcmlhYmxlTmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbbmFtZV0gPSB2YXJpYWJsZU5hbWVbbmFtZV07XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gSU5URU5USU9OQUxfVU5ERUZJTkVEO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gX3Jlc2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgZGVsZXRlIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgaWYgKE9iamVjdC5rZXlzKHJld2lyZURhdGEpLmxlbmd0aCA9PSAwKSB7XG4gICAgZGVsZXRlIF9nZXRSZXdpcmVSZWdpc3RyeV9fKClbX2dldFJld2lyZU1vZHVsZUlkX19dO1xuICB9XG4gIDtcbn1cbmZ1bmN0aW9uIF93aXRoX18ob2JqZWN0KSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgdmFyIHJld2lyZWRWYXJpYWJsZU5hbWVzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcbiAgdmFyIHByZXZpb3VzVmFsdWVzID0ge307XG4gIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gb2JqZWN0W3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gICAgbGV0IHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gICAgaWYgKCEhcmVzdWx0ICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXN1bHQudGhlbihyZXNldCkuY2F0Y2gocmVzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNldCgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxubGV0IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9IHR5cGVvZiBtb2R1bGUuZXhwb3J0cztcbmZ1bmN0aW9uIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsIG5hbWUsIHtcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuaWYgKChfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdvYmplY3QnIHx8IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ2Z1bmN0aW9uJykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShtb2R1bGUuZXhwb3J0cykpIHtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX193aXRoX18nLCBfd2l0aF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZUFQSV9fJywgX1Jld2lyZUFQSV9fKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLkNvbG9yID0gZXhwb3J0cy5IU1ZBID0gZXhwb3J0cy5IU0xBID0gZXhwb3J0cy5SR0JBID0gdm9pZCAwO1xuZnVuY3Rpb24gcm91bmRGbG9hdChudW1iZXIsIGRlY2ltYWxQb2ludHMpIHtcbiAgY29uc3QgZGVjaW1hbCA9IE1hdGgucG93KDEwLCBkZWNpbWFsUG9pbnRzKTtcbiAgcmV0dXJuIE1hdGgucm91bmQobnVtYmVyICogZGVjaW1hbCkgLyBkZWNpbWFsO1xufVxuY2xhc3MgUkdCQSB7XG4gIGNvbnN0cnVjdG9yKHIsIGcsIGIsIGEgPSAxKSB7XG4gICAgdGhpcy5yID0gTWF0aC5taW4oMjU1LCBNYXRoLm1heCgwLCByKSkgfCAwO1xuICAgIHRoaXMuZyA9IE1hdGgubWluKDI1NSwgTWF0aC5tYXgoMCwgZykpIHwgMDtcbiAgICB0aGlzLmIgPSBNYXRoLm1pbigyNTUsIE1hdGgubWF4KDAsIGIpKSB8IDA7XG4gICAgdGhpcy5hID0gX2dldF9fKFwicm91bmRGbG9hdFwiKShNYXRoLm1heChNYXRoLm1pbigxLCBhKSwgMCksIDMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBhLnIgPT09IGIuciAmJiBhLmcgPT09IGIuZyAmJiBhLmIgPT09IGIuYiAmJiBhLmEgPT09IGIuYTtcbiAgfVxufVxuZXhwb3J0cy5SR0JBID0gX2dldF9fKFwiUkdCQVwiKTtcbmNsYXNzIEhTTEEge1xuICBjb25zdHJ1Y3RvcihoLCBzLCBsLCBhKSB7XG4gICAgdGhpcy5oID0gTWF0aC5tYXgoTWF0aC5taW4oMzYwLCBoKSwgMCkgfCAwO1xuICAgIHRoaXMucyA9IF9nZXRfXyhcInJvdW5kRmxvYXRcIikoTWF0aC5tYXgoTWF0aC5taW4oMSwgcyksIDApLCAzKTtcbiAgICB0aGlzLmwgPSBfZ2V0X18oXCJyb3VuZEZsb2F0XCIpKE1hdGgubWF4KE1hdGgubWluKDEsIGwpLCAwKSwgMyk7XG4gICAgdGhpcy5hID0gX2dldF9fKFwicm91bmRGbG9hdFwiKShNYXRoLm1heChNYXRoLm1pbigxLCBhKSwgMCksIDMpO1xuICB9XG4gIHN0YXRpYyBlcXVhbHMoYSwgYikge1xuICAgIHJldHVybiBhLmggPT09IGIuaCAmJiBhLnMgPT09IGIucyAmJiBhLmwgPT09IGIubCAmJiBhLmEgPT09IGIuYTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydHMgYW4gUkdCIGNvbG9yIHZhbHVlIHRvIEhTTC4gQ29udmVyc2lvbiBmb3JtdWxhXG4gICAqIGFkYXB0ZWQgZnJvbSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hTTF9jb2xvcl9zcGFjZS5cbiAgICogQXNzdW1lcyByLCBnLCBhbmQgYiBhcmUgY29udGFpbmVkIGluIHRoZSBzZXQgWzAsIDI1NV0gYW5kXG4gICAqIHJldHVybnMgaCBpbiB0aGUgc2V0IFswLCAzNjBdLCBzLCBhbmQgbCBpbiB0aGUgc2V0IFswLCAxXS5cbiAgICovXG4gIHN0YXRpYyBmcm9tUkdCQShyZ2JhKSB7XG4gICAgY29uc3QgciA9IHJnYmEuciAvIDI1NTtcbiAgICBjb25zdCBnID0gcmdiYS5nIC8gMjU1O1xuICAgIGNvbnN0IGIgPSByZ2JhLmIgLyAyNTU7XG4gICAgY29uc3QgYSA9IHJnYmEuYTtcbiAgICBjb25zdCBtYXggPSBNYXRoLm1heChyLCBnLCBiKTtcbiAgICBjb25zdCBtaW4gPSBNYXRoLm1pbihyLCBnLCBiKTtcbiAgICBsZXQgaCA9IDA7XG4gICAgbGV0IHMgPSAwO1xuICAgIGNvbnN0IGwgPSAobWluICsgbWF4KSAvIDI7XG4gICAgY29uc3QgY2hyb21hID0gbWF4IC0gbWluO1xuICAgIGlmIChjaHJvbWEgPiAwKSB7XG4gICAgICBzID0gTWF0aC5taW4obCA8PSAwLjUgPyBjaHJvbWEgLyAoMiAqIGwpIDogY2hyb21hIC8gKDIgLSAyICogbCksIDEpO1xuICAgICAgc3dpdGNoIChtYXgpIHtcbiAgICAgICAgY2FzZSByOlxuICAgICAgICAgIGggPSAoZyAtIGIpIC8gY2hyb21hICsgKGcgPCBiID8gNiA6IDApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIGc6XG4gICAgICAgICAgaCA9IChiIC0gcikgLyBjaHJvbWEgKyAyO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIGI6XG4gICAgICAgICAgaCA9IChyIC0gZykgLyBjaHJvbWEgKyA0O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaCAqPSA2MDtcbiAgICAgIGggPSBNYXRoLnJvdW5kKGgpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IChfZ2V0X18oXCJIU0xBXCIpKShoLCBzLCBsLCBhKTtcbiAgfVxuICBzdGF0aWMgX2h1ZTJyZ2IocCwgcSwgdCkge1xuICAgIGlmICh0IDwgMCkge1xuICAgICAgdCArPSAxO1xuICAgIH1cbiAgICBpZiAodCA+IDEpIHtcbiAgICAgIHQgLT0gMTtcbiAgICB9XG4gICAgaWYgKHQgPCAxIC8gNikge1xuICAgICAgcmV0dXJuIHAgKyAocSAtIHApICogNiAqIHQ7XG4gICAgfVxuICAgIGlmICh0IDwgMSAvIDIpIHtcbiAgICAgIHJldHVybiBxO1xuICAgIH1cbiAgICBpZiAodCA8IDIgLyAzKSB7XG4gICAgICByZXR1cm4gcCArIChxIC0gcCkgKiAoMiAvIDMgLSB0KSAqIDY7XG4gICAgfVxuICAgIHJldHVybiBwO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyBhbiBIU0wgY29sb3IgdmFsdWUgdG8gUkdCLiBDb252ZXJzaW9uIGZvcm11bGFcbiAgICogYWRhcHRlZCBmcm9tIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSFNMX2NvbG9yX3NwYWNlLlxuICAgKiBBc3N1bWVzIGggaW4gdGhlIHNldCBbMCwgMzYwXSBzLCBhbmQgbCBhcmUgY29udGFpbmVkIGluIHRoZSBzZXQgWzAsIDFdIGFuZFxuICAgKiByZXR1cm5zIHIsIGcsIGFuZCBiIGluIHRoZSBzZXQgWzAsIDI1NV0uXG4gICAqL1xuICBzdGF0aWMgdG9SR0JBKGhzbGEpIHtcbiAgICBjb25zdCBoID0gaHNsYS5oIC8gMzYwO1xuICAgIGNvbnN0IHtcbiAgICAgIHMsXG4gICAgICBsLFxuICAgICAgYVxuICAgIH0gPSBoc2xhO1xuICAgIGxldCByLCBnLCBiO1xuICAgIGlmIChzID09PSAwKSB7XG4gICAgICByID0gZyA9IGIgPSBsOyAvLyBhY2hyb21hdGljXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHEgPSBsIDwgMC41ID8gbCAqICgxICsgcykgOiBsICsgcyAtIGwgKiBzO1xuICAgICAgY29uc3QgcCA9IDIgKiBsIC0gcTtcbiAgICAgIHIgPSBfZ2V0X18oXCJIU0xBXCIpLl9odWUycmdiKHAsIHEsIGggKyAxIC8gMyk7XG4gICAgICBnID0gX2dldF9fKFwiSFNMQVwiKS5faHVlMnJnYihwLCBxLCBoKTtcbiAgICAgIGIgPSBfZ2V0X18oXCJIU0xBXCIpLl9odWUycmdiKHAsIHEsIGggLSAxIC8gMyk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgKF9nZXRfXyhcIlJHQkFcIikpKE1hdGgucm91bmQociAqIDI1NSksIE1hdGgucm91bmQoZyAqIDI1NSksIE1hdGgucm91bmQoYiAqIDI1NSksIGEpO1xuICB9XG59XG5leHBvcnRzLkhTTEEgPSBfZ2V0X18oXCJIU0xBXCIpO1xuY2xhc3MgSFNWQSB7XG4gIGNvbnN0cnVjdG9yKGgsIHMsIHYsIGEpIHtcbiAgICB0aGlzLmggPSBNYXRoLm1heChNYXRoLm1pbigzNjAsIGgpLCAwKSB8IDA7XG4gICAgdGhpcy5zID0gX2dldF9fKFwicm91bmRGbG9hdFwiKShNYXRoLm1heChNYXRoLm1pbigxLCBzKSwgMCksIDMpO1xuICAgIHRoaXMudiA9IF9nZXRfXyhcInJvdW5kRmxvYXRcIikoTWF0aC5tYXgoTWF0aC5taW4oMSwgdiksIDApLCAzKTtcbiAgICB0aGlzLmEgPSBfZ2V0X18oXCJyb3VuZEZsb2F0XCIpKE1hdGgubWF4KE1hdGgubWluKDEsIGEpLCAwKSwgMyk7XG4gIH1cbiAgc3RhdGljIGVxdWFscyhhLCBiKSB7XG4gICAgcmV0dXJuIGEuaCA9PT0gYi5oICYmIGEucyA9PT0gYi5zICYmIGEudiA9PT0gYi52ICYmIGEuYSA9PT0gYi5hO1xuICB9XG4gIC8vIGZyb20gaHR0cDovL3d3dy5yYXBpZHRhYmxlcy5jb20vY29udmVydC9jb2xvci9yZ2ItdG8taHN2Lmh0bVxuICBzdGF0aWMgZnJvbVJHQkEocmdiYSkge1xuICAgIGNvbnN0IHIgPSByZ2JhLnIgLyAyNTU7XG4gICAgY29uc3QgZyA9IHJnYmEuZyAvIDI1NTtcbiAgICBjb25zdCBiID0gcmdiYS5iIC8gMjU1O1xuICAgIGNvbnN0IGNtYXggPSBNYXRoLm1heChyLCBnLCBiKTtcbiAgICBjb25zdCBjbWluID0gTWF0aC5taW4ociwgZywgYik7XG4gICAgY29uc3QgZGVsdGEgPSBjbWF4IC0gY21pbjtcbiAgICBjb25zdCBzID0gY21heCA9PT0gMCA/IDAgOiBkZWx0YSAvIGNtYXg7XG4gICAgbGV0IG07XG4gICAgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgICBtID0gMDtcbiAgICB9IGVsc2UgaWYgKGNtYXggPT09IHIpIHtcbiAgICAgIG0gPSAoKGcgLSBiKSAvIGRlbHRhICUgNiArIDYpICUgNjtcbiAgICB9IGVsc2UgaWYgKGNtYXggPT09IGcpIHtcbiAgICAgIG0gPSAoYiAtIHIpIC8gZGVsdGEgKyAyO1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gKHIgLSBnKSAvIGRlbHRhICsgNDtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyAoX2dldF9fKFwiSFNWQVwiKSkoTWF0aC5yb3VuZChtICogNjApLCBzLCBjbWF4LCByZ2JhLmEpO1xuICB9XG4gIC8vIGZyb20gaHR0cDovL3d3dy5yYXBpZHRhYmxlcy5jb20vY29udmVydC9jb2xvci9oc3YtdG8tcmdiLmh0bVxuICBzdGF0aWMgdG9SR0JBKGhzdmEpIHtcbiAgICBjb25zdCB7XG4gICAgICBoLFxuICAgICAgcyxcbiAgICAgIHYsXG4gICAgICBhXG4gICAgfSA9IGhzdmE7XG4gICAgY29uc3QgYyA9IHYgKiBzO1xuICAgIGNvbnN0IHggPSBjICogKDEgLSBNYXRoLmFicyhoIC8gNjAgJSAyIC0gMSkpO1xuICAgIGNvbnN0IG0gPSB2IC0gYztcbiAgICBsZXQgW3IsIGcsIGJdID0gWzAsIDAsIDBdO1xuICAgIGlmIChoIDwgNjApIHtcbiAgICAgIHIgPSBjO1xuICAgICAgZyA9IHg7XG4gICAgfSBlbHNlIGlmIChoIDwgMTIwKSB7XG4gICAgICByID0geDtcbiAgICAgIGcgPSBjO1xuICAgIH0gZWxzZSBpZiAoaCA8IDE4MCkge1xuICAgICAgZyA9IGM7XG4gICAgICBiID0geDtcbiAgICB9IGVsc2UgaWYgKGggPCAyNDApIHtcbiAgICAgIGcgPSB4O1xuICAgICAgYiA9IGM7XG4gICAgfSBlbHNlIGlmIChoIDwgMzAwKSB7XG4gICAgICByID0geDtcbiAgICAgIGIgPSBjO1xuICAgIH0gZWxzZSBpZiAoaCA8IDM2MCkge1xuICAgICAgciA9IGM7XG4gICAgICBiID0geDtcbiAgICB9XG4gICAgciA9IE1hdGgucm91bmQoKHIgKyBtKSAqIDI1NSk7XG4gICAgZyA9IE1hdGgucm91bmQoKGcgKyBtKSAqIDI1NSk7XG4gICAgYiA9IE1hdGgucm91bmQoKGIgKyBtKSAqIDI1NSk7XG4gICAgcmV0dXJuIG5ldyAoX2dldF9fKFwiUkdCQVwiKSkociwgZywgYiwgYSk7XG4gIH1cbn1cbmV4cG9ydHMuSFNWQSA9IF9nZXRfXyhcIkhTVkFcIik7XG5jbGFzcyBDb2xvciB7XG4gIHN0YXRpYyBmcm9tSGV4KGhleCkge1xuICAgIHJldHVybiBfZ2V0X18oXCJDb2xvclwiKS5Gb3JtYXQuQ1NTLnBhcnNlSGV4KGhleCkgfHwgX2dldF9fKFwiQ29sb3JcIikuUkVEO1xuICB9XG4gIGdldCBoc2xhKCkge1xuICAgIGlmICh0aGlzLl9oc2xhKSB7XG4gICAgICByZXR1cm4gdGhpcy5faHNsYTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIF9nZXRfXyhcIkhTTEFcIikuZnJvbVJHQkEodGhpcy5yZ2JhKTtcbiAgICB9XG4gIH1cbiAgZ2V0IGhzdmEoKSB7XG4gICAgaWYgKHRoaXMuX2hzdmEpIHtcbiAgICAgIHJldHVybiB0aGlzLl9oc3ZhO1xuICAgIH1cbiAgICByZXR1cm4gX2dldF9fKFwiSFNWQVwiKS5mcm9tUkdCQSh0aGlzLnJnYmEpO1xuICB9XG4gIGNvbnN0cnVjdG9yKGFyZykge1xuICAgIGlmICghYXJnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbG9yIG5lZWRzIGEgdmFsdWUnKTtcbiAgICB9IGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIF9nZXRfXyhcIlJHQkFcIikpIHtcbiAgICAgIHRoaXMucmdiYSA9IGFyZztcbiAgICB9IGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIF9nZXRfXyhcIkhTTEFcIikpIHtcbiAgICAgIHRoaXMuX2hzbGEgPSBhcmc7XG4gICAgICB0aGlzLnJnYmEgPSBfZ2V0X18oXCJIU0xBXCIpLnRvUkdCQShhcmcpO1xuICAgIH0gZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgX2dldF9fKFwiSFNWQVwiKSkge1xuICAgICAgdGhpcy5faHN2YSA9IGFyZztcbiAgICAgIHRoaXMucmdiYSA9IF9nZXRfXyhcIkhTVkFcIikudG9SR0JBKGFyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2xvciBjdG9yIGFyZ3VtZW50Jyk7XG4gICAgfVxuICB9XG4gIGVxdWFscyhvdGhlcikge1xuICAgIHJldHVybiAhIW90aGVyICYmIF9nZXRfXyhcIlJHQkFcIikuZXF1YWxzKHRoaXMucmdiYSwgb3RoZXIucmdiYSkgJiYgX2dldF9fKFwiSFNMQVwiKS5lcXVhbHModGhpcy5oc2xhLCBvdGhlci5oc2xhKSAmJiBfZ2V0X18oXCJIU1ZBXCIpLmVxdWFscyh0aGlzLmhzdmEsIG90aGVyLmhzdmEpO1xuICB9XG4gIC8qKlxuICAgKiBodHRwOi8vd3d3LnczLm9yZy9UUi9XQ0FHMjAvI3JlbGF0aXZlbHVtaW5hbmNlZGVmXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBpbiB0aGUgc2V0IFswLCAxXS4gTyA9PiBEYXJrZXN0IEJsYWNrLiAxID0+IExpZ2h0ZXN0IHdoaXRlLlxuICAgKi9cbiAgZ2V0UmVsYXRpdmVMdW1pbmFuY2UoKSB7XG4gICAgY29uc3QgUiA9IF9nZXRfXyhcIkNvbG9yXCIpLl9yZWxhdGl2ZUx1bWluYW5jZUZvckNvbXBvbmVudCh0aGlzLnJnYmEucik7XG4gICAgY29uc3QgRyA9IF9nZXRfXyhcIkNvbG9yXCIpLl9yZWxhdGl2ZUx1bWluYW5jZUZvckNvbXBvbmVudCh0aGlzLnJnYmEuZyk7XG4gICAgY29uc3QgQiA9IF9nZXRfXyhcIkNvbG9yXCIpLl9yZWxhdGl2ZUx1bWluYW5jZUZvckNvbXBvbmVudCh0aGlzLnJnYmEuYik7XG4gICAgY29uc3QgbHVtaW5hbmNlID0gMC4yMTI2ICogUiArIDAuNzE1MiAqIEcgKyAwLjA3MjIgKiBCO1xuICAgIHJldHVybiBfZ2V0X18oXCJyb3VuZEZsb2F0XCIpKGx1bWluYW5jZSwgNCk7XG4gIH1cbiAgc3RhdGljIF9yZWxhdGl2ZUx1bWluYW5jZUZvckNvbXBvbmVudChjb2xvcikge1xuICAgIGNvbnN0IGMgPSBjb2xvciAvIDI1NTtcbiAgICByZXR1cm4gYyA8PSAwLjAzOTI4ID8gYyAvIDEyLjkyIDogTWF0aC5wb3coKGMgKyAwLjA1NSkgLyAxLjA1NSwgMi40KTtcbiAgfVxuICAvKipcbiAgICogaHR0cDovL3d3dy53My5vcmcvVFIvV0NBRzIwLyNjb250cmFzdC1yYXRpb2RlZlxuICAgKiBSZXR1cm5zIHRoZSBjb250cmFzdCByYXRpb24gbnVtYmVyIGluIHRoZSBzZXQgWzEsIDIxXS5cbiAgICovXG4gIGdldENvbnRyYXN0UmF0aW8oYW5vdGhlcikge1xuICAgIGNvbnN0IGx1bTEgPSB0aGlzLmdldFJlbGF0aXZlTHVtaW5hbmNlKCk7XG4gICAgY29uc3QgbHVtMiA9IGFub3RoZXIuZ2V0UmVsYXRpdmVMdW1pbmFuY2UoKTtcbiAgICByZXR1cm4gbHVtMSA+IGx1bTIgPyAobHVtMSArIDAuMDUpIC8gKGx1bTIgKyAwLjA1KSA6IChsdW0yICsgMC4wNSkgLyAobHVtMSArIDAuMDUpO1xuICB9XG4gIC8qKlxuICAgKlx0aHR0cDovLzI0d2F5cy5vcmcvMjAxMC9jYWxjdWxhdGluZy1jb2xvci1jb250cmFzdFxuICAgKiAgUmV0dXJuICd0cnVlJyBpZiBkYXJrZXIgY29sb3Igb3RoZXJ3aXNlICdmYWxzZSdcbiAgICovXG4gIGlzRGFya2VyKCkge1xuICAgIGNvbnN0IHlpcSA9ICh0aGlzLnJnYmEuciAqIDI5OSArIHRoaXMucmdiYS5nICogNTg3ICsgdGhpcy5yZ2JhLmIgKiAxMTQpIC8gMTAwMDtcbiAgICByZXR1cm4geWlxIDwgMTI4O1xuICB9XG4gIC8qKlxuICAgKlx0aHR0cDovLzI0d2F5cy5vcmcvMjAxMC9jYWxjdWxhdGluZy1jb2xvci1jb250cmFzdFxuICAgKiAgUmV0dXJuICd0cnVlJyBpZiBsaWdodGVyIGNvbG9yIG90aGVyd2lzZSAnZmFsc2UnXG4gICAqL1xuICBpc0xpZ2h0ZXIoKSB7XG4gICAgY29uc3QgeWlxID0gKHRoaXMucmdiYS5yICogMjk5ICsgdGhpcy5yZ2JhLmcgKiA1ODcgKyB0aGlzLnJnYmEuYiAqIDExNCkgLyAxMDAwO1xuICAgIHJldHVybiB5aXEgPj0gMTI4O1xuICB9XG4gIGlzTGlnaHRlclRoYW4oYW5vdGhlcikge1xuICAgIGNvbnN0IGx1bTEgPSB0aGlzLmdldFJlbGF0aXZlTHVtaW5hbmNlKCk7XG4gICAgY29uc3QgbHVtMiA9IGFub3RoZXIuZ2V0UmVsYXRpdmVMdW1pbmFuY2UoKTtcbiAgICByZXR1cm4gbHVtMSA+IGx1bTI7XG4gIH1cbiAgaXNEYXJrZXJUaGFuKGFub3RoZXIpIHtcbiAgICBjb25zdCBsdW0xID0gdGhpcy5nZXRSZWxhdGl2ZUx1bWluYW5jZSgpO1xuICAgIGNvbnN0IGx1bTIgPSBhbm90aGVyLmdldFJlbGF0aXZlTHVtaW5hbmNlKCk7XG4gICAgcmV0dXJuIGx1bTEgPCBsdW0yO1xuICB9XG4gIGxpZ2h0ZW4oZmFjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyAoX2dldF9fKFwiQ29sb3JcIikpKG5ldyAoX2dldF9fKFwiSFNMQVwiKSkodGhpcy5oc2xhLmgsIHRoaXMuaHNsYS5zLCB0aGlzLmhzbGEubCArIHRoaXMuaHNsYS5sICogZmFjdG9yLCB0aGlzLmhzbGEuYSkpO1xuICB9XG4gIGRhcmtlbihmYWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IChfZ2V0X18oXCJDb2xvclwiKSkobmV3IChfZ2V0X18oXCJIU0xBXCIpKSh0aGlzLmhzbGEuaCwgdGhpcy5oc2xhLnMsIHRoaXMuaHNsYS5sIC0gdGhpcy5oc2xhLmwgKiBmYWN0b3IsIHRoaXMuaHNsYS5hKSk7XG4gIH1cbiAgdHJhbnNwYXJlbnQoZmFjdG9yKSB7XG4gICAgY29uc3Qge1xuICAgICAgcixcbiAgICAgIGcsXG4gICAgICBiLFxuICAgICAgYVxuICAgIH0gPSB0aGlzLnJnYmE7XG4gICAgcmV0dXJuIG5ldyAoX2dldF9fKFwiQ29sb3JcIikpKG5ldyAoX2dldF9fKFwiUkdCQVwiKSkociwgZywgYiwgYSAqIGZhY3RvcikpO1xuICB9XG4gIGlzVHJhbnNwYXJlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMucmdiYS5hID09PSAwO1xuICB9XG4gIGlzT3BhcXVlKCkge1xuICAgIHJldHVybiB0aGlzLnJnYmEuYSA9PT0gMTtcbiAgfVxuICBvcHBvc2l0ZSgpIHtcbiAgICByZXR1cm4gbmV3IChfZ2V0X18oXCJDb2xvclwiKSkobmV3IChfZ2V0X18oXCJSR0JBXCIpKSgyNTUgLSB0aGlzLnJnYmEuciwgMjU1IC0gdGhpcy5yZ2JhLmcsIDI1NSAtIHRoaXMucmdiYS5iLCB0aGlzLnJnYmEuYSkpO1xuICB9XG4gIGJsZW5kKGMpIHtcbiAgICBjb25zdCByZ2JhID0gYy5yZ2JhO1xuICAgIC8vIENvbnZlcnQgdG8gMC4uMSBvcGFjaXR5XG4gICAgY29uc3QgdGhpc0EgPSB0aGlzLnJnYmEuYTtcbiAgICBjb25zdCBjb2xvckEgPSByZ2JhLmE7XG4gICAgY29uc3QgYSA9IHRoaXNBICsgY29sb3JBICogKDEgLSB0aGlzQSk7XG4gICAgaWYgKGEgPCAxZS02KSB7XG4gICAgICByZXR1cm4gX2dldF9fKFwiQ29sb3JcIikuVFJBTlNQQVJFTlQ7XG4gICAgfVxuICAgIGNvbnN0IHIgPSB0aGlzLnJnYmEuciAqIHRoaXNBIC8gYSArIHJnYmEuciAqIGNvbG9yQSAqICgxIC0gdGhpc0EpIC8gYTtcbiAgICBjb25zdCBnID0gdGhpcy5yZ2JhLmcgKiB0aGlzQSAvIGEgKyByZ2JhLmcgKiBjb2xvckEgKiAoMSAtIHRoaXNBKSAvIGE7XG4gICAgY29uc3QgYiA9IHRoaXMucmdiYS5iICogdGhpc0EgLyBhICsgcmdiYS5iICogY29sb3JBICogKDEgLSB0aGlzQSkgLyBhO1xuICAgIHJldHVybiBuZXcgKF9nZXRfXyhcIkNvbG9yXCIpKShuZXcgKF9nZXRfXyhcIlJHQkFcIikpKHIsIGcsIGIsIGEpKTtcbiAgfVxuICBmbGF0dGVuKC4uLmJhY2tncm91bmRzKSB7XG4gICAgY29uc3QgYmFja2dyb3VuZCA9IGJhY2tncm91bmRzLnJlZHVjZVJpZ2h0KChhY2N1bXVsYXRvciwgY29sb3IpID0+IHtcbiAgICAgIHJldHVybiBfZ2V0X18oXCJDb2xvclwiKS5fZmxhdHRlbihjb2xvciwgYWNjdW11bGF0b3IpO1xuICAgIH0pO1xuICAgIHJldHVybiBfZ2V0X18oXCJDb2xvclwiKS5fZmxhdHRlbih0aGlzLCBiYWNrZ3JvdW5kKTtcbiAgfVxuICBzdGF0aWMgX2ZsYXR0ZW4oZm9yZWdyb3VuZCwgYmFja2dyb3VuZCkge1xuICAgIGNvbnN0IGJhY2tncm91bmRBbHBoYSA9IDEgLSBmb3JlZ3JvdW5kLnJnYmEuYTtcbiAgICByZXR1cm4gbmV3IChfZ2V0X18oXCJDb2xvclwiKSkobmV3IChfZ2V0X18oXCJSR0JBXCIpKShiYWNrZ3JvdW5kQWxwaGEgKiBiYWNrZ3JvdW5kLnJnYmEuciArIGZvcmVncm91bmQucmdiYS5hICogZm9yZWdyb3VuZC5yZ2JhLnIsIGJhY2tncm91bmRBbHBoYSAqIGJhY2tncm91bmQucmdiYS5nICsgZm9yZWdyb3VuZC5yZ2JhLmEgKiBmb3JlZ3JvdW5kLnJnYmEuZywgYmFja2dyb3VuZEFscGhhICogYmFja2dyb3VuZC5yZ2JhLmIgKyBmb3JlZ3JvdW5kLnJnYmEuYSAqIGZvcmVncm91bmQucmdiYS5iKSk7XG4gIH1cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuICcnICsgX2dldF9fKFwiQ29sb3JcIikuRm9ybWF0LkNTUy5mb3JtYXQodGhpcyk7XG4gIH1cbiAgc3RhdGljIGdldExpZ2h0ZXJDb2xvcihvZiwgcmVsYXRpdmUsIGZhY3Rvcikge1xuICAgIGlmIChvZi5pc0xpZ2h0ZXJUaGFuKHJlbGF0aXZlKSkge1xuICAgICAgcmV0dXJuIG9mO1xuICAgIH1cbiAgICBmYWN0b3IgPSBmYWN0b3IgfHwgMC41O1xuICAgIGNvbnN0IGx1bTEgPSBvZi5nZXRSZWxhdGl2ZUx1bWluYW5jZSgpO1xuICAgIGNvbnN0IGx1bTIgPSByZWxhdGl2ZS5nZXRSZWxhdGl2ZUx1bWluYW5jZSgpO1xuICAgIGZhY3RvciA9IGZhY3RvciAqIChsdW0yIC0gbHVtMSkgLyBsdW0yO1xuICAgIHJldHVybiBvZi5saWdodGVuKGZhY3Rvcik7XG4gIH1cbiAgc3RhdGljIGdldERhcmtlckNvbG9yKG9mLCByZWxhdGl2ZSwgZmFjdG9yKSB7XG4gICAgaWYgKG9mLmlzRGFya2VyVGhhbihyZWxhdGl2ZSkpIHtcbiAgICAgIHJldHVybiBvZjtcbiAgICB9XG4gICAgZmFjdG9yID0gZmFjdG9yIHx8IDAuNTtcbiAgICBjb25zdCBsdW0xID0gb2YuZ2V0UmVsYXRpdmVMdW1pbmFuY2UoKTtcbiAgICBjb25zdCBsdW0yID0gcmVsYXRpdmUuZ2V0UmVsYXRpdmVMdW1pbmFuY2UoKTtcbiAgICBmYWN0b3IgPSBmYWN0b3IgKiAobHVtMSAtIGx1bTIpIC8gbHVtMTtcbiAgICByZXR1cm4gb2YuZGFya2VuKGZhY3Rvcik7XG4gIH1cbn1cbmV4cG9ydHMuQ29sb3IgPSBfZ2V0X18oXCJDb2xvclwiKTtcbl9nZXRfXyhcIkNvbG9yXCIpLldISVRFID0gbmV3IChfZ2V0X18oXCJDb2xvclwiKSkobmV3IChfZ2V0X18oXCJSR0JBXCIpKSgyNTUsIDI1NSwgMjU1LCAxKSk7XG5fZ2V0X18oXCJDb2xvclwiKS5CTEFDSyA9IG5ldyAoX2dldF9fKFwiQ29sb3JcIikpKG5ldyAoX2dldF9fKFwiUkdCQVwiKSkoMCwgMCwgMCwgMSkpO1xuX2dldF9fKFwiQ29sb3JcIikuUkVEID0gbmV3IChfZ2V0X18oXCJDb2xvclwiKSkobmV3IChfZ2V0X18oXCJSR0JBXCIpKSgyNTUsIDAsIDAsIDEpKTtcbl9nZXRfXyhcIkNvbG9yXCIpLkJMVUUgPSBuZXcgKF9nZXRfXyhcIkNvbG9yXCIpKShuZXcgKF9nZXRfXyhcIlJHQkFcIikpKDAsIDAsIDI1NSwgMSkpO1xuX2dldF9fKFwiQ29sb3JcIikuR1JFRU4gPSBuZXcgKF9nZXRfXyhcIkNvbG9yXCIpKShuZXcgKF9nZXRfXyhcIlJHQkFcIikpKDAsIDI1NSwgMCwgMSkpO1xuX2dldF9fKFwiQ29sb3JcIikuQ1lBTiA9IG5ldyAoX2dldF9fKFwiQ29sb3JcIikpKG5ldyAoX2dldF9fKFwiUkdCQVwiKSkoMCwgMjU1LCAyNTUsIDEpKTtcbl9nZXRfXyhcIkNvbG9yXCIpLkxJR0hUR1JFWSA9IG5ldyAoX2dldF9fKFwiQ29sb3JcIikpKG5ldyAoX2dldF9fKFwiUkdCQVwiKSkoMjExLCAyMTEsIDIxMSwgMSkpO1xuX2dldF9fKFwiQ29sb3JcIikuVFJBTlNQQVJFTlQgPSBuZXcgKF9nZXRfXyhcIkNvbG9yXCIpKShuZXcgKF9nZXRfXyhcIlJHQkFcIikpKDAsIDAsIDAsIDApKTtcbihmdW5jdGlvbiAoQ29sb3IpIHtcbiAgbGV0IEZvcm1hdDtcbiAgKGZ1bmN0aW9uIChGb3JtYXQpIHtcbiAgICBsZXQgQ1NTO1xuICAgIChmdW5jdGlvbiAoQ1NTKSB7XG4gICAgICBmdW5jdGlvbiBmb3JtYXRSR0IoY29sb3IpIHtcbiAgICAgICAgaWYgKGNvbG9yLnJnYmEuYSA9PT0gMSkge1xuICAgICAgICAgIHJldHVybiBgcmdiKCR7Y29sb3IucmdiYS5yfSwgJHtjb2xvci5yZ2JhLmd9LCAke2NvbG9yLnJnYmEuYn0pYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ29sb3IuRm9ybWF0LkNTUy5mb3JtYXRSR0JBKGNvbG9yKTtcbiAgICAgIH1cbiAgICAgIENTUy5mb3JtYXRSR0IgPSBmb3JtYXRSR0I7XG4gICAgICBmdW5jdGlvbiBmb3JtYXRSR0JBKGNvbG9yKSB7XG4gICAgICAgIHJldHVybiBgcmdiYSgke2NvbG9yLnJnYmEucn0sICR7Y29sb3IucmdiYS5nfSwgJHtjb2xvci5yZ2JhLmJ9LCAkeytjb2xvci5yZ2JhLmEudG9GaXhlZCgyKX0pYDtcbiAgICAgIH1cbiAgICAgIENTUy5mb3JtYXRSR0JBID0gZm9ybWF0UkdCQTtcbiAgICAgIGZ1bmN0aW9uIGZvcm1hdEhTTChjb2xvcikge1xuICAgICAgICBpZiAoY29sb3IuaHNsYS5hID09PSAxKSB7XG4gICAgICAgICAgcmV0dXJuIGBoc2woJHtjb2xvci5oc2xhLmh9LCAkeyhjb2xvci5oc2xhLnMgKiAxMDApLnRvRml4ZWQoMil9JSwgJHsoY29sb3IuaHNsYS5sICogMTAwKS50b0ZpeGVkKDIpfSUpYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ29sb3IuRm9ybWF0LkNTUy5mb3JtYXRIU0xBKGNvbG9yKTtcbiAgICAgIH1cbiAgICAgIENTUy5mb3JtYXRIU0wgPSBmb3JtYXRIU0w7XG4gICAgICBmdW5jdGlvbiBmb3JtYXRIU0xBKGNvbG9yKSB7XG4gICAgICAgIHJldHVybiBgaHNsYSgke2NvbG9yLmhzbGEuaH0sICR7KGNvbG9yLmhzbGEucyAqIDEwMCkudG9GaXhlZCgyKX0lLCAkeyhjb2xvci5oc2xhLmwgKiAxMDApLnRvRml4ZWQoMil9JSwgJHtjb2xvci5oc2xhLmEudG9GaXhlZCgyKX0pYDtcbiAgICAgIH1cbiAgICAgIENTUy5mb3JtYXRIU0xBID0gZm9ybWF0SFNMQTtcbiAgICAgIGZ1bmN0aW9uIF90b1R3b0RpZ2l0SGV4KG4pIHtcbiAgICAgICAgY29uc3QgciA9IG4udG9TdHJpbmcoMTYpO1xuICAgICAgICByZXR1cm4gci5sZW5ndGggIT09IDIgPyAnMCcgKyByIDogcjtcbiAgICAgIH1cbiAgICAgIC8qKlxuICAgICAgICogRm9ybWF0cyB0aGUgY29sb3IgYXMgI1JSR0dCQlxuICAgICAgICovXG4gICAgICBmdW5jdGlvbiBmb3JtYXRIZXgoY29sb3IpIHtcbiAgICAgICAgcmV0dXJuIGAjJHtfdG9Ud29EaWdpdEhleChjb2xvci5yZ2JhLnIpfSR7X3RvVHdvRGlnaXRIZXgoY29sb3IucmdiYS5nKX0ke190b1R3b0RpZ2l0SGV4KGNvbG9yLnJnYmEuYil9YDtcbiAgICAgIH1cbiAgICAgIENTUy5mb3JtYXRIZXggPSBmb3JtYXRIZXg7XG4gICAgICAvKipcbiAgICAgICAqIEZvcm1hdHMgdGhlIGNvbG9yIGFzICNSUkdHQkJBQVxuICAgICAgICogSWYgJ2NvbXBhY3QnIGlzIHNldCwgY29sb3JzIHdpdGhvdXQgdHJhbnNwYXJhbmN5IHdpbGwgYmUgcHJpbnRlZCBhcyAjUlJHR0JCXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGZvcm1hdEhleEEoY29sb3IsIGNvbXBhY3QgPSBmYWxzZSkge1xuICAgICAgICBpZiAoY29tcGFjdCAmJiBjb2xvci5yZ2JhLmEgPT09IDEpIHtcbiAgICAgICAgICByZXR1cm4gQ29sb3IuRm9ybWF0LkNTUy5mb3JtYXRIZXgoY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgIyR7X3RvVHdvRGlnaXRIZXgoY29sb3IucmdiYS5yKX0ke190b1R3b0RpZ2l0SGV4KGNvbG9yLnJnYmEuZyl9JHtfdG9Ud29EaWdpdEhleChjb2xvci5yZ2JhLmIpfSR7X3RvVHdvRGlnaXRIZXgoTWF0aC5yb3VuZChjb2xvci5yZ2JhLmEgKiAyNTUpKX1gO1xuICAgICAgfVxuICAgICAgQ1NTLmZvcm1hdEhleEEgPSBmb3JtYXRIZXhBO1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgZGVmYXVsdCBmb3JtYXQgd2lsbCB1c2UgSEVYIGlmIG9wYXF1ZSBhbmQgUkdCQSBvdGhlcndpc2UuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIGZvcm1hdChjb2xvcikge1xuICAgICAgICBpZiAoIWNvbG9yKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbG9yLmlzT3BhcXVlKCkpIHtcbiAgICAgICAgICByZXR1cm4gQ29sb3IuRm9ybWF0LkNTUy5mb3JtYXRIZXgoY29sb3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDb2xvci5Gb3JtYXQuQ1NTLmZvcm1hdFJHQkEoY29sb3IpO1xuICAgICAgfVxuICAgICAgQ1NTLmZvcm1hdCA9IGZvcm1hdDtcbiAgICAgIC8qKlxuICAgICAgICogQ29udmVydHMgYW4gSGV4IGNvbG9yIHZhbHVlIHRvIGEgQ29sb3IuXG4gICAgICAgKiByZXR1cm5zIHIsIGcsIGFuZCBiIGFyZSBjb250YWluZWQgaW4gdGhlIHNldCBbMCwgMjU1XVxuICAgICAgICogQHBhcmFtIGhleCBzdHJpbmcgKCNSR0IsICNSR0JBLCAjUlJHR0JCIG9yICNSUkdHQkJBQSkuXG4gICAgICAgKi9cbiAgICAgIGZ1bmN0aW9uIHBhcnNlSGV4KGhleCkge1xuICAgICAgICBpZiAoIWhleCkge1xuICAgICAgICAgIC8vIEludmFsaWQgY29sb3JcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZW5ndGggPSBoZXgubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgLy8gSW52YWxpZCBjb2xvclxuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoZXguY2hhckNvZGVBdCgwKSAhPT0gMzUgLyogQ2hhckNvZGUuSGFzaCAqLykge1xuICAgICAgICAgIC8vIERvZXMgbm90IGJlZ2luIHdpdGggYSAjXG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gNykge1xuICAgICAgICAgIC8vICNSUkdHQkIgZm9ybWF0XG4gICAgICAgICAgY29uc3QgciA9IDE2ICogX3BhcnNlSGV4RGlnaXQoaGV4LmNoYXJDb2RlQXQoMSkpICsgX3BhcnNlSGV4RGlnaXQoaGV4LmNoYXJDb2RlQXQoMikpO1xuICAgICAgICAgIGNvbnN0IGcgPSAxNiAqIF9wYXJzZUhleERpZ2l0KGhleC5jaGFyQ29kZUF0KDMpKSArIF9wYXJzZUhleERpZ2l0KGhleC5jaGFyQ29kZUF0KDQpKTtcbiAgICAgICAgICBjb25zdCBiID0gMTYgKiBfcGFyc2VIZXhEaWdpdChoZXguY2hhckNvZGVBdCg1KSkgKyBfcGFyc2VIZXhEaWdpdChoZXguY2hhckNvZGVBdCg2KSk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihuZXcgKF9nZXRfXyhcIlJHQkFcIikpKHIsIGcsIGIsIDEpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGVuZ3RoID09PSA5KSB7XG4gICAgICAgICAgLy8gI1JSR0dCQkFBIGZvcm1hdFxuICAgICAgICAgIGNvbnN0IHIgPSAxNiAqIF9wYXJzZUhleERpZ2l0KGhleC5jaGFyQ29kZUF0KDEpKSArIF9wYXJzZUhleERpZ2l0KGhleC5jaGFyQ29kZUF0KDIpKTtcbiAgICAgICAgICBjb25zdCBnID0gMTYgKiBfcGFyc2VIZXhEaWdpdChoZXguY2hhckNvZGVBdCgzKSkgKyBfcGFyc2VIZXhEaWdpdChoZXguY2hhckNvZGVBdCg0KSk7XG4gICAgICAgICAgY29uc3QgYiA9IDE2ICogX3BhcnNlSGV4RGlnaXQoaGV4LmNoYXJDb2RlQXQoNSkpICsgX3BhcnNlSGV4RGlnaXQoaGV4LmNoYXJDb2RlQXQoNikpO1xuICAgICAgICAgIGNvbnN0IGEgPSAxNiAqIF9wYXJzZUhleERpZ2l0KGhleC5jaGFyQ29kZUF0KDcpKSArIF9wYXJzZUhleERpZ2l0KGhleC5jaGFyQ29kZUF0KDgpKTtcbiAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKG5ldyAoX2dldF9fKFwiUkdCQVwiKSkociwgZywgYiwgYSAvIDI1NSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsZW5ndGggPT09IDQpIHtcbiAgICAgICAgICAvLyAjUkdCIGZvcm1hdFxuICAgICAgICAgIGNvbnN0IHIgPSBfcGFyc2VIZXhEaWdpdChoZXguY2hhckNvZGVBdCgxKSk7XG4gICAgICAgICAgY29uc3QgZyA9IF9wYXJzZUhleERpZ2l0KGhleC5jaGFyQ29kZUF0KDIpKTtcbiAgICAgICAgICBjb25zdCBiID0gX3BhcnNlSGV4RGlnaXQoaGV4LmNoYXJDb2RlQXQoMykpO1xuICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IobmV3IChfZ2V0X18oXCJSR0JBXCIpKSgxNiAqIHIgKyByLCAxNiAqIGcgKyBnLCAxNiAqIGIgKyBiKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gNSkge1xuICAgICAgICAgIC8vICNSR0JBIGZvcm1hdFxuICAgICAgICAgIGNvbnN0IHIgPSBfcGFyc2VIZXhEaWdpdChoZXguY2hhckNvZGVBdCgxKSk7XG4gICAgICAgICAgY29uc3QgZyA9IF9wYXJzZUhleERpZ2l0KGhleC5jaGFyQ29kZUF0KDIpKTtcbiAgICAgICAgICBjb25zdCBiID0gX3BhcnNlSGV4RGlnaXQoaGV4LmNoYXJDb2RlQXQoMykpO1xuICAgICAgICAgIGNvbnN0IGEgPSBfcGFyc2VIZXhEaWdpdChoZXguY2hhckNvZGVBdCg0KSk7XG4gICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihuZXcgKF9nZXRfXyhcIlJHQkFcIikpKDE2ICogciArIHIsIDE2ICogZyArIGcsIDE2ICogYiArIGIsICgxNiAqIGEgKyBhKSAvIDI1NSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEludmFsaWQgY29sb3JcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBDU1MucGFyc2VIZXggPSBwYXJzZUhleDtcbiAgICAgIGZ1bmN0aW9uIF9wYXJzZUhleERpZ2l0KGNoYXJDb2RlKSB7XG4gICAgICAgIHN3aXRjaCAoY2hhckNvZGUpIHtcbiAgICAgICAgICBjYXNlIDQ4IC8qIENoYXJDb2RlLkRpZ2l0MCAqLzpcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgIGNhc2UgNDkgLyogQ2hhckNvZGUuRGlnaXQxICovOlxuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgY2FzZSA1MCAvKiBDaGFyQ29kZS5EaWdpdDIgKi86XG4gICAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgICBjYXNlIDUxIC8qIENoYXJDb2RlLkRpZ2l0MyAqLzpcbiAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgIGNhc2UgNTIgLyogQ2hhckNvZGUuRGlnaXQ0ICovOlxuICAgICAgICAgICAgcmV0dXJuIDQ7XG4gICAgICAgICAgY2FzZSA1MyAvKiBDaGFyQ29kZS5EaWdpdDUgKi86XG4gICAgICAgICAgICByZXR1cm4gNTtcbiAgICAgICAgICBjYXNlIDU0IC8qIENoYXJDb2RlLkRpZ2l0NiAqLzpcbiAgICAgICAgICAgIHJldHVybiA2O1xuICAgICAgICAgIGNhc2UgNTUgLyogQ2hhckNvZGUuRGlnaXQ3ICovOlxuICAgICAgICAgICAgcmV0dXJuIDc7XG4gICAgICAgICAgY2FzZSA1NiAvKiBDaGFyQ29kZS5EaWdpdDggKi86XG4gICAgICAgICAgICByZXR1cm4gODtcbiAgICAgICAgICBjYXNlIDU3IC8qIENoYXJDb2RlLkRpZ2l0OSAqLzpcbiAgICAgICAgICAgIHJldHVybiA5O1xuICAgICAgICAgIGNhc2UgOTcgLyogQ2hhckNvZGUuYSAqLzpcbiAgICAgICAgICAgIHJldHVybiAxMDtcbiAgICAgICAgICBjYXNlIDY1IC8qIENoYXJDb2RlLkEgKi86XG4gICAgICAgICAgICByZXR1cm4gMTA7XG4gICAgICAgICAgY2FzZSA5OCAvKiBDaGFyQ29kZS5iICovOlxuICAgICAgICAgICAgcmV0dXJuIDExO1xuICAgICAgICAgIGNhc2UgNjYgLyogQ2hhckNvZGUuQiAqLzpcbiAgICAgICAgICAgIHJldHVybiAxMTtcbiAgICAgICAgICBjYXNlIDk5IC8qIENoYXJDb2RlLmMgKi86XG4gICAgICAgICAgICByZXR1cm4gMTI7XG4gICAgICAgICAgY2FzZSA2NyAvKiBDaGFyQ29kZS5DICovOlxuICAgICAgICAgICAgcmV0dXJuIDEyO1xuICAgICAgICAgIGNhc2UgMTAwIC8qIENoYXJDb2RlLmQgKi86XG4gICAgICAgICAgICByZXR1cm4gMTM7XG4gICAgICAgICAgY2FzZSA2OCAvKiBDaGFyQ29kZS5EICovOlxuICAgICAgICAgICAgcmV0dXJuIDEzO1xuICAgICAgICAgIGNhc2UgMTAxIC8qIENoYXJDb2RlLmUgKi86XG4gICAgICAgICAgICByZXR1cm4gMTQ7XG4gICAgICAgICAgY2FzZSA2OSAvKiBDaGFyQ29kZS5FICovOlxuICAgICAgICAgICAgcmV0dXJuIDE0O1xuICAgICAgICAgIGNhc2UgMTAyIC8qIENoYXJDb2RlLmYgKi86XG4gICAgICAgICAgICByZXR1cm4gMTU7XG4gICAgICAgICAgY2FzZSA3MCAvKiBDaGFyQ29kZS5GICovOlxuICAgICAgICAgICAgcmV0dXJuIDE1O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgIH0pKENTUyA9IEZvcm1hdC5DU1MgfHwgKEZvcm1hdC5DU1MgPSB7fSkpO1xuICB9KShGb3JtYXQgPSBDb2xvci5Gb3JtYXQgfHwgKENvbG9yLkZvcm1hdCA9IHt9KSk7XG59KShfZ2V0X18oXCJDb2xvclwiKSB8fCAoZXhwb3J0cy5Db2xvciA9IF9hc3NpZ25fXyhcIkNvbG9yXCIsIHt9KSkpO1xuZnVuY3Rpb24gX2dldEdsb2JhbE9iamVjdCgpIHtcbiAgdHJ5IHtcbiAgICBpZiAoISFnbG9iYWwpIHtcbiAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghIXdpbmRvdykge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxufVxuO1xudmFyIF9SZXdpcmVNb2R1bGVJZF9fID0gbnVsbDtcbmZ1bmN0aW9uIF9nZXRSZXdpcmVNb2R1bGVJZF9fKCkge1xuICBpZiAoX1Jld2lyZU1vZHVsZUlkX18gPT09IG51bGwpIHtcbiAgICBsZXQgZ2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gICAgaWYgKCFnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKSB7XG4gICAgICBnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fID0gMDtcbiAgICB9XG4gICAgX1Jld2lyZU1vZHVsZUlkX18gPSBfXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKys7XG4gIH1cbiAgcmV0dXJuIF9SZXdpcmVNb2R1bGVJZF9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZVJlZ2lzdHJ5X18oKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cbiAgcmV0dXJuIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlZERhdGFfXygpIHtcbiAgbGV0IG1vZHVsZUlkID0gX2dldFJld2lyZU1vZHVsZUlkX18oKTtcbiAgbGV0IHJlZ2lzdHJ5ID0gX2dldFJld2lyZVJlZ2lzdHJ5X18oKTtcbiAgbGV0IHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIGlmICghcmV3aXJlRGF0YSkge1xuICAgIHJlZ2lzdHJ5W21vZHVsZUlkXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgfVxuICByZXR1cm4gcmV3aXJlRGF0YTtcbn1cbihmdW5jdGlvbiByZWdpc3RlclJlc2V0QWxsKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH07XG4gIH1cbn0pKCk7XG52YXIgSU5URU5USU9OQUxfVU5ERUZJTkVEID0gJ19fSU5URU5USU9OQUxfVU5ERUZJTkVEX18nO1xubGV0IF9SZXdpcmVBUElfXyA9IHt9O1xuKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gYWRkUHJvcGVydHlUb0FQSU9iamVjdChuYW1lLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfUmV3aXJlQVBJX18sIG5hbWUsIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG59KSgpO1xuZnVuY3Rpb24gX2dldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdmFsdWUgPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgaWYgKHZhbHVlID09PSBJTlRFTlRJT05BTF9VTkRFRklORUQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHtcbiAgICBjYXNlIFwicm91bmRGbG9hdFwiOlxuICAgICAgcmV0dXJuIHJvdW5kRmxvYXQ7XG4gICAgY2FzZSBcIlJHQkFcIjpcbiAgICAgIHJldHVybiBSR0JBO1xuICAgIGNhc2UgXCJIU0xBXCI6XG4gICAgICByZXR1cm4gSFNMQTtcbiAgICBjYXNlIFwiSFNWQVwiOlxuICAgICAgcmV0dXJuIEhTVkE7XG4gICAgY2FzZSBcIkNvbG9yXCI6XG4gICAgICByZXR1cm4gQ29sb3I7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIF92YWx1ZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJDb2xvclwiOlxuICAgICAgcmV0dXJuIENvbG9yID0gX3ZhbHVlO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfdXBkYXRlX29wZXJhdGlvbl9fKG9wZXJhdGlvbiwgdmFyaWFibGVOYW1lLCBwcmVmaXgpIHtcbiAgdmFyIG9sZFZhbHVlID0gX2dldF9fKHZhcmlhYmxlTmFtZSk7XG4gIHZhciBuZXdWYWx1ZSA9IG9wZXJhdGlvbiA9PT0gJysrJyA/IG9sZFZhbHVlICsgMSA6IG9sZFZhbHVlIC0gMTtcbiAgX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgbmV3VmFsdWUpO1xuICByZXR1cm4gcHJlZml4ID8gbmV3VmFsdWUgOiBvbGRWYWx1ZTtcbn1cbmZ1bmN0aW9uIF9zZXRfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHR5cGVvZiB2YXJpYWJsZU5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW25hbWVdID0gdmFyaWFibGVOYW1lW25hbWVdO1xuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IElOVEVOVElPTkFMX1VOREVGSU5FRDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIF9yZXNldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGRlbGV0ZSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gIGlmIChPYmplY3Qua2V5cyhyZXdpcmVEYXRhKS5sZW5ndGggPT0gMCkge1xuICAgIGRlbGV0ZSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpW19nZXRSZXdpcmVNb2R1bGVJZF9fXTtcbiAgfVxuICA7XG59XG5mdW5jdGlvbiBfd2l0aF9fKG9iamVjdCkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIHZhciByZXdpcmVkVmFyaWFibGVOYW1lcyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG4gIHZhciBwcmV2aW91c1ZhbHVlcyA9IHt9O1xuICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IG9iamVjdFt2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICAgIGxldCByZXN1bHQgPSBjYWxsYmFjaygpO1xuICAgIGlmICghIXJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmVzdWx0LnRoZW4ocmVzZXQpLmNhdGNoKHJlc2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzZXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cbmxldCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPSB0eXBlb2YgbW9kdWxlLmV4cG9ydHM7XG5mdW5jdGlvbiBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCBuYW1lLCB7XG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cbmlmICgoX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnb2JqZWN0JyB8fCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdmdW5jdGlvbicpICYmIE9iamVjdC5pc0V4dGVuc2libGUobW9kdWxlLmV4cG9ydHMpKSB7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVBUElfXycsIF9SZXdpcmVBUElfXyk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgX19jcmVhdGVCaW5kaW5nID0gdGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZyB8fCAoT2JqZWN0LmNyZWF0ZSA/IGZ1bmN0aW9uIChvLCBtLCBrLCBrMikge1xuICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gIGlmICghZGVzYyB8fCAoXCJnZXRcIiBpbiBkZXNjID8gIW0uX19lc01vZHVsZSA6IGRlc2Mud3JpdGFibGUgfHwgZGVzYy5jb25maWd1cmFibGUpKSB7XG4gICAgZGVzYyA9IHtcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG1ba107XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIGRlc2MpO1xufSA6IGZ1bmN0aW9uIChvLCBtLCBrLCBrMikge1xuICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICBvW2syXSA9IG1ba107XG59KTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSB0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0IHx8IChPYmplY3QuY3JlYXRlID8gZnVuY3Rpb24gKG8sIHYpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICB2YWx1ZTogdlxuICB9KTtcbn0gOiBmdW5jdGlvbiAobywgdikge1xuICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSB0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9nZXRfXyhcIl9fY3JlYXRlQmluZGluZ1wiKShyZXN1bHQsIG1vZCwgayk7XG4gIF9nZXRfXyhcIl9fc2V0TW9kdWxlRGVmYXVsdFwiKShyZXN1bHQsIG1vZCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuaGlkZSA9IGV4cG9ydHMuc2hvdyA9IGV4cG9ydHMuam9pbiA9IGV4cG9ydHMuJCA9IGV4cG9ydHMucHJlcGVuZCA9IGV4cG9ydHMuYXBwZW5kID0gZXhwb3J0cy50cmFja0ZvY3VzID0gZXhwb3J0cy5yZXN0b3JlUGFyZW50c1Njcm9sbFRvcCA9IGV4cG9ydHMuc2F2ZVBhcmVudHNTY3JvbGxUb3AgPSBleHBvcnRzLkV2ZW50SGVscGVyID0gZXhwb3J0cy5FdmVudFR5cGUgPSBleHBvcnRzLmlzSFRNTEVsZW1lbnQgPSBleHBvcnRzLnJlbW92ZUNTU1J1bGVzQ29udGFpbmluZ1NlbGVjdG9yID0gZXhwb3J0cy5jcmVhdGVDU1NSdWxlID0gZXhwb3J0cy5jcmVhdGVTdHlsZVNoZWV0ID0gZXhwb3J0cy5maW5kUGFyZW50V2l0aENsYXNzID0gZXhwb3J0cy5pc0FuY2VzdG9yID0gZXhwb3J0cy5nZXRMYXJnZXN0Q2hpbGRXaWR0aCA9IGV4cG9ydHMuZ2V0VG90YWxIZWlnaHQgPSBleHBvcnRzLmdldENvbnRlbnRIZWlnaHQgPSBleHBvcnRzLmdldFRvdGFsU2Nyb2xsV2lkdGggPSBleHBvcnRzLmdldENvbnRlbnRXaWR0aCA9IGV4cG9ydHMuZ2V0VG90YWxXaWR0aCA9IGV4cG9ydHMuU3RhbmRhcmRXaW5kb3cgPSBleHBvcnRzLmdldERvbU5vZGVQYWdlUG9zaXRpb24gPSBleHBvcnRzLnBvc2l0aW9uID0gZXhwb3J0cy5zaXplID0gZXhwb3J0cy5nZXRUb3BMZWZ0T2Zmc2V0ID0gZXhwb3J0cy5EaW1lbnNpb24gPSBleHBvcnRzLmdldERvbU5vZGVab29tTGV2ZWwgPSBleHBvcnRzLmdldENsaWVudEFyZWEgPSBleHBvcnRzLmdldENvbXB1dGVkU3R5bGUgPSBleHBvcnRzLmFkZERpc3Bvc2FibGVUaHJvdHRsZWRMaXN0ZW5lciA9IGV4cG9ydHMubW9kaWZ5ID0gZXhwb3J0cy5tZWFzdXJlID0gZXhwb3J0cy5zY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lID0gZXhwb3J0cy5ydW5BdFRoaXNPclNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUgPSBleHBvcnRzLmFkZERpc3Bvc2FibGVOb25CdWJibGluZ01vdXNlT3V0TGlzdGVuZXIgPSBleHBvcnRzLmFkZFN0YW5kYXJkRGlzcG9zYWJsZUxpc3RlbmVyID0gZXhwb3J0cy5hZGREaXNwb3NhYmxlTGlzdGVuZXIgPSBleHBvcnRzLnRvZ2dsZUNsYXNzID0gZXhwb3J0cy5yZW1vdmVDbGFzc2VzID0gZXhwb3J0cy5yZW1vdmVDbGFzcyA9IGV4cG9ydHMuYWRkQ2xhc3NlcyA9IGV4cG9ydHMuYWRkQ2xhc3MgPSBleHBvcnRzLmhhc0NsYXNzID0gZXhwb3J0cy5Nb2RpZmllcktleUVtaXR0ZXIgPSBleHBvcnRzLmlzSW5ET00gPSBleHBvcnRzLnJlbW92ZU5vZGUgPSBleHBvcnRzLmNsZWFyTm9kZSA9IHZvaWQgMDtcbmV4cG9ydHMuYW5pbWF0ZSA9IGV4cG9ydHMud2luZG93T3Blbk5vT3BlbmVyID0gZXhwb3J0cy5jb21wdXRlU2NyZWVuQXdhcmVTaXplID0gZXhwb3J0cy5kb21Db250ZW50TG9hZGVkID0gZXhwb3J0cy5maW5hbEhhbmRsZXIgPSBleHBvcnRzLmdldEVsZW1lbnRzQnlUYWdOYW1lID0gZXhwb3J0cy5yZW1vdmVUYWJJbmRleEFuZFVwZGF0ZUZvY3VzID0gdm9pZCAwO1xuY29uc3QgYnJvd3NlciA9IF9nZXRfXyhcIl9faW1wb3J0U3RhclwiKShyZXF1aXJlKFwiLi4vYnJvd3Nlci9icm93c2VyXCIpKTtcbmNvbnN0IGV2ZW50XzEgPSByZXF1aXJlKFwiLi4vYnJvd3Nlci9ldmVudFwiKTtcbmNvbnN0IGtleWJvYXJkRXZlbnRfMSA9IHJlcXVpcmUoXCIuLi9icm93c2VyL2tleWJvYXJkRXZlbnRcIik7XG5jb25zdCBtb3VzZUV2ZW50XzEgPSByZXF1aXJlKFwiLi4vYnJvd3Nlci9tb3VzZUV2ZW50XCIpO1xuY29uc3QgYXN5bmNfMSA9IHJlcXVpcmUoXCIuLi9jb21tb24vYXN5bmNcIik7XG5jb25zdCBldmVudF8yID0gcmVxdWlyZShcIi4uL2NvbW1vbi9ldmVudFwiKTtcbmNvbnN0IGxpZmVjeWNsZV8xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9saWZlY3ljbGVcIik7XG5jb25zdCBwbGF0Zm9ybSA9IF9nZXRfXyhcIl9faW1wb3J0U3RhclwiKShyZXF1aXJlKFwiLi4vY29tbW9uL3BsYXRmb3JtXCIpKTtcbmNvbnN0IGFycmF5c18xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9hcnJheXNcIik7XG5mdW5jdGlvbiBjbGVhck5vZGUobm9kZSkge1xuICB3aGlsZSAobm9kZS5maXJzdENoaWxkKSB7XG4gICAgbm9kZS5yZW1vdmVDaGlsZChub2RlLmZpcnN0Q2hpbGQpO1xuICB9XG59XG5leHBvcnRzLmNsZWFyTm9kZSA9IF9nZXRfXyhcImNsZWFyTm9kZVwiKTtcbmZ1bmN0aW9uIHJlbW92ZU5vZGUobm9kZSkge1xuICBpZiAobm9kZS5wYXJlbnROb2RlKSB7XG4gICAgbm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuICB9XG59XG5leHBvcnRzLnJlbW92ZU5vZGUgPSBfZ2V0X18oXCJyZW1vdmVOb2RlXCIpO1xuZnVuY3Rpb24gaXNJbkRPTShub2RlKSB7XG4gIHdoaWxlIChub2RlKSB7XG4gICAgaWYgKG5vZGUgPT09IGRvY3VtZW50LmJvZHkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydHMuaXNJbkRPTSA9IF9nZXRfXyhcImlzSW5ET01cIik7XG5jbGFzcyBNb2RpZmllcktleUVtaXR0ZXIgZXh0ZW5kcyBfZ2V0X18oXCJldmVudF8yXCIpLkVtaXR0ZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2tleVN0YXR1cyA9IHtcbiAgICAgIGFsdEtleTogZmFsc2UsXG4gICAgICBzaGlmdEtleTogZmFsc2UsXG4gICAgICBjdHJsS2V5OiBmYWxzZSxcbiAgICAgIG1ldGFLZXk6IGZhbHNlXG4gICAgfTtcbiAgICBfZ2V0X18oXCJhZGREaXNwb3NhYmxlTGlzdGVuZXJcIikod2luZG93LCAna2V5ZG93bicsIGUgPT4ge1xuICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBldmVudCA9IG5ldyAoX2dldF9fKFwia2V5Ym9hcmRFdmVudF8xXCIpLlN0YW5kYXJkS2V5Ym9hcmRFdmVudCkoZSk7XG4gICAgICAvLyBJZiBBbHQta2V5IGtleWRvd24gZXZlbnQgaXMgcmVwZWF0ZWQsIGlnbm9yZSBpdCAjMTEyMzQ3XG4gICAgICAvLyBPbmx5IGtub3duIHRvIGJlIG5lY2Vzc2FyeSBmb3IgQWx0LUtleSBhdCB0aGUgbW9tZW50ICMxMTU4MTBcbiAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSA2IC8qIEtleUNvZGUuQWx0ICovICYmIGUucmVwZWF0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChlLmFsdEtleSAmJiAhdGhpcy5fa2V5U3RhdHVzLmFsdEtleSkge1xuICAgICAgICB0aGlzLl9rZXlTdGF0dXMubGFzdEtleVByZXNzZWQgPSAnYWx0JztcbiAgICAgIH0gZWxzZSBpZiAoZS5jdHJsS2V5ICYmICF0aGlzLl9rZXlTdGF0dXMuY3RybEtleSkge1xuICAgICAgICB0aGlzLl9rZXlTdGF0dXMubGFzdEtleVByZXNzZWQgPSAnY3RybCc7XG4gICAgICB9IGVsc2UgaWYgKGUubWV0YUtleSAmJiAhdGhpcy5fa2V5U3RhdHVzLm1ldGFLZXkpIHtcbiAgICAgICAgdGhpcy5fa2V5U3RhdHVzLmxhc3RLZXlQcmVzc2VkID0gJ21ldGEnO1xuICAgICAgfSBlbHNlIGlmIChlLnNoaWZ0S2V5ICYmICF0aGlzLl9rZXlTdGF0dXMuc2hpZnRLZXkpIHtcbiAgICAgICAgdGhpcy5fa2V5U3RhdHVzLmxhc3RLZXlQcmVzc2VkID0gJ3NoaWZ0JztcbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSAhPT0gNiAvKiBLZXlDb2RlLkFsdCAqLykge1xuICAgICAgICB0aGlzLl9rZXlTdGF0dXMubGFzdEtleVByZXNzZWQgPSB1bmRlZmluZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9rZXlTdGF0dXMuYWx0S2V5ID0gZS5hbHRLZXk7XG4gICAgICB0aGlzLl9rZXlTdGF0dXMuY3RybEtleSA9IGUuY3RybEtleTtcbiAgICAgIHRoaXMuX2tleVN0YXR1cy5tZXRhS2V5ID0gZS5tZXRhS2V5O1xuICAgICAgdGhpcy5fa2V5U3RhdHVzLnNoaWZ0S2V5ID0gZS5zaGlmdEtleTtcbiAgICAgIGlmICh0aGlzLl9rZXlTdGF0dXMubGFzdEtleVByZXNzZWQpIHtcbiAgICAgICAgdGhpcy5fa2V5U3RhdHVzLmV2ZW50ID0gZTtcbiAgICAgICAgdGhpcy5maXJlKHRoaXMuX2tleVN0YXR1cyk7XG4gICAgICB9XG4gICAgfSwgdHJ1ZSk7XG4gICAgX2dldF9fKFwiYWRkRGlzcG9zYWJsZUxpc3RlbmVyXCIpKHdpbmRvdywgJ2tleXVwJywgZSA9PiB7XG4gICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghZS5hbHRLZXkgJiYgdGhpcy5fa2V5U3RhdHVzLmFsdEtleSkge1xuICAgICAgICB0aGlzLl9rZXlTdGF0dXMubGFzdEtleVJlbGVhc2VkID0gJ2FsdCc7XG4gICAgICB9IGVsc2UgaWYgKCFlLmN0cmxLZXkgJiYgdGhpcy5fa2V5U3RhdHVzLmN0cmxLZXkpIHtcbiAgICAgICAgdGhpcy5fa2V5U3RhdHVzLmxhc3RLZXlSZWxlYXNlZCA9ICdjdHJsJztcbiAgICAgIH0gZWxzZSBpZiAoIWUubWV0YUtleSAmJiB0aGlzLl9rZXlTdGF0dXMubWV0YUtleSkge1xuICAgICAgICB0aGlzLl9rZXlTdGF0dXMubGFzdEtleVJlbGVhc2VkID0gJ21ldGEnO1xuICAgICAgfSBlbHNlIGlmICghZS5zaGlmdEtleSAmJiB0aGlzLl9rZXlTdGF0dXMuc2hpZnRLZXkpIHtcbiAgICAgICAgdGhpcy5fa2V5U3RhdHVzLmxhc3RLZXlSZWxlYXNlZCA9ICdzaGlmdCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9rZXlTdGF0dXMubGFzdEtleVJlbGVhc2VkID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2tleVN0YXR1cy5sYXN0S2V5UHJlc3NlZCAhPT0gdGhpcy5fa2V5U3RhdHVzLmxhc3RLZXlSZWxlYXNlZCkge1xuICAgICAgICB0aGlzLl9rZXlTdGF0dXMubGFzdEtleVByZXNzZWQgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICB0aGlzLl9rZXlTdGF0dXMuYWx0S2V5ID0gZS5hbHRLZXk7XG4gICAgICB0aGlzLl9rZXlTdGF0dXMuY3RybEtleSA9IGUuY3RybEtleTtcbiAgICAgIHRoaXMuX2tleVN0YXR1cy5tZXRhS2V5ID0gZS5tZXRhS2V5O1xuICAgICAgdGhpcy5fa2V5U3RhdHVzLnNoaWZ0S2V5ID0gZS5zaGlmdEtleTtcbiAgICAgIGlmICh0aGlzLl9rZXlTdGF0dXMubGFzdEtleVJlbGVhc2VkKSB7XG4gICAgICAgIHRoaXMuX2tleVN0YXR1cy5ldmVudCA9IGU7XG4gICAgICAgIHRoaXMuZmlyZSh0aGlzLl9rZXlTdGF0dXMpO1xuICAgICAgfVxuICAgIH0sIHRydWUpO1xuICAgIF9nZXRfXyhcImFkZERpc3Bvc2FibGVMaXN0ZW5lclwiKShkb2N1bWVudC5ib2R5LCAnbW91c2Vkb3duJywgKCkgPT4ge1xuICAgICAgdGhpcy5fa2V5U3RhdHVzLmxhc3RLZXlQcmVzc2VkID0gdW5kZWZpbmVkO1xuICAgIH0sIHRydWUpO1xuICAgIF9nZXRfXyhcImFkZERpc3Bvc2FibGVMaXN0ZW5lclwiKShkb2N1bWVudC5ib2R5LCAnbW91c2V1cCcsICgpID0+IHtcbiAgICAgIHRoaXMuX2tleVN0YXR1cy5sYXN0S2V5UHJlc3NlZCA9IHVuZGVmaW5lZDtcbiAgICB9LCB0cnVlKTtcbiAgICBfZ2V0X18oXCJhZGREaXNwb3NhYmxlTGlzdGVuZXJcIikoZG9jdW1lbnQuYm9keSwgJ21vdXNlbW92ZScsIGUgPT4ge1xuICAgICAgaWYgKGUuYnV0dG9ucykge1xuICAgICAgICB0aGlzLl9rZXlTdGF0dXMubGFzdEtleVByZXNzZWQgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSwgdHJ1ZSk7XG4gICAgX2dldF9fKFwiYWRkRGlzcG9zYWJsZUxpc3RlbmVyXCIpKHdpbmRvdywgJ2JsdXInLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlc2V0S2V5U3RhdHVzKCk7XG4gICAgfSk7XG4gIH1cbiAgZ2V0IGtleVN0YXR1cygpIHtcbiAgICByZXR1cm4gdGhpcy5fa2V5U3RhdHVzO1xuICB9XG4gIGdldCBpc01vZGlmaWVyUHJlc3NlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fa2V5U3RhdHVzLmFsdEtleSB8fCB0aGlzLl9rZXlTdGF0dXMuY3RybEtleSB8fCB0aGlzLl9rZXlTdGF0dXMubWV0YUtleSB8fCB0aGlzLl9rZXlTdGF0dXMuc2hpZnRLZXk7XG4gIH1cbiAgLyoqXG4gICAqIEFsbG93cyB0byBleHBsaWNpdGx5IHJlc2V0IHRoZSBrZXkgc3RhdHVzIGJhc2VkIG9uIG1vcmUga25vd2xlZGdlICgjMTA5MDYyKVxuICAgKi9cbiAgcmVzZXRLZXlTdGF0dXMoKSB7XG4gICAgdGhpcy5kb1Jlc2V0S2V5U3RhdHVzKCk7XG4gICAgdGhpcy5maXJlKHRoaXMuX2tleVN0YXR1cyk7XG4gIH1cbiAgZG9SZXNldEtleVN0YXR1cygpIHtcbiAgICB0aGlzLl9rZXlTdGF0dXMgPSB7XG4gICAgICBhbHRLZXk6IGZhbHNlLFxuICAgICAgc2hpZnRLZXk6IGZhbHNlLFxuICAgICAgY3RybEtleTogZmFsc2UsXG4gICAgICBtZXRhS2V5OiBmYWxzZVxuICAgIH07XG4gIH1cbiAgc3RhdGljIGdldEluc3RhbmNlKCkge1xuICAgIGlmICghX2dldF9fKFwiTW9kaWZpZXJLZXlFbWl0dGVyXCIpLmluc3RhbmNlKSB7XG4gICAgICBfZ2V0X18oXCJNb2RpZmllcktleUVtaXR0ZXJcIikuaW5zdGFuY2UgPSBuZXcgKF9nZXRfXyhcIk1vZGlmaWVyS2V5RW1pdHRlclwiKSkoKTtcbiAgICB9XG4gICAgcmV0dXJuIF9nZXRfXyhcIk1vZGlmaWVyS2V5RW1pdHRlclwiKS5pbnN0YW5jZTtcbiAgfVxuICBkaXNwb3NlKCkge1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgfVxufVxuZXhwb3J0cy5Nb2RpZmllcktleUVtaXR0ZXIgPSBfZ2V0X18oXCJNb2RpZmllcktleUVtaXR0ZXJcIik7XG5jb25zdCBfbWFudWFsQ2xhc3NMaXN0ID0gbmV3IGNsYXNzIHtcbiAgX2ZpbmRDbGFzc05hbWUobm9kZSwgY2xhc3NOYW1lKSB7XG4gICAgY29uc3QgY2xhc3NlcyA9IG5vZGUuY2xhc3NOYW1lO1xuICAgIGlmICghY2xhc3Nlcykge1xuICAgICAgdGhpcy5fbGFzdFN0YXJ0ID0gLTE7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNsYXNzTmFtZSA9IGNsYXNzTmFtZS50cmltKCk7XG4gICAgY29uc3QgY2xhc3Nlc0xlbiA9IGNsYXNzZXMubGVuZ3RoO1xuICAgIGNvbnN0IGNsYXNzTGVuID0gY2xhc3NOYW1lLmxlbmd0aDtcbiAgICBpZiAoY2xhc3NMZW4gPT09IDApIHtcbiAgICAgIHRoaXMuX2xhc3RTdGFydCA9IC0xO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY2xhc3Nlc0xlbiA8IGNsYXNzTGVuKSB7XG4gICAgICB0aGlzLl9sYXN0U3RhcnQgPSAtMTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNsYXNzZXMgPT09IGNsYXNzTmFtZSkge1xuICAgICAgdGhpcy5fbGFzdFN0YXJ0ID0gMDtcbiAgICAgIHRoaXMuX2xhc3RFbmQgPSBjbGFzc2VzTGVuO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgaWR4ID0gLTE7XG4gICAgbGV0IGlkeEVuZDtcbiAgICB3aGlsZSAoKGlkeCA9IGNsYXNzZXMuaW5kZXhPZihjbGFzc05hbWUsIGlkeCArIDEpKSA+PSAwKSB7XG4gICAgICBpZHhFbmQgPSBpZHggKyBjbGFzc0xlbjtcbiAgICAgIC8vIGEgY2xhc3MgdGhhdCBpcyBmb2xsb3dlZCBieSBhbm90aGVyIGNsYXNzXG4gICAgICBpZiAoKGlkeCA9PT0gMCB8fCBjbGFzc2VzLmNoYXJDb2RlQXQoaWR4IC0gMSkgPT09IDMyIC8qIENoYXJDb2RlLlNwYWNlICovKSAmJiBjbGFzc2VzLmNoYXJDb2RlQXQoaWR4RW5kKSA9PT0gMzIgLyogQ2hhckNvZGUuU3BhY2UgKi8pIHtcbiAgICAgICAgdGhpcy5fbGFzdFN0YXJ0ID0gaWR4O1xuICAgICAgICB0aGlzLl9sYXN0RW5kID0gaWR4RW5kICsgMTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gbGFzdCBjbGFzc1xuICAgICAgaWYgKGlkeCA+IDAgJiYgY2xhc3Nlcy5jaGFyQ29kZUF0KGlkeCAtIDEpID09PSAzMiAvKiBDaGFyQ29kZS5TcGFjZSAqLyAmJiBpZHhFbmQgPT09IGNsYXNzZXNMZW4pIHtcbiAgICAgICAgdGhpcy5fbGFzdFN0YXJ0ID0gaWR4IC0gMTtcbiAgICAgICAgdGhpcy5fbGFzdEVuZCA9IGlkeEVuZDtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gZXF1YWwgLSBkdXBsaWNhdGUgb2YgY21wIGFib3ZlXG4gICAgICBpZiAoaWR4ID09PSAwICYmIGlkeEVuZCA9PT0gY2xhc3Nlc0xlbikge1xuICAgICAgICB0aGlzLl9sYXN0U3RhcnQgPSAwO1xuICAgICAgICB0aGlzLl9sYXN0RW5kID0gaWR4RW5kO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2xhc3RTdGFydCA9IC0xO1xuICB9XG4gIGhhc0NsYXNzKG5vZGUsIGNsYXNzTmFtZSkge1xuICAgIHRoaXMuX2ZpbmRDbGFzc05hbWUobm9kZSwgY2xhc3NOYW1lKTtcbiAgICByZXR1cm4gdGhpcy5fbGFzdFN0YXJ0ICE9PSAtMTtcbiAgfVxuICBhZGRDbGFzc2VzKG5vZGUsIC4uLmNsYXNzTmFtZXMpIHtcbiAgICBjbGFzc05hbWVzLmZvckVhY2gobmFtZVZhbHVlID0+IG5hbWVWYWx1ZS5zcGxpdCgnICcpLmZvckVhY2gobmFtZSA9PiB0aGlzLmFkZENsYXNzKG5vZGUsIG5hbWUpKSk7XG4gIH1cbiAgYWRkQ2xhc3Mobm9kZSwgY2xhc3NOYW1lKSB7XG4gICAgaWYgKCFub2RlLmNsYXNzTmFtZSkge1xuICAgICAgLy8gZG9lc24ndCBoYXZlIGl0IGZvciBzdXJlXG4gICAgICBub2RlLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZmluZENsYXNzTmFtZShub2RlLCBjbGFzc05hbWUpOyAvLyBzZWUgaWYgaXQncyBhbHJlYWR5IHRoZXJlXG4gICAgICBpZiAodGhpcy5fbGFzdFN0YXJ0ID09PSAtMSkge1xuICAgICAgICBub2RlLmNsYXNzTmFtZSA9IG5vZGUuY2xhc3NOYW1lICsgJyAnICsgY2xhc3NOYW1lO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZW1vdmVDbGFzcyhub2RlLCBjbGFzc05hbWUpIHtcbiAgICB0aGlzLl9maW5kQ2xhc3NOYW1lKG5vZGUsIGNsYXNzTmFtZSk7XG4gICAgaWYgKHRoaXMuX2xhc3RTdGFydCA9PT0gLTEpIHtcbiAgICAgIC8vIFByZXZlbnQgc3R5bGVzIGludmFsaWRhdGlvbiBpZiBub3QgbmVjZXNzYXJ5XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUuY2xhc3NOYW1lID0gbm9kZS5jbGFzc05hbWUuc3Vic3RyaW5nKDAsIHRoaXMuX2xhc3RTdGFydCkgKyBub2RlLmNsYXNzTmFtZS5zdWJzdHJpbmcodGhpcy5fbGFzdEVuZCB8fCAwKTtcbiAgICB9XG4gIH1cbiAgcmVtb3ZlQ2xhc3Nlcyhub2RlLCAuLi5jbGFzc05hbWVzKSB7XG4gICAgY2xhc3NOYW1lcy5mb3JFYWNoKG5hbWVWYWx1ZSA9PiBuYW1lVmFsdWUuc3BsaXQoJyAnKS5mb3JFYWNoKG5hbWUgPT4gdGhpcy5yZW1vdmVDbGFzcyhub2RlLCBuYW1lKSkpO1xuICB9XG4gIHRvZ2dsZUNsYXNzKG5vZGUsIGNsYXNzTmFtZSwgc2hvdWxkSGF2ZUl0KSB7XG4gICAgdGhpcy5fZmluZENsYXNzTmFtZShub2RlLCBjbGFzc05hbWUpO1xuICAgIGlmICh0aGlzLl9sYXN0U3RhcnQgIT09IC0xICYmIChzaG91bGRIYXZlSXQgPT09IHVuZGVmaW5lZCB8fCAhc2hvdWxkSGF2ZUl0KSkge1xuICAgICAgdGhpcy5yZW1vdmVDbGFzcyhub2RlLCBjbGFzc05hbWUpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fbGFzdFN0YXJ0ID09PSAtMSAmJiAoc2hvdWxkSGF2ZUl0ID09PSB1bmRlZmluZWQgfHwgc2hvdWxkSGF2ZUl0KSkge1xuICAgICAgdGhpcy5hZGRDbGFzcyhub2RlLCBjbGFzc05hbWUpO1xuICAgIH1cbiAgfVxufSgpO1xuY29uc3QgX25hdGl2ZUNsYXNzTGlzdCA9IG5ldyBjbGFzcyB7XG4gIGhhc0NsYXNzKG5vZGUsIGNsYXNzTmFtZSkge1xuICAgIHJldHVybiBCb29sZWFuKGNsYXNzTmFtZSkgJiYgbm9kZS5jbGFzc0xpc3QgJiYgbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbiAgfVxuICBhZGRDbGFzc2VzKG5vZGUsIC4uLmNsYXNzTmFtZXMpIHtcbiAgICBjbGFzc05hbWVzLmZvckVhY2gobmFtZVZhbHVlID0+IG5hbWVWYWx1ZS5zcGxpdCgnICcpLmZvckVhY2gobmFtZSA9PiB0aGlzLmFkZENsYXNzKG5vZGUsIG5hbWUpKSk7XG4gIH1cbiAgYWRkQ2xhc3Mobm9kZSwgY2xhc3NOYW1lKSB7XG4gICAgaWYgKGNsYXNzTmFtZSAmJiBub2RlLmNsYXNzTGlzdCkge1xuICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgfVxuICB9XG4gIHJlbW92ZUNsYXNzKG5vZGUsIGNsYXNzTmFtZSkge1xuICAgIGlmIChjbGFzc05hbWUgJiYgbm9kZS5jbGFzc0xpc3QpIHtcbiAgICAgIG5vZGUuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICAgIH1cbiAgfVxuICByZW1vdmVDbGFzc2VzKG5vZGUsIC4uLmNsYXNzTmFtZXMpIHtcbiAgICBjbGFzc05hbWVzLmZvckVhY2gobmFtZVZhbHVlID0+IG5hbWVWYWx1ZS5zcGxpdCgnICcpLmZvckVhY2gobmFtZSA9PiB0aGlzLnJlbW92ZUNsYXNzKG5vZGUsIG5hbWUpKSk7XG4gIH1cbiAgdG9nZ2xlQ2xhc3Mobm9kZSwgY2xhc3NOYW1lLCBzaG91bGRIYXZlSXQpIHtcbiAgICBpZiAobm9kZS5jbGFzc0xpc3QpIHtcbiAgICAgIG5vZGUuY2xhc3NMaXN0LnRvZ2dsZShjbGFzc05hbWUsIHNob3VsZEhhdmVJdCk7XG4gICAgfVxuICB9XG59KCk7XG4vLyBJbiBJRTExIHRoZXJlIGlzIG9ubHkgcGFydGlhbCBzdXBwb3J0IGZvciBgY2xhc3NMaXN0YCB3aGljaCBtYWtlcyB1cyBrZWVwIG91clxuLy8gY3VzdG9tIGltcGxlbWVudGF0aW9uLiBPdGhlcndpc2UgdXNlIHRoZSBuYXRpdmUgaW1wbGVtZW50YXRpb24sIHNlZTogaHR0cDovL2Nhbml1c2UuY29tLyNzZWFyY2g9Y2xhc3NsaXN0XG5jb25zdCBfY2xhc3NMaXN0ID0gX2dldF9fKFwiYnJvd3NlclwiKS5pc0lFID8gX2dldF9fKFwiX21hbnVhbENsYXNzTGlzdFwiKSA6IF9nZXRfXyhcIl9uYXRpdmVDbGFzc0xpc3RcIik7XG5leHBvcnRzLmhhc0NsYXNzID0gX2dldF9fKFwiX2NsYXNzTGlzdFwiKS5oYXNDbGFzcy5iaW5kKF9nZXRfXyhcIl9jbGFzc0xpc3RcIikpO1xuZXhwb3J0cy5hZGRDbGFzcyA9IF9nZXRfXyhcIl9jbGFzc0xpc3RcIikuYWRkQ2xhc3MuYmluZChfZ2V0X18oXCJfY2xhc3NMaXN0XCIpKTtcbmV4cG9ydHMuYWRkQ2xhc3NlcyA9IF9nZXRfXyhcIl9jbGFzc0xpc3RcIikuYWRkQ2xhc3Nlcy5iaW5kKF9nZXRfXyhcIl9jbGFzc0xpc3RcIikpO1xuZXhwb3J0cy5yZW1vdmVDbGFzcyA9IF9nZXRfXyhcIl9jbGFzc0xpc3RcIikucmVtb3ZlQ2xhc3MuYmluZChfZ2V0X18oXCJfY2xhc3NMaXN0XCIpKTtcbmV4cG9ydHMucmVtb3ZlQ2xhc3NlcyA9IF9nZXRfXyhcIl9jbGFzc0xpc3RcIikucmVtb3ZlQ2xhc3Nlcy5iaW5kKF9nZXRfXyhcIl9jbGFzc0xpc3RcIikpO1xuZXhwb3J0cy50b2dnbGVDbGFzcyA9IF9nZXRfXyhcIl9jbGFzc0xpc3RcIikudG9nZ2xlQ2xhc3MuYmluZChfZ2V0X18oXCJfY2xhc3NMaXN0XCIpKTtcbmNsYXNzIERvbUxpc3RlbmVyIHtcbiAgY29uc3RydWN0b3Iobm9kZSwgdHlwZSwgaGFuZGxlciwgb3B0aW9ucykge1xuICAgIHRoaXMuX25vZGUgPSBub2RlO1xuICAgIHRoaXMuX3R5cGUgPSB0eXBlO1xuICAgIHRoaXMuX2hhbmRsZXIgPSBoYW5kbGVyO1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zIHx8IGZhbHNlO1xuICAgIHRoaXMuX25vZGUuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl90eXBlLCB0aGlzLl9oYW5kbGVyLCB0aGlzLl9vcHRpb25zKTtcbiAgfVxuICBkaXNwb3NlKCkge1xuICAgIGlmICghdGhpcy5faGFuZGxlcikge1xuICAgICAgLy8gQWxyZWFkeSBkaXNwb3NlZFxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9ub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5fdHlwZSwgdGhpcy5faGFuZGxlciwgdGhpcy5fb3B0aW9ucyk7XG4gICAgLy8gUHJldmVudCBsZWFrZXJzIGZyb20gaG9sZGluZyBvbiB0byB0aGUgZG9tIG9yIGhhbmRsZXIgZnVuY1xuICAgIHRoaXMuX25vZGUgPSBudWxsO1xuICAgIHRoaXMuX2hhbmRsZXIgPSBudWxsO1xuICB9XG59XG5mdW5jdGlvbiBhZGREaXNwb3NhYmxlTGlzdGVuZXIobm9kZSwgdHlwZSwgaGFuZGxlciwgdXNlQ2FwdHVyZU9yT3B0aW9ucykge1xuICByZXR1cm4gbmV3IChfZ2V0X18oXCJEb21MaXN0ZW5lclwiKSkobm9kZSwgdHlwZSwgaGFuZGxlciwgdXNlQ2FwdHVyZU9yT3B0aW9ucyk7XG59XG5leHBvcnRzLmFkZERpc3Bvc2FibGVMaXN0ZW5lciA9IF9nZXRfXyhcImFkZERpc3Bvc2FibGVMaXN0ZW5lclwiKTtcbmZ1bmN0aW9uIF93cmFwQXNTdGFuZGFyZE1vdXNlRXZlbnQoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcbiAgICByZXR1cm4gaGFuZGxlcihuZXcgKF9nZXRfXyhcIm1vdXNlRXZlbnRfMVwiKS5TdGFuZGFyZE1vdXNlRXZlbnQpKGUpKTtcbiAgfTtcbn1cbmZ1bmN0aW9uIF93cmFwQXNTdGFuZGFyZEtleWJvYXJkRXZlbnQoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gKGUpIHtcbiAgICByZXR1cm4gaGFuZGxlcihuZXcgKF9nZXRfXyhcImtleWJvYXJkRXZlbnRfMVwiKS5TdGFuZGFyZEtleWJvYXJkRXZlbnQpKGUpKTtcbiAgfTtcbn1cbmNvbnN0IGFkZFN0YW5kYXJkRGlzcG9zYWJsZUxpc3RlbmVyID0gZnVuY3Rpb24gYWRkU3RhbmRhcmREaXNwb3NhYmxlTGlzdGVuZXIobm9kZSwgdHlwZSwgaGFuZGxlciwgdXNlQ2FwdHVyZSkge1xuICBsZXQgd3JhcEhhbmRsZXIgPSBoYW5kbGVyO1xuICBpZiAodHlwZSA9PT0gJ2NsaWNrJyB8fCB0eXBlID09PSAnbW91c2Vkb3duJykge1xuICAgIHdyYXBIYW5kbGVyID0gX2dldF9fKFwiX3dyYXBBc1N0YW5kYXJkTW91c2VFdmVudFwiKShoYW5kbGVyKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSAna2V5ZG93bicgfHwgdHlwZSA9PT0gJ2tleXByZXNzJyB8fCB0eXBlID09PSAna2V5dXAnKSB7XG4gICAgd3JhcEhhbmRsZXIgPSBfZ2V0X18oXCJfd3JhcEFzU3RhbmRhcmRLZXlib2FyZEV2ZW50XCIpKGhhbmRsZXIpO1xuICB9XG4gIHJldHVybiBfZ2V0X18oXCJhZGREaXNwb3NhYmxlTGlzdGVuZXJcIikobm9kZSwgdHlwZSwgd3JhcEhhbmRsZXIsIHVzZUNhcHR1cmUpO1xufTtcbmV4cG9ydHMuYWRkU3RhbmRhcmREaXNwb3NhYmxlTGlzdGVuZXIgPSBfZ2V0X18oXCJhZGRTdGFuZGFyZERpc3Bvc2FibGVMaXN0ZW5lclwiKTtcbmZ1bmN0aW9uIGFkZERpc3Bvc2FibGVOb25CdWJibGluZ01vdXNlT3V0TGlzdGVuZXIobm9kZSwgaGFuZGxlcikge1xuICByZXR1cm4gX2dldF9fKFwiYWRkRGlzcG9zYWJsZUxpc3RlbmVyXCIpKG5vZGUsICdtb3VzZW91dCcsIGUgPT4ge1xuICAgIC8vIE1vdXNlIG91dCBidWJibGVzLCBzbyB0aGlzIGlzIGFuIGF0dGVtcHQgdG8gaWdub3JlIGZhdXggbW91c2Ugb3V0cyBjb21pbmcgZnJvbSBjaGlsZHJlbiBlbGVtZW50c1xuICAgIGxldCB0b0VsZW1lbnQgPSBlLnJlbGF0ZWRUYXJnZXQgfHwgZS50YXJnZXQ7XG4gICAgd2hpbGUgKHRvRWxlbWVudCAmJiB0b0VsZW1lbnQgIT09IG5vZGUpIHtcbiAgICAgIHRvRWxlbWVudCA9IHRvRWxlbWVudC5wYXJlbnROb2RlO1xuICAgIH1cbiAgICBpZiAodG9FbGVtZW50ID09PSBub2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGhhbmRsZXIoZSk7XG4gIH0pO1xufVxuZXhwb3J0cy5hZGREaXNwb3NhYmxlTm9uQnViYmxpbmdNb3VzZU91dExpc3RlbmVyID0gX2dldF9fKFwiYWRkRGlzcG9zYWJsZU5vbkJ1YmJsaW5nTW91c2VPdXRMaXN0ZW5lclwiKTtcbmxldCBfYW5pbWF0aW9uRnJhbWUgPSBudWxsO1xuZnVuY3Rpb24gZG9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUoY2FsbGJhY2spIHtcbiAgaWYgKCFfZ2V0X18oXCJfYW5pbWF0aW9uRnJhbWVcIikpIHtcbiAgICBjb25zdCBlbXVsYXRlZFJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGNhbGxiYWNrID0+IHtcbiAgICAgIHJldHVybiBzZXRUaW1lb3V0KCgpID0+IGNhbGxiYWNrKG5ldyBEYXRlKCkuZ2V0VGltZSgpKSwgMCk7XG4gICAgfTtcbiAgICBfYXNzaWduX18oXCJfYW5pbWF0aW9uRnJhbWVcIiwgc2VsZi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgc2VsZi5tc1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBzZWxmLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBzZWxmLm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBzZWxmLm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZW11bGF0ZWRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUpO1xuICB9XG4gIHJldHVybiBfZ2V0X18oXCJfYW5pbWF0aW9uRnJhbWVcIikuY2FsbChzZWxmLCBjYWxsYmFjayk7XG59XG5jbGFzcyBBbmltYXRpb25GcmFtZVF1ZXVlSXRlbSB7XG4gIGNvbnN0cnVjdG9yKHJ1bm5lciwgcHJpb3JpdHkgPSAwKSB7XG4gICAgdGhpcy5fcnVubmVyID0gcnVubmVyO1xuICAgIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgICB0aGlzLl9jYW5jZWxlZCA9IGZhbHNlO1xuICB9XG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5fY2FuY2VsZWQgPSB0cnVlO1xuICB9XG4gIGV4ZWN1dGUoKSB7XG4gICAgaWYgKHRoaXMuX2NhbmNlbGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICB0aGlzLl9ydW5uZXIoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbiAgfVxuICAvLyBTb3J0IGJ5IHByaW9yaXR5IChsYXJnZXN0IHRvIGxvd2VzdClcbiAgc3RhdGljIHNvcnQoYSwgYikge1xuICAgIHJldHVybiBiLnByaW9yaXR5IC0gYS5wcmlvcml0eTtcbiAgfVxufVxuKGZ1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIFRoZSBydW5uZXJzIHNjaGVkdWxlZCBhdCB0aGUgbmV4dCBhbmltYXRpb24gZnJhbWVcbiAgICovXG4gIGxldCBORVhUX1FVRVVFID0gW107XG4gIC8qKlxuICAgKiBUaGUgcnVubmVycyBzY2hlZHVsZWQgYXQgdGhlIGN1cnJlbnQgYW5pbWF0aW9uIGZyYW1lXG4gICAqL1xuICBsZXQgQ1VSUkVOVF9RVUVVRSA9IG51bGw7XG4gIC8qKlxuICAgKiBBIGZsYWcgdG8ga2VlcCB0cmFjayBpZiB0aGUgbmF0aXZlIHJlcXVlc3RBbmltYXRpb25GcmFtZSB3YXMgYWxyZWFkeSBjYWxsZWRcbiAgICovXG4gIGxldCBhbmltRnJhbWVSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgLyoqXG4gICAqIEEgZmxhZyB0byBpbmRpY2F0ZSBpZiBjdXJyZW50bHkgaGFuZGxpbmcgYSBuYXRpdmUgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGNhbGxiYWNrXG4gICAqL1xuICBsZXQgaW5BbmltYXRpb25GcmFtZVJ1bm5lciA9IGZhbHNlO1xuICBjb25zdCBhbmltYXRpb25GcmFtZVJ1bm5lciA9ICgpID0+IHtcbiAgICBhbmltRnJhbWVSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICBDVVJSRU5UX1FVRVVFID0gTkVYVF9RVUVVRTtcbiAgICBORVhUX1FVRVVFID0gW107XG4gICAgaW5BbmltYXRpb25GcmFtZVJ1bm5lciA9IHRydWU7XG4gICAgd2hpbGUgKENVUlJFTlRfUVVFVUUubGVuZ3RoID4gMCkge1xuICAgICAgQ1VSUkVOVF9RVUVVRS5zb3J0KF9nZXRfXyhcIkFuaW1hdGlvbkZyYW1lUXVldWVJdGVtXCIpLnNvcnQpO1xuICAgICAgY29uc3QgdG9wID0gQ1VSUkVOVF9RVUVVRS5zaGlmdCgpO1xuICAgICAgdG9wLmV4ZWN1dGUoKTtcbiAgICB9XG4gICAgaW5BbmltYXRpb25GcmFtZVJ1bm5lciA9IGZhbHNlO1xuICB9O1xuICBleHBvcnRzLnNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUgPSAocnVubmVyLCBwcmlvcml0eSA9IDApID0+IHtcbiAgICBjb25zdCBpdGVtID0gbmV3IChfZ2V0X18oXCJBbmltYXRpb25GcmFtZVF1ZXVlSXRlbVwiKSkocnVubmVyLCBwcmlvcml0eSk7XG4gICAgTkVYVF9RVUVVRS5wdXNoKGl0ZW0pO1xuICAgIGlmICghYW5pbUZyYW1lUmVxdWVzdGVkKSB7XG4gICAgICBhbmltRnJhbWVSZXF1ZXN0ZWQgPSB0cnVlO1xuICAgICAgX2dldF9fKFwiZG9SZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIikoYW5pbWF0aW9uRnJhbWVSdW5uZXIpO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbTtcbiAgfTtcbiAgZXhwb3J0cy5ydW5BdFRoaXNPclNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUgPSAocnVubmVyLCBwcmlvcml0eSkgPT4ge1xuICAgIGlmIChpbkFuaW1hdGlvbkZyYW1lUnVubmVyKSB7XG4gICAgICBjb25zdCBpdGVtID0gbmV3IChfZ2V0X18oXCJBbmltYXRpb25GcmFtZVF1ZXVlSXRlbVwiKSkocnVubmVyLCBwcmlvcml0eSk7XG4gICAgICBDVVJSRU5UX1FVRVVFLnB1c2goaXRlbSk7XG4gICAgICByZXR1cm4gaXRlbTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICgwLCBleHBvcnRzLnNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUpKHJ1bm5lciwgcHJpb3JpdHkpO1xuICAgIH1cbiAgfTtcbn0pKCk7XG5mdW5jdGlvbiBtZWFzdXJlKGNhbGxiYWNrKSB7XG4gIHJldHVybiAoMCwgZXhwb3J0cy5zY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lKShjYWxsYmFjaywgMTAwMDAgLyogbXVzdCBiZSBlYXJseSAqLyk7XG59XG5cbmV4cG9ydHMubWVhc3VyZSA9IF9nZXRfXyhcIm1lYXN1cmVcIik7XG5mdW5jdGlvbiBtb2RpZnkoY2FsbGJhY2spIHtcbiAgcmV0dXJuICgwLCBleHBvcnRzLnNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUpKGNhbGxiYWNrLCAtMTAwMDAgLyogbXVzdCBiZSBsYXRlICovKTtcbn1cblxuZXhwb3J0cy5tb2RpZnkgPSBfZ2V0X18oXCJtb2RpZnlcIik7XG5jb25zdCBNSU5JTVVNX1RJTUVfTVMgPSAxNjtcbmNvbnN0IERFRkFVTFRfRVZFTlRfTUVSR0VSID0gZnVuY3Rpb24gKGxhc3RFdmVudCwgY3VycmVudEV2ZW50KSB7XG4gIHJldHVybiBjdXJyZW50RXZlbnQ7XG59O1xuY2xhc3MgVGltZW91dFRocm90dGxlZERvbUxpc3RlbmVyIGV4dGVuZHMgX2dldF9fKFwibGlmZWN5Y2xlXzFcIikuRGlzcG9zYWJsZSB7XG4gIGNvbnN0cnVjdG9yKG5vZGUsIHR5cGUsIGhhbmRsZXIsIGV2ZW50TWVyZ2VyID0gX2dldF9fKFwiREVGQVVMVF9FVkVOVF9NRVJHRVJcIiksIG1pbmltdW1UaW1lTXMgPSBfZ2V0X18oXCJNSU5JTVVNX1RJTUVfTVNcIikpIHtcbiAgICBzdXBlcigpO1xuICAgIGxldCBsYXN0RXZlbnQgPSBudWxsO1xuICAgIGxldCBsYXN0SGFuZGxlclRpbWUgPSAwO1xuICAgIGNvbnN0IHRpbWVvdXQgPSB0aGlzLl9yZWdpc3RlcihuZXcgKF9nZXRfXyhcImFzeW5jXzFcIikuVGltZW91dFRpbWVyKSgpKTtcbiAgICBjb25zdCBpbnZva2VIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgbGFzdEhhbmRsZXJUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICBoYW5kbGVyKGxhc3RFdmVudCk7XG4gICAgICBsYXN0RXZlbnQgPSBudWxsO1xuICAgIH07XG4gICAgdGhpcy5fcmVnaXN0ZXIoX2dldF9fKFwiYWRkRGlzcG9zYWJsZUxpc3RlbmVyXCIpKG5vZGUsIHR5cGUsIGUgPT4ge1xuICAgICAgbGFzdEV2ZW50ID0gZXZlbnRNZXJnZXIobGFzdEV2ZW50LCBlKTtcbiAgICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBsYXN0SGFuZGxlclRpbWU7XG4gICAgICBpZiAoZWxhcHNlZFRpbWUgPj0gbWluaW11bVRpbWVNcykge1xuICAgICAgICB0aW1lb3V0LmNhbmNlbCgpO1xuICAgICAgICBpbnZva2VIYW5kbGVyKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aW1lb3V0LnNldElmTm90U2V0KGludm9rZUhhbmRsZXIsIG1pbmltdW1UaW1lTXMgLSBlbGFwc2VkVGltZSk7XG4gICAgICB9XG4gICAgfSkpO1xuICB9XG59XG5mdW5jdGlvbiBhZGREaXNwb3NhYmxlVGhyb3R0bGVkTGlzdGVuZXIobm9kZSwgdHlwZSwgaGFuZGxlciwgZXZlbnRNZXJnZXIsIG1pbmltdW1UaW1lTXMpIHtcbiAgcmV0dXJuIG5ldyAoX2dldF9fKFwiVGltZW91dFRocm90dGxlZERvbUxpc3RlbmVyXCIpKShub2RlLCB0eXBlLCBoYW5kbGVyLCBldmVudE1lcmdlciwgbWluaW11bVRpbWVNcyk7XG59XG5leHBvcnRzLmFkZERpc3Bvc2FibGVUaHJvdHRsZWRMaXN0ZW5lciA9IF9nZXRfXyhcImFkZERpc3Bvc2FibGVUaHJvdHRsZWRMaXN0ZW5lclwiKTtcbmZ1bmN0aW9uIGdldENvbXB1dGVkU3R5bGUoZWwpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWwsIG51bGwpO1xufVxuZXhwb3J0cy5nZXRDb21wdXRlZFN0eWxlID0gX2dldF9fKFwiZ2V0Q29tcHV0ZWRTdHlsZVwiKTtcbi8vIEFkYXB0ZWQgZnJvbSBXaW5KU1xuLy8gQ29udmVydHMgYSBDU1MgcG9zaXRpb25pbmcgc3RyaW5nIGZvciB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgdG8gcGl4ZWxzLlxuY29uc3QgY29udmVydFRvUGl4ZWxzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGVsZW1lbnQsIHZhbHVlKSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpIHx8IDA7XG4gIH07XG59KCk7XG5mdW5jdGlvbiBnZXREaW1lbnNpb24oZWxlbWVudCwgY3NzUHJvcGVydHlOYW1lLCBqc1Byb3BlcnR5TmFtZSkge1xuICBjb25zdCBjb21wdXRlZFN0eWxlID0gX2dldF9fKFwiZ2V0Q29tcHV0ZWRTdHlsZVwiKShlbGVtZW50KTtcbiAgbGV0IHZhbHVlID0gJzAnO1xuICBpZiAoY29tcHV0ZWRTdHlsZSkge1xuICAgIGlmIChjb21wdXRlZFN0eWxlLmdldFByb3BlcnR5VmFsdWUpIHtcbiAgICAgIHZhbHVlID0gY29tcHV0ZWRTdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKGNzc1Byb3BlcnR5TmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElFOFxuICAgICAgdmFsdWUgPSBjb21wdXRlZFN0eWxlLmdldEF0dHJpYnV0ZShqc1Byb3BlcnR5TmFtZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBfZ2V0X18oXCJjb252ZXJ0VG9QaXhlbHNcIikoZWxlbWVudCwgdmFsdWUpO1xufVxuZnVuY3Rpb24gZ2V0Q2xpZW50QXJlYShlbGVtZW50KSB7XG4gIC8vIFRyeSB3aXRoIERPTSBjbGllbnRXaWR0aCAvIGNsaWVudEhlaWdodFxuICBpZiAoZWxlbWVudCAhPT0gZG9jdW1lbnQuYm9keSkge1xuICAgIHJldHVybiBuZXcgKF9nZXRfXyhcIkRpbWVuc2lvblwiKSkoZWxlbWVudC5jbGllbnRXaWR0aCwgZWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICB9XG4gIC8vIFRyeSBpbm5lcldpZHRoIC8gaW5uZXJIZWlnaHRcbiAgaWYgKHdpbmRvdy5pbm5lcldpZHRoICYmIHdpbmRvdy5pbm5lckhlaWdodCkge1xuICAgIHJldHVybiBuZXcgKF9nZXRfXyhcIkRpbWVuc2lvblwiKSkod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gIH1cbiAgLy8gVHJ5IHdpdGggZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCAvIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0XG4gIGlmIChkb2N1bWVudC5ib2R5ICYmIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggJiYgZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQpIHtcbiAgICByZXR1cm4gbmV3IChfZ2V0X18oXCJEaW1lbnNpb25cIikpKGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgsIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KTtcbiAgfVxuICAvLyBUcnkgd2l0aCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggLyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0XG4gIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpIHtcbiAgICByZXR1cm4gbmV3IChfZ2V0X18oXCJEaW1lbnNpb25cIikpKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZmlndXJlIG91dCBicm93c2VyIHdpZHRoIGFuZCBoZWlnaHQnKTtcbn1cbmV4cG9ydHMuZ2V0Q2xpZW50QXJlYSA9IF9nZXRfXyhcImdldENsaWVudEFyZWFcIik7XG4vKipcbiAqIFJldHVybnMgdGhlIGVmZmVjdGl2ZSB6b29tIG9uIGEgZ2l2ZW4gZWxlbWVudCBiZWZvcmUgd2luZG93IHpvb20gbGV2ZWwgaXMgYXBwbGllZFxuICovXG5mdW5jdGlvbiBnZXREb21Ob2RlWm9vbUxldmVsKGRvbU5vZGUpIHtcbiAgbGV0IHRlc3RFbGVtZW50ID0gZG9tTm9kZTtcbiAgbGV0IHpvb20gPSAxLjA7XG4gIGRvIHtcbiAgICBjb25zdCBlbGVtZW50Wm9vbUxldmVsID0gX2dldF9fKFwiZ2V0Q29tcHV0ZWRTdHlsZVwiKSh0ZXN0RWxlbWVudCkuem9vbTtcbiAgICBpZiAoZWxlbWVudFpvb21MZXZlbCAhPT0gbnVsbCAmJiBlbGVtZW50Wm9vbUxldmVsICE9PSB1bmRlZmluZWQgJiYgZWxlbWVudFpvb21MZXZlbCAhPT0gJzEnKSB7XG4gICAgICB6b29tICo9IGVsZW1lbnRab29tTGV2ZWw7XG4gICAgfVxuICAgIHRlc3RFbGVtZW50ID0gdGVzdEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgfSB3aGlsZSAodGVzdEVsZW1lbnQgIT09IG51bGwgJiYgdGVzdEVsZW1lbnQgIT09IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG4gIHJldHVybiB6b29tO1xufVxuZXhwb3J0cy5nZXREb21Ob2RlWm9vbUxldmVsID0gX2dldF9fKFwiZ2V0RG9tTm9kZVpvb21MZXZlbFwiKTtcbmNvbnN0IHNpemVVdGlscyA9IHtcbiAgZ2V0Qm9yZGVyTGVmdFdpZHRoOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHJldHVybiBfZ2V0X18oXCJnZXREaW1lbnNpb25cIikoZWxlbWVudCwgJ2JvcmRlci1sZWZ0LXdpZHRoJywgJ2JvcmRlckxlZnRXaWR0aCcpO1xuICB9LFxuICBnZXRCb3JkZXJSaWdodFdpZHRoOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHJldHVybiBfZ2V0X18oXCJnZXREaW1lbnNpb25cIikoZWxlbWVudCwgJ2JvcmRlci1yaWdodC13aWR0aCcsICdib3JkZXJSaWdodFdpZHRoJyk7XG4gIH0sXG4gIGdldEJvcmRlclRvcFdpZHRoOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHJldHVybiBfZ2V0X18oXCJnZXREaW1lbnNpb25cIikoZWxlbWVudCwgJ2JvcmRlci10b3Atd2lkdGgnLCAnYm9yZGVyVG9wV2lkdGgnKTtcbiAgfSxcbiAgZ2V0Qm9yZGVyQm90dG9tV2lkdGg6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgcmV0dXJuIF9nZXRfXyhcImdldERpbWVuc2lvblwiKShlbGVtZW50LCAnYm9yZGVyLWJvdHRvbS13aWR0aCcsICdib3JkZXJCb3R0b21XaWR0aCcpO1xuICB9LFxuICBnZXRQYWRkaW5nTGVmdDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gX2dldF9fKFwiZ2V0RGltZW5zaW9uXCIpKGVsZW1lbnQsICdwYWRkaW5nLWxlZnQnLCAncGFkZGluZ0xlZnQnKTtcbiAgfSxcbiAgZ2V0UGFkZGluZ1JpZ2h0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHJldHVybiBfZ2V0X18oXCJnZXREaW1lbnNpb25cIikoZWxlbWVudCwgJ3BhZGRpbmctcmlnaHQnLCAncGFkZGluZ1JpZ2h0Jyk7XG4gIH0sXG4gIGdldFBhZGRpbmdUb3A6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgcmV0dXJuIF9nZXRfXyhcImdldERpbWVuc2lvblwiKShlbGVtZW50LCAncGFkZGluZy10b3AnLCAncGFkZGluZ1RvcCcpO1xuICB9LFxuICBnZXRQYWRkaW5nQm90dG9tOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHJldHVybiBfZ2V0X18oXCJnZXREaW1lbnNpb25cIikoZWxlbWVudCwgJ3BhZGRpbmctYm90dG9tJywgJ3BhZGRpbmdCb3R0b20nKTtcbiAgfSxcbiAgZ2V0TWFyZ2luTGVmdDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gX2dldF9fKFwiZ2V0RGltZW5zaW9uXCIpKGVsZW1lbnQsICdtYXJnaW4tbGVmdCcsICdtYXJnaW5MZWZ0Jyk7XG4gIH0sXG4gIGdldE1hcmdpblRvcDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gX2dldF9fKFwiZ2V0RGltZW5zaW9uXCIpKGVsZW1lbnQsICdtYXJnaW4tdG9wJywgJ21hcmdpblRvcCcpO1xuICB9LFxuICBnZXRNYXJnaW5SaWdodDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICByZXR1cm4gX2dldF9fKFwiZ2V0RGltZW5zaW9uXCIpKGVsZW1lbnQsICdtYXJnaW4tcmlnaHQnLCAnbWFyZ2luUmlnaHQnKTtcbiAgfSxcbiAgZ2V0TWFyZ2luQm90dG9tOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHJldHVybiBfZ2V0X18oXCJnZXREaW1lbnNpb25cIikoZWxlbWVudCwgJ21hcmdpbi1ib3R0b20nLCAnbWFyZ2luQm90dG9tJyk7XG4gIH0sXG4gIF9fY29tbWFTZW50aW5lbDogZmFsc2Vcbn07XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBQb3NpdGlvbiAmIERpbWVuc2lvblxuY2xhc3MgRGltZW5zaW9uIHtcbiAgY29uc3RydWN0b3Iod2lkdGgsIGhlaWdodCkge1xuICAgIHRoaXMud2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgfVxuICBzdGF0aWMgZXF1YWxzKGEsIGIpIHtcbiAgICBpZiAoYSA9PT0gYikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICghYSB8fCAhYikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gYS53aWR0aCA9PT0gYi53aWR0aCAmJiBhLmhlaWdodCA9PT0gYi5oZWlnaHQ7XG4gIH1cbn1cbmV4cG9ydHMuRGltZW5zaW9uID0gX2dldF9fKFwiRGltZW5zaW9uXCIpO1xuZnVuY3Rpb24gZ2V0VG9wTGVmdE9mZnNldChlbGVtZW50KSB7XG4gIC8vIEFkYXB0ZWQgZnJvbSBXaW5KUy5VdGlsaXRpZXMuZ2V0UG9zaXRpb25cbiAgLy8gYW5kIGFkZGVkIGJvcmRlcnMgdG8gdGhlIG1peFxuICBsZXQgb2Zmc2V0UGFyZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG4gIGxldCB0b3AgPSBlbGVtZW50Lm9mZnNldFRvcDtcbiAgbGV0IGxlZnQgPSBlbGVtZW50Lm9mZnNldExlZnQ7XG4gIHdoaWxlICgoZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSkgIT09IG51bGwgJiYgZWxlbWVudCAhPT0gZG9jdW1lbnQuYm9keSAmJiBlbGVtZW50ICE9PSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpIHtcbiAgICB0b3AgLT0gZWxlbWVudC5zY3JvbGxUb3A7XG4gICAgY29uc3QgYyA9IF9nZXRfXyhcImdldENvbXB1dGVkU3R5bGVcIikoZWxlbWVudCk7XG4gICAgaWYgKGMpIHtcbiAgICAgIGxlZnQgLT0gYy5kaXJlY3Rpb24gIT09ICdydGwnID8gZWxlbWVudC5zY3JvbGxMZWZ0IDogLWVsZW1lbnQuc2Nyb2xsTGVmdDtcbiAgICB9XG4gICAgaWYgKGVsZW1lbnQgPT09IG9mZnNldFBhcmVudCkge1xuICAgICAgbGVmdCArPSBfZ2V0X18oXCJzaXplVXRpbHNcIikuZ2V0Qm9yZGVyTGVmdFdpZHRoKGVsZW1lbnQpO1xuICAgICAgdG9wICs9IF9nZXRfXyhcInNpemVVdGlsc1wiKS5nZXRCb3JkZXJUb3BXaWR0aChlbGVtZW50KTtcbiAgICAgIHRvcCArPSBlbGVtZW50Lm9mZnNldFRvcDtcbiAgICAgIGxlZnQgKz0gZWxlbWVudC5vZmZzZXRMZWZ0O1xuICAgICAgb2Zmc2V0UGFyZW50ID0gZWxlbWVudC5vZmZzZXRQYXJlbnQ7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgbGVmdCxcbiAgICB0b3BcbiAgfTtcbn1cbmV4cG9ydHMuZ2V0VG9wTGVmdE9mZnNldCA9IF9nZXRfXyhcImdldFRvcExlZnRPZmZzZXRcIik7XG5mdW5jdGlvbiBzaXplKGVsZW1lbnQsIHdpZHRoLCBoZWlnaHQpIHtcbiAgaWYgKHR5cGVvZiB3aWR0aCA9PT0gJ251bWJlcicpIHtcbiAgICBlbGVtZW50LnN0eWxlLndpZHRoID0gYCR7d2lkdGh9cHhgO1xuICB9XG4gIGlmICh0eXBlb2YgaGVpZ2h0ID09PSAnbnVtYmVyJykge1xuICAgIGVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gYCR7aGVpZ2h0fXB4YDtcbiAgfVxufVxuZXhwb3J0cy5zaXplID0gX2dldF9fKFwic2l6ZVwiKTtcbmZ1bmN0aW9uIHBvc2l0aW9uKGVsZW1lbnQsIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCwgcG9zaXRpb24gPSAnYWJzb2x1dGUnKSB7XG4gIGlmICh0eXBlb2YgdG9wID09PSAnbnVtYmVyJykge1xuICAgIGVsZW1lbnQuc3R5bGUudG9wID0gYCR7dG9wfXB4YDtcbiAgfVxuICBpZiAodHlwZW9mIHJpZ2h0ID09PSAnbnVtYmVyJykge1xuICAgIGVsZW1lbnQuc3R5bGUucmlnaHQgPSBgJHtyaWdodH1weGA7XG4gIH1cbiAgaWYgKHR5cGVvZiBib3R0b20gPT09ICdudW1iZXInKSB7XG4gICAgZWxlbWVudC5zdHlsZS5ib3R0b20gPSBgJHtib3R0b219cHhgO1xuICB9XG4gIGlmICh0eXBlb2YgbGVmdCA9PT0gJ251bWJlcicpIHtcbiAgICBlbGVtZW50LnN0eWxlLmxlZnQgPSBgJHtsZWZ0fXB4YDtcbiAgfVxuICBlbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gcG9zaXRpb247XG59XG5leHBvcnRzLnBvc2l0aW9uID0gX2dldF9fKFwicG9zaXRpb25cIik7XG4vKipcbiAqIFJldHVybnMgdGhlIHBvc2l0aW9uIG9mIGEgZG9tIG5vZGUgcmVsYXRpdmUgdG8gdGhlIGVudGlyZSBwYWdlLlxuICovXG5mdW5jdGlvbiBnZXREb21Ob2RlUGFnZVBvc2l0aW9uKGRvbU5vZGUpIHtcbiAgY29uc3QgYmIgPSBkb21Ob2RlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICByZXR1cm4ge1xuICAgIGxlZnQ6IGJiLmxlZnQgKyBleHBvcnRzLlN0YW5kYXJkV2luZG93LnNjcm9sbFgsXG4gICAgdG9wOiBiYi50b3AgKyBleHBvcnRzLlN0YW5kYXJkV2luZG93LnNjcm9sbFksXG4gICAgd2lkdGg6IGJiLndpZHRoLFxuICAgIGhlaWdodDogYmIuaGVpZ2h0XG4gIH07XG59XG5leHBvcnRzLmdldERvbU5vZGVQYWdlUG9zaXRpb24gPSBfZ2V0X18oXCJnZXREb21Ob2RlUGFnZVBvc2l0aW9uXCIpO1xuZXhwb3J0cy5TdGFuZGFyZFdpbmRvdyA9IG5ldyBjbGFzcyB7XG4gIGdldCBzY3JvbGxYKCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93LnNjcm9sbFggPT09ICdudW1iZXInKSB7XG4gICAgICAvLyBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgIHJldHVybiB3aW5kb3cuc2Nyb2xsWDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0O1xuICAgIH1cbiAgfVxuICBnZXQgc2Nyb2xsWSgpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdy5zY3JvbGxZID09PSAnbnVtYmVyJykge1xuICAgICAgLy8gbW9kZXJuIGJyb3dzZXJzXG4gICAgICByZXR1cm4gd2luZG93LnNjcm9sbFk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gICAgfVxuICB9XG59KCk7XG4vLyBBZGFwdGVkIGZyb20gV2luSlNcbi8vIEdldHMgdGhlIHdpZHRoIG9mIHRoZSBlbGVtZW50LCBpbmNsdWRpbmcgbWFyZ2lucy5cbmZ1bmN0aW9uIGdldFRvdGFsV2lkdGgoZWxlbWVudCkge1xuICBjb25zdCBtYXJnaW4gPSBfZ2V0X18oXCJzaXplVXRpbHNcIikuZ2V0TWFyZ2luTGVmdChlbGVtZW50KSArIF9nZXRfXyhcInNpemVVdGlsc1wiKS5nZXRNYXJnaW5SaWdodChlbGVtZW50KTtcbiAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0V2lkdGggKyBtYXJnaW47XG59XG5leHBvcnRzLmdldFRvdGFsV2lkdGggPSBfZ2V0X18oXCJnZXRUb3RhbFdpZHRoXCIpO1xuZnVuY3Rpb24gZ2V0Q29udGVudFdpZHRoKGVsZW1lbnQpIHtcbiAgY29uc3QgYm9yZGVyID0gX2dldF9fKFwic2l6ZVV0aWxzXCIpLmdldEJvcmRlckxlZnRXaWR0aChlbGVtZW50KSArIF9nZXRfXyhcInNpemVVdGlsc1wiKS5nZXRCb3JkZXJSaWdodFdpZHRoKGVsZW1lbnQpO1xuICBjb25zdCBwYWRkaW5nID0gX2dldF9fKFwic2l6ZVV0aWxzXCIpLmdldFBhZGRpbmdMZWZ0KGVsZW1lbnQpICsgX2dldF9fKFwic2l6ZVV0aWxzXCIpLmdldFBhZGRpbmdSaWdodChlbGVtZW50KTtcbiAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0V2lkdGggLSBib3JkZXIgLSBwYWRkaW5nO1xufVxuZXhwb3J0cy5nZXRDb250ZW50V2lkdGggPSBfZ2V0X18oXCJnZXRDb250ZW50V2lkdGhcIik7XG5mdW5jdGlvbiBnZXRUb3RhbFNjcm9sbFdpZHRoKGVsZW1lbnQpIHtcbiAgY29uc3QgbWFyZ2luID0gX2dldF9fKFwic2l6ZVV0aWxzXCIpLmdldE1hcmdpbkxlZnQoZWxlbWVudCkgKyBfZ2V0X18oXCJzaXplVXRpbHNcIikuZ2V0TWFyZ2luUmlnaHQoZWxlbWVudCk7XG4gIHJldHVybiBlbGVtZW50LnNjcm9sbFdpZHRoICsgbWFyZ2luO1xufVxuZXhwb3J0cy5nZXRUb3RhbFNjcm9sbFdpZHRoID0gX2dldF9fKFwiZ2V0VG90YWxTY3JvbGxXaWR0aFwiKTtcbi8vIEFkYXB0ZWQgZnJvbSBXaW5KU1xuLy8gR2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSBjb250ZW50IG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gVGhlIGNvbnRlbnQgaGVpZ2h0IGRvZXMgbm90IGluY2x1ZGUgYm9yZGVycyBvciBwYWRkaW5nLlxuZnVuY3Rpb24gZ2V0Q29udGVudEhlaWdodChlbGVtZW50KSB7XG4gIGNvbnN0IGJvcmRlciA9IF9nZXRfXyhcInNpemVVdGlsc1wiKS5nZXRCb3JkZXJUb3BXaWR0aChlbGVtZW50KSArIF9nZXRfXyhcInNpemVVdGlsc1wiKS5nZXRCb3JkZXJCb3R0b21XaWR0aChlbGVtZW50KTtcbiAgY29uc3QgcGFkZGluZyA9IF9nZXRfXyhcInNpemVVdGlsc1wiKS5nZXRQYWRkaW5nVG9wKGVsZW1lbnQpICsgX2dldF9fKFwic2l6ZVV0aWxzXCIpLmdldFBhZGRpbmdCb3R0b20oZWxlbWVudCk7XG4gIHJldHVybiBlbGVtZW50Lm9mZnNldEhlaWdodCAtIGJvcmRlciAtIHBhZGRpbmc7XG59XG5leHBvcnRzLmdldENvbnRlbnRIZWlnaHQgPSBfZ2V0X18oXCJnZXRDb250ZW50SGVpZ2h0XCIpO1xuLy8gQWRhcHRlZCBmcm9tIFdpbkpTXG4vLyBHZXRzIHRoZSBoZWlnaHQgb2YgdGhlIGVsZW1lbnQsIGluY2x1ZGluZyBpdHMgbWFyZ2lucy5cbmZ1bmN0aW9uIGdldFRvdGFsSGVpZ2h0KGVsZW1lbnQpIHtcbiAgY29uc3QgbWFyZ2luID0gX2dldF9fKFwic2l6ZVV0aWxzXCIpLmdldE1hcmdpblRvcChlbGVtZW50KSArIF9nZXRfXyhcInNpemVVdGlsc1wiKS5nZXRNYXJnaW5Cb3R0b20oZWxlbWVudCk7XG4gIHJldHVybiBlbGVtZW50Lm9mZnNldEhlaWdodCArIG1hcmdpbjtcbn1cbmV4cG9ydHMuZ2V0VG90YWxIZWlnaHQgPSBfZ2V0X18oXCJnZXRUb3RhbEhlaWdodFwiKTtcbi8vIEdldHMgdGhlIGxlZnQgY29vcmRpbmF0ZSBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgcmVsYXRpdmUgdG8gdGhlIHNwZWNpZmllZCBwYXJlbnQuXG5mdW5jdGlvbiBnZXRSZWxhdGl2ZUxlZnQoZWxlbWVudCwgcGFyZW50KSB7XG4gIGlmIChlbGVtZW50ID09PSBudWxsKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgY29uc3QgZWxlbWVudFBvc2l0aW9uID0gX2dldF9fKFwiZ2V0VG9wTGVmdE9mZnNldFwiKShlbGVtZW50KTtcbiAgY29uc3QgcGFyZW50UG9zaXRpb24gPSBfZ2V0X18oXCJnZXRUb3BMZWZ0T2Zmc2V0XCIpKHBhcmVudCk7XG4gIHJldHVybiBlbGVtZW50UG9zaXRpb24ubGVmdCAtIHBhcmVudFBvc2l0aW9uLmxlZnQ7XG59XG5mdW5jdGlvbiBnZXRMYXJnZXN0Q2hpbGRXaWR0aChwYXJlbnQsIGNoaWxkcmVuKSB7XG4gIGNvbnN0IGNoaWxkV2lkdGhzID0gY2hpbGRyZW4ubWFwKGNoaWxkID0+IHtcbiAgICByZXR1cm4gTWF0aC5tYXgoX2dldF9fKFwiZ2V0VG90YWxTY3JvbGxXaWR0aFwiKShjaGlsZCksIF9nZXRfXyhcImdldFRvdGFsV2lkdGhcIikoY2hpbGQpKSArIF9nZXRfXyhcImdldFJlbGF0aXZlTGVmdFwiKShjaGlsZCwgcGFyZW50KSB8fCAwO1xuICB9KTtcbiAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heCguLi5jaGlsZFdpZHRocyk7XG4gIHJldHVybiBtYXhXaWR0aDtcbn1cbmV4cG9ydHMuZ2V0TGFyZ2VzdENoaWxkV2lkdGggPSBfZ2V0X18oXCJnZXRMYXJnZXN0Q2hpbGRXaWR0aFwiKTtcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmZ1bmN0aW9uIGlzQW5jZXN0b3IodGVzdENoaWxkLCB0ZXN0QW5jZXN0b3IpIHtcbiAgd2hpbGUgKHRlc3RDaGlsZCkge1xuICAgIGlmICh0ZXN0Q2hpbGQgPT09IHRlc3RBbmNlc3Rvcikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHRlc3RDaGlsZCA9IHRlc3RDaGlsZC5wYXJlbnROb2RlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbmV4cG9ydHMuaXNBbmNlc3RvciA9IF9nZXRfXyhcImlzQW5jZXN0b3JcIik7XG5mdW5jdGlvbiBmaW5kUGFyZW50V2l0aENsYXNzKG5vZGUsIGNsYXp6LCBzdG9wQXRDbGF6ek9yTm9kZSkge1xuICB3aGlsZSAobm9kZSkge1xuICAgIGlmICgoMCwgZXhwb3J0cy5oYXNDbGFzcykobm9kZSwgY2xhenopKSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgaWYgKHN0b3BBdENsYXp6T3JOb2RlKSB7XG4gICAgICBpZiAodHlwZW9mIHN0b3BBdENsYXp6T3JOb2RlID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAoKDAsIGV4cG9ydHMuaGFzQ2xhc3MpKG5vZGUsIHN0b3BBdENsYXp6T3JOb2RlKSkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobm9kZSA9PT0gc3RvcEF0Q2xhenpPck5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuZXhwb3J0cy5maW5kUGFyZW50V2l0aENsYXNzID0gX2dldF9fKFwiZmluZFBhcmVudFdpdGhDbGFzc1wiKTtcbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlU2hlZXQoY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXSkge1xuICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHN0eWxlLnR5cGUgPSAndGV4dC9jc3MnO1xuICBzdHlsZS5tZWRpYSA9ICdzY3JlZW4nO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICByZXR1cm4gc3R5bGU7XG59XG5leHBvcnRzLmNyZWF0ZVN0eWxlU2hlZXQgPSBfZ2V0X18oXCJjcmVhdGVTdHlsZVNoZWV0XCIpO1xubGV0IF9zaGFyZWRTdHlsZVNoZWV0ID0gbnVsbDtcbmZ1bmN0aW9uIGdldFNoYXJlZFN0eWxlU2hlZXQoKSB7XG4gIGlmICghX2dldF9fKFwiX3NoYXJlZFN0eWxlU2hlZXRcIikpIHtcbiAgICBfYXNzaWduX18oXCJfc2hhcmVkU3R5bGVTaGVldFwiLCBfZ2V0X18oXCJjcmVhdGVTdHlsZVNoZWV0XCIpKCkpO1xuICB9XG4gIHJldHVybiBfZ2V0X18oXCJfc2hhcmVkU3R5bGVTaGVldFwiKTtcbn1cbmZ1bmN0aW9uIGdldER5bmFtaWNTdHlsZVNoZWV0UnVsZXMoc3R5bGUpIHtcbiAgaWYgKHN0eWxlICYmIHN0eWxlLnNoZWV0ICYmIHN0eWxlLnNoZWV0LnJ1bGVzKSB7XG4gICAgLy8gQ2hyb21lLCBJRVxuICAgIHJldHVybiBzdHlsZS5zaGVldC5ydWxlcztcbiAgfVxuICBpZiAoc3R5bGUgJiYgc3R5bGUuc2hlZXQgJiYgc3R5bGUuc2hlZXQuY3NzUnVsZXMpIHtcbiAgICAvLyBGRlxuICAgIHJldHVybiBzdHlsZS5zaGVldC5jc3NSdWxlcztcbiAgfVxuICByZXR1cm4gW107XG59XG5mdW5jdGlvbiBjcmVhdGVDU1NSdWxlKHNlbGVjdG9yLCBjc3NUZXh0LCBzdHlsZSA9IF9nZXRfXyhcImdldFNoYXJlZFN0eWxlU2hlZXRcIikoKSkge1xuICBpZiAoIXN0eWxlIHx8ICFjc3NUZXh0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHN0eWxlLnNoZWV0Lmluc2VydFJ1bGUoc2VsZWN0b3IgKyAneycgKyBjc3NUZXh0ICsgJ30nLCAwKTtcbn1cbmV4cG9ydHMuY3JlYXRlQ1NTUnVsZSA9IF9nZXRfXyhcImNyZWF0ZUNTU1J1bGVcIik7XG5mdW5jdGlvbiByZW1vdmVDU1NSdWxlc0NvbnRhaW5pbmdTZWxlY3RvcihydWxlTmFtZSwgc3R5bGUgPSBfZ2V0X18oXCJnZXRTaGFyZWRTdHlsZVNoZWV0XCIpKCkpIHtcbiAgaWYgKCFzdHlsZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBydWxlcyA9IF9nZXRfXyhcImdldER5bmFtaWNTdHlsZVNoZWV0UnVsZXNcIikoc3R5bGUpO1xuICBjb25zdCB0b0RlbGV0ZSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcnVsZSA9IHJ1bGVzW2ldO1xuICAgIGlmIChydWxlLnNlbGVjdG9yVGV4dC5pbmRleE9mKHJ1bGVOYW1lKSAhPT0gLTEpIHtcbiAgICAgIHRvRGVsZXRlLnB1c2goaSk7XG4gICAgfVxuICB9XG4gIGZvciAobGV0IGkgPSB0b0RlbGV0ZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHN0eWxlLnNoZWV0LmRlbGV0ZVJ1bGUodG9EZWxldGVbaV0pO1xuICB9XG59XG5leHBvcnRzLnJlbW92ZUNTU1J1bGVzQ29udGFpbmluZ1NlbGVjdG9yID0gX2dldF9fKFwicmVtb3ZlQ1NTUnVsZXNDb250YWluaW5nU2VsZWN0b3JcIik7XG5mdW5jdGlvbiBpc0hUTUxFbGVtZW50KG8pIHtcbiAgaWYgKHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gbyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50O1xuICB9XG4gIHJldHVybiBvICYmIHR5cGVvZiBvID09PSAnb2JqZWN0JyAmJiBvLm5vZGVUeXBlID09PSAxICYmIHR5cGVvZiBvLm5vZGVOYW1lID09PSAnc3RyaW5nJztcbn1cbmV4cG9ydHMuaXNIVE1MRWxlbWVudCA9IF9nZXRfXyhcImlzSFRNTEVsZW1lbnRcIik7XG5leHBvcnRzLkV2ZW50VHlwZSA9IHtcbiAgLy8gTW91c2VcbiAgQ0xJQ0s6ICdjbGljaycsXG4gIEFVWENMSUNLOiAnYXV4Y2xpY2snLFxuICBEQkxDTElDSzogJ2RibGNsaWNrJyxcbiAgTU9VU0VfVVA6ICdtb3VzZXVwJyxcbiAgTU9VU0VfRE9XTjogJ21vdXNlZG93bicsXG4gIE1PVVNFX09WRVI6ICdtb3VzZW92ZXInLFxuICBNT1VTRV9NT1ZFOiAnbW91c2Vtb3ZlJyxcbiAgTU9VU0VfT1VUOiAnbW91c2VvdXQnLFxuICBNT1VTRV9FTlRFUjogJ21vdXNlZW50ZXInLFxuICBNT1VTRV9MRUFWRTogJ21vdXNlbGVhdmUnLFxuICBNT1VTRV9XSEVFTDogJ3doZWVsJyxcbiAgUE9JTlRFUl9VUDogJ3BvaW50ZXJ1cCcsXG4gIFBPSU5URVJfRE9XTjogJ3BvaW50ZXJkb3duJyxcbiAgUE9JTlRFUl9NT1ZFOiAncG9pbnRlcm1vdmUnLFxuICBQT0lOVEVSX0xFQVZFOiAncG9pbnRlcmxlYXZlJyxcbiAgQ09OVEVYVF9NRU5VOiAnY29udGV4dG1lbnUnLFxuICBXSEVFTDogJ3doZWVsJyxcbiAgLy8gS2V5Ym9hcmRcbiAgS0VZX0RPV046ICdrZXlkb3duJyxcbiAgS0VZX1BSRVNTOiAna2V5cHJlc3MnLFxuICBLRVlfVVA6ICdrZXl1cCcsXG4gIC8vIEhUTUwgRG9jdW1lbnRcbiAgTE9BRDogJ2xvYWQnLFxuICBCRUZPUkVfVU5MT0FEOiAnYmVmb3JldW5sb2FkJyxcbiAgVU5MT0FEOiAndW5sb2FkJyxcbiAgUEFHRV9TSE9XOiAncGFnZXNob3cnLFxuICBQQUdFX0hJREU6ICdwYWdlaGlkZScsXG4gIEFCT1JUOiAnYWJvcnQnLFxuICBFUlJPUjogJ2Vycm9yJyxcbiAgUkVTSVpFOiAncmVzaXplJyxcbiAgU0NST0xMOiAnc2Nyb2xsJyxcbiAgRlVMTFNDUkVFTl9DSEFOR0U6ICdmdWxsc2NyZWVuY2hhbmdlJyxcbiAgV0tfRlVMTFNDUkVFTl9DSEFOR0U6ICd3ZWJraXRmdWxsc2NyZWVuY2hhbmdlJyxcbiAgLy8gRm9ybVxuICBTRUxFQ1Q6ICdzZWxlY3QnLFxuICBDSEFOR0U6ICdjaGFuZ2UnLFxuICBTVUJNSVQ6ICdzdWJtaXQnLFxuICBSRVNFVDogJ3Jlc2V0JyxcbiAgRk9DVVM6ICdmb2N1cycsXG4gIEZPQ1VTX0lOOiAnZm9jdXNpbicsXG4gIEZPQ1VTX09VVDogJ2ZvY3Vzb3V0JyxcbiAgQkxVUjogJ2JsdXInLFxuICBJTlBVVDogJ2lucHV0JyxcbiAgLy8gTG9jYWwgU3RvcmFnZVxuICBTVE9SQUdFOiAnc3RvcmFnZScsXG4gIC8vIERyYWdcbiAgRFJBR19TVEFSVDogJ2RyYWdzdGFydCcsXG4gIERSQUc6ICdkcmFnJyxcbiAgRFJBR19FTlRFUjogJ2RyYWdlbnRlcicsXG4gIERSQUdfTEVBVkU6ICdkcmFnbGVhdmUnLFxuICBEUkFHX09WRVI6ICdkcmFnb3ZlcicsXG4gIERST1A6ICdkcm9wJyxcbiAgRFJBR19FTkQ6ICdkcmFnZW5kJyxcbiAgLy8gQW5pbWF0aW9uXG4gIEFOSU1BVElPTl9TVEFSVDogX2dldF9fKFwiYnJvd3NlclwiKS5pc1dlYktpdCA/ICd3ZWJraXRBbmltYXRpb25TdGFydCcgOiAnYW5pbWF0aW9uc3RhcnQnLFxuICBBTklNQVRJT05fRU5EOiBfZ2V0X18oXCJicm93c2VyXCIpLmlzV2ViS2l0ID8gJ3dlYmtpdEFuaW1hdGlvbkVuZCcgOiAnYW5pbWF0aW9uZW5kJyxcbiAgQU5JTUFUSU9OX0lURVJBVElPTjogX2dldF9fKFwiYnJvd3NlclwiKS5pc1dlYktpdCA/ICd3ZWJraXRBbmltYXRpb25JdGVyYXRpb24nIDogJ2FuaW1hdGlvbml0ZXJhdGlvbidcbn07XG5leHBvcnRzLkV2ZW50SGVscGVyID0ge1xuICBzdG9wOiBmdW5jdGlvbiAoZSwgY2FuY2VsQnViYmxlKSB7XG4gICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSUU4XG4gICAgICBlLnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChjYW5jZWxCdWJibGUpIHtcbiAgICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSUU4XG4gICAgICAgIGUuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5mdW5jdGlvbiBzYXZlUGFyZW50c1Njcm9sbFRvcChub2RlKSB7XG4gIGNvbnN0IHIgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gbm9kZS5FTEVNRU5UX05PREU7IGkrKykge1xuICAgIHJbaV0gPSBub2RlLnNjcm9sbFRvcDtcbiAgICBub2RlID0gbm9kZS5wYXJlbnROb2RlO1xuICB9XG4gIHJldHVybiByO1xufVxuZXhwb3J0cy5zYXZlUGFyZW50c1Njcm9sbFRvcCA9IF9nZXRfXyhcInNhdmVQYXJlbnRzU2Nyb2xsVG9wXCIpO1xuZnVuY3Rpb24gcmVzdG9yZVBhcmVudHNTY3JvbGxUb3Aobm9kZSwgc3RhdGUpIHtcbiAgZm9yIChsZXQgaSA9IDA7IG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gbm9kZS5FTEVNRU5UX05PREU7IGkrKykge1xuICAgIGlmIChub2RlLnNjcm9sbFRvcCAhPT0gc3RhdGVbaV0pIHtcbiAgICAgIG5vZGUuc2Nyb2xsVG9wID0gc3RhdGVbaV07XG4gICAgfVxuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gIH1cbn1cbmV4cG9ydHMucmVzdG9yZVBhcmVudHNTY3JvbGxUb3AgPSBfZ2V0X18oXCJyZXN0b3JlUGFyZW50c1Njcm9sbFRvcFwiKTtcbmNsYXNzIEZvY3VzVHJhY2tlciB7XG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9vbkRpZEZvY3VzID0gbmV3IChfZ2V0X18oXCJldmVudF8yXCIpLkVtaXR0ZXIpKCk7XG4gICAgdGhpcy5vbkRpZEZvY3VzID0gdGhpcy5fb25EaWRGb2N1cy5ldmVudDtcbiAgICB0aGlzLl9vbkRpZEJsdXIgPSBuZXcgKF9nZXRfXyhcImV2ZW50XzJcIikuRW1pdHRlcikoKTtcbiAgICB0aGlzLm9uRGlkQmx1ciA9IHRoaXMuX29uRGlkQmx1ci5ldmVudDtcbiAgICB0aGlzLmRpc3Bvc2FibGVzID0gW107XG4gICAgbGV0IGhhc0ZvY3VzID0gX2dldF9fKFwiaXNBbmNlc3RvclwiKShkb2N1bWVudC5hY3RpdmVFbGVtZW50LCBlbGVtZW50KTtcbiAgICBsZXQgbG9vc2luZ0ZvY3VzID0gZmFsc2U7XG4gICAgY29uc3Qgb25Gb2N1cyA9ICgpID0+IHtcbiAgICAgIGxvb3NpbmdGb2N1cyA9IGZhbHNlO1xuICAgICAgaWYgKCFoYXNGb2N1cykge1xuICAgICAgICBoYXNGb2N1cyA9IHRydWU7XG4gICAgICAgIHRoaXMuX29uRGlkRm9jdXMuZmlyZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgY29uc3Qgb25CbHVyID0gKCkgPT4ge1xuICAgICAgaWYgKGhhc0ZvY3VzKSB7XG4gICAgICAgIGxvb3NpbmdGb2N1cyA9IHRydWU7XG4gICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBpZiAobG9vc2luZ0ZvY3VzKSB7XG4gICAgICAgICAgICBsb29zaW5nRm9jdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIGhhc0ZvY3VzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9vbkRpZEJsdXIuZmlyZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgMCk7XG4gICAgICB9XG4gICAgfTtcbiAgICAoMCwgX2dldF9fKFwiZXZlbnRfMVwiKS5kb21FdmVudCkoZWxlbWVudCwgZXhwb3J0cy5FdmVudFR5cGUuRk9DVVMsIHRydWUpKG9uRm9jdXMsIG51bGwsIHRoaXMuZGlzcG9zYWJsZXMpO1xuICAgICgwLCBfZ2V0X18oXCJldmVudF8xXCIpLmRvbUV2ZW50KShlbGVtZW50LCBleHBvcnRzLkV2ZW50VHlwZS5CTFVSLCB0cnVlKShvbkJsdXIsIG51bGwsIHRoaXMuZGlzcG9zYWJsZXMpO1xuICB9XG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5kaXNwb3NhYmxlcyA9ICgwLCBfZ2V0X18oXCJsaWZlY3ljbGVfMVwiKS5kaXNwb3NlKSh0aGlzLmRpc3Bvc2FibGVzKTtcbiAgICB0aGlzLl9vbkRpZEZvY3VzLmRpc3Bvc2UoKTtcbiAgICB0aGlzLl9vbkRpZEJsdXIuZGlzcG9zZSgpO1xuICB9XG59XG5mdW5jdGlvbiB0cmFja0ZvY3VzKGVsZW1lbnQpIHtcbiAgcmV0dXJuIG5ldyAoX2dldF9fKFwiRm9jdXNUcmFja2VyXCIpKShlbGVtZW50KTtcbn1cbmV4cG9ydHMudHJhY2tGb2N1cyA9IF9nZXRfXyhcInRyYWNrRm9jdXNcIik7XG5mdW5jdGlvbiBhcHBlbmQocGFyZW50LCAuLi5jaGlsZHJlbikge1xuICBjaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCkpO1xuICByZXR1cm4gY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV07XG59XG5leHBvcnRzLmFwcGVuZCA9IF9nZXRfXyhcImFwcGVuZFwiKTtcbmZ1bmN0aW9uIHByZXBlbmQocGFyZW50LCBjaGlsZCkge1xuICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBwYXJlbnQuZmlyc3RDaGlsZCk7XG4gIHJldHVybiBjaGlsZDtcbn1cbmV4cG9ydHMucHJlcGVuZCA9IF9nZXRfXyhcInByZXBlbmRcIik7XG5jb25zdCBTRUxFQ1RPUl9SRUdFWCA9IC8oW1xcd1xcXFwtXSspPygjKFtcXHdcXFxcLV0rKSk/KCguKFtcXHdcXFxcLV0rKSkqKS87XG5mdW5jdGlvbiAkKGRlc2NyaXB0aW9uLCBhdHRycywgLi4uY2hpbGRyZW4pIHtcbiAgY29uc3QgbWF0Y2ggPSBfZ2V0X18oXCJTRUxFQ1RPUl9SRUdFWFwiKS5leGVjKGRlc2NyaXB0aW9uKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQmFkIHVzZSBvZiBlbW1ldCcpO1xuICB9XG4gIGNvbnN0IHJlc3VsdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobWF0Y2hbMV0gfHwgJ2RpdicpO1xuICBpZiAobWF0Y2hbM10pIHtcbiAgICByZXN1bHQuaWQgPSBtYXRjaFszXTtcbiAgfVxuICBpZiAobWF0Y2hbNF0pIHtcbiAgICByZXN1bHQuY2xhc3NOYW1lID0gbWF0Y2hbNF0ucmVwbGFjZSgvXFwuL2csICcgJykudHJpbSgpO1xuICB9XG4gIGF0dHJzID0gYXR0cnMgfHwge307XG4gIE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKG5hbWUgPT4ge1xuICAgIGNvbnN0IHZhbHVlID0gYXR0cnNbbmFtZV07XG4gICAgaWYgKC9eb25cXHcrJC8udGVzdChuYW1lKSkge1xuICAgICAgcmVzdWx0W25hbWVdID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnc2VsZWN0ZWQnKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgcmVzdWx0LnNldEF0dHJpYnV0ZShuYW1lLCAndHJ1ZScpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICB9XG4gIH0pO1xuICAoMCwgX2dldF9fKFwiYXJyYXlzXzFcIikuY29hbGVzY2UpKGNoaWxkcmVuKS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICByZXN1bHQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY2hpbGQpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuZXhwb3J0cy4kID0gX2dldF9fKFwiJFwiKTtcbmZ1bmN0aW9uIGpvaW4obm9kZXMsIHNlcGFyYXRvcikge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgbm9kZXMuZm9yRWFjaCgobm9kZSwgaW5kZXgpID0+IHtcbiAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICBpZiAoc2VwYXJhdG9yIGluc3RhbmNlb2YgTm9kZSkge1xuICAgICAgICByZXN1bHQucHVzaChzZXBhcmF0b3IuY2xvbmVOb2RlKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnB1c2goZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoc2VwYXJhdG9yKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJlc3VsdC5wdXNoKG5vZGUpO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmV4cG9ydHMuam9pbiA9IF9nZXRfXyhcImpvaW5cIik7XG5mdW5jdGlvbiBzaG93KC4uLmVsZW1lbnRzKSB7XG4gIGZvciAoY29uc3QgZWxlbWVudCBvZiBlbGVtZW50cykge1xuICAgIGlmIChlbGVtZW50KSB7XG4gICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0cy5zaG93ID0gX2dldF9fKFwic2hvd1wiKTtcbmZ1bmN0aW9uIGhpZGUoLi4uZWxlbWVudHMpIHtcbiAgZm9yIChjb25zdCBlbGVtZW50IG9mIGVsZW1lbnRzKSB7XG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XG4gICAgfVxuICB9XG59XG5leHBvcnRzLmhpZGUgPSBfZ2V0X18oXCJoaWRlXCIpO1xuZnVuY3Rpb24gZmluZFBhcmVudFdpdGhBdHRyaWJ1dGUobm9kZSwgYXR0cmlidXRlKSB7XG4gIHdoaWxlIChub2RlKSB7XG4gICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiBub2RlLmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGUpKSB7XG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9XG4gICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIHJlbW92ZVRhYkluZGV4QW5kVXBkYXRlRm9jdXMobm9kZSkge1xuICBpZiAoIW5vZGUgfHwgIW5vZGUuaGFzQXR0cmlidXRlKCd0YWJJbmRleCcpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIElmIHdlIGFyZSB0aGUgY3VycmVudGx5IGZvY3VzZWQgZWxlbWVudCBhbmQgdGFiSW5kZXggaXMgcmVtb3ZlZCxcbiAgLy8gc3RhbmRhcmQgRE9NIGJlaGF2aW9yIGlzIHRvIG1vdmUgZm9jdXMgdG8gdGhlIDxib2R5PiBlbGVtZW50LiBXZVxuICAvLyB0eXBpY2FsbHkgbmV2ZXIgd2FudCB0aGF0LCByYXRoZXIgcHV0IGZvY3VzIHRvIHRoZSBjbG9zZXN0IGVsZW1lbnRcbiAgLy8gaW4gdGhlIGhpZXJhcmNoeSBvZiB0aGUgcGFyZW50IERPTSBub2Rlcy5cbiAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IG5vZGUpIHtcbiAgICBjb25zdCBwYXJlbnRGb2N1c2FibGUgPSBfZ2V0X18oXCJmaW5kUGFyZW50V2l0aEF0dHJpYnV0ZVwiKShub2RlLnBhcmVudEVsZW1lbnQsICd0YWJJbmRleCcpO1xuICAgIGlmIChwYXJlbnRGb2N1c2FibGUpIHtcbiAgICAgIHBhcmVudEZvY3VzYWJsZS5mb2N1cygpO1xuICAgIH1cbiAgfVxuICBub2RlLnJlbW92ZUF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbn1cbmV4cG9ydHMucmVtb3ZlVGFiSW5kZXhBbmRVcGRhdGVGb2N1cyA9IF9nZXRfXyhcInJlbW92ZVRhYkluZGV4QW5kVXBkYXRlRm9jdXNcIik7XG5mdW5jdGlvbiBnZXRFbGVtZW50c0J5VGFnTmFtZSh0YWcpIHtcbiAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZyksIDApO1xufVxuZXhwb3J0cy5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IF9nZXRfXyhcImdldEVsZW1lbnRzQnlUYWdOYW1lXCIpO1xuZnVuY3Rpb24gZmluYWxIYW5kbGVyKGZuKSB7XG4gIHJldHVybiBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBmbihlKTtcbiAgfTtcbn1cbmV4cG9ydHMuZmluYWxIYW5kbGVyID0gX2dldF9fKFwiZmluYWxIYW5kbGVyXCIpO1xuZnVuY3Rpb24gZG9tQ29udGVudExvYWRlZCgpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIGNvbnN0IHJlYWR5U3RhdGUgPSBkb2N1bWVudC5yZWFkeVN0YXRlO1xuICAgIGlmIChyZWFkeVN0YXRlID09PSAnY29tcGxldGUnIHx8IGRvY3VtZW50ICYmIGRvY3VtZW50LmJvZHkgIT09IG51bGwpIHtcbiAgICAgIF9nZXRfXyhcInBsYXRmb3JtXCIpLnNldEltbWVkaWF0ZShyZXNvbHZlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCByZXNvbHZlLCBmYWxzZSk7XG4gICAgfVxuICB9KTtcbn1cbmV4cG9ydHMuZG9tQ29udGVudExvYWRlZCA9IF9nZXRfXyhcImRvbUNvbnRlbnRMb2FkZWRcIik7XG4vKipcbiAqIEZpbmQgYSB2YWx1ZSB1c2FibGUgZm9yIGEgZG9tIG5vZGUgc2l6ZSBzdWNoIHRoYXQgdGhlIGxpa2VsaWhvb2QgdGhhdCBpdCB3b3VsZCBiZVxuICogZGlzcGxheWVkIHdpdGggY29uc3RhbnQgc2NyZWVuIHBpeGVscyBzaXplIGlzIGFzIGhpZ2ggYXMgcG9zc2libGUuXG4gKlxuICogZS5nLiBXZSB3b3VsZCBkZXNpcmUgZm9yIHRoZSBjdXJzb3JzIHRvIGJlIDJweCAoQ1NTIHB4KSB3aWRlLiBVbmRlciBhIGRldmljZVBpeGVsUmF0aW9cbiAqIG9mIDEuMjUsIHRoZSBjdXJzb3Igd2lsbCBiZSAyLjUgc2NyZWVuIHBpeGVscyB3aWRlLiBEZXBlbmRpbmcgb24gaG93IHRoZSBkb20gbm9kZSBhbGlnbnMvXCJzbmFwc1wiXG4gKiB3aXRoIHRoZSBzY3JlZW4gcGl4ZWxzLCBpdCB3aWxsIHNvbWV0aW1lcyBiZSByZW5kZXJlZCB3aXRoIDIgc2NyZWVuIHBpeGVscywgYW5kIHNvbWV0aW1lcyB3aXRoIDMgc2NyZWVuIHBpeGVscy5cbiAqL1xuZnVuY3Rpb24gY29tcHV0ZVNjcmVlbkF3YXJlU2l6ZShjc3NQeCkge1xuICBjb25zdCBzY3JlZW5QeCA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICogY3NzUHg7XG4gIHJldHVybiBNYXRoLm1heCgxLCBNYXRoLmZsb29yKHNjcmVlblB4KSkgLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcbn1cbmV4cG9ydHMuY29tcHV0ZVNjcmVlbkF3YXJlU2l6ZSA9IF9nZXRfXyhcImNvbXB1dGVTY3JlZW5Bd2FyZVNpemVcIik7XG4vKipcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L21vbmFjby1lZGl0b3IvaXNzdWVzLzYwMVxuICogVG8gcHJvdGVjdCBhZ2FpbnN0IG1hbGljaW91cyBjb2RlIGluIHRoZSBsaW5rZWQgc2l0ZSwgcGFydGljdWxhcmx5IHBoaXNoaW5nIGF0dGVtcHRzLFxuICogdGhlIHdpbmRvdy5vcGVuZXIgc2hvdWxkIGJlIHNldCB0byBudWxsIHRvIHByZXZlbnQgdGhlIGxpbmtlZCBzaXRlIGZyb20gaGF2aW5nIGFjY2Vzc1xuICogdG8gY2hhbmdlIHRoZSBsb2NhdGlvbiBvZiB0aGUgY3VycmVudCBwYWdlLlxuICogU2VlIGh0dHBzOi8vbWF0aGlhc2J5bmVucy5naXRodWIuaW8vcmVsLW5vb3BlbmVyL1xuICovXG5mdW5jdGlvbiB3aW5kb3dPcGVuTm9PcGVuZXIodXJsKSB7XG4gIGlmIChfZ2V0X18oXCJwbGF0Zm9ybVwiKS5pc05hdGl2ZSB8fCBfZ2V0X18oXCJicm93c2VyXCIpLmlzRWRnZVdlYlZpZXcpIHtcbiAgICAvLyBJbiBWU0NvZGUsIHdpbmRvdy5vcGVuKCkgYWx3YXlzIHJldHVybnMgbnVsbC4uLlxuICAgIC8vIFRoZSBzYW1lIGlzIHRydWUgZm9yIGEgV2ViVmlldyAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvbW9uYWNvLWVkaXRvci9pc3N1ZXMvNjI4KVxuICAgIHdpbmRvdy5vcGVuKHVybCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgbmV3VGFiID0gd2luZG93Lm9wZW4oKTtcbiAgICBpZiAobmV3VGFiKSB7XG4gICAgICBuZXdUYWIub3BlbmVyID0gbnVsbDtcbiAgICAgIG5ld1RhYi5sb2NhdGlvbi5ocmVmID0gdXJsO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0cy53aW5kb3dPcGVuTm9PcGVuZXIgPSBfZ2V0X18oXCJ3aW5kb3dPcGVuTm9PcGVuZXJcIik7XG5mdW5jdGlvbiBhbmltYXRlKGZuKSB7XG4gIGNvbnN0IHN0ZXAgPSAoKSA9PiB7XG4gICAgZm4oKTtcbiAgICBzdGVwRGlzcG9zYWJsZSA9ICgwLCBleHBvcnRzLnNjaGVkdWxlQXROZXh0QW5pbWF0aW9uRnJhbWUpKHN0ZXApO1xuICB9O1xuICBsZXQgc3RlcERpc3Bvc2FibGUgPSAoMCwgZXhwb3J0cy5zY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lKShzdGVwKTtcbiAgcmV0dXJuICgwLCBfZ2V0X18oXCJsaWZlY3ljbGVfMVwiKS50b0Rpc3Bvc2FibGUpKCgpID0+IHN0ZXBEaXNwb3NhYmxlLmRpc3Bvc2UoKSk7XG59XG5leHBvcnRzLmFuaW1hdGUgPSBfZ2V0X18oXCJhbmltYXRlXCIpO1xuZnVuY3Rpb24gX2dldEdsb2JhbE9iamVjdCgpIHtcbiAgdHJ5IHtcbiAgICBpZiAoISFnbG9iYWwpIHtcbiAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghIXdpbmRvdykge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxufVxuO1xudmFyIF9SZXdpcmVNb2R1bGVJZF9fID0gbnVsbDtcbmZ1bmN0aW9uIF9nZXRSZXdpcmVNb2R1bGVJZF9fKCkge1xuICBpZiAoX1Jld2lyZU1vZHVsZUlkX18gPT09IG51bGwpIHtcbiAgICBsZXQgZ2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gICAgaWYgKCFnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKSB7XG4gICAgICBnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fID0gMDtcbiAgICB9XG4gICAgX1Jld2lyZU1vZHVsZUlkX18gPSBfXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKys7XG4gIH1cbiAgcmV0dXJuIF9SZXdpcmVNb2R1bGVJZF9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZVJlZ2lzdHJ5X18oKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cbiAgcmV0dXJuIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlZERhdGFfXygpIHtcbiAgbGV0IG1vZHVsZUlkID0gX2dldFJld2lyZU1vZHVsZUlkX18oKTtcbiAgbGV0IHJlZ2lzdHJ5ID0gX2dldFJld2lyZVJlZ2lzdHJ5X18oKTtcbiAgbGV0IHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIGlmICghcmV3aXJlRGF0YSkge1xuICAgIHJlZ2lzdHJ5W21vZHVsZUlkXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgfVxuICByZXR1cm4gcmV3aXJlRGF0YTtcbn1cbihmdW5jdGlvbiByZWdpc3RlclJlc2V0QWxsKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH07XG4gIH1cbn0pKCk7XG52YXIgSU5URU5USU9OQUxfVU5ERUZJTkVEID0gJ19fSU5URU5USU9OQUxfVU5ERUZJTkVEX18nO1xubGV0IF9SZXdpcmVBUElfXyA9IHt9O1xuKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gYWRkUHJvcGVydHlUb0FQSU9iamVjdChuYW1lLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfUmV3aXJlQVBJX18sIG5hbWUsIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG59KSgpO1xuZnVuY3Rpb24gX2dldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdmFsdWUgPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgaWYgKHZhbHVlID09PSBJTlRFTlRJT05BTF9VTkRFRklORUQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHtcbiAgICBjYXNlIFwiX19jcmVhdGVCaW5kaW5nXCI6XG4gICAgICByZXR1cm4gX19jcmVhdGVCaW5kaW5nO1xuICAgIGNhc2UgXCJfX3NldE1vZHVsZURlZmF1bHRcIjpcbiAgICAgIHJldHVybiBfX3NldE1vZHVsZURlZmF1bHQ7XG4gICAgY2FzZSBcIl9faW1wb3J0U3RhclwiOlxuICAgICAgcmV0dXJuIF9faW1wb3J0U3RhcjtcbiAgICBjYXNlIFwiY2xlYXJOb2RlXCI6XG4gICAgICByZXR1cm4gY2xlYXJOb2RlO1xuICAgIGNhc2UgXCJyZW1vdmVOb2RlXCI6XG4gICAgICByZXR1cm4gcmVtb3ZlTm9kZTtcbiAgICBjYXNlIFwiaXNJbkRPTVwiOlxuICAgICAgcmV0dXJuIGlzSW5ET007XG4gICAgY2FzZSBcImFkZERpc3Bvc2FibGVMaXN0ZW5lclwiOlxuICAgICAgcmV0dXJuIGFkZERpc3Bvc2FibGVMaXN0ZW5lcjtcbiAgICBjYXNlIFwia2V5Ym9hcmRFdmVudF8xXCI6XG4gICAgICByZXR1cm4ga2V5Ym9hcmRFdmVudF8xO1xuICAgIGNhc2UgXCJNb2RpZmllcktleUVtaXR0ZXJcIjpcbiAgICAgIHJldHVybiBNb2RpZmllcktleUVtaXR0ZXI7XG4gICAgY2FzZSBcImV2ZW50XzJcIjpcbiAgICAgIHJldHVybiBldmVudF8yO1xuICAgIGNhc2UgXCJicm93c2VyXCI6XG4gICAgICByZXR1cm4gYnJvd3NlcjtcbiAgICBjYXNlIFwiX21hbnVhbENsYXNzTGlzdFwiOlxuICAgICAgcmV0dXJuIF9tYW51YWxDbGFzc0xpc3Q7XG4gICAgY2FzZSBcIl9uYXRpdmVDbGFzc0xpc3RcIjpcbiAgICAgIHJldHVybiBfbmF0aXZlQ2xhc3NMaXN0O1xuICAgIGNhc2UgXCJfY2xhc3NMaXN0XCI6XG4gICAgICByZXR1cm4gX2NsYXNzTGlzdDtcbiAgICBjYXNlIFwiRG9tTGlzdGVuZXJcIjpcbiAgICAgIHJldHVybiBEb21MaXN0ZW5lcjtcbiAgICBjYXNlIFwibW91c2VFdmVudF8xXCI6XG4gICAgICByZXR1cm4gbW91c2VFdmVudF8xO1xuICAgIGNhc2UgXCJfd3JhcEFzU3RhbmRhcmRNb3VzZUV2ZW50XCI6XG4gICAgICByZXR1cm4gX3dyYXBBc1N0YW5kYXJkTW91c2VFdmVudDtcbiAgICBjYXNlIFwiX3dyYXBBc1N0YW5kYXJkS2V5Ym9hcmRFdmVudFwiOlxuICAgICAgcmV0dXJuIF93cmFwQXNTdGFuZGFyZEtleWJvYXJkRXZlbnQ7XG4gICAgY2FzZSBcImFkZFN0YW5kYXJkRGlzcG9zYWJsZUxpc3RlbmVyXCI6XG4gICAgICByZXR1cm4gYWRkU3RhbmRhcmREaXNwb3NhYmxlTGlzdGVuZXI7XG4gICAgY2FzZSBcImFkZERpc3Bvc2FibGVOb25CdWJibGluZ01vdXNlT3V0TGlzdGVuZXJcIjpcbiAgICAgIHJldHVybiBhZGREaXNwb3NhYmxlTm9uQnViYmxpbmdNb3VzZU91dExpc3RlbmVyO1xuICAgIGNhc2UgXCJfYW5pbWF0aW9uRnJhbWVcIjpcbiAgICAgIHJldHVybiBfYW5pbWF0aW9uRnJhbWU7XG4gICAgY2FzZSBcIkFuaW1hdGlvbkZyYW1lUXVldWVJdGVtXCI6XG4gICAgICByZXR1cm4gQW5pbWF0aW9uRnJhbWVRdWV1ZUl0ZW07XG4gICAgY2FzZSBcImRvUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCI6XG4gICAgICByZXR1cm4gZG9SZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgY2FzZSBcIm1lYXN1cmVcIjpcbiAgICAgIHJldHVybiBtZWFzdXJlO1xuICAgIGNhc2UgXCJtb2RpZnlcIjpcbiAgICAgIHJldHVybiBtb2RpZnk7XG4gICAgY2FzZSBcIkRFRkFVTFRfRVZFTlRfTUVSR0VSXCI6XG4gICAgICByZXR1cm4gREVGQVVMVF9FVkVOVF9NRVJHRVI7XG4gICAgY2FzZSBcIk1JTklNVU1fVElNRV9NU1wiOlxuICAgICAgcmV0dXJuIE1JTklNVU1fVElNRV9NUztcbiAgICBjYXNlIFwiYXN5bmNfMVwiOlxuICAgICAgcmV0dXJuIGFzeW5jXzE7XG4gICAgY2FzZSBcImxpZmVjeWNsZV8xXCI6XG4gICAgICByZXR1cm4gbGlmZWN5Y2xlXzE7XG4gICAgY2FzZSBcIlRpbWVvdXRUaHJvdHRsZWREb21MaXN0ZW5lclwiOlxuICAgICAgcmV0dXJuIFRpbWVvdXRUaHJvdHRsZWREb21MaXN0ZW5lcjtcbiAgICBjYXNlIFwiYWRkRGlzcG9zYWJsZVRocm90dGxlZExpc3RlbmVyXCI6XG4gICAgICByZXR1cm4gYWRkRGlzcG9zYWJsZVRocm90dGxlZExpc3RlbmVyO1xuICAgIGNhc2UgXCJnZXRDb21wdXRlZFN0eWxlXCI6XG4gICAgICByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZTtcbiAgICBjYXNlIFwiY29udmVydFRvUGl4ZWxzXCI6XG4gICAgICByZXR1cm4gY29udmVydFRvUGl4ZWxzO1xuICAgIGNhc2UgXCJEaW1lbnNpb25cIjpcbiAgICAgIHJldHVybiBEaW1lbnNpb247XG4gICAgY2FzZSBcImdldENsaWVudEFyZWFcIjpcbiAgICAgIHJldHVybiBnZXRDbGllbnRBcmVhO1xuICAgIGNhc2UgXCJnZXREb21Ob2RlWm9vbUxldmVsXCI6XG4gICAgICByZXR1cm4gZ2V0RG9tTm9kZVpvb21MZXZlbDtcbiAgICBjYXNlIFwiZ2V0RGltZW5zaW9uXCI6XG4gICAgICByZXR1cm4gZ2V0RGltZW5zaW9uO1xuICAgIGNhc2UgXCJzaXplVXRpbHNcIjpcbiAgICAgIHJldHVybiBzaXplVXRpbHM7XG4gICAgY2FzZSBcImdldFRvcExlZnRPZmZzZXRcIjpcbiAgICAgIHJldHVybiBnZXRUb3BMZWZ0T2Zmc2V0O1xuICAgIGNhc2UgXCJzaXplXCI6XG4gICAgICByZXR1cm4gc2l6ZTtcbiAgICBjYXNlIFwicG9zaXRpb25cIjpcbiAgICAgIHJldHVybiBwb3NpdGlvbjtcbiAgICBjYXNlIFwiZ2V0RG9tTm9kZVBhZ2VQb3NpdGlvblwiOlxuICAgICAgcmV0dXJuIGdldERvbU5vZGVQYWdlUG9zaXRpb247XG4gICAgY2FzZSBcImdldFRvdGFsV2lkdGhcIjpcbiAgICAgIHJldHVybiBnZXRUb3RhbFdpZHRoO1xuICAgIGNhc2UgXCJnZXRDb250ZW50V2lkdGhcIjpcbiAgICAgIHJldHVybiBnZXRDb250ZW50V2lkdGg7XG4gICAgY2FzZSBcImdldFRvdGFsU2Nyb2xsV2lkdGhcIjpcbiAgICAgIHJldHVybiBnZXRUb3RhbFNjcm9sbFdpZHRoO1xuICAgIGNhc2UgXCJnZXRDb250ZW50SGVpZ2h0XCI6XG4gICAgICByZXR1cm4gZ2V0Q29udGVudEhlaWdodDtcbiAgICBjYXNlIFwiZ2V0VG90YWxIZWlnaHRcIjpcbiAgICAgIHJldHVybiBnZXRUb3RhbEhlaWdodDtcbiAgICBjYXNlIFwiZ2V0UmVsYXRpdmVMZWZ0XCI6XG4gICAgICByZXR1cm4gZ2V0UmVsYXRpdmVMZWZ0O1xuICAgIGNhc2UgXCJnZXRMYXJnZXN0Q2hpbGRXaWR0aFwiOlxuICAgICAgcmV0dXJuIGdldExhcmdlc3RDaGlsZFdpZHRoO1xuICAgIGNhc2UgXCJpc0FuY2VzdG9yXCI6XG4gICAgICByZXR1cm4gaXNBbmNlc3RvcjtcbiAgICBjYXNlIFwiZmluZFBhcmVudFdpdGhDbGFzc1wiOlxuICAgICAgcmV0dXJuIGZpbmRQYXJlbnRXaXRoQ2xhc3M7XG4gICAgY2FzZSBcImNyZWF0ZVN0eWxlU2hlZXRcIjpcbiAgICAgIHJldHVybiBjcmVhdGVTdHlsZVNoZWV0O1xuICAgIGNhc2UgXCJfc2hhcmVkU3R5bGVTaGVldFwiOlxuICAgICAgcmV0dXJuIF9zaGFyZWRTdHlsZVNoZWV0O1xuICAgIGNhc2UgXCJnZXRTaGFyZWRTdHlsZVNoZWV0XCI6XG4gICAgICByZXR1cm4gZ2V0U2hhcmVkU3R5bGVTaGVldDtcbiAgICBjYXNlIFwiY3JlYXRlQ1NTUnVsZVwiOlxuICAgICAgcmV0dXJuIGNyZWF0ZUNTU1J1bGU7XG4gICAgY2FzZSBcImdldER5bmFtaWNTdHlsZVNoZWV0UnVsZXNcIjpcbiAgICAgIHJldHVybiBnZXREeW5hbWljU3R5bGVTaGVldFJ1bGVzO1xuICAgIGNhc2UgXCJyZW1vdmVDU1NSdWxlc0NvbnRhaW5pbmdTZWxlY3RvclwiOlxuICAgICAgcmV0dXJuIHJlbW92ZUNTU1J1bGVzQ29udGFpbmluZ1NlbGVjdG9yO1xuICAgIGNhc2UgXCJpc0hUTUxFbGVtZW50XCI6XG4gICAgICByZXR1cm4gaXNIVE1MRWxlbWVudDtcbiAgICBjYXNlIFwic2F2ZVBhcmVudHNTY3JvbGxUb3BcIjpcbiAgICAgIHJldHVybiBzYXZlUGFyZW50c1Njcm9sbFRvcDtcbiAgICBjYXNlIFwicmVzdG9yZVBhcmVudHNTY3JvbGxUb3BcIjpcbiAgICAgIHJldHVybiByZXN0b3JlUGFyZW50c1Njcm9sbFRvcDtcbiAgICBjYXNlIFwiZXZlbnRfMVwiOlxuICAgICAgcmV0dXJuIGV2ZW50XzE7XG4gICAgY2FzZSBcIkZvY3VzVHJhY2tlclwiOlxuICAgICAgcmV0dXJuIEZvY3VzVHJhY2tlcjtcbiAgICBjYXNlIFwidHJhY2tGb2N1c1wiOlxuICAgICAgcmV0dXJuIHRyYWNrRm9jdXM7XG4gICAgY2FzZSBcImFwcGVuZFwiOlxuICAgICAgcmV0dXJuIGFwcGVuZDtcbiAgICBjYXNlIFwicHJlcGVuZFwiOlxuICAgICAgcmV0dXJuIHByZXBlbmQ7XG4gICAgY2FzZSBcIlNFTEVDVE9SX1JFR0VYXCI6XG4gICAgICByZXR1cm4gU0VMRUNUT1JfUkVHRVg7XG4gICAgY2FzZSBcImFycmF5c18xXCI6XG4gICAgICByZXR1cm4gYXJyYXlzXzE7XG4gICAgY2FzZSBcIiRcIjpcbiAgICAgIHJldHVybiAkO1xuICAgIGNhc2UgXCJqb2luXCI6XG4gICAgICByZXR1cm4gam9pbjtcbiAgICBjYXNlIFwic2hvd1wiOlxuICAgICAgcmV0dXJuIHNob3c7XG4gICAgY2FzZSBcImhpZGVcIjpcbiAgICAgIHJldHVybiBoaWRlO1xuICAgIGNhc2UgXCJmaW5kUGFyZW50V2l0aEF0dHJpYnV0ZVwiOlxuICAgICAgcmV0dXJuIGZpbmRQYXJlbnRXaXRoQXR0cmlidXRlO1xuICAgIGNhc2UgXCJyZW1vdmVUYWJJbmRleEFuZFVwZGF0ZUZvY3VzXCI6XG4gICAgICByZXR1cm4gcmVtb3ZlVGFiSW5kZXhBbmRVcGRhdGVGb2N1cztcbiAgICBjYXNlIFwiZ2V0RWxlbWVudHNCeVRhZ05hbWVcIjpcbiAgICAgIHJldHVybiBnZXRFbGVtZW50c0J5VGFnTmFtZTtcbiAgICBjYXNlIFwiZmluYWxIYW5kbGVyXCI6XG4gICAgICByZXR1cm4gZmluYWxIYW5kbGVyO1xuICAgIGNhc2UgXCJwbGF0Zm9ybVwiOlxuICAgICAgcmV0dXJuIHBsYXRmb3JtO1xuICAgIGNhc2UgXCJkb21Db250ZW50TG9hZGVkXCI6XG4gICAgICByZXR1cm4gZG9tQ29udGVudExvYWRlZDtcbiAgICBjYXNlIFwiY29tcHV0ZVNjcmVlbkF3YXJlU2l6ZVwiOlxuICAgICAgcmV0dXJuIGNvbXB1dGVTY3JlZW5Bd2FyZVNpemU7XG4gICAgY2FzZSBcIndpbmRvd09wZW5Ob09wZW5lclwiOlxuICAgICAgcmV0dXJuIHdpbmRvd09wZW5Ob09wZW5lcjtcbiAgICBjYXNlIFwiYW5pbWF0ZVwiOlxuICAgICAgcmV0dXJuIGFuaW1hdGU7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIF92YWx1ZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJfYW5pbWF0aW9uRnJhbWVcIjpcbiAgICAgIHJldHVybiBfYW5pbWF0aW9uRnJhbWUgPSBfdmFsdWU7XG4gICAgY2FzZSBcIl9zaGFyZWRTdHlsZVNoZWV0XCI6XG4gICAgICByZXR1cm4gX3NoYXJlZFN0eWxlU2hlZXQgPSBfdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF91cGRhdGVfb3BlcmF0aW9uX18ob3BlcmF0aW9uLCB2YXJpYWJsZU5hbWUsIHByZWZpeCkge1xuICB2YXIgb2xkVmFsdWUgPSBfZ2V0X18odmFyaWFibGVOYW1lKTtcbiAgdmFyIG5ld1ZhbHVlID0gb3BlcmF0aW9uID09PSAnKysnID8gb2xkVmFsdWUgKyAxIDogb2xkVmFsdWUgLSAxO1xuICBfYXNzaWduX18odmFyaWFibGVOYW1lLCBuZXdWYWx1ZSk7XG4gIHJldHVybiBwcmVmaXggPyBuZXdWYWx1ZSA6IG9sZFZhbHVlO1xufVxuZnVuY3Rpb24gX3NldF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAodHlwZW9mIHZhcmlhYmxlTmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbbmFtZV0gPSB2YXJpYWJsZU5hbWVbbmFtZV07XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gSU5URU5USU9OQUxfVU5ERUZJTkVEO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gX3Jlc2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgZGVsZXRlIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgaWYgKE9iamVjdC5rZXlzKHJld2lyZURhdGEpLmxlbmd0aCA9PSAwKSB7XG4gICAgZGVsZXRlIF9nZXRSZXdpcmVSZWdpc3RyeV9fKClbX2dldFJld2lyZU1vZHVsZUlkX19dO1xuICB9XG4gIDtcbn1cbmZ1bmN0aW9uIF93aXRoX18ob2JqZWN0KSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgdmFyIHJld2lyZWRWYXJpYWJsZU5hbWVzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcbiAgdmFyIHByZXZpb3VzVmFsdWVzID0ge307XG4gIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gb2JqZWN0W3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gICAgbGV0IHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gICAgaWYgKCEhcmVzdWx0ICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXN1bHQudGhlbihyZXNldCkuY2F0Y2gocmVzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNldCgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxubGV0IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9IHR5cGVvZiBtb2R1bGUuZXhwb3J0cztcbmZ1bmN0aW9uIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsIG5hbWUsIHtcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuaWYgKChfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdvYmplY3QnIHx8IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ2Z1bmN0aW9uJykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShtb2R1bGUuZXhwb3J0cykpIHtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX193aXRoX18nLCBfd2l0aF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZUFQSV9fJywgX1Jld2lyZUFQSV9fKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLlJlbGF5ID0gZXhwb3J0cy5FdmVudEJ1ZmZlcmVyID0gZXhwb3J0cy5Bc3luY0VtaXR0ZXIgPSBleHBvcnRzLkVtaXR0ZXIgPSBleHBvcnRzLnNldEdsb2JhbExlYWtXYXJuaW5nVGhyZXNob2xkID0gZXhwb3J0cy5FdmVudCA9IHZvaWQgMDtcbmNvbnN0IGxpZmVjeWNsZV8xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9saWZlY3ljbGVcIik7XG5jb25zdCBsaW5rZWRMaXN0XzEgPSByZXF1aXJlKFwiLi4vY29tbW9uL2xpbmtlZExpc3RcIik7XG52YXIgRXZlbnQ7XG4oZnVuY3Rpb24gKEV2ZW50KSB7XG4gIGNvbnN0IF9kaXNwb3NhYmxlID0ge1xuICAgIGRpc3Bvc2UoKSB7fVxuICB9O1xuICBFdmVudC5Ob25lID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfZGlzcG9zYWJsZTtcbiAgfTtcbiAgLyoqXG4gICAqIEdpdmVuIGFuIGV2ZW50LCByZXR1cm5zIGFub3RoZXIgZXZlbnQgd2hpY2ggb25seSBmaXJlcyBvbmNlLlxuICAgKi9cbiAgZnVuY3Rpb24gb25jZShldmVudCkge1xuICAgIHJldHVybiAobGlzdGVuZXIsIHRoaXNBcmdzID0gbnVsbCwgZGlzcG9zYWJsZXMpID0+IHtcbiAgICAgIC8vIHdlIG5lZWQgdGhpcywgaW4gY2FzZSB0aGUgZXZlbnQgZmlyZXMgZHVyaW5nIHRoZSBsaXN0ZW5lciBjYWxsXG4gICAgICBsZXQgZGlkRmlyZSA9IGZhbHNlO1xuICAgICAgY29uc3QgcmVzdWx0ID0gZXZlbnQoZSA9PiB7XG4gICAgICAgIGlmIChkaWRGaXJlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdC5kaXNwb3NlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGlkRmlyZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3RlbmVyLmNhbGwodGhpc0FyZ3MsIGUpO1xuICAgICAgfSwgbnVsbCwgZGlzcG9zYWJsZXMpO1xuICAgICAgaWYgKGRpZEZpcmUpIHtcbiAgICAgICAgcmVzdWx0LmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfVxuICBFdmVudC5vbmNlID0gb25jZTtcbiAgLyoqXG4gICAqIEdpdmVuIGFuIGV2ZW50IGFuZCBhIGBtYXBgIGZ1bmN0aW9uLCByZXR1cm5zIGFub3RoZXIgZXZlbnQgd2hpY2ggbWFwcyBlYWNoIGVsZW1lbnRcbiAgICogdGhyb3VnaHQgdGhlIG1hcHBpbmcgZnVuY3Rpb24uXG4gICAqL1xuICBmdW5jdGlvbiBtYXAoZXZlbnQsIG1hcCkge1xuICAgIHJldHVybiAobGlzdGVuZXIsIHRoaXNBcmdzID0gbnVsbCwgZGlzcG9zYWJsZXMpID0+IGV2ZW50KGkgPT4gbGlzdGVuZXIuY2FsbCh0aGlzQXJncywgbWFwKGkpKSwgbnVsbCwgZGlzcG9zYWJsZXMpO1xuICB9XG4gIEV2ZW50Lm1hcCA9IG1hcDtcbiAgLyoqXG4gICAqIEdpdmVuIGFuIGV2ZW50IGFuZCBhbiBgZWFjaGAgZnVuY3Rpb24sIHJldHVybnMgYW5vdGhlciBpZGVudGljYWwgZXZlbnQgYW5kIGNhbGxzXG4gICAqIHRoZSBgZWFjaGAgZnVuY3Rpb24gcGVyIGVhY2ggZWxlbWVudC5cbiAgICovXG4gIGZ1bmN0aW9uIGZvckVhY2goZXZlbnQsIGVhY2gpIHtcbiAgICByZXR1cm4gKGxpc3RlbmVyLCB0aGlzQXJncyA9IG51bGwsIGRpc3Bvc2FibGVzKSA9PiBldmVudChpID0+IHtcbiAgICAgIGVhY2goaSk7XG4gICAgICBsaXN0ZW5lci5jYWxsKHRoaXNBcmdzLCBpKTtcbiAgICB9LCBudWxsLCBkaXNwb3NhYmxlcyk7XG4gIH1cbiAgRXZlbnQuZm9yRWFjaCA9IGZvckVhY2g7XG4gIGZ1bmN0aW9uIGZpbHRlcihldmVudCwgZmlsdGVyKSB7XG4gICAgcmV0dXJuIChsaXN0ZW5lciwgdGhpc0FyZ3MgPSBudWxsLCBkaXNwb3NhYmxlcykgPT4gZXZlbnQoZSA9PiBmaWx0ZXIoZSkgJiYgbGlzdGVuZXIuY2FsbCh0aGlzQXJncywgZSksIG51bGwsIGRpc3Bvc2FibGVzKTtcbiAgfVxuICBFdmVudC5maWx0ZXIgPSBmaWx0ZXI7XG4gIC8qKlxuICAgKiBHaXZlbiBhbiBldmVudCwgcmV0dXJucyB0aGUgc2FtZSBldmVudCBidXQgdHlwZWQgYXMgYEV2ZW50PHZvaWQ+YC5cbiAgICovXG4gIGZ1bmN0aW9uIHNpZ25hbChldmVudCkge1xuICAgIHJldHVybiBldmVudDtcbiAgfVxuICBFdmVudC5zaWduYWwgPSBzaWduYWw7XG4gIC8qKlxuICAgKiBHaXZlbiBhIGNvbGxlY3Rpb24gb2YgZXZlbnRzLCByZXR1cm5zIGEgc2luZ2xlIGV2ZW50IHdoaWNoIGVtaXRzXG4gICAqIHdoZW5ldmVyIGFueSBvZiB0aGUgcHJvdmlkZWQgZXZlbnRzIGVtaXQuXG4gICAqL1xuICBmdW5jdGlvbiBhbnkoLi4uZXZlbnRzKSB7XG4gICAgcmV0dXJuIChsaXN0ZW5lciwgdGhpc0FyZ3MgPSBudWxsLCBkaXNwb3NhYmxlcykgPT4gKDAsIF9nZXRfXyhcImxpZmVjeWNsZV8xXCIpLmNvbWJpbmVkRGlzcG9zYWJsZSkoZXZlbnRzLm1hcChldmVudCA9PiBldmVudChlID0+IGxpc3RlbmVyLmNhbGwodGhpc0FyZ3MsIGUpLCBudWxsLCBkaXNwb3NhYmxlcykpKTtcbiAgfVxuICBFdmVudC5hbnkgPSBhbnk7XG4gIC8qKlxuICAgKiBHaXZlbiBhbiBldmVudCBhbmQgYSBgbWVyZ2VgIGZ1bmN0aW9uLCByZXR1cm5zIGFub3RoZXIgZXZlbnQgd2hpY2ggbWFwcyBlYWNoIGVsZW1lbnRcbiAgICogYW5kIHRoZSBjdW1tdWxhdGl2ZSByZXN1bHQgdGhyb3VnaHQgdGhlIGBtZXJnZWAgZnVuY3Rpb24uIFNpbWlsYXIgdG8gYG1hcGAsIGJ1dCB3aXRoIG1lbW9yeS5cbiAgICovXG4gIGZ1bmN0aW9uIHJlZHVjZShldmVudCwgbWVyZ2UsIGluaXRpYWwpIHtcbiAgICBsZXQgb3V0cHV0ID0gaW5pdGlhbDtcbiAgICByZXR1cm4gbWFwKGV2ZW50LCBlID0+IHtcbiAgICAgIG91dHB1dCA9IG1lcmdlKG91dHB1dCwgZSk7XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH0pO1xuICB9XG4gIEV2ZW50LnJlZHVjZSA9IHJlZHVjZTtcbiAgZnVuY3Rpb24gZGVib3VuY2UoZXZlbnQsIG1lcmdlLCBkZWxheSA9IDEwMCwgbGVhZGluZyA9IGZhbHNlLCBsZWFrV2FybmluZ1RocmVzaG9sZCkge1xuICAgIGxldCBzdWJzY3JpcHRpb247XG4gICAgbGV0IG91dHB1dDtcbiAgICBsZXQgaGFuZGxlO1xuICAgIGxldCBudW1EZWJvdW5jZWRDYWxscyA9IDA7XG4gICAgY29uc3QgZW1pdHRlciA9IG5ldyAoX2dldF9fKFwiRW1pdHRlclwiKSkoe1xuICAgICAgbGVha1dhcm5pbmdUaHJlc2hvbGQsXG4gICAgICBvbkZpcnN0TGlzdGVuZXJBZGQoKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IGV2ZW50KGN1ciA9PiB7XG4gICAgICAgICAgbnVtRGVib3VuY2VkQ2FsbHMrKztcbiAgICAgICAgICBvdXRwdXQgPSBtZXJnZShvdXRwdXQsIGN1cik7XG4gICAgICAgICAgaWYgKGxlYWRpbmcgJiYgIWhhbmRsZSkge1xuICAgICAgICAgICAgZW1pdHRlci5maXJlKG91dHB1dCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNsZWFyVGltZW91dChoYW5kbGUpO1xuICAgICAgICAgIGhhbmRsZSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgX291dHB1dCA9IG91dHB1dDtcbiAgICAgICAgICAgIG91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGhhbmRsZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmICghbGVhZGluZyB8fCBudW1EZWJvdW5jZWRDYWxscyA+IDEpIHtcbiAgICAgICAgICAgICAgZW1pdHRlci5maXJlKF9vdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbnVtRGVib3VuY2VkQ2FsbHMgPSAwO1xuICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgb25MYXN0TGlzdGVuZXJSZW1vdmUoKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGVtaXR0ZXIuZXZlbnQ7XG4gIH1cbiAgRXZlbnQuZGVib3VuY2UgPSBkZWJvdW5jZTtcbiAgLyoqXG4gICAqIEdpdmVuIGFuIGV2ZW50LCBpdCByZXR1cm5zIGFub3RoZXIgZXZlbnQgd2hpY2ggZmlyZXMgb25seSBvbmNlIGFuZCBhcyBzb29uIGFzXG4gICAqIHRoZSBpbnB1dCBldmVudCBlbWl0cy4gVGhlIGV2ZW50IGRhdGEgaXMgdGhlIG51bWJlciBvZiBtaWxsaXMgaXQgdG9vayBmb3IgdGhlXG4gICAqIGV2ZW50IHRvIGZpcmUuXG4gICAqL1xuICBmdW5jdGlvbiBzdG9wd2F0Y2goZXZlbnQpIHtcbiAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgIHJldHVybiBtYXAob25jZShldmVudCksIF8gPT4gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydCk7XG4gIH1cbiAgRXZlbnQuc3RvcHdhdGNoID0gc3RvcHdhdGNoO1xuICAvKipcbiAgICogR2l2ZW4gYW4gZXZlbnQsIGl0IHJldHVybnMgYW5vdGhlciBldmVudCB3aGljaCBmaXJlcyBvbmx5IHdoZW4gdGhlIGV2ZW50XG4gICAqIGVsZW1lbnQgY2hhbmdlcy5cbiAgICovXG4gIGZ1bmN0aW9uIGxhdGNoKGV2ZW50KSB7XG4gICAgbGV0IGZpcnN0Q2FsbCA9IHRydWU7XG4gICAgbGV0IGNhY2hlO1xuICAgIHJldHVybiBmaWx0ZXIoZXZlbnQsIHZhbHVlID0+IHtcbiAgICAgIGNvbnN0IHNob3VsZEVtaXQgPSBmaXJzdENhbGwgfHwgdmFsdWUgIT09IGNhY2hlO1xuICAgICAgZmlyc3RDYWxsID0gZmFsc2U7XG4gICAgICBjYWNoZSA9IHZhbHVlO1xuICAgICAgcmV0dXJuIHNob3VsZEVtaXQ7XG4gICAgfSk7XG4gIH1cbiAgRXZlbnQubGF0Y2ggPSBsYXRjaDtcbiAgLyoqXG4gICAqIEJ1ZmZlcnMgdGhlIHByb3ZpZGVkIGV2ZW50IHVudGlsIGEgZmlyc3QgbGlzdGVuZXIgY29tZXNcbiAgICogYWxvbmcsIGF0IHdoaWNoIHBvaW50IGZpcmUgYWxsIHRoZSBldmVudHMgYXQgb25jZSBhbmRcbiAgICogcGlwZSB0aGUgZXZlbnQgZnJvbSB0aGVuIG9uLlxuICAgKlxuICAgKiBgYGB0eXBlc2NyaXB0XG4gICAqIGNvbnN0IGVtaXR0ZXIgPSBuZXcgRW1pdHRlcjxudW1iZXI+KCk7XG4gICAqIGNvbnN0IGV2ZW50ID0gZW1pdHRlci5ldmVudDtcbiAgICogY29uc3QgYnVmZmVyZWRFdmVudCA9IGJ1ZmZlcihldmVudCk7XG4gICAqXG4gICAqIGVtaXR0ZXIuZmlyZSgxKTtcbiAgICogZW1pdHRlci5maXJlKDIpO1xuICAgKiBlbWl0dGVyLmZpcmUoMyk7XG4gICAqIC8vIG5vdGhpbmcuLi5cbiAgICpcbiAgICogY29uc3QgbGlzdGVuZXIgPSBidWZmZXJlZEV2ZW50KG51bSA9PiBjb25zb2xlLmxvZyhudW0pKTtcbiAgICogLy8gMSwgMiwgM1xuICAgKlxuICAgKiBlbWl0dGVyLmZpcmUoNCk7XG4gICAqIC8vIDRcbiAgICogYGBgXG4gICAqL1xuICBmdW5jdGlvbiBidWZmZXIoZXZlbnQsIG5leHRUaWNrID0gZmFsc2UsIF9idWZmZXIgPSBbXSkge1xuICAgIGxldCBidWZmZXIgPSBfYnVmZmVyLnNsaWNlKCk7XG4gICAgbGV0IGxpc3RlbmVyID0gZXZlbnQoZSA9PiB7XG4gICAgICBpZiAoYnVmZmVyKSB7XG4gICAgICAgIGJ1ZmZlci5wdXNoKGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW1pdHRlci5maXJlKGUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGZsdXNoID0gKCkgPT4ge1xuICAgICAgaWYgKGJ1ZmZlcikge1xuICAgICAgICBidWZmZXIuZm9yRWFjaChlID0+IGVtaXR0ZXIuZmlyZShlKSk7XG4gICAgICB9XG4gICAgICBidWZmZXIgPSBudWxsO1xuICAgIH07XG4gICAgY29uc3QgZW1pdHRlciA9IG5ldyAoX2dldF9fKFwiRW1pdHRlclwiKSkoe1xuICAgICAgb25GaXJzdExpc3RlbmVyQWRkKCkge1xuICAgICAgICBpZiAoIWxpc3RlbmVyKSB7XG4gICAgICAgICAgbGlzdGVuZXIgPSBldmVudChlID0+IGVtaXR0ZXIuZmlyZShlKSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkZpcnN0TGlzdGVuZXJEaWRBZGQoKSB7XG4gICAgICAgIGlmIChidWZmZXIpIHtcbiAgICAgICAgICBpZiAobmV4dFRpY2spIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZmx1c2gpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG9uTGFzdExpc3RlbmVyUmVtb3ZlKCkge1xuICAgICAgICBpZiAobGlzdGVuZXIpIHtcbiAgICAgICAgICBsaXN0ZW5lci5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgbGlzdGVuZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBlbWl0dGVyLmV2ZW50O1xuICB9XG4gIEV2ZW50LmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgLyoqXG4gICAqIFNpbWlsYXIgdG8gYGJ1ZmZlcmAgYnV0IGl0IGJ1ZmZlcnMgaW5kZWZpbml0ZWx5IGFuZCByZXBlYXRzXG4gICAqIHRoZSBidWZmZXJlZCBldmVudHMgdG8gZXZlcnkgbmV3IGxpc3RlbmVyLlxuICAgKi9cbiAgZnVuY3Rpb24gZWNobyhldmVudCwgbmV4dFRpY2sgPSBmYWxzZSwgYnVmZmVyID0gW10pIHtcbiAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UoKTtcbiAgICBldmVudChlID0+IHtcbiAgICAgIGJ1ZmZlci5wdXNoKGUpO1xuICAgICAgZW1pdHRlci5maXJlKGUpO1xuICAgIH0pO1xuICAgIGNvbnN0IGZsdXNoID0gKGxpc3RlbmVyLCB0aGlzQXJncykgPT4gYnVmZmVyLmZvckVhY2goZSA9PiBsaXN0ZW5lci5jYWxsKHRoaXNBcmdzLCBlKSk7XG4gICAgY29uc3QgZW1pdHRlciA9IG5ldyAoX2dldF9fKFwiRW1pdHRlclwiKSkoe1xuICAgICAgb25MaXN0ZW5lckRpZEFkZChlbWl0dGVyLCBsaXN0ZW5lciwgdGhpc0FyZ3MpIHtcbiAgICAgICAgaWYgKG5leHRUaWNrKSB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBmbHVzaChsaXN0ZW5lciwgdGhpc0FyZ3MpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbHVzaChsaXN0ZW5lciwgdGhpc0FyZ3MpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGVtaXR0ZXIuZXZlbnQ7XG4gIH1cbiAgRXZlbnQuZWNobyA9IGVjaG87XG4gIGNsYXNzIENoYWluYWJsZUV2ZW50IHtcbiAgICBnZXQgZXZlbnQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZXZlbnQ7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKF9ldmVudCkge1xuICAgICAgdGhpcy5fZXZlbnQgPSBfZXZlbnQ7XG4gICAgfVxuICAgIG1hcChmbikge1xuICAgICAgcmV0dXJuIG5ldyBDaGFpbmFibGVFdmVudChtYXAodGhpcy5fZXZlbnQsIGZuKSk7XG4gICAgfVxuICAgIGZvckVhY2goZm4pIHtcbiAgICAgIHJldHVybiBuZXcgQ2hhaW5hYmxlRXZlbnQoZm9yRWFjaCh0aGlzLl9ldmVudCwgZm4pKTtcbiAgICB9XG4gICAgZmlsdGVyKGZuKSB7XG4gICAgICByZXR1cm4gbmV3IENoYWluYWJsZUV2ZW50KGZpbHRlcih0aGlzLl9ldmVudCwgZm4pKTtcbiAgICB9XG4gICAgcmVkdWNlKG1lcmdlLCBpbml0aWFsKSB7XG4gICAgICByZXR1cm4gbmV3IENoYWluYWJsZUV2ZW50KHJlZHVjZSh0aGlzLl9ldmVudCwgbWVyZ2UsIGluaXRpYWwpKTtcbiAgICB9XG4gICAgbGF0Y2goKSB7XG4gICAgICByZXR1cm4gbmV3IENoYWluYWJsZUV2ZW50KGxhdGNoKHRoaXMuX2V2ZW50KSk7XG4gICAgfVxuICAgIG9uKGxpc3RlbmVyLCB0aGlzQXJncywgZGlzcG9zYWJsZXMpIHtcbiAgICAgIHJldHVybiB0aGlzLl9ldmVudChsaXN0ZW5lciwgdGhpc0FyZ3MsIGRpc3Bvc2FibGVzKTtcbiAgICB9XG4gICAgb25jZShsaXN0ZW5lciwgdGhpc0FyZ3MsIGRpc3Bvc2FibGVzKSB7XG4gICAgICByZXR1cm4gb25jZSh0aGlzLl9ldmVudCkobGlzdGVuZXIsIHRoaXNBcmdzLCBkaXNwb3NhYmxlcyk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIGNoYWluKGV2ZW50KSB7XG4gICAgcmV0dXJuIG5ldyBDaGFpbmFibGVFdmVudChldmVudCk7XG4gIH1cbiAgRXZlbnQuY2hhaW4gPSBjaGFpbjtcbiAgZnVuY3Rpb24gZnJvbU5vZGVFdmVudEVtaXR0ZXIoZW1pdHRlciwgZXZlbnROYW1lLCBtYXAgPSBpZCA9PiBpZCkge1xuICAgIGNvbnN0IGZuID0gKC4uLmFyZ3MpID0+IHJlc3VsdC5maXJlKG1hcCguLi5hcmdzKSk7XG4gICAgY29uc3Qgb25GaXJzdExpc3RlbmVyQWRkID0gKCkgPT4gZW1pdHRlci5vbihldmVudE5hbWUsIGZuKTtcbiAgICBjb25zdCBvbkxhc3RMaXN0ZW5lclJlbW92ZSA9ICgpID0+IGVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoZXZlbnROYW1lLCBmbik7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IChfZ2V0X18oXCJFbWl0dGVyXCIpKSh7XG4gICAgICBvbkZpcnN0TGlzdGVuZXJBZGQsXG4gICAgICBvbkxhc3RMaXN0ZW5lclJlbW92ZVxuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQuZXZlbnQ7XG4gIH1cbiAgRXZlbnQuZnJvbU5vZGVFdmVudEVtaXR0ZXIgPSBmcm9tTm9kZUV2ZW50RW1pdHRlcjtcbiAgZnVuY3Rpb24gZnJvbVByb21pc2UocHJvbWlzZSkge1xuICAgIGNvbnN0IGVtaXR0ZXIgPSBuZXcgKF9nZXRfXyhcIkVtaXR0ZXJcIikpKCk7XG4gICAgbGV0IHNob3VsZEVtaXQgPSBmYWxzZTtcbiAgICBwcm9taXNlLnRoZW4odW5kZWZpbmVkLCAoKSA9PiBudWxsKS50aGVuKCgpID0+IHtcbiAgICAgIGlmICghc2hvdWxkRW1pdCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGVtaXR0ZXIuZmlyZSh1bmRlZmluZWQpLCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVtaXR0ZXIuZmlyZSh1bmRlZmluZWQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHNob3VsZEVtaXQgPSB0cnVlO1xuICAgIHJldHVybiBlbWl0dGVyLmV2ZW50O1xuICB9XG4gIEV2ZW50LmZyb21Qcm9taXNlID0gZnJvbVByb21pc2U7XG4gIGZ1bmN0aW9uIHRvUHJvbWlzZShldmVudCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcm9taXNlL3BhcmFtLW5hbWVzXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGMgPT4gb25jZShldmVudCkoYykpO1xuICB9XG4gIEV2ZW50LnRvUHJvbWlzZSA9IHRvUHJvbWlzZTtcbn0pKF9nZXRfXyhcIkV2ZW50XCIpIHx8IChleHBvcnRzLkV2ZW50ID0gX2Fzc2lnbl9fKFwiRXZlbnRcIiwge30pKSk7XG5sZXQgX2dsb2JhbExlYWtXYXJuaW5nVGhyZXNob2xkID0gLTE7XG5mdW5jdGlvbiBzZXRHbG9iYWxMZWFrV2FybmluZ1RocmVzaG9sZChuKSB7XG4gIGNvbnN0IG9sZFZhbHVlID0gX2dldF9fKFwiX2dsb2JhbExlYWtXYXJuaW5nVGhyZXNob2xkXCIpO1xuICBfYXNzaWduX18oXCJfZ2xvYmFsTGVha1dhcm5pbmdUaHJlc2hvbGRcIiwgbik7XG4gIHJldHVybiB7XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgIF9hc3NpZ25fXyhcIl9nbG9iYWxMZWFrV2FybmluZ1RocmVzaG9sZFwiLCBvbGRWYWx1ZSk7XG4gICAgfVxuICB9O1xufVxuZXhwb3J0cy5zZXRHbG9iYWxMZWFrV2FybmluZ1RocmVzaG9sZCA9IF9nZXRfXyhcInNldEdsb2JhbExlYWtXYXJuaW5nVGhyZXNob2xkXCIpO1xuY2xhc3MgTGVha2FnZU1vbml0b3Ige1xuICBjb25zdHJ1Y3RvcihjdXN0b21UaHJlc2hvbGQsIG5hbWUgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE4KS5zbGljZSgyLCA1KSkge1xuICAgIHRoaXMuY3VzdG9tVGhyZXNob2xkID0gY3VzdG9tVGhyZXNob2xkO1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fd2FybkNvdW50ZG93biA9IDA7XG4gIH1cbiAgZGlzcG9zZSgpIHtcbiAgICBpZiAodGhpcy5fc3RhY2tzKSB7XG4gICAgICB0aGlzLl9zdGFja3MuY2xlYXIoKTtcbiAgICB9XG4gIH1cbiAgY2hlY2sobGlzdGVuZXJDb3VudCkge1xuICAgIGxldCB0aHJlc2hvbGQgPSBfZ2V0X18oXCJfZ2xvYmFsTGVha1dhcm5pbmdUaHJlc2hvbGRcIik7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmN1c3RvbVRocmVzaG9sZCA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRocmVzaG9sZCA9IHRoaXMuY3VzdG9tVGhyZXNob2xkO1xuICAgIH1cbiAgICBpZiAodGhyZXNob2xkIDw9IDAgfHwgbGlzdGVuZXJDb3VudCA8IHRocmVzaG9sZCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9zdGFja3MpIHtcbiAgICAgIHRoaXMuX3N0YWNrcyA9IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgY29uc3Qgc3RhY2sgPSBuZXcgRXJyb3IoKS5zdGFjay5zcGxpdCgnXFxuJykuc2xpY2UoMykuam9pbignXFxuJyk7XG4gICAgY29uc3QgY291bnQgPSB0aGlzLl9zdGFja3MuZ2V0KHN0YWNrKSB8fCAwO1xuICAgIHRoaXMuX3N0YWNrcy5zZXQoc3RhY2ssIGNvdW50ICsgMSk7XG4gICAgdGhpcy5fd2FybkNvdW50ZG93biAtPSAxO1xuICAgIGlmICh0aGlzLl93YXJuQ291bnRkb3duIDw9IDApIHtcbiAgICAgIC8vIG9ubHkgd2FybiBvbiBmaXJzdCBleGNlZWQgYW5kIHRoZW4gZXZlcnkgdGltZSB0aGUgbGltaXRcbiAgICAgIC8vIGlzIGV4Y2VlZGVkIGJ5IDUwJSBhZ2FpblxuICAgICAgdGhpcy5fd2FybkNvdW50ZG93biA9IHRocmVzaG9sZCAqIDAuNTtcbiAgICAgIC8vIGZpbmQgbW9zdCBmcmVxdWVudCBsaXN0ZW5lciBhbmQgcHJpbnQgd2FybmluZ1xuICAgICAgbGV0IHRvcFN0YWNrO1xuICAgICAgbGV0IHRvcENvdW50ID0gMDtcbiAgICAgIHRoaXMuX3N0YWNrcy5mb3JFYWNoKChjb3VudCwgc3RhY2spID0+IHtcbiAgICAgICAgaWYgKCF0b3BTdGFjayB8fCB0b3BDb3VudCA8IGNvdW50KSB7XG4gICAgICAgICAgdG9wU3RhY2sgPSBzdGFjaztcbiAgICAgICAgICB0b3BDb3VudCA9IGNvdW50O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNvbnNvbGUud2FybihgWyR7dGhpcy5uYW1lfV0gcG90ZW50aWFsIGxpc3RlbmVyIExFQUsgZGV0ZWN0ZWQsIGhhdmluZyAke2xpc3RlbmVyQ291bnR9IGxpc3RlbmVycyBhbHJlYWR5LiBNT1NUIGZyZXF1ZW50IGxpc3RlbmVyICgke3RvcENvdW50fSk6YCk7XG4gICAgICBjb25zb2xlLndhcm4odG9wU3RhY2spO1xuICAgIH1cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgY29uc3QgY291bnQgPSB0aGlzLl9zdGFja3MuZ2V0KHN0YWNrKSB8fCAwO1xuICAgICAgdGhpcy5fc3RhY2tzLnNldChzdGFjaywgY291bnQgLSAxKTtcbiAgICB9O1xuICB9XG59XG4vKipcbiAqIFRoZSBFbWl0dGVyIGNhbiBiZSB1c2VkIHRvIGV4cG9zZSBhbiBFdmVudCB0byB0aGUgcHVibGljXG4gKiB0byBmaXJlIGl0IGZyb20gdGhlIGluc2lkZXMuXG4gKiBTYW1wbGU6XG4gICAgY2xhc3MgRG9jdW1lbnQge1xuXG4gICAgICAgIHByaXZhdGUgX29uRGlkQ2hhbmdlID0gbmV3IEVtaXR0ZXI8KHZhbHVlOnN0cmluZyk9PmFueT4oKTtcblxuICAgICAgICBwdWJsaWMgb25EaWRDaGFuZ2UgPSB0aGlzLl9vbkRpZENoYW5nZS5ldmVudDtcblxuICAgICAgICAvLyBnZXR0ZXItc3R5bGVcbiAgICAgICAgLy8gZ2V0IG9uRGlkQ2hhbmdlKCk6IEV2ZW50PCh2YWx1ZTpzdHJpbmcpPT5hbnk+IHtcbiAgICAgICAgLy8gXHRyZXR1cm4gdGhpcy5fb25EaWRDaGFuZ2UuZXZlbnQ7XG4gICAgICAgIC8vIH1cblxuICAgICAgICBwcml2YXRlIF9kb0l0KCkge1xuICAgICAgICAgICAgLy8uLi5cbiAgICAgICAgICAgIHRoaXMuX29uRGlkQ2hhbmdlLmZpcmUodmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICovXG5jbGFzcyBFbWl0dGVyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX2Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5fbGVha2FnZU1vbiA9IF9nZXRfXyhcIl9nbG9iYWxMZWFrV2FybmluZ1RocmVzaG9sZFwiKSA+IDAgPyBuZXcgKF9nZXRfXyhcIkxlYWthZ2VNb25pdG9yXCIpKSh0aGlzLl9vcHRpb25zICYmIHRoaXMuX29wdGlvbnMubGVha1dhcm5pbmdUaHJlc2hvbGQpIDogdW5kZWZpbmVkO1xuICB9XG4gIC8qKlxuICAgKiBGb3IgdGhlIHB1YmxpYyB0byBhbGxvdyB0byBzdWJzY3JpYmVcbiAgICogdG8gZXZlbnRzIGZyb20gdGhpcyBFbWl0dGVyXG4gICAqL1xuICBnZXQgZXZlbnQoKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudCkge1xuICAgICAgdGhpcy5fZXZlbnQgPSAobGlzdGVuZXIsIHRoaXNBcmdzLCBkaXNwb3NhYmxlcykgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuX2xpc3RlbmVycykge1xuICAgICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IG5ldyAoX2dldF9fKFwibGlua2VkTGlzdF8xXCIpLkxpbmtlZExpc3QpKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlyc3RMaXN0ZW5lciA9IHRoaXMuX2xpc3RlbmVycy5pc0VtcHR5KCk7XG4gICAgICAgIGlmIChmaXJzdExpc3RlbmVyICYmIHRoaXMuX29wdGlvbnMgJiYgdGhpcy5fb3B0aW9ucy5vbkZpcnN0TGlzdGVuZXJBZGQpIHtcbiAgICAgICAgICB0aGlzLl9vcHRpb25zLm9uRmlyc3RMaXN0ZW5lckFkZCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZW1vdmUgPSB0aGlzLl9saXN0ZW5lcnMucHVzaCghdGhpc0FyZ3MgPyBsaXN0ZW5lciA6IFtsaXN0ZW5lciwgdGhpc0FyZ3NdKTtcbiAgICAgICAgaWYgKGZpcnN0TGlzdGVuZXIgJiYgdGhpcy5fb3B0aW9ucyAmJiB0aGlzLl9vcHRpb25zLm9uRmlyc3RMaXN0ZW5lckRpZEFkZCkge1xuICAgICAgICAgIHRoaXMuX29wdGlvbnMub25GaXJzdExpc3RlbmVyRGlkQWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9vcHRpb25zICYmIHRoaXMuX29wdGlvbnMub25MaXN0ZW5lckRpZEFkZCkge1xuICAgICAgICAgIHRoaXMuX29wdGlvbnMub25MaXN0ZW5lckRpZEFkZCh0aGlzLCBsaXN0ZW5lciwgdGhpc0FyZ3MpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNoZWNrIGFuZCByZWNvcmQgdGhpcyBlbWl0dGVyIGZvciBwb3RlbnRpYWwgbGVha2FnZVxuICAgICAgICBsZXQgcmVtb3ZlTW9uaXRvcjtcbiAgICAgICAgaWYgKHRoaXMuX2xlYWthZ2VNb24pIHtcbiAgICAgICAgICByZW1vdmVNb25pdG9yID0gdGhpcy5fbGVha2FnZU1vbi5jaGVjayh0aGlzLl9saXN0ZW5lcnMuc2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgIGRpc3Bvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChyZW1vdmVNb25pdG9yKSB7XG4gICAgICAgICAgICAgIHJlbW92ZU1vbml0b3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5kaXNwb3NlID0gX2dldF9fKFwiRW1pdHRlclwiKS5fbm9vcDtcbiAgICAgICAgICAgIGlmICghdGhpcy5fZGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgcmVtb3ZlKCk7XG4gICAgICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zICYmIHRoaXMuX29wdGlvbnMub25MYXN0TGlzdGVuZXJSZW1vdmUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNMaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnMgJiYgIXRoaXMuX2xpc3RlbmVycy5pc0VtcHR5KCk7XG4gICAgICAgICAgICAgICAgaWYgKCFoYXNMaXN0ZW5lcnMpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX29wdGlvbnMub25MYXN0TGlzdGVuZXJSZW1vdmUodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkaXNwb3NhYmxlcykpIHtcbiAgICAgICAgICBkaXNwb3NhYmxlcy5wdXNoKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9ldmVudDtcbiAgfVxuICAvKipcbiAgICogVG8gYmUga2VwdCBwcml2YXRlIHRvIGZpcmUgYW4gZXZlbnQgdG9cbiAgICogc3Vic2NyaWJlcnNcbiAgICovXG4gIGZpcmUoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzKSB7XG4gICAgICAvLyBwdXQgYWxsIFtsaXN0ZW5lcixldmVudF0tcGFpcnMgaW50byBkZWxpdmVyeSBxdWV1ZVxuICAgICAgLy8gdGhlbiBlbWl0IGFsbCBldmVudC4gYW4gaW5uZXIvbmVzdGVkIGV2ZW50IG1pZ2h0IGJlXG4gICAgICAvLyB0aGUgZHJpdmVyIG9mIHRoaXNcbiAgICAgIGlmICghdGhpcy5fZGVsaXZlcnlRdWV1ZSkge1xuICAgICAgICB0aGlzLl9kZWxpdmVyeVF1ZXVlID0gW107XG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpdGVyID0gdGhpcy5fbGlzdGVuZXJzLml0ZXJhdG9yKCksIGUgPSBpdGVyLm5leHQoKTsgIWUuZG9uZTsgZSA9IGl0ZXIubmV4dCgpKSB7XG4gICAgICAgIHRoaXMuX2RlbGl2ZXJ5UXVldWUucHVzaChbZS52YWx1ZSwgZXZlbnRdKTtcbiAgICAgIH1cbiAgICAgIHdoaWxlICh0aGlzLl9kZWxpdmVyeVF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgW2xpc3RlbmVyLCBldmVudF0gPSB0aGlzLl9kZWxpdmVyeVF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZWxlc3MtY2FsbFxuICAgICAgICAgICAgbGlzdGVuZXIuY2FsbCh1bmRlZmluZWQsIGV2ZW50KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGlzdGVuZXJbMF0uY2FsbChsaXN0ZW5lclsxXSwgZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZGlzcG9zZSgpIHtcbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLl9kZWxpdmVyeVF1ZXVlKSB7XG4gICAgICB0aGlzLl9kZWxpdmVyeVF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgfVxuICAgIGlmICh0aGlzLl9sZWFrYWdlTW9uKSB7XG4gICAgICB0aGlzLl9sZWFrYWdlTW9uLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgdGhpcy5fZGlzcG9zZWQgPSB0cnVlO1xuICB9XG59XG5leHBvcnRzLkVtaXR0ZXIgPSBfZ2V0X18oXCJFbWl0dGVyXCIpO1xuX2dldF9fKFwiRW1pdHRlclwiKS5fbm9vcCA9IGZ1bmN0aW9uICgpIHt9O1xuY2xhc3MgQXN5bmNFbWl0dGVyIGV4dGVuZHMgX2dldF9fKFwiRW1pdHRlclwiKSB7XG4gIGFzeW5jIGZpcmVBc3luYyhldmVudEZuKSB7XG4gICAgaWYgKCF0aGlzLl9saXN0ZW5lcnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gcHV0IGFsbCBbbGlzdGVuZXIsZXZlbnRdLXBhaXJzIGludG8gZGVsaXZlcnkgcXVldWVcbiAgICAvLyB0aGVuIGVtaXQgYWxsIGV2ZW50LiBhbiBpbm5lci9uZXN0ZWQgZXZlbnQgbWlnaHQgYmVcbiAgICAvLyB0aGUgZHJpdmVyIG9mIHRoaXNcbiAgICBpZiAoIXRoaXMuX2FzeW5jRGVsaXZlcnlRdWV1ZSkge1xuICAgICAgdGhpcy5fYXN5bmNEZWxpdmVyeVF1ZXVlID0gW107XG4gICAgfVxuICAgIGZvciAobGV0IGl0ZXIgPSB0aGlzLl9saXN0ZW5lcnMuaXRlcmF0b3IoKSwgZSA9IGl0ZXIubmV4dCgpOyAhZS5kb25lOyBlID0gaXRlci5uZXh0KCkpIHtcbiAgICAgIGNvbnN0IHRoZW5hYmxlcyA9IFtdO1xuICAgICAgdGhpcy5fYXN5bmNEZWxpdmVyeVF1ZXVlLnB1c2goW2UudmFsdWUsIGV2ZW50Rm4odGhlbmFibGVzLCB0eXBlb2YgZS52YWx1ZSA9PT0gJ2Z1bmN0aW9uJyA/IGUudmFsdWUgOiBlLnZhbHVlWzBdKSwgdGhlbmFibGVzXSk7XG4gICAgfVxuICAgIHdoaWxlICh0aGlzLl9hc3luY0RlbGl2ZXJ5UXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgW2xpc3RlbmVyLCBldmVudCwgdGhlbmFibGVzXSA9IHRoaXMuX2FzeW5jRGVsaXZlcnlRdWV1ZS5zaGlmdCgpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2VsZXNzLWNhbGxcbiAgICAgICAgICBsaXN0ZW5lci5jYWxsKHVuZGVmaW5lZCwgZXZlbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpc3RlbmVyWzBdLmNhbGwobGlzdGVuZXJbMV0sIGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIGZyZWV6ZSB0aGVuYWJsZXMtY29sbGVjdGlvbiB0byBlbmZvcmNlIHN5bmMtY2FsbHMgdG9cbiAgICAgIC8vIHdhaXQgdW50aWwgYW5kIHRoZW4gd2FpdCBmb3IgYWxsIHRoZW5hYmxlcyB0byByZXNvbHZlXG4gICAgICBPYmplY3QuZnJlZXplKHRoZW5hYmxlcyk7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGVuYWJsZXMpO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0cy5Bc3luY0VtaXR0ZXIgPSBfZ2V0X18oXCJBc3luY0VtaXR0ZXJcIik7XG4vKipcbiAqIFRoZSBFdmVudEJ1ZmZlcmVyIGlzIHVzZWZ1bCBpbiBzaXR1YXRpb25zIGluIHdoaWNoIHlvdSB3YW50XG4gKiB0byBkZWxheSBmaXJpbmcgeW91ciBldmVudHMgZHVyaW5nIHNvbWUgY29kZS5cbiAqIFlvdSBjYW4gd3JhcCB0aGF0IGNvZGUgYW5kIGJlIHN1cmUgdGhhdCB0aGUgZXZlbnQgd2lsbCBub3RcbiAqIGJlIGZpcmVkIGR1cmluZyB0aGF0IHdyYXAuXG4gKlxuICogYGBgXG4gKiBjb25zdCBlbWl0dGVyOiBFbWl0dGVyO1xuICogY29uc3QgZGVsYXllciA9IG5ldyBFdmVudERlbGF5ZXIoKTtcbiAqIGNvbnN0IGRlbGF5ZWRFdmVudCA9IGRlbGF5ZXIud3JhcEV2ZW50KGVtaXR0ZXIuZXZlbnQpO1xuICpcbiAqIGRlbGF5ZWRFdmVudChjb25zb2xlLmxvZyk7XG4gKlxuICogZGVsYXllci5idWZmZXJFdmVudHMoKCkgPT4ge1xuICogICBlbWl0dGVyLmZpcmUoKTsgLy8gZXZlbnQgd2lsbCBub3QgYmUgZmlyZWQgeWV0XG4gKiB9KTtcbiAqXG4gKiAvLyBldmVudCB3aWxsIG9ubHkgYmUgZmlyZWQgYXQgdGhpcyBwb2ludFxuICogYGBgXG4gKi9cbmNsYXNzIEV2ZW50QnVmZmVyZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmJ1ZmZlcnMgPSBbXTtcbiAgfVxuICB3cmFwRXZlbnQoZXZlbnQpIHtcbiAgICByZXR1cm4gKGxpc3RlbmVyLCB0aGlzQXJncywgZGlzcG9zYWJsZXMpID0+IHtcbiAgICAgIHJldHVybiBldmVudChpID0+IHtcbiAgICAgICAgY29uc3QgYnVmZmVyID0gdGhpcy5idWZmZXJzW3RoaXMuYnVmZmVycy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGJ1ZmZlcikge1xuICAgICAgICAgIGJ1ZmZlci5wdXNoKCgpID0+IGxpc3RlbmVyLmNhbGwodGhpc0FyZ3MsIGkpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaXN0ZW5lci5jYWxsKHRoaXNBcmdzLCBpKTtcbiAgICAgICAgfVxuICAgICAgfSwgdW5kZWZpbmVkLCBkaXNwb3NhYmxlcyk7XG4gICAgfTtcbiAgfVxuICBidWZmZXJFdmVudHMoZm4pIHtcbiAgICBjb25zdCBidWZmZXIgPSBbXTtcbiAgICB0aGlzLmJ1ZmZlcnMucHVzaChidWZmZXIpO1xuICAgIGNvbnN0IHIgPSBmbigpO1xuICAgIHRoaXMuYnVmZmVycy5wb3AoKTtcbiAgICBidWZmZXIuZm9yRWFjaChmbHVzaCA9PiBmbHVzaCgpKTtcbiAgICByZXR1cm4gcjtcbiAgfVxufVxuZXhwb3J0cy5FdmVudEJ1ZmZlcmVyID0gX2dldF9fKFwiRXZlbnRCdWZmZXJlclwiKTtcbi8qKlxuICogQSBSZWxheSBpcyBhbiBldmVudCBmb3J3YXJkZXIgd2hpY2ggZnVuY3Rpb25zIGFzIGEgcmVwbHVnYWJibGUgZXZlbnQgcGlwZS5cbiAqIE9uY2UgY3JlYXRlZCwgeW91IGNhbiBjb25uZWN0IGFuIGlucHV0IGV2ZW50IHRvIGl0IGFuZCBpdCB3aWxsIHNpbXBseSBmb3J3YXJkXG4gKiBldmVudHMgZnJvbSB0aGF0IGlucHV0IGV2ZW50IHRocm91Z2ggaXRzIG93biBgZXZlbnRgIHByb3BlcnR5LiBUaGUgYGlucHV0YFxuICogY2FuIGJlIGNoYW5nZWQgYXQgYW55IHBvaW50IGluIHRpbWUuXG4gKi9cbmNsYXNzIFJlbGF5IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5saXN0ZW5pbmcgPSBmYWxzZTtcbiAgICB0aGlzLmlucHV0RXZlbnQgPSBfZ2V0X18oXCJFdmVudFwiKS5Ob25lO1xuICAgIHRoaXMuaW5wdXRFdmVudExpc3RlbmVyID0gX2dldF9fKFwibGlmZWN5Y2xlXzFcIikuRGlzcG9zYWJsZS5Ob25lO1xuICAgIHRoaXMuZW1pdHRlciA9IG5ldyAoX2dldF9fKFwiRW1pdHRlclwiKSkoe1xuICAgICAgb25GaXJzdExpc3RlbmVyRGlkQWRkOiAoKSA9PiB7XG4gICAgICAgIHRoaXMubGlzdGVuaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pbnB1dEV2ZW50TGlzdGVuZXIgPSB0aGlzLmlucHV0RXZlbnQodGhpcy5lbWl0dGVyLmZpcmUsIHRoaXMuZW1pdHRlcik7XG4gICAgICB9LFxuICAgICAgb25MYXN0TGlzdGVuZXJSZW1vdmU6ICgpID0+IHtcbiAgICAgICAgdGhpcy5saXN0ZW5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pbnB1dEV2ZW50TGlzdGVuZXIuZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMuZXZlbnQgPSB0aGlzLmVtaXR0ZXIuZXZlbnQ7XG4gIH1cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGFjY2Vzc29yLXBhaXJzXG4gIHNldCBpbnB1dChldmVudCkge1xuICAgIHRoaXMuaW5wdXRFdmVudCA9IGV2ZW50O1xuICAgIGlmICh0aGlzLmxpc3RlbmluZykge1xuICAgICAgdGhpcy5pbnB1dEV2ZW50TGlzdGVuZXIuZGlzcG9zZSgpO1xuICAgICAgdGhpcy5pbnB1dEV2ZW50TGlzdGVuZXIgPSBldmVudCh0aGlzLmVtaXR0ZXIuZmlyZSwgdGhpcy5lbWl0dGVyKTtcbiAgICB9XG4gIH1cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLmlucHV0RXZlbnRMaXN0ZW5lci5kaXNwb3NlKCk7XG4gICAgdGhpcy5lbWl0dGVyLmRpc3Bvc2UoKTtcbiAgfVxufVxuZXhwb3J0cy5SZWxheSA9IF9nZXRfXyhcIlJlbGF5XCIpO1xuZnVuY3Rpb24gX2dldEdsb2JhbE9iamVjdCgpIHtcbiAgdHJ5IHtcbiAgICBpZiAoISFnbG9iYWwpIHtcbiAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghIXdpbmRvdykge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxufVxuO1xudmFyIF9SZXdpcmVNb2R1bGVJZF9fID0gbnVsbDtcbmZ1bmN0aW9uIF9nZXRSZXdpcmVNb2R1bGVJZF9fKCkge1xuICBpZiAoX1Jld2lyZU1vZHVsZUlkX18gPT09IG51bGwpIHtcbiAgICBsZXQgZ2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gICAgaWYgKCFnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKSB7XG4gICAgICBnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fID0gMDtcbiAgICB9XG4gICAgX1Jld2lyZU1vZHVsZUlkX18gPSBfXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKys7XG4gIH1cbiAgcmV0dXJuIF9SZXdpcmVNb2R1bGVJZF9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZVJlZ2lzdHJ5X18oKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cbiAgcmV0dXJuIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlZERhdGFfXygpIHtcbiAgbGV0IG1vZHVsZUlkID0gX2dldFJld2lyZU1vZHVsZUlkX18oKTtcbiAgbGV0IHJlZ2lzdHJ5ID0gX2dldFJld2lyZVJlZ2lzdHJ5X18oKTtcbiAgbGV0IHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIGlmICghcmV3aXJlRGF0YSkge1xuICAgIHJlZ2lzdHJ5W21vZHVsZUlkXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgfVxuICByZXR1cm4gcmV3aXJlRGF0YTtcbn1cbihmdW5jdGlvbiByZWdpc3RlclJlc2V0QWxsKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH07XG4gIH1cbn0pKCk7XG52YXIgSU5URU5USU9OQUxfVU5ERUZJTkVEID0gJ19fSU5URU5USU9OQUxfVU5ERUZJTkVEX18nO1xubGV0IF9SZXdpcmVBUElfXyA9IHt9O1xuKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gYWRkUHJvcGVydHlUb0FQSU9iamVjdChuYW1lLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfUmV3aXJlQVBJX18sIG5hbWUsIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG59KSgpO1xuZnVuY3Rpb24gX2dldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdmFsdWUgPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgaWYgKHZhbHVlID09PSBJTlRFTlRJT05BTF9VTkRFRklORUQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHtcbiAgICBjYXNlIFwibGlmZWN5Y2xlXzFcIjpcbiAgICAgIHJldHVybiBsaWZlY3ljbGVfMTtcbiAgICBjYXNlIFwiRW1pdHRlclwiOlxuICAgICAgcmV0dXJuIEVtaXR0ZXI7XG4gICAgY2FzZSBcIkV2ZW50XCI6XG4gICAgICByZXR1cm4gRXZlbnQ7XG4gICAgY2FzZSBcIl9nbG9iYWxMZWFrV2FybmluZ1RocmVzaG9sZFwiOlxuICAgICAgcmV0dXJuIF9nbG9iYWxMZWFrV2FybmluZ1RocmVzaG9sZDtcbiAgICBjYXNlIFwic2V0R2xvYmFsTGVha1dhcm5pbmdUaHJlc2hvbGRcIjpcbiAgICAgIHJldHVybiBzZXRHbG9iYWxMZWFrV2FybmluZ1RocmVzaG9sZDtcbiAgICBjYXNlIFwiTGVha2FnZU1vbml0b3JcIjpcbiAgICAgIHJldHVybiBMZWFrYWdlTW9uaXRvcjtcbiAgICBjYXNlIFwibGlua2VkTGlzdF8xXCI6XG4gICAgICByZXR1cm4gbGlua2VkTGlzdF8xO1xuICAgIGNhc2UgXCJBc3luY0VtaXR0ZXJcIjpcbiAgICAgIHJldHVybiBBc3luY0VtaXR0ZXI7XG4gICAgY2FzZSBcIkV2ZW50QnVmZmVyZXJcIjpcbiAgICAgIHJldHVybiBFdmVudEJ1ZmZlcmVyO1xuICAgIGNhc2UgXCJSZWxheVwiOlxuICAgICAgcmV0dXJuIFJlbGF5O1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfYXNzaWduX18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfc2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lLCB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICB9XG59XG5mdW5jdGlvbiBfc2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lLCBfdmFsdWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHtcbiAgICBjYXNlIFwiRXZlbnRcIjpcbiAgICAgIHJldHVybiBFdmVudCA9IF92YWx1ZTtcbiAgICBjYXNlIFwiX2dsb2JhbExlYWtXYXJuaW5nVGhyZXNob2xkXCI6XG4gICAgICByZXR1cm4gX2dsb2JhbExlYWtXYXJuaW5nVGhyZXNob2xkID0gX3ZhbHVlO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfdXBkYXRlX29wZXJhdGlvbl9fKG9wZXJhdGlvbiwgdmFyaWFibGVOYW1lLCBwcmVmaXgpIHtcbiAgdmFyIG9sZFZhbHVlID0gX2dldF9fKHZhcmlhYmxlTmFtZSk7XG4gIHZhciBuZXdWYWx1ZSA9IG9wZXJhdGlvbiA9PT0gJysrJyA/IG9sZFZhbHVlICsgMSA6IG9sZFZhbHVlIC0gMTtcbiAgX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgbmV3VmFsdWUpO1xuICByZXR1cm4gcHJlZml4ID8gbmV3VmFsdWUgOiBvbGRWYWx1ZTtcbn1cbmZ1bmN0aW9uIF9zZXRfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHR5cGVvZiB2YXJpYWJsZU5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW25hbWVdID0gdmFyaWFibGVOYW1lW25hbWVdO1xuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IElOVEVOVElPTkFMX1VOREVGSU5FRDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIF9yZXNldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGRlbGV0ZSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gIGlmIChPYmplY3Qua2V5cyhyZXdpcmVEYXRhKS5sZW5ndGggPT0gMCkge1xuICAgIGRlbGV0ZSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpW19nZXRSZXdpcmVNb2R1bGVJZF9fXTtcbiAgfVxuICA7XG59XG5mdW5jdGlvbiBfd2l0aF9fKG9iamVjdCkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIHZhciByZXdpcmVkVmFyaWFibGVOYW1lcyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG4gIHZhciBwcmV2aW91c1ZhbHVlcyA9IHt9O1xuICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IG9iamVjdFt2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICAgIGxldCByZXN1bHQgPSBjYWxsYmFjaygpO1xuICAgIGlmICghIXJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmVzdWx0LnRoZW4ocmVzZXQpLmNhdGNoKHJlc2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzZXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cbmxldCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPSB0eXBlb2YgbW9kdWxlLmV4cG9ydHM7XG5mdW5jdGlvbiBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCBuYW1lLCB7XG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cbmlmICgoX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnb2JqZWN0JyB8fCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdmdW5jdGlvbicpICYmIE9iamVjdC5pc0V4dGVuc2libGUobW9kdWxlLmV4cG9ydHMpKSB7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVBUElfXycsIF9SZXdpcmVBUElfXyk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5NYXBwZWROYXZpZ2F0b3IgPSBleHBvcnRzLk1hcHBlZEl0ZXJhdG9yID0gZXhwb3J0cy5BcnJheU5hdmlnYXRvciA9IGV4cG9ydHMuQXJyYXlJdGVyYXRvciA9IGV4cG9ydHMuZ2V0U2VxdWVuY2VJdGVyYXRvciA9IGV4cG9ydHMuSXRlcmF0b3IgPSBleHBvcnRzLkZJTiA9IHZvaWQgMDtcbmV4cG9ydHMuRklOID0ge1xuICBkb25lOiB0cnVlLFxuICB2YWx1ZTogdW5kZWZpbmVkXG59O1xudmFyIEl0ZXJhdG9yO1xuKGZ1bmN0aW9uIChJdGVyYXRvcikge1xuICBjb25zdCBfZW1wdHkgPSB7XG4gICAgbmV4dCgpIHtcbiAgICAgIHJldHVybiBleHBvcnRzLkZJTjtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIGVtcHR5KCkge1xuICAgIHJldHVybiBfZW1wdHk7XG4gIH1cbiAgSXRlcmF0b3IuZW1wdHkgPSBlbXB0eTtcbiAgZnVuY3Rpb24gZnJvbUFycmF5KGFycmF5LCBpbmRleCA9IDAsIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCkge1xuICAgIHJldHVybiB7XG4gICAgICBuZXh0KCkge1xuICAgICAgICBpZiAoaW5kZXggPj0gbGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIGV4cG9ydHMuRklOO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZG9uZTogZmFsc2UsXG4gICAgICAgICAgdmFsdWU6IGFycmF5W2luZGV4KytdXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICBJdGVyYXRvci5mcm9tQXJyYXkgPSBmcm9tQXJyYXk7XG4gIGZ1bmN0aW9uIGZyb20oZWxlbWVudHMpIHtcbiAgICBpZiAoIWVsZW1lbnRzKSB7XG4gICAgICByZXR1cm4gSXRlcmF0b3IuZW1wdHkoKTtcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZWxlbWVudHMpKSB7XG4gICAgICByZXR1cm4gSXRlcmF0b3IuZnJvbUFycmF5KGVsZW1lbnRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGVsZW1lbnRzO1xuICAgIH1cbiAgfVxuICBJdGVyYXRvci5mcm9tID0gZnJvbTtcbiAgZnVuY3Rpb24gbWFwKGl0ZXJhdG9yLCBmbikge1xuICAgIHJldHVybiB7XG4gICAgICBuZXh0KCkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBpZiAoZWxlbWVudC5kb25lKSB7XG4gICAgICAgICAgcmV0dXJuIGV4cG9ydHMuRklOO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkb25lOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiBmbihlbGVtZW50LnZhbHVlKVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIEl0ZXJhdG9yLm1hcCA9IG1hcDtcbiAgZnVuY3Rpb24gZmlsdGVyKGl0ZXJhdG9yLCBmbikge1xuICAgIHJldHVybiB7XG4gICAgICBuZXh0KCkge1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgaWYgKGVsZW1lbnQuZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4cG9ydHMuRklOO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZm4oZWxlbWVudC52YWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICAgICAgICB2YWx1ZTogZWxlbWVudC52YWx1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIEl0ZXJhdG9yLmZpbHRlciA9IGZpbHRlcjtcbiAgZnVuY3Rpb24gZm9yRWFjaChpdGVyYXRvciwgZm4pIHtcbiAgICBmb3IgKGxldCBuZXh0ID0gaXRlcmF0b3IubmV4dCgpOyAhbmV4dC5kb25lOyBuZXh0ID0gaXRlcmF0b3IubmV4dCgpKSB7XG4gICAgICBmbihuZXh0LnZhbHVlKTtcbiAgICB9XG4gIH1cbiAgSXRlcmF0b3IuZm9yRWFjaCA9IGZvckVhY2g7XG4gIGZ1bmN0aW9uIGNvbGxlY3QoaXRlcmF0b3IpIHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBmb3JFYWNoKGl0ZXJhdG9yLCB2YWx1ZSA9PiByZXN1bHQucHVzaCh2YWx1ZSkpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgSXRlcmF0b3IuY29sbGVjdCA9IGNvbGxlY3Q7XG59KShfZ2V0X18oXCJJdGVyYXRvclwiKSB8fCAoZXhwb3J0cy5JdGVyYXRvciA9IF9hc3NpZ25fXyhcIkl0ZXJhdG9yXCIsIHt9KSkpO1xuZnVuY3Rpb24gZ2V0U2VxdWVuY2VJdGVyYXRvcihhcmcpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJnKSkge1xuICAgIHJldHVybiBfZ2V0X18oXCJJdGVyYXRvclwiKS5mcm9tQXJyYXkoYXJnKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYXJnO1xuICB9XG59XG5leHBvcnRzLmdldFNlcXVlbmNlSXRlcmF0b3IgPSBfZ2V0X18oXCJnZXRTZXF1ZW5jZUl0ZXJhdG9yXCIpO1xuY2xhc3MgQXJyYXlJdGVyYXRvciB7XG4gIGNvbnN0cnVjdG9yKGl0ZW1zLCBzdGFydCA9IDAsIGVuZCA9IGl0ZW1zLmxlbmd0aCwgaW5kZXggPSBzdGFydCAtIDEpIHtcbiAgICB0aGlzLml0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuZW5kID0gZW5kO1xuICAgIHRoaXMuaW5kZXggPSBpbmRleDtcbiAgfVxuICBmaXJzdCgpIHtcbiAgICB0aGlzLmluZGV4ID0gdGhpcy5zdGFydDtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50KCk7XG4gIH1cbiAgbmV4dCgpIHtcbiAgICB0aGlzLmluZGV4ID0gTWF0aC5taW4odGhpcy5pbmRleCArIDEsIHRoaXMuZW5kKTtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50KCk7XG4gIH1cbiAgY3VycmVudCgpIHtcbiAgICBpZiAodGhpcy5pbmRleCA9PT0gdGhpcy5zdGFydCAtIDEgfHwgdGhpcy5pbmRleCA9PT0gdGhpcy5lbmQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5pdGVtc1t0aGlzLmluZGV4XTtcbiAgfVxufVxuZXhwb3J0cy5BcnJheUl0ZXJhdG9yID0gX2dldF9fKFwiQXJyYXlJdGVyYXRvclwiKTtcbmNsYXNzIEFycmF5TmF2aWdhdG9yIGV4dGVuZHMgX2dldF9fKFwiQXJyYXlJdGVyYXRvclwiKSB7XG4gIGNvbnN0cnVjdG9yKGl0ZW1zLCBzdGFydCA9IDAsIGVuZCA9IGl0ZW1zLmxlbmd0aCwgaW5kZXggPSBzdGFydCAtIDEpIHtcbiAgICBzdXBlcihpdGVtcywgc3RhcnQsIGVuZCwgaW5kZXgpO1xuICB9XG4gIGN1cnJlbnQoKSB7XG4gICAgcmV0dXJuIHN1cGVyLmN1cnJlbnQoKTtcbiAgfVxuICBwcmV2aW91cygpIHtcbiAgICB0aGlzLmluZGV4ID0gTWF0aC5tYXgodGhpcy5pbmRleCAtIDEsIHRoaXMuc3RhcnQgLSAxKTtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50KCk7XG4gIH1cbiAgZmlyc3QoKSB7XG4gICAgdGhpcy5pbmRleCA9IHRoaXMuc3RhcnQ7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudCgpO1xuICB9XG4gIGxhc3QoKSB7XG4gICAgdGhpcy5pbmRleCA9IHRoaXMuZW5kIC0gMTtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50KCk7XG4gIH1cbiAgcGFyZW50KCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5leHBvcnRzLkFycmF5TmF2aWdhdG9yID0gX2dldF9fKFwiQXJyYXlOYXZpZ2F0b3JcIik7XG5jbGFzcyBNYXBwZWRJdGVyYXRvciB7XG4gIGNvbnN0cnVjdG9yKGl0ZXJhdG9yLCBmbikge1xuICAgIHRoaXMuaXRlcmF0b3IgPSBpdGVyYXRvcjtcbiAgICB0aGlzLmZuID0gZm47XG4gICAgLy8gbm9vcFxuICB9XG5cbiAgbmV4dCgpIHtcbiAgICByZXR1cm4gdGhpcy5mbih0aGlzLml0ZXJhdG9yLm5leHQoKSk7XG4gIH1cbn1cbmV4cG9ydHMuTWFwcGVkSXRlcmF0b3IgPSBfZ2V0X18oXCJNYXBwZWRJdGVyYXRvclwiKTtcbmNsYXNzIE1hcHBlZE5hdmlnYXRvciBleHRlbmRzIF9nZXRfXyhcIk1hcHBlZEl0ZXJhdG9yXCIpIHtcbiAgY29uc3RydWN0b3IobmF2aWdhdG9yLCBmbikge1xuICAgIHN1cGVyKG5hdmlnYXRvciwgZm4pO1xuICAgIHRoaXMubmF2aWdhdG9yID0gbmF2aWdhdG9yO1xuICB9XG4gIGN1cnJlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZm4odGhpcy5uYXZpZ2F0b3IuY3VycmVudCgpKTtcbiAgfVxuICBwcmV2aW91cygpIHtcbiAgICByZXR1cm4gdGhpcy5mbih0aGlzLm5hdmlnYXRvci5wcmV2aW91cygpKTtcbiAgfVxuICBwYXJlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZm4odGhpcy5uYXZpZ2F0b3IucGFyZW50KCkpO1xuICB9XG4gIGZpcnN0KCkge1xuICAgIHJldHVybiB0aGlzLmZuKHRoaXMubmF2aWdhdG9yLmZpcnN0KCkpO1xuICB9XG4gIGxhc3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZm4odGhpcy5uYXZpZ2F0b3IubGFzdCgpKTtcbiAgfVxuICBuZXh0KCkge1xuICAgIHJldHVybiB0aGlzLmZuKHRoaXMubmF2aWdhdG9yLm5leHQoKSk7XG4gIH1cbn1cbmV4cG9ydHMuTWFwcGVkTmF2aWdhdG9yID0gX2dldF9fKFwiTWFwcGVkTmF2aWdhdG9yXCIpO1xuZnVuY3Rpb24gX2dldEdsb2JhbE9iamVjdCgpIHtcbiAgdHJ5IHtcbiAgICBpZiAoISFnbG9iYWwpIHtcbiAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghIXdpbmRvdykge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxufVxuO1xudmFyIF9SZXdpcmVNb2R1bGVJZF9fID0gbnVsbDtcbmZ1bmN0aW9uIF9nZXRSZXdpcmVNb2R1bGVJZF9fKCkge1xuICBpZiAoX1Jld2lyZU1vZHVsZUlkX18gPT09IG51bGwpIHtcbiAgICBsZXQgZ2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gICAgaWYgKCFnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKSB7XG4gICAgICBnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fID0gMDtcbiAgICB9XG4gICAgX1Jld2lyZU1vZHVsZUlkX18gPSBfXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKys7XG4gIH1cbiAgcmV0dXJuIF9SZXdpcmVNb2R1bGVJZF9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZVJlZ2lzdHJ5X18oKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cbiAgcmV0dXJuIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlZERhdGFfXygpIHtcbiAgbGV0IG1vZHVsZUlkID0gX2dldFJld2lyZU1vZHVsZUlkX18oKTtcbiAgbGV0IHJlZ2lzdHJ5ID0gX2dldFJld2lyZVJlZ2lzdHJ5X18oKTtcbiAgbGV0IHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIGlmICghcmV3aXJlRGF0YSkge1xuICAgIHJlZ2lzdHJ5W21vZHVsZUlkXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgfVxuICByZXR1cm4gcmV3aXJlRGF0YTtcbn1cbihmdW5jdGlvbiByZWdpc3RlclJlc2V0QWxsKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH07XG4gIH1cbn0pKCk7XG52YXIgSU5URU5USU9OQUxfVU5ERUZJTkVEID0gJ19fSU5URU5USU9OQUxfVU5ERUZJTkVEX18nO1xubGV0IF9SZXdpcmVBUElfXyA9IHt9O1xuKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gYWRkUHJvcGVydHlUb0FQSU9iamVjdChuYW1lLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfUmV3aXJlQVBJX18sIG5hbWUsIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG59KSgpO1xuZnVuY3Rpb24gX2dldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdmFsdWUgPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgaWYgKHZhbHVlID09PSBJTlRFTlRJT05BTF9VTkRFRklORUQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHtcbiAgICBjYXNlIFwiSXRlcmF0b3JcIjpcbiAgICAgIHJldHVybiBJdGVyYXRvcjtcbiAgICBjYXNlIFwiZ2V0U2VxdWVuY2VJdGVyYXRvclwiOlxuICAgICAgcmV0dXJuIGdldFNlcXVlbmNlSXRlcmF0b3I7XG4gICAgY2FzZSBcIkFycmF5SXRlcmF0b3JcIjpcbiAgICAgIHJldHVybiBBcnJheUl0ZXJhdG9yO1xuICAgIGNhc2UgXCJBcnJheU5hdmlnYXRvclwiOlxuICAgICAgcmV0dXJuIEFycmF5TmF2aWdhdG9yO1xuICAgIGNhc2UgXCJNYXBwZWRJdGVyYXRvclwiOlxuICAgICAgcmV0dXJuIE1hcHBlZEl0ZXJhdG9yO1xuICAgIGNhc2UgXCJNYXBwZWROYXZpZ2F0b3JcIjpcbiAgICAgIHJldHVybiBNYXBwZWROYXZpZ2F0b3I7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIF92YWx1ZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJJdGVyYXRvclwiOlxuICAgICAgcmV0dXJuIEl0ZXJhdG9yID0gX3ZhbHVlO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfdXBkYXRlX29wZXJhdGlvbl9fKG9wZXJhdGlvbiwgdmFyaWFibGVOYW1lLCBwcmVmaXgpIHtcbiAgdmFyIG9sZFZhbHVlID0gX2dldF9fKHZhcmlhYmxlTmFtZSk7XG4gIHZhciBuZXdWYWx1ZSA9IG9wZXJhdGlvbiA9PT0gJysrJyA/IG9sZFZhbHVlICsgMSA6IG9sZFZhbHVlIC0gMTtcbiAgX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgbmV3VmFsdWUpO1xuICByZXR1cm4gcHJlZml4ID8gbmV3VmFsdWUgOiBvbGRWYWx1ZTtcbn1cbmZ1bmN0aW9uIF9zZXRfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHR5cGVvZiB2YXJpYWJsZU5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW25hbWVdID0gdmFyaWFibGVOYW1lW25hbWVdO1xuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IElOVEVOVElPTkFMX1VOREVGSU5FRDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIF9yZXNldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGRlbGV0ZSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gIGlmIChPYmplY3Qua2V5cyhyZXdpcmVEYXRhKS5sZW5ndGggPT0gMCkge1xuICAgIGRlbGV0ZSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpW19nZXRSZXdpcmVNb2R1bGVJZF9fXTtcbiAgfVxuICA7XG59XG5mdW5jdGlvbiBfd2l0aF9fKG9iamVjdCkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIHZhciByZXdpcmVkVmFyaWFibGVOYW1lcyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG4gIHZhciBwcmV2aW91c1ZhbHVlcyA9IHt9O1xuICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IG9iamVjdFt2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICAgIGxldCByZXN1bHQgPSBjYWxsYmFjaygpO1xuICAgIGlmICghIXJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmVzdWx0LnRoZW4ocmVzZXQpLmNhdGNoKHJlc2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzZXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cbmxldCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPSB0eXBlb2YgbW9kdWxlLmV4cG9ydHM7XG5mdW5jdGlvbiBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCBuYW1lLCB7XG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cbmlmICgoX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnb2JqZWN0JyB8fCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdmdW5jdGlvbicpICYmIE9iamVjdC5pc0V4dGVuc2libGUobW9kdWxlLmV4cG9ydHMpKSB7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVBUElfXycsIF9SZXdpcmVBUElfXyk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5SZXNvbHZlZEtleWJpbmRpbmcgPSBleHBvcnRzLlJlc29sdmVkS2V5YmluZGluZ1BhcnQgPSBleHBvcnRzLmNyZWF0ZVNpbXBsZUtleWJpbmRpbmcgPSBleHBvcnRzLmNyZWF0ZUtleWJpbmRpbmcgPSBleHBvcnRzLkNob3JkS2V5YmluZGluZyA9IGV4cG9ydHMuU2ltcGxlS2V5YmluZGluZyA9IGV4cG9ydHMuS2V5Q2hvcmQgPSBleHBvcnRzLktleUNvZGVVdGlscyA9IGV4cG9ydHMuU2NhbkNvZGVVdGlscyA9IHZvaWQgMDtcbmNsYXNzIEtleUNvZGVTdHJNYXAge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9rZXlDb2RlVG9TdHIgPSBbXTtcbiAgICB0aGlzLl9zdHJUb0tleUNvZGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG4gIGRlZmluZShrZXlDb2RlLCBzdHIpIHtcbiAgICB0aGlzLl9rZXlDb2RlVG9TdHJba2V5Q29kZV0gPSBzdHI7XG4gICAgdGhpcy5fc3RyVG9LZXlDb2RlW3N0ci50b0xvd2VyQ2FzZSgpXSA9IGtleUNvZGU7XG4gIH1cbiAga2V5Q29kZVRvU3RyKGtleUNvZGUpIHtcbiAgICByZXR1cm4gdGhpcy5fa2V5Q29kZVRvU3RyW2tleUNvZGVdO1xuICB9XG4gIHN0clRvS2V5Q29kZShzdHIpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RyVG9LZXlDb2RlW3N0ci50b0xvd2VyQ2FzZSgpXSB8fCAwIC8qIEtleUNvZGUuVW5rbm93biAqLztcbiAgfVxufVxuXG5jb25zdCBzY2FuQ29kZUludFRvU3RyID0gW107XG5jb25zdCBzY2FuQ29kZVN0clRvSW50ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmNvbnN0IHNjYW5Db2RlTG93ZXJDYXNlU3RyVG9JbnQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuZXhwb3J0cy5TY2FuQ29kZVV0aWxzID0ge1xuICBsb3dlckNhc2VUb0VudW06IHNjYW5Db2RlID0+IF9nZXRfXyhcInNjYW5Db2RlTG93ZXJDYXNlU3RyVG9JbnRcIilbc2NhbkNvZGVdIHx8IDAgLyogU2NhbkNvZGUuTm9uZSAqLyxcbiAgdG9FbnVtOiBzY2FuQ29kZSA9PiBfZ2V0X18oXCJzY2FuQ29kZVN0clRvSW50XCIpW3NjYW5Db2RlXSB8fCAwIC8qIFNjYW5Db2RlLk5vbmUgKi8sXG4gIHRvU3RyaW5nOiBzY2FuQ29kZSA9PiBfZ2V0X18oXCJzY2FuQ29kZUludFRvU3RyXCIpW3NjYW5Db2RlXSB8fCAnTm9uZSdcbn07XG5jb25zdCB1aU1hcCA9IG5ldyAoX2dldF9fKFwiS2V5Q29kZVN0ck1hcFwiKSkoKTtcbmNvbnN0IHVzZXJTZXR0aW5nc1VTTWFwID0gbmV3IChfZ2V0X18oXCJLZXlDb2RlU3RyTWFwXCIpKSgpO1xuY29uc3QgdXNlclNldHRpbmdzR2VuZXJhbE1hcCA9IG5ldyAoX2dldF9fKFwiS2V5Q29kZVN0ck1hcFwiKSkoKTtcbihmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGRlZmluZShrZXlDb2RlLCB1aUxhYmVsLCB1c1VzZXJTZXR0aW5nc0xhYmVsID0gdWlMYWJlbCwgZ2VuZXJhbFVzZXJTZXR0aW5nc0xhYmVsID0gdXNVc2VyU2V0dGluZ3NMYWJlbCkge1xuICAgIF9nZXRfXyhcInVpTWFwXCIpLmRlZmluZShrZXlDb2RlLCB1aUxhYmVsKTtcbiAgICBfZ2V0X18oXCJ1c2VyU2V0dGluZ3NVU01hcFwiKS5kZWZpbmUoa2V5Q29kZSwgdXNVc2VyU2V0dGluZ3NMYWJlbCk7XG4gICAgX2dldF9fKFwidXNlclNldHRpbmdzR2VuZXJhbE1hcFwiKS5kZWZpbmUoa2V5Q29kZSwgZ2VuZXJhbFVzZXJTZXR0aW5nc0xhYmVsKTtcbiAgfVxuICBkZWZpbmUoMCAvKiBLZXlDb2RlLlVua25vd24gKi8sICd1bmtub3duJyk7XG4gIGRlZmluZSgxIC8qIEtleUNvZGUuQmFja3NwYWNlICovLCAnQmFja3NwYWNlJyk7XG4gIGRlZmluZSgyIC8qIEtleUNvZGUuVGFiICovLCAnVGFiJyk7XG4gIGRlZmluZSgzIC8qIEtleUNvZGUuRW50ZXIgKi8sICdFbnRlcicpO1xuICBkZWZpbmUoNCAvKiBLZXlDb2RlLlNoaWZ0ICovLCAnU2hpZnQnKTtcbiAgZGVmaW5lKDUgLyogS2V5Q29kZS5DdHJsICovLCAnQ3RybCcpO1xuICBkZWZpbmUoNiAvKiBLZXlDb2RlLkFsdCAqLywgJ0FsdCcpO1xuICBkZWZpbmUoNyAvKiBLZXlDb2RlLlBhdXNlQnJlYWsgKi8sICdQYXVzZUJyZWFrJyk7XG4gIGRlZmluZSg4IC8qIEtleUNvZGUuQ2Fwc0xvY2sgKi8sICdDYXBzTG9jaycpO1xuICBkZWZpbmUoOSAvKiBLZXlDb2RlLkVzY2FwZSAqLywgJ0VzY2FwZScpO1xuICBkZWZpbmUoMTAgLyogS2V5Q29kZS5TcGFjZSAqLywgJ1NwYWNlJyk7XG4gIGRlZmluZSgxMSAvKiBLZXlDb2RlLlBhZ2VVcCAqLywgJ1BhZ2VVcCcpO1xuICBkZWZpbmUoMTIgLyogS2V5Q29kZS5QYWdlRG93biAqLywgJ1BhZ2VEb3duJyk7XG4gIGRlZmluZSgxMyAvKiBLZXlDb2RlLkVuZCAqLywgJ0VuZCcpO1xuICBkZWZpbmUoMTQgLyogS2V5Q29kZS5Ib21lICovLCAnSG9tZScpO1xuICBkZWZpbmUoMTUgLyogS2V5Q29kZS5MZWZ0QXJyb3cgKi8sICdMZWZ0QXJyb3cnLCAnTGVmdCcpO1xuICBkZWZpbmUoMTYgLyogS2V5Q29kZS5VcEFycm93ICovLCAnVXBBcnJvdycsICdVcCcpO1xuICBkZWZpbmUoMTcgLyogS2V5Q29kZS5SaWdodEFycm93ICovLCAnUmlnaHRBcnJvdycsICdSaWdodCcpO1xuICBkZWZpbmUoMTggLyogS2V5Q29kZS5Eb3duQXJyb3cgKi8sICdEb3duQXJyb3cnLCAnRG93bicpO1xuICBkZWZpbmUoMTkgLyogS2V5Q29kZS5JbnNlcnQgKi8sICdJbnNlcnQnKTtcbiAgZGVmaW5lKDIwIC8qIEtleUNvZGUuRGVsZXRlICovLCAnRGVsZXRlJyk7XG4gIGRlZmluZSgyMSAvKiBLZXlDb2RlLktFWV8wICovLCAnMCcpO1xuICBkZWZpbmUoMjIgLyogS2V5Q29kZS5LRVlfMSAqLywgJzEnKTtcbiAgZGVmaW5lKDIzIC8qIEtleUNvZGUuS0VZXzIgKi8sICcyJyk7XG4gIGRlZmluZSgyNCAvKiBLZXlDb2RlLktFWV8zICovLCAnMycpO1xuICBkZWZpbmUoMjUgLyogS2V5Q29kZS5LRVlfNCAqLywgJzQnKTtcbiAgZGVmaW5lKDI2IC8qIEtleUNvZGUuS0VZXzUgKi8sICc1Jyk7XG4gIGRlZmluZSgyNyAvKiBLZXlDb2RlLktFWV82ICovLCAnNicpO1xuICBkZWZpbmUoMjggLyogS2V5Q29kZS5LRVlfNyAqLywgJzcnKTtcbiAgZGVmaW5lKDI5IC8qIEtleUNvZGUuS0VZXzggKi8sICc4Jyk7XG4gIGRlZmluZSgzMCAvKiBLZXlDb2RlLktFWV85ICovLCAnOScpO1xuICBkZWZpbmUoMzEgLyogS2V5Q29kZS5LRVlfQSAqLywgJ0EnKTtcbiAgZGVmaW5lKDMyIC8qIEtleUNvZGUuS0VZX0IgKi8sICdCJyk7XG4gIGRlZmluZSgzMyAvKiBLZXlDb2RlLktFWV9DICovLCAnQycpO1xuICBkZWZpbmUoMzQgLyogS2V5Q29kZS5LRVlfRCAqLywgJ0QnKTtcbiAgZGVmaW5lKDM1IC8qIEtleUNvZGUuS0VZX0UgKi8sICdFJyk7XG4gIGRlZmluZSgzNiAvKiBLZXlDb2RlLktFWV9GICovLCAnRicpO1xuICBkZWZpbmUoMzcgLyogS2V5Q29kZS5LRVlfRyAqLywgJ0cnKTtcbiAgZGVmaW5lKDM4IC8qIEtleUNvZGUuS0VZX0ggKi8sICdIJyk7XG4gIGRlZmluZSgzOSAvKiBLZXlDb2RlLktFWV9JICovLCAnSScpO1xuICBkZWZpbmUoNDAgLyogS2V5Q29kZS5LRVlfSiAqLywgJ0onKTtcbiAgZGVmaW5lKDQxIC8qIEtleUNvZGUuS0VZX0sgKi8sICdLJyk7XG4gIGRlZmluZSg0MiAvKiBLZXlDb2RlLktFWV9MICovLCAnTCcpO1xuICBkZWZpbmUoNDMgLyogS2V5Q29kZS5LRVlfTSAqLywgJ00nKTtcbiAgZGVmaW5lKDQ0IC8qIEtleUNvZGUuS0VZX04gKi8sICdOJyk7XG4gIGRlZmluZSg0NSAvKiBLZXlDb2RlLktFWV9PICovLCAnTycpO1xuICBkZWZpbmUoNDYgLyogS2V5Q29kZS5LRVlfUCAqLywgJ1AnKTtcbiAgZGVmaW5lKDQ3IC8qIEtleUNvZGUuS0VZX1EgKi8sICdRJyk7XG4gIGRlZmluZSg0OCAvKiBLZXlDb2RlLktFWV9SICovLCAnUicpO1xuICBkZWZpbmUoNDkgLyogS2V5Q29kZS5LRVlfUyAqLywgJ1MnKTtcbiAgZGVmaW5lKDUwIC8qIEtleUNvZGUuS0VZX1QgKi8sICdUJyk7XG4gIGRlZmluZSg1MSAvKiBLZXlDb2RlLktFWV9VICovLCAnVScpO1xuICBkZWZpbmUoNTIgLyogS2V5Q29kZS5LRVlfViAqLywgJ1YnKTtcbiAgZGVmaW5lKDUzIC8qIEtleUNvZGUuS0VZX1cgKi8sICdXJyk7XG4gIGRlZmluZSg1NCAvKiBLZXlDb2RlLktFWV9YICovLCAnWCcpO1xuICBkZWZpbmUoNTUgLyogS2V5Q29kZS5LRVlfWSAqLywgJ1knKTtcbiAgZGVmaW5lKDU2IC8qIEtleUNvZGUuS0VZX1ogKi8sICdaJyk7XG4gIGRlZmluZSg1NyAvKiBLZXlDb2RlLk1ldGEgKi8sICdNZXRhJyk7XG4gIGRlZmluZSg1OCAvKiBLZXlDb2RlLkNvbnRleHRNZW51ICovLCAnQ29udGV4dE1lbnUnKTtcbiAgZGVmaW5lKDU5IC8qIEtleUNvZGUuRjEgKi8sICdGMScpO1xuICBkZWZpbmUoNjAgLyogS2V5Q29kZS5GMiAqLywgJ0YyJyk7XG4gIGRlZmluZSg2MSAvKiBLZXlDb2RlLkYzICovLCAnRjMnKTtcbiAgZGVmaW5lKDYyIC8qIEtleUNvZGUuRjQgKi8sICdGNCcpO1xuICBkZWZpbmUoNjMgLyogS2V5Q29kZS5GNSAqLywgJ0Y1Jyk7XG4gIGRlZmluZSg2NCAvKiBLZXlDb2RlLkY2ICovLCAnRjYnKTtcbiAgZGVmaW5lKDY1IC8qIEtleUNvZGUuRjcgKi8sICdGNycpO1xuICBkZWZpbmUoNjYgLyogS2V5Q29kZS5GOCAqLywgJ0Y4Jyk7XG4gIGRlZmluZSg2NyAvKiBLZXlDb2RlLkY5ICovLCAnRjknKTtcbiAgZGVmaW5lKDY4IC8qIEtleUNvZGUuRjEwICovLCAnRjEwJyk7XG4gIGRlZmluZSg2OSAvKiBLZXlDb2RlLkYxMSAqLywgJ0YxMScpO1xuICBkZWZpbmUoNzAgLyogS2V5Q29kZS5GMTIgKi8sICdGMTInKTtcbiAgZGVmaW5lKDcxIC8qIEtleUNvZGUuRjEzICovLCAnRjEzJyk7XG4gIGRlZmluZSg3MiAvKiBLZXlDb2RlLkYxNCAqLywgJ0YxNCcpO1xuICBkZWZpbmUoNzMgLyogS2V5Q29kZS5GMTUgKi8sICdGMTUnKTtcbiAgZGVmaW5lKDc0IC8qIEtleUNvZGUuRjE2ICovLCAnRjE2Jyk7XG4gIGRlZmluZSg3NSAvKiBLZXlDb2RlLkYxNyAqLywgJ0YxNycpO1xuICBkZWZpbmUoNzYgLyogS2V5Q29kZS5GMTggKi8sICdGMTgnKTtcbiAgZGVmaW5lKDc3IC8qIEtleUNvZGUuRjE5ICovLCAnRjE5Jyk7XG4gIGRlZmluZSg3OCAvKiBLZXlDb2RlLk51bUxvY2sgKi8sICdOdW1Mb2NrJyk7XG4gIGRlZmluZSg3OSAvKiBLZXlDb2RlLlNjcm9sbExvY2sgKi8sICdTY3JvbGxMb2NrJyk7XG4gIGRlZmluZSg4MCAvKiBLZXlDb2RlLlVTX1NFTUlDT0xPTiAqLywgJzsnLCAnOycsICdPRU1fMScpO1xuICBkZWZpbmUoODEgLyogS2V5Q29kZS5VU19FUVVBTCAqLywgJz0nLCAnPScsICdPRU1fUExVUycpO1xuICBkZWZpbmUoODIgLyogS2V5Q29kZS5VU19DT01NQSAqLywgJywnLCAnLCcsICdPRU1fQ09NTUEnKTtcbiAgZGVmaW5lKDgzIC8qIEtleUNvZGUuVVNfTUlOVVMgKi8sICctJywgJy0nLCAnT0VNX01JTlVTJyk7XG4gIGRlZmluZSg4NCAvKiBLZXlDb2RlLlVTX0RPVCAqLywgJy4nLCAnLicsICdPRU1fUEVSSU9EJyk7XG4gIGRlZmluZSg4NSAvKiBLZXlDb2RlLlVTX1NMQVNIICovLCAnLycsICcvJywgJ09FTV8yJyk7XG4gIGRlZmluZSg4NiAvKiBLZXlDb2RlLlVTX0JBQ0tUSUNLICovLCAnYCcsICdgJywgJ09FTV8zJyk7XG4gIGRlZmluZSgxMTAgLyogS2V5Q29kZS5BQk5UX0MxICovLCAnQUJOVF9DMScpO1xuICBkZWZpbmUoMTExIC8qIEtleUNvZGUuQUJOVF9DMiAqLywgJ0FCTlRfQzInKTtcbiAgZGVmaW5lKDg3IC8qIEtleUNvZGUuVVNfT1BFTl9TUVVBUkVfQlJBQ0tFVCAqLywgJ1snLCAnWycsICdPRU1fNCcpO1xuICBkZWZpbmUoODggLyogS2V5Q29kZS5VU19CQUNLU0xBU0ggKi8sICdcXFxcJywgJ1xcXFwnLCAnT0VNXzUnKTtcbiAgZGVmaW5lKDg5IC8qIEtleUNvZGUuVVNfQ0xPU0VfU1FVQVJFX0JSQUNLRVQgKi8sICddJywgJ10nLCAnT0VNXzYnKTtcbiAgZGVmaW5lKDkwIC8qIEtleUNvZGUuVVNfUVVPVEUgKi8sICdcXCcnLCAnXFwnJywgJ09FTV83Jyk7XG4gIGRlZmluZSg5MSAvKiBLZXlDb2RlLk9FTV84ICovLCAnT0VNXzgnKTtcbiAgZGVmaW5lKDkyIC8qIEtleUNvZGUuT0VNXzEwMiAqLywgJ09FTV8xMDInKTtcbiAgZGVmaW5lKDkzIC8qIEtleUNvZGUuTlVNUEFEXzAgKi8sICdOdW1QYWQwJyk7XG4gIGRlZmluZSg5NCAvKiBLZXlDb2RlLk5VTVBBRF8xICovLCAnTnVtUGFkMScpO1xuICBkZWZpbmUoOTUgLyogS2V5Q29kZS5OVU1QQURfMiAqLywgJ051bVBhZDInKTtcbiAgZGVmaW5lKDk2IC8qIEtleUNvZGUuTlVNUEFEXzMgKi8sICdOdW1QYWQzJyk7XG4gIGRlZmluZSg5NyAvKiBLZXlDb2RlLk5VTVBBRF80ICovLCAnTnVtUGFkNCcpO1xuICBkZWZpbmUoOTggLyogS2V5Q29kZS5OVU1QQURfNSAqLywgJ051bVBhZDUnKTtcbiAgZGVmaW5lKDk5IC8qIEtleUNvZGUuTlVNUEFEXzYgKi8sICdOdW1QYWQ2Jyk7XG4gIGRlZmluZSgxMDAgLyogS2V5Q29kZS5OVU1QQURfNyAqLywgJ051bVBhZDcnKTtcbiAgZGVmaW5lKDEwMSAvKiBLZXlDb2RlLk5VTVBBRF84ICovLCAnTnVtUGFkOCcpO1xuICBkZWZpbmUoMTAyIC8qIEtleUNvZGUuTlVNUEFEXzkgKi8sICdOdW1QYWQ5Jyk7XG4gIGRlZmluZSgxMDMgLyogS2V5Q29kZS5OVU1QQURfTVVMVElQTFkgKi8sICdOdW1QYWRfTXVsdGlwbHknKTtcbiAgZGVmaW5lKDEwNCAvKiBLZXlDb2RlLk5VTVBBRF9BREQgKi8sICdOdW1QYWRfQWRkJyk7XG4gIGRlZmluZSgxMDUgLyogS2V5Q29kZS5OVU1QQURfU0VQQVJBVE9SICovLCAnTnVtUGFkX1NlcGFyYXRvcicpO1xuICBkZWZpbmUoMTA2IC8qIEtleUNvZGUuTlVNUEFEX1NVQlRSQUNUICovLCAnTnVtUGFkX1N1YnRyYWN0Jyk7XG4gIGRlZmluZSgxMDcgLyogS2V5Q29kZS5OVU1QQURfREVDSU1BTCAqLywgJ051bVBhZF9EZWNpbWFsJyk7XG4gIGRlZmluZSgxMDggLyogS2V5Q29kZS5OVU1QQURfRElWSURFICovLCAnTnVtUGFkX0RpdmlkZScpO1xufSkoKTtcbnZhciBLZXlDb2RlVXRpbHM7XG4oZnVuY3Rpb24gKEtleUNvZGVVdGlscykge1xuICBmdW5jdGlvbiB0b1N0cmluZyhrZXlDb2RlKSB7XG4gICAgcmV0dXJuIF9nZXRfXyhcInVpTWFwXCIpLmtleUNvZGVUb1N0cihrZXlDb2RlKTtcbiAgfVxuICBLZXlDb2RlVXRpbHMudG9TdHJpbmcgPSB0b1N0cmluZztcbiAgZnVuY3Rpb24gZnJvbVN0cmluZyhrZXkpIHtcbiAgICByZXR1cm4gX2dldF9fKFwidWlNYXBcIikuc3RyVG9LZXlDb2RlKGtleSk7XG4gIH1cbiAgS2V5Q29kZVV0aWxzLmZyb21TdHJpbmcgPSBmcm9tU3RyaW5nO1xuICBmdW5jdGlvbiB0b1VzZXJTZXR0aW5nc1VTKGtleUNvZGUpIHtcbiAgICByZXR1cm4gX2dldF9fKFwidXNlclNldHRpbmdzVVNNYXBcIikua2V5Q29kZVRvU3RyKGtleUNvZGUpO1xuICB9XG4gIEtleUNvZGVVdGlscy50b1VzZXJTZXR0aW5nc1VTID0gdG9Vc2VyU2V0dGluZ3NVUztcbiAgZnVuY3Rpb24gdG9Vc2VyU2V0dGluZ3NHZW5lcmFsKGtleUNvZGUpIHtcbiAgICByZXR1cm4gX2dldF9fKFwidXNlclNldHRpbmdzR2VuZXJhbE1hcFwiKS5rZXlDb2RlVG9TdHIoa2V5Q29kZSk7XG4gIH1cbiAgS2V5Q29kZVV0aWxzLnRvVXNlclNldHRpbmdzR2VuZXJhbCA9IHRvVXNlclNldHRpbmdzR2VuZXJhbDtcbiAgZnVuY3Rpb24gZnJvbVVzZXJTZXR0aW5ncyhrZXkpIHtcbiAgICByZXR1cm4gX2dldF9fKFwidXNlclNldHRpbmdzVVNNYXBcIikuc3RyVG9LZXlDb2RlKGtleSkgfHwgX2dldF9fKFwidXNlclNldHRpbmdzR2VuZXJhbE1hcFwiKS5zdHJUb0tleUNvZGUoa2V5KTtcbiAgfVxuICBLZXlDb2RlVXRpbHMuZnJvbVVzZXJTZXR0aW5ncyA9IGZyb21Vc2VyU2V0dGluZ3M7XG59KShfZ2V0X18oXCJLZXlDb2RlVXRpbHNcIikgfHwgKGV4cG9ydHMuS2V5Q29kZVV0aWxzID0gX2Fzc2lnbl9fKFwiS2V5Q29kZVV0aWxzXCIsIHt9KSkpO1xuZnVuY3Rpb24gS2V5Q2hvcmQoZmlyc3RQYXJ0LCBzZWNvbmRQYXJ0KSB7XG4gIGNvbnN0IGNob3JkUGFydCA9IChzZWNvbmRQYXJ0ICYgMHgwMDAwRkZGRikgPDwgMTYgPj4+IDA7XG4gIHJldHVybiAoZmlyc3RQYXJ0IHwgY2hvcmRQYXJ0KSA+Pj4gMDtcbn1cbmV4cG9ydHMuS2V5Q2hvcmQgPSBfZ2V0X18oXCJLZXlDaG9yZFwiKTtcbmNsYXNzIFNpbXBsZUtleWJpbmRpbmcge1xuICBjb25zdHJ1Y3RvcihjdHJsS2V5LCBzaGlmdEtleSwgYWx0S2V5LCBtZXRhS2V5LCBrZXlDb2RlKSB7XG4gICAgdGhpcy50eXBlID0gMSAvKiBLZXliaW5kaW5nVHlwZS5TaW1wbGUgKi87XG4gICAgdGhpcy5jdHJsS2V5ID0gY3RybEtleTtcbiAgICB0aGlzLnNoaWZ0S2V5ID0gc2hpZnRLZXk7XG4gICAgdGhpcy5hbHRLZXkgPSBhbHRLZXk7XG4gICAgdGhpcy5tZXRhS2V5ID0gbWV0YUtleTtcbiAgICB0aGlzLmtleUNvZGUgPSBrZXlDb2RlO1xuICB9XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuICBlcXVhbHMob3RoZXIpIHtcbiAgICBpZiAob3RoZXIudHlwZSAhPT0gMSAvKiBLZXliaW5kaW5nVHlwZS5TaW1wbGUgKi8pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3RybEtleSA9PT0gb3RoZXIuY3RybEtleSAmJiB0aGlzLnNoaWZ0S2V5ID09PSBvdGhlci5zaGlmdEtleSAmJiB0aGlzLmFsdEtleSA9PT0gb3RoZXIuYWx0S2V5ICYmIHRoaXMubWV0YUtleSA9PT0gb3RoZXIubWV0YUtleSAmJiB0aGlzLmtleUNvZGUgPT09IG90aGVyLmtleUNvZGU7XG4gIH1cbiAgZ2V0SGFzaENvZGUoKSB7XG4gICAgY29uc3QgY3RybCA9IHRoaXMuY3RybEtleSA/ICcxJyA6ICcwJztcbiAgICBjb25zdCBzaGlmdCA9IHRoaXMuc2hpZnRLZXkgPyAnMScgOiAnMCc7XG4gICAgY29uc3QgYWx0ID0gdGhpcy5hbHRLZXkgPyAnMScgOiAnMCc7XG4gICAgY29uc3QgbWV0YSA9IHRoaXMubWV0YUtleSA/ICcxJyA6ICcwJztcbiAgICByZXR1cm4gYCR7Y3RybH0ke3NoaWZ0fSR7YWx0fSR7bWV0YX0ke3RoaXMua2V5Q29kZX1gO1xuICB9XG4gIGlzTW9kaWZpZXJLZXkoKSB7XG4gICAgcmV0dXJuIHRoaXMua2V5Q29kZSA9PT0gMCAvKiBLZXlDb2RlLlVua25vd24gKi8gfHwgdGhpcy5rZXlDb2RlID09PSA1IC8qIEtleUNvZGUuQ3RybCAqLyB8fCB0aGlzLmtleUNvZGUgPT09IDU3IC8qIEtleUNvZGUuTWV0YSAqLyB8fCB0aGlzLmtleUNvZGUgPT09IDYgLyogS2V5Q29kZS5BbHQgKi8gfHwgdGhpcy5rZXlDb2RlID09PSA0IC8qIEtleUNvZGUuU2hpZnQgKi87XG4gIH1cbiAgLyoqXG4gICAqIERvZXMgdGhpcyBrZXliaW5kaW5nIHJlZmVyIHRvIHRoZSBrZXkgY29kZSBvZiBhIG1vZGlmaWVyIGFuZCBpdCBhbHNvIGhhcyB0aGUgbW9kaWZpZXIgZmxhZz9cbiAgICovXG4gIGlzRHVwbGljYXRlTW9kaWZpZXJDYXNlKCkge1xuICAgIHJldHVybiB0aGlzLmN0cmxLZXkgJiYgdGhpcy5rZXlDb2RlID09PSA1IC8qIEtleUNvZGUuQ3RybCAqLyB8fCB0aGlzLnNoaWZ0S2V5ICYmIHRoaXMua2V5Q29kZSA9PT0gNCAvKiBLZXlDb2RlLlNoaWZ0ICovIHx8IHRoaXMuYWx0S2V5ICYmIHRoaXMua2V5Q29kZSA9PT0gNiAvKiBLZXlDb2RlLkFsdCAqLyB8fCB0aGlzLm1ldGFLZXkgJiYgdGhpcy5rZXlDb2RlID09PSA1NyAvKiBLZXlDb2RlLk1ldGEgKi87XG4gIH1cbn1cblxuZXhwb3J0cy5TaW1wbGVLZXliaW5kaW5nID0gX2dldF9fKFwiU2ltcGxlS2V5YmluZGluZ1wiKTtcbmNsYXNzIENob3JkS2V5YmluZGluZyB7XG4gIGNvbnN0cnVjdG9yKGZpcnN0UGFydCwgY2hvcmRQYXJ0KSB7XG4gICAgdGhpcy50eXBlID0gMiAvKiBLZXliaW5kaW5nVHlwZS5DaG9yZCAqLztcbiAgICB0aGlzLmZpcnN0UGFydCA9IGZpcnN0UGFydDtcbiAgICB0aGlzLmNob3JkUGFydCA9IGNob3JkUGFydDtcbiAgfVxuICBnZXRIYXNoQ29kZSgpIHtcbiAgICByZXR1cm4gYCR7dGhpcy5maXJzdFBhcnQuZ2V0SGFzaENvZGUoKX07JHt0aGlzLmNob3JkUGFydC5nZXRIYXNoQ29kZSgpfWA7XG4gIH1cbn1cbmV4cG9ydHMuQ2hvcmRLZXliaW5kaW5nID0gX2dldF9fKFwiQ2hvcmRLZXliaW5kaW5nXCIpO1xuZnVuY3Rpb24gY3JlYXRlS2V5YmluZGluZyhrZXliaW5kaW5nLCBPUykge1xuICBpZiAoa2V5YmluZGluZyA9PT0gMCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IGZpcnN0UGFydCA9IChrZXliaW5kaW5nICYgMHgwMDAwRkZGRikgPj4+IDA7XG4gIGNvbnN0IGNob3JkUGFydCA9IChrZXliaW5kaW5nICYgMHhGRkZGMDAwMCkgPj4+IDE2O1xuICBpZiAoY2hvcmRQYXJ0ICE9PSAwKSB7XG4gICAgcmV0dXJuIG5ldyAoX2dldF9fKFwiQ2hvcmRLZXliaW5kaW5nXCIpKShfZ2V0X18oXCJjcmVhdGVTaW1wbGVLZXliaW5kaW5nXCIpKGZpcnN0UGFydCwgT1MpLCBfZ2V0X18oXCJjcmVhdGVTaW1wbGVLZXliaW5kaW5nXCIpKGNob3JkUGFydCwgT1MpKTtcbiAgfVxuICByZXR1cm4gX2dldF9fKFwiY3JlYXRlU2ltcGxlS2V5YmluZGluZ1wiKShmaXJzdFBhcnQsIE9TKTtcbn1cbmV4cG9ydHMuY3JlYXRlS2V5YmluZGluZyA9IF9nZXRfXyhcImNyZWF0ZUtleWJpbmRpbmdcIik7XG5mdW5jdGlvbiBjcmVhdGVTaW1wbGVLZXliaW5kaW5nKGtleWJpbmRpbmcsIE9TKSB7XG4gIGNvbnN0IGN0cmxDbWQgPSAhIShrZXliaW5kaW5nICYgMjA0OCAvKiBCaW5hcnlLZXliaW5kaW5nc01hc2suQ3RybENtZCAqLyk7XG4gIGNvbnN0IHdpbkN0cmwgPSAhIShrZXliaW5kaW5nICYgMjU2IC8qIEJpbmFyeUtleWJpbmRpbmdzTWFzay5XaW5DdHJsICovKTtcbiAgY29uc3QgY3RybEtleSA9IE9TID09PSAyIC8qIE9wZXJhdGluZ1N5c3RlbS5NYWNpbnRvc2ggKi8gPyB3aW5DdHJsIDogY3RybENtZDtcbiAgY29uc3Qgc2hpZnRLZXkgPSAhIShrZXliaW5kaW5nICYgMTAyNCAvKiBCaW5hcnlLZXliaW5kaW5nc01hc2suU2hpZnQgKi8pO1xuICBjb25zdCBhbHRLZXkgPSAhIShrZXliaW5kaW5nICYgNTEyIC8qIEJpbmFyeUtleWJpbmRpbmdzTWFzay5BbHQgKi8pO1xuICBjb25zdCBtZXRhS2V5ID0gT1MgPT09IDIgLyogT3BlcmF0aW5nU3lzdGVtLk1hY2ludG9zaCAqLyA/IGN0cmxDbWQgOiB3aW5DdHJsO1xuICBjb25zdCBrZXlDb2RlID0ga2V5YmluZGluZyAmIDI1NSAvKiBCaW5hcnlLZXliaW5kaW5nc01hc2suS2V5Q29kZSAqLztcbiAgcmV0dXJuIG5ldyAoX2dldF9fKFwiU2ltcGxlS2V5YmluZGluZ1wiKSkoY3RybEtleSwgc2hpZnRLZXksIGFsdEtleSwgbWV0YUtleSwga2V5Q29kZSk7XG59XG5leHBvcnRzLmNyZWF0ZVNpbXBsZUtleWJpbmRpbmcgPSBfZ2V0X18oXCJjcmVhdGVTaW1wbGVLZXliaW5kaW5nXCIpO1xuY2xhc3MgUmVzb2x2ZWRLZXliaW5kaW5nUGFydCB7XG4gIGNvbnN0cnVjdG9yKGN0cmxLZXksIHNoaWZ0S2V5LCBhbHRLZXksIG1ldGFLZXksIGtiTGFiZWwsIGtiQXJpYUxhYmVsKSB7XG4gICAgdGhpcy5jdHJsS2V5ID0gY3RybEtleTtcbiAgICB0aGlzLnNoaWZ0S2V5ID0gc2hpZnRLZXk7XG4gICAgdGhpcy5hbHRLZXkgPSBhbHRLZXk7XG4gICAgdGhpcy5tZXRhS2V5ID0gbWV0YUtleTtcbiAgICB0aGlzLmtleUxhYmVsID0ga2JMYWJlbDtcbiAgICB0aGlzLmtleUFyaWFMYWJlbCA9IGtiQXJpYUxhYmVsO1xuICB9XG59XG5leHBvcnRzLlJlc29sdmVkS2V5YmluZGluZ1BhcnQgPSBfZ2V0X18oXCJSZXNvbHZlZEtleWJpbmRpbmdQYXJ0XCIpO1xuLyoqXG4gKiBBIHJlc29sdmVkIGtleWJpbmRpbmcuIENhbiBiZSBhIHNpbXBsZSBrZXliaW5kaW5nIG9yIGEgY2hvcmQga2V5YmluZGluZy5cbiAqL1xuY2xhc3MgUmVzb2x2ZWRLZXliaW5kaW5nIHt9XG5leHBvcnRzLlJlc29sdmVkS2V5YmluZGluZyA9IF9nZXRfXyhcIlJlc29sdmVkS2V5YmluZGluZ1wiKTtcbmZ1bmN0aW9uIF9nZXRHbG9iYWxPYmplY3QoKSB7XG4gIHRyeSB7XG4gICAgaWYgKCEhZ2xvYmFsKSB7XG4gICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoISF3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH1cbn1cbjtcbnZhciBfUmV3aXJlTW9kdWxlSWRfXyA9IG51bGw7XG5mdW5jdGlvbiBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpIHtcbiAgaWYgKF9SZXdpcmVNb2R1bGVJZF9fID09PSBudWxsKSB7XG4gICAgbGV0IGdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICAgIGlmICghZ2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXykge1xuICAgICAgZ2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXyA9IDA7XG4gICAgfVxuICAgIF9SZXdpcmVNb2R1bGVJZF9fID0gX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXysrO1xuICB9XG4gIHJldHVybiBfUmV3aXJlTW9kdWxlSWRfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVSZWdpc3RyeV9fKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXykge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG4gIHJldHVybiB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZWREYXRhX18oKSB7XG4gIGxldCBtb2R1bGVJZCA9IF9nZXRSZXdpcmVNb2R1bGVJZF9fKCk7XG4gIGxldCByZWdpc3RyeSA9IF9nZXRSZXdpcmVSZWdpc3RyeV9fKCk7XG4gIGxldCByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICBpZiAoIXJld2lyZURhdGEpIHtcbiAgICByZWdpc3RyeVttb2R1bGVJZF0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIH1cbiAgcmV0dXJuIHJld2lyZURhdGE7XG59XG4oZnVuY3Rpb24gcmVnaXN0ZXJSZXNldEFsbCgpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9O1xuICB9XG59KSgpO1xudmFyIElOVEVOVElPTkFMX1VOREVGSU5FRCA9ICdfX0lOVEVOVElPTkFMX1VOREVGSU5FRF9fJztcbmxldCBfUmV3aXJlQVBJX18gPSB7fTtcbihmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGFkZFByb3BlcnR5VG9BUElPYmplY3QobmFtZSwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX1Jld2lyZUFQSV9fLCBuYW1lLCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3dpdGhfXycsIF93aXRoX18pO1xufSkoKTtcbmZ1bmN0aW9uIF9nZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHZhbHVlID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgIGlmICh2YWx1ZSA9PT0gSU5URU5USU9OQUxfVU5ERUZJTkVEKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7XG4gICAgY2FzZSBcInNjYW5Db2RlTG93ZXJDYXNlU3RyVG9JbnRcIjpcbiAgICAgIHJldHVybiBzY2FuQ29kZUxvd2VyQ2FzZVN0clRvSW50O1xuICAgIGNhc2UgXCJzY2FuQ29kZVN0clRvSW50XCI6XG4gICAgICByZXR1cm4gc2NhbkNvZGVTdHJUb0ludDtcbiAgICBjYXNlIFwic2NhbkNvZGVJbnRUb1N0clwiOlxuICAgICAgcmV0dXJuIHNjYW5Db2RlSW50VG9TdHI7XG4gICAgY2FzZSBcIktleUNvZGVTdHJNYXBcIjpcbiAgICAgIHJldHVybiBLZXlDb2RlU3RyTWFwO1xuICAgIGNhc2UgXCJ1aU1hcFwiOlxuICAgICAgcmV0dXJuIHVpTWFwO1xuICAgIGNhc2UgXCJ1c2VyU2V0dGluZ3NVU01hcFwiOlxuICAgICAgcmV0dXJuIHVzZXJTZXR0aW5nc1VTTWFwO1xuICAgIGNhc2UgXCJ1c2VyU2V0dGluZ3NHZW5lcmFsTWFwXCI6XG4gICAgICByZXR1cm4gdXNlclNldHRpbmdzR2VuZXJhbE1hcDtcbiAgICBjYXNlIFwiS2V5Q29kZVV0aWxzXCI6XG4gICAgICByZXR1cm4gS2V5Q29kZVV0aWxzO1xuICAgIGNhc2UgXCJLZXlDaG9yZFwiOlxuICAgICAgcmV0dXJuIEtleUNob3JkO1xuICAgIGNhc2UgXCJTaW1wbGVLZXliaW5kaW5nXCI6XG4gICAgICByZXR1cm4gU2ltcGxlS2V5YmluZGluZztcbiAgICBjYXNlIFwiQ2hvcmRLZXliaW5kaW5nXCI6XG4gICAgICByZXR1cm4gQ2hvcmRLZXliaW5kaW5nO1xuICAgIGNhc2UgXCJjcmVhdGVTaW1wbGVLZXliaW5kaW5nXCI6XG4gICAgICByZXR1cm4gY3JlYXRlU2ltcGxlS2V5YmluZGluZztcbiAgICBjYXNlIFwiY3JlYXRlS2V5YmluZGluZ1wiOlxuICAgICAgcmV0dXJuIGNyZWF0ZUtleWJpbmRpbmc7XG4gICAgY2FzZSBcIlJlc29sdmVkS2V5YmluZGluZ1BhcnRcIjpcbiAgICAgIHJldHVybiBSZXNvbHZlZEtleWJpbmRpbmdQYXJ0O1xuICAgIGNhc2UgXCJSZXNvbHZlZEtleWJpbmRpbmdcIjpcbiAgICAgIHJldHVybiBSZXNvbHZlZEtleWJpbmRpbmc7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIF92YWx1ZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJLZXlDb2RlVXRpbHNcIjpcbiAgICAgIHJldHVybiBLZXlDb2RlVXRpbHMgPSBfdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF91cGRhdGVfb3BlcmF0aW9uX18ob3BlcmF0aW9uLCB2YXJpYWJsZU5hbWUsIHByZWZpeCkge1xuICB2YXIgb2xkVmFsdWUgPSBfZ2V0X18odmFyaWFibGVOYW1lKTtcbiAgdmFyIG5ld1ZhbHVlID0gb3BlcmF0aW9uID09PSAnKysnID8gb2xkVmFsdWUgKyAxIDogb2xkVmFsdWUgLSAxO1xuICBfYXNzaWduX18odmFyaWFibGVOYW1lLCBuZXdWYWx1ZSk7XG4gIHJldHVybiBwcmVmaXggPyBuZXdWYWx1ZSA6IG9sZFZhbHVlO1xufVxuZnVuY3Rpb24gX3NldF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAodHlwZW9mIHZhcmlhYmxlTmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbbmFtZV0gPSB2YXJpYWJsZU5hbWVbbmFtZV07XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gSU5URU5USU9OQUxfVU5ERUZJTkVEO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gX3Jlc2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgZGVsZXRlIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgaWYgKE9iamVjdC5rZXlzKHJld2lyZURhdGEpLmxlbmd0aCA9PSAwKSB7XG4gICAgZGVsZXRlIF9nZXRSZXdpcmVSZWdpc3RyeV9fKClbX2dldFJld2lyZU1vZHVsZUlkX19dO1xuICB9XG4gIDtcbn1cbmZ1bmN0aW9uIF93aXRoX18ob2JqZWN0KSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgdmFyIHJld2lyZWRWYXJpYWJsZU5hbWVzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcbiAgdmFyIHByZXZpb3VzVmFsdWVzID0ge307XG4gIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gb2JqZWN0W3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gICAgbGV0IHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gICAgaWYgKCEhcmVzdWx0ICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXN1bHQudGhlbihyZXNldCkuY2F0Y2gocmVzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNldCgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxubGV0IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9IHR5cGVvZiBtb2R1bGUuZXhwb3J0cztcbmZ1bmN0aW9uIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsIG5hbWUsIHtcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuaWYgKChfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdvYmplY3QnIHx8IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ2Z1bmN0aW9uJykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShtb2R1bGUuZXhwb3J0cykpIHtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX193aXRoX18nLCBfd2l0aF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZUFQSV9fJywgX1Jld2lyZUFQSV9fKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLkRpc3Bvc2FibGUgPSBleHBvcnRzLnRvRGlzcG9zYWJsZSA9IGV4cG9ydHMuY29tYmluZWREaXNwb3NhYmxlID0gZXhwb3J0cy5kaXNwb3NlID0gZXhwb3J0cy5pc0Rpc3Bvc2FibGUgPSB2b2lkIDA7XG5mdW5jdGlvbiBpc0Rpc3Bvc2FibGUodGhpbmcpIHtcbiAgcmV0dXJuIHR5cGVvZiB0aGluZy5kaXNwb3NlID09PSAnZnVuY3Rpb24nICYmIHRoaW5nLmRpc3Bvc2UubGVuZ3RoID09PSAwO1xufVxuZXhwb3J0cy5pc0Rpc3Bvc2FibGUgPSBfZ2V0X18oXCJpc0Rpc3Bvc2FibGVcIik7XG5mdW5jdGlvbiBkaXNwb3NlKGZpcnN0LCAuLi5yZXN0KSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGZpcnN0KSkge1xuICAgIGZpcnN0LmZvckVhY2goZCA9PiBkICYmIGQuZGlzcG9zZSgpKTtcbiAgICByZXR1cm4gW107XG4gIH0gZWxzZSBpZiAocmVzdC5sZW5ndGggPT09IDApIHtcbiAgICBpZiAoZmlyc3QpIHtcbiAgICAgIGZpcnN0LmRpc3Bvc2UoKTtcbiAgICAgIHJldHVybiBmaXJzdDtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICBfZ2V0X18oXCJkaXNwb3NlXCIpKGZpcnN0KTtcbiAgICBfZ2V0X18oXCJkaXNwb3NlXCIpKHJlc3QpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuZXhwb3J0cy5kaXNwb3NlID0gX2dldF9fKFwiZGlzcG9zZVwiKTtcbmZ1bmN0aW9uIGNvbWJpbmVkRGlzcG9zYWJsZShkaXNwb3NhYmxlcykge1xuICByZXR1cm4ge1xuICAgIGRpc3Bvc2U6ICgpID0+IF9nZXRfXyhcImRpc3Bvc2VcIikoZGlzcG9zYWJsZXMpXG4gIH07XG59XG5leHBvcnRzLmNvbWJpbmVkRGlzcG9zYWJsZSA9IF9nZXRfXyhcImNvbWJpbmVkRGlzcG9zYWJsZVwiKTtcbmZ1bmN0aW9uIHRvRGlzcG9zYWJsZShmbikge1xuICByZXR1cm4ge1xuICAgIGRpc3Bvc2UoKSB7XG4gICAgICBmbigpO1xuICAgIH1cbiAgfTtcbn1cbmV4cG9ydHMudG9EaXNwb3NhYmxlID0gX2dldF9fKFwidG9EaXNwb3NhYmxlXCIpO1xuY2xhc3MgRGlzcG9zYWJsZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX3RvRGlzcG9zZSA9IFtdO1xuICAgIHRoaXMuX2xpZmVjeWNsZV9kaXNwb3NhYmxlX2lzRGlzcG9zZWQgPSBmYWxzZTtcbiAgfVxuICBnZXQgdG9EaXNwb3NlKCkge1xuICAgIHJldHVybiB0aGlzLl90b0Rpc3Bvc2U7XG4gIH1cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLl9saWZlY3ljbGVfZGlzcG9zYWJsZV9pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB0aGlzLl90b0Rpc3Bvc2UgPSBfZ2V0X18oXCJkaXNwb3NlXCIpKHRoaXMuX3RvRGlzcG9zZSk7XG4gIH1cbiAgX3JlZ2lzdGVyKHQpIHtcbiAgICBpZiAodGhpcy5fbGlmZWN5Y2xlX2Rpc3Bvc2FibGVfaXNEaXNwb3NlZCkge1xuICAgICAgY29uc29sZS53YXJuKCdSZWdpc3RlcmluZyBkaXNwb3NhYmxlIG9uIG9iamVjdCB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gZGlzcG9zZWQuJyk7XG4gICAgICB0LmRpc3Bvc2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdG9EaXNwb3NlLnB1c2godCk7XG4gICAgfVxuICAgIHJldHVybiB0O1xuICB9XG59XG5leHBvcnRzLkRpc3Bvc2FibGUgPSBfZ2V0X18oXCJEaXNwb3NhYmxlXCIpO1xuX2dldF9fKFwiRGlzcG9zYWJsZVwiKS5Ob25lID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGRpc3Bvc2UoKSB7fVxufSk7XG5mdW5jdGlvbiBfZ2V0R2xvYmFsT2JqZWN0KCkge1xuICB0cnkge1xuICAgIGlmICghIWdsb2JhbCkge1xuICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCEhd2luZG93KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG59XG47XG52YXIgX1Jld2lyZU1vZHVsZUlkX18gPSBudWxsO1xuZnVuY3Rpb24gX2dldFJld2lyZU1vZHVsZUlkX18oKSB7XG4gIGlmIChfUmV3aXJlTW9kdWxlSWRfXyA9PT0gbnVsbCkge1xuICAgIGxldCBnbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgICBpZiAoIWdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18pIHtcbiAgICAgIGdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18gPSAwO1xuICAgIH1cbiAgICBfUmV3aXJlTW9kdWxlSWRfXyA9IF9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18rKztcbiAgfVxuICByZXR1cm4gX1Jld2lyZU1vZHVsZUlkX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuICByZXR1cm4gdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVkRGF0YV9fKCkge1xuICBsZXQgbW9kdWxlSWQgPSBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpO1xuICBsZXQgcmVnaXN0cnkgPSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpO1xuICBsZXQgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgaWYgKCFyZXdpcmVEYXRhKSB7XG4gICAgcmVnaXN0cnlbbW9kdWxlSWRdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICB9XG4gIHJldHVybiByZXdpcmVEYXRhO1xufVxuKGZ1bmN0aW9uIHJlZ2lzdGVyUmVzZXRBbGwoKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSkge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfTtcbiAgfVxufSkoKTtcbnZhciBJTlRFTlRJT05BTF9VTkRFRklORUQgPSAnX19JTlRFTlRJT05BTF9VTkRFRklORURfXyc7XG5sZXQgX1Jld2lyZUFQSV9fID0ge307XG4oZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KG5hbWUsIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9SZXdpcmVBUElfXywgbmFtZSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfVxuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX193aXRoX18nLCBfd2l0aF9fKTtcbn0pKCk7XG5mdW5jdGlvbiBfZ2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB2YWx1ZSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICBpZiAodmFsdWUgPT09IElOVEVOVElPTkFMX1VOREVGSU5FRCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJpc0Rpc3Bvc2FibGVcIjpcbiAgICAgIHJldHVybiBpc0Rpc3Bvc2FibGU7XG4gICAgY2FzZSBcImRpc3Bvc2VcIjpcbiAgICAgIHJldHVybiBkaXNwb3NlO1xuICAgIGNhc2UgXCJjb21iaW5lZERpc3Bvc2FibGVcIjpcbiAgICAgIHJldHVybiBjb21iaW5lZERpc3Bvc2FibGU7XG4gICAgY2FzZSBcInRvRGlzcG9zYWJsZVwiOlxuICAgICAgcmV0dXJuIHRvRGlzcG9zYWJsZTtcbiAgICBjYXNlIFwiRGlzcG9zYWJsZVwiOlxuICAgICAgcmV0dXJuIERpc3Bvc2FibGU7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIF92YWx1ZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge31cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF91cGRhdGVfb3BlcmF0aW9uX18ob3BlcmF0aW9uLCB2YXJpYWJsZU5hbWUsIHByZWZpeCkge1xuICB2YXIgb2xkVmFsdWUgPSBfZ2V0X18odmFyaWFibGVOYW1lKTtcbiAgdmFyIG5ld1ZhbHVlID0gb3BlcmF0aW9uID09PSAnKysnID8gb2xkVmFsdWUgKyAxIDogb2xkVmFsdWUgLSAxO1xuICBfYXNzaWduX18odmFyaWFibGVOYW1lLCBuZXdWYWx1ZSk7XG4gIHJldHVybiBwcmVmaXggPyBuZXdWYWx1ZSA6IG9sZFZhbHVlO1xufVxuZnVuY3Rpb24gX3NldF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAodHlwZW9mIHZhcmlhYmxlTmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbbmFtZV0gPSB2YXJpYWJsZU5hbWVbbmFtZV07XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gSU5URU5USU9OQUxfVU5ERUZJTkVEO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gX3Jlc2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgZGVsZXRlIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgaWYgKE9iamVjdC5rZXlzKHJld2lyZURhdGEpLmxlbmd0aCA9PSAwKSB7XG4gICAgZGVsZXRlIF9nZXRSZXdpcmVSZWdpc3RyeV9fKClbX2dldFJld2lyZU1vZHVsZUlkX19dO1xuICB9XG4gIDtcbn1cbmZ1bmN0aW9uIF93aXRoX18ob2JqZWN0KSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgdmFyIHJld2lyZWRWYXJpYWJsZU5hbWVzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcbiAgdmFyIHByZXZpb3VzVmFsdWVzID0ge307XG4gIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gb2JqZWN0W3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gICAgbGV0IHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gICAgaWYgKCEhcmVzdWx0ICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXN1bHQudGhlbihyZXNldCkuY2F0Y2gocmVzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNldCgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxubGV0IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9IHR5cGVvZiBtb2R1bGUuZXhwb3J0cztcbmZ1bmN0aW9uIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsIG5hbWUsIHtcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuaWYgKChfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdvYmplY3QnIHx8IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ2Z1bmN0aW9uJykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShtb2R1bGUuZXhwb3J0cykpIHtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX193aXRoX18nLCBfd2l0aF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZUFQSV9fJywgX1Jld2lyZUFQSV9fKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLkxpbmtlZExpc3QgPSB2b2lkIDA7XG5jb25zdCBpdGVyYXRvcl8xID0gcmVxdWlyZShcIi4uL2NvbW1vbi9pdGVyYXRvclwiKTtcbmNsYXNzIE5vZGUge1xuICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgfVxufVxuY2xhc3MgTGlua2VkTGlzdCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX3NpemUgPSAwO1xuICB9XG4gIGdldCBzaXplKCkge1xuICAgIHJldHVybiB0aGlzLl9zaXplO1xuICB9XG4gIGlzRW1wdHkoKSB7XG4gICAgcmV0dXJuICF0aGlzLl9maXJzdDtcbiAgfVxuICBjbGVhcigpIHtcbiAgICB0aGlzLl9maXJzdCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9sYXN0ID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3NpemUgPSAwO1xuICB9XG4gIHVuc2hpZnQoZWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLl9pbnNlcnQoZWxlbWVudCwgZmFsc2UpO1xuICB9XG4gIHB1c2goZWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLl9pbnNlcnQoZWxlbWVudCwgdHJ1ZSk7XG4gIH1cbiAgX2luc2VydChlbGVtZW50LCBhdFRoZUVuZCkge1xuICAgIGNvbnN0IG5ld05vZGUgPSBuZXcgKF9nZXRfXyhcIk5vZGVcIikpKGVsZW1lbnQpO1xuICAgIGlmICghdGhpcy5fZmlyc3QpIHtcbiAgICAgIHRoaXMuX2ZpcnN0ID0gbmV3Tm9kZTtcbiAgICAgIHRoaXMuX2xhc3QgPSBuZXdOb2RlO1xuICAgIH0gZWxzZSBpZiAoYXRUaGVFbmQpIHtcbiAgICAgIC8vIHB1c2hcbiAgICAgIGNvbnN0IG9sZExhc3QgPSB0aGlzLl9sYXN0O1xuICAgICAgdGhpcy5fbGFzdCA9IG5ld05vZGU7XG4gICAgICBuZXdOb2RlLnByZXYgPSBvbGRMYXN0O1xuICAgICAgb2xkTGFzdC5uZXh0ID0gbmV3Tm9kZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdW5zaGlmdFxuICAgICAgY29uc3Qgb2xkRmlyc3QgPSB0aGlzLl9maXJzdDtcbiAgICAgIHRoaXMuX2ZpcnN0ID0gbmV3Tm9kZTtcbiAgICAgIG5ld05vZGUubmV4dCA9IG9sZEZpcnN0O1xuICAgICAgb2xkRmlyc3QucHJldiA9IG5ld05vZGU7XG4gICAgfVxuICAgIHRoaXMuX3NpemUgKz0gMTtcbiAgICByZXR1cm4gdGhpcy5fcmVtb3ZlLmJpbmQodGhpcywgbmV3Tm9kZSk7XG4gIH1cbiAgc2hpZnQoKSB7XG4gICAgaWYgKCF0aGlzLl9maXJzdCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcmVzID0gdGhpcy5fZmlyc3QuZWxlbWVudDtcbiAgICAgIHRoaXMuX3JlbW92ZSh0aGlzLl9maXJzdCk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgfVxuICBwb3AoKSB7XG4gICAgaWYgKCF0aGlzLl9sYXN0KSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZXMgPSB0aGlzLl9sYXN0LmVsZW1lbnQ7XG4gICAgICB0aGlzLl9yZW1vdmUodGhpcy5fbGFzdCk7XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH1cbiAgfVxuICBfcmVtb3ZlKG5vZGUpIHtcbiAgICBsZXQgY2FuZGlkYXRlID0gdGhpcy5fZmlyc3Q7XG4gICAgd2hpbGUgKGNhbmRpZGF0ZSBpbnN0YW5jZW9mIF9nZXRfXyhcIk5vZGVcIikpIHtcbiAgICAgIGlmIChjYW5kaWRhdGUgIT09IG5vZGUpIHtcbiAgICAgICAgY2FuZGlkYXRlID0gY2FuZGlkYXRlLm5leHQ7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGNhbmRpZGF0ZS5wcmV2ICYmIGNhbmRpZGF0ZS5uZXh0KSB7XG4gICAgICAgIC8vIG1pZGRsZVxuICAgICAgICBjb25zdCBhbmNob3IgPSBjYW5kaWRhdGUucHJldjtcbiAgICAgICAgYW5jaG9yLm5leHQgPSBjYW5kaWRhdGUubmV4dDtcbiAgICAgICAgY2FuZGlkYXRlLm5leHQucHJldiA9IGFuY2hvcjtcbiAgICAgIH0gZWxzZSBpZiAoIWNhbmRpZGF0ZS5wcmV2ICYmICFjYW5kaWRhdGUubmV4dCkge1xuICAgICAgICAvLyBvbmx5IG5vZGVcbiAgICAgICAgdGhpcy5fZmlyc3QgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2xhc3QgPSB1bmRlZmluZWQ7XG4gICAgICB9IGVsc2UgaWYgKCFjYW5kaWRhdGUubmV4dCkge1xuICAgICAgICAvLyBsYXN0XG4gICAgICAgIHRoaXMuX2xhc3QgPSB0aGlzLl9sYXN0LnByZXY7XG4gICAgICAgIHRoaXMuX2xhc3QubmV4dCA9IHVuZGVmaW5lZDtcbiAgICAgIH0gZWxzZSBpZiAoIWNhbmRpZGF0ZS5wcmV2KSB7XG4gICAgICAgIC8vIGZpcnN0XG4gICAgICAgIHRoaXMuX2ZpcnN0ID0gdGhpcy5fZmlyc3QubmV4dDtcbiAgICAgICAgdGhpcy5fZmlyc3QucHJldiA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICAgIC8vIGRvbmVcbiAgICAgIHRoaXMuX3NpemUgLT0gMTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBpdGVyYXRvcigpIHtcbiAgICBsZXQgZWxlbWVudDtcbiAgICBsZXQgbm9kZSA9IHRoaXMuX2ZpcnN0O1xuICAgIHJldHVybiB7XG4gICAgICBuZXh0KCkge1xuICAgICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgICByZXR1cm4gX2dldF9fKFwiaXRlcmF0b3JfMVwiKS5GSU47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgZWxlbWVudCA9IHtcbiAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICAgICAgdmFsdWU6IG5vZGUuZWxlbWVudFxuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWxlbWVudC52YWx1ZSA9IG5vZGUuZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBub2RlID0gbm9kZS5uZXh0O1xuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIHRvQXJyYXkoKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG4gICAgZm9yIChsZXQgbm9kZSA9IHRoaXMuX2ZpcnN0OyBub2RlIGluc3RhbmNlb2YgX2dldF9fKFwiTm9kZVwiKTsgbm9kZSA9IG5vZGUubmV4dCkge1xuICAgICAgcmVzdWx0LnB1c2gobm9kZS5lbGVtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuZXhwb3J0cy5MaW5rZWRMaXN0ID0gX2dldF9fKFwiTGlua2VkTGlzdFwiKTtcbmZ1bmN0aW9uIF9nZXRHbG9iYWxPYmplY3QoKSB7XG4gIHRyeSB7XG4gICAgaWYgKCEhZ2xvYmFsKSB7XG4gICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoISF3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH1cbn1cbjtcbnZhciBfUmV3aXJlTW9kdWxlSWRfXyA9IG51bGw7XG5mdW5jdGlvbiBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpIHtcbiAgaWYgKF9SZXdpcmVNb2R1bGVJZF9fID09PSBudWxsKSB7XG4gICAgbGV0IGdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICAgIGlmICghZ2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXykge1xuICAgICAgZ2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXyA9IDA7XG4gICAgfVxuICAgIF9SZXdpcmVNb2R1bGVJZF9fID0gX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXysrO1xuICB9XG4gIHJldHVybiBfUmV3aXJlTW9kdWxlSWRfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVSZWdpc3RyeV9fKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXykge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG4gIHJldHVybiB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZWREYXRhX18oKSB7XG4gIGxldCBtb2R1bGVJZCA9IF9nZXRSZXdpcmVNb2R1bGVJZF9fKCk7XG4gIGxldCByZWdpc3RyeSA9IF9nZXRSZXdpcmVSZWdpc3RyeV9fKCk7XG4gIGxldCByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICBpZiAoIXJld2lyZURhdGEpIHtcbiAgICByZWdpc3RyeVttb2R1bGVJZF0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIH1cbiAgcmV0dXJuIHJld2lyZURhdGE7XG59XG4oZnVuY3Rpb24gcmVnaXN0ZXJSZXNldEFsbCgpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9O1xuICB9XG59KSgpO1xudmFyIElOVEVOVElPTkFMX1VOREVGSU5FRCA9ICdfX0lOVEVOVElPTkFMX1VOREVGSU5FRF9fJztcbmxldCBfUmV3aXJlQVBJX18gPSB7fTtcbihmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGFkZFByb3BlcnR5VG9BUElPYmplY3QobmFtZSwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX1Jld2lyZUFQSV9fLCBuYW1lLCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3dpdGhfXycsIF93aXRoX18pO1xufSkoKTtcbmZ1bmN0aW9uIF9nZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHZhbHVlID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgIGlmICh2YWx1ZSA9PT0gSU5URU5USU9OQUxfVU5ERUZJTkVEKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7XG4gICAgY2FzZSBcIk5vZGVcIjpcbiAgICAgIHJldHVybiBOb2RlO1xuICAgIGNhc2UgXCJpdGVyYXRvcl8xXCI6XG4gICAgICByZXR1cm4gaXRlcmF0b3JfMTtcbiAgICBjYXNlIFwiTGlua2VkTGlzdFwiOlxuICAgICAgcmV0dXJuIExpbmtlZExpc3Q7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIF92YWx1ZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge31cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF91cGRhdGVfb3BlcmF0aW9uX18ob3BlcmF0aW9uLCB2YXJpYWJsZU5hbWUsIHByZWZpeCkge1xuICB2YXIgb2xkVmFsdWUgPSBfZ2V0X18odmFyaWFibGVOYW1lKTtcbiAgdmFyIG5ld1ZhbHVlID0gb3BlcmF0aW9uID09PSAnKysnID8gb2xkVmFsdWUgKyAxIDogb2xkVmFsdWUgLSAxO1xuICBfYXNzaWduX18odmFyaWFibGVOYW1lLCBuZXdWYWx1ZSk7XG4gIHJldHVybiBwcmVmaXggPyBuZXdWYWx1ZSA6IG9sZFZhbHVlO1xufVxuZnVuY3Rpb24gX3NldF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAodHlwZW9mIHZhcmlhYmxlTmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbbmFtZV0gPSB2YXJpYWJsZU5hbWVbbmFtZV07XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gSU5URU5USU9OQUxfVU5ERUZJTkVEO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gX3Jlc2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgZGVsZXRlIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgaWYgKE9iamVjdC5rZXlzKHJld2lyZURhdGEpLmxlbmd0aCA9PSAwKSB7XG4gICAgZGVsZXRlIF9nZXRSZXdpcmVSZWdpc3RyeV9fKClbX2dldFJld2lyZU1vZHVsZUlkX19dO1xuICB9XG4gIDtcbn1cbmZ1bmN0aW9uIF93aXRoX18ob2JqZWN0KSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgdmFyIHJld2lyZWRWYXJpYWJsZU5hbWVzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcbiAgdmFyIHByZXZpb3VzVmFsdWVzID0ge307XG4gIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gb2JqZWN0W3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gICAgbGV0IHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gICAgaWYgKCEhcmVzdWx0ICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXN1bHQudGhlbihyZXNldCkuY2F0Y2gocmVzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNldCgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxubGV0IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9IHR5cGVvZiBtb2R1bGUuZXhwb3J0cztcbmZ1bmN0aW9uIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsIG5hbWUsIHtcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuaWYgKChfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdvYmplY3QnIHx8IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ2Z1bmN0aW9uJykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShtb2R1bGUuZXhwb3J0cykpIHtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX193aXRoX18nLCBfd2l0aF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZUFQSV9fJywgX1Jld2lyZUFQSV9fKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuLyogZXNsaW50LWRpc2FibGUgaW5kZW50ICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuT1MgPSBleHBvcnRzLnNldEltbWVkaWF0ZSA9IGV4cG9ydHMuZ2xvYmFscyA9IGV4cG9ydHMuaXNSb290VXNlciA9IGV4cG9ydHMucGxhdGZvcm0gPSBleHBvcnRzLmlzV2ViID0gZXhwb3J0cy5pc05hdGl2ZSA9IGV4cG9ydHMuaXNGcmVlQlNEID0gZXhwb3J0cy5pc0xpbnV4ID0gZXhwb3J0cy5pc01hY2ludG9zaCA9IGV4cG9ydHMuaXNXaW5kb3dzID0gZXhwb3J0cy5QbGF0Zm9ybVRvU3RyaW5nID0gdm9pZCAwO1xubGV0IF9pc1dpbmRvd3MgPSBmYWxzZTtcbmxldCBfaXNNYWNpbnRvc2ggPSBmYWxzZTtcbmxldCBfaXNMaW51eCA9IGZhbHNlO1xubGV0IF9pc0ZyZWVCU0QgPSBmYWxzZTtcbmxldCBfaXNOYXRpdmUgPSBmYWxzZTtcbmxldCBfaXNXZWIgPSBmYWxzZTtcbmNvbnN0IGlzRWxlY3Ryb25SZW5kZXJlciA9IHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MudmVyc2lvbnMuZWxlY3Ryb24gIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MudHlwZSA9PT0gJ3JlbmRlcmVyJztcbi8vIE9TIGRldGVjdGlvblxuaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmICFfZ2V0X18oXCJpc0VsZWN0cm9uUmVuZGVyZXJcIikpIHtcbiAgY29uc3QgdXNlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgX2Fzc2lnbl9fKFwiX2lzV2luZG93c1wiLCB1c2VyQWdlbnQuaW5kZXhPZignV2luZG93cycpID49IDApO1xuICBfYXNzaWduX18oXCJfaXNNYWNpbnRvc2hcIiwgdXNlckFnZW50LmluZGV4T2YoJ01hY2ludG9zaCcpID49IDApO1xuICBfYXNzaWduX18oXCJfaXNMaW51eFwiLCB1c2VyQWdlbnQuaW5kZXhPZignTGludXgnKSA+PSAwKTtcbiAgX2Fzc2lnbl9fKFwiX2lzRnJlZUJTRFwiLCB1c2VyQWdlbnQuaW5kZXhPZignRnJlZUJTRCcpID49IDApO1xuICBfYXNzaWduX18oXCJfaXNXZWJcIiwgdHJ1ZSk7XG59IGVsc2UgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAnb2JqZWN0Jykge1xuICBfYXNzaWduX18oXCJfaXNXaW5kb3dzXCIsIHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMicpO1xuICBfYXNzaWduX18oXCJfaXNNYWNpbnRvc2hcIiwgcHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ2RhcndpbicpO1xuICBfYXNzaWduX18oXCJfaXNMaW51eFwiLCBwcm9jZXNzLnBsYXRmb3JtID09PSAnbGludXgnKTtcbiAgX2Fzc2lnbl9fKFwiX2lzRnJlZUJTRFwiLCBwcm9jZXNzLnBsYXRmb3JtID09PSAnZnJlZWJzZCcpO1xuICBfYXNzaWduX18oXCJfaXNOYXRpdmVcIiwgdHJ1ZSk7XG59XG5mdW5jdGlvbiBQbGF0Zm9ybVRvU3RyaW5nKHBsYXRmb3JtKSB7XG4gIHN3aXRjaCAocGxhdGZvcm0pIHtcbiAgICBjYXNlIDAgLyogUGxhdGZvcm0uV2ViICovOlxuICAgICAgcmV0dXJuICdXZWInO1xuICAgIGNhc2UgMSAvKiBQbGF0Zm9ybS5NYWMgKi86XG4gICAgICByZXR1cm4gJ01hYyc7XG4gICAgY2FzZSAyIC8qIFBsYXRmb3JtLkxpbnV4ICovOlxuICAgICAgcmV0dXJuICdMaW51eCc7XG4gICAgY2FzZSAzIC8qIFBsYXRmb3JtLkZyZWVCU0QgKi86XG4gICAgICByZXR1cm4gJ0ZyZWVCU0QnO1xuICAgIGNhc2UgNCAvKiBQbGF0Zm9ybS5XaW5kb3dzICovOlxuICAgICAgcmV0dXJuICdXaW5kb3dzJztcbiAgfVxufVxuZXhwb3J0cy5QbGF0Zm9ybVRvU3RyaW5nID0gX2dldF9fKFwiUGxhdGZvcm1Ub1N0cmluZ1wiKTtcbmxldCBfcGxhdGZvcm0gPSAwIC8qIFBsYXRmb3JtLldlYiAqLztcbmlmIChfZ2V0X18oXCJfaXNOYXRpdmVcIikpIHtcbiAgaWYgKF9nZXRfXyhcIl9pc01hY2ludG9zaFwiKSkge1xuICAgIF9hc3NpZ25fXyhcIl9wbGF0Zm9ybVwiLCAxKSAvKiBQbGF0Zm9ybS5NYWMgKi87XG4gIH0gZWxzZSBpZiAoX2dldF9fKFwiX2lzV2luZG93c1wiKSkge1xuICAgIF9hc3NpZ25fXyhcIl9wbGF0Zm9ybVwiLCA0KSAvKiBQbGF0Zm9ybS5XaW5kb3dzICovO1xuICB9IGVsc2UgaWYgKF9nZXRfXyhcIl9pc0xpbnV4XCIpKSB7XG4gICAgX2Fzc2lnbl9fKFwiX3BsYXRmb3JtXCIsIDIpIC8qIFBsYXRmb3JtLkxpbnV4ICovO1xuICB9IGVsc2UgaWYgKF9nZXRfXyhcIl9pc0ZyZWVCU0RcIikpIHtcbiAgICBfYXNzaWduX18oXCJfcGxhdGZvcm1cIiwgMykgLyogUGxhdGZvcm0uRnJlZUJTRCAqLztcbiAgfVxufVxuZXhwb3J0cy5pc1dpbmRvd3MgPSBfZ2V0X18oXCJfaXNXaW5kb3dzXCIpO1xuZXhwb3J0cy5pc01hY2ludG9zaCA9IF9nZXRfXyhcIl9pc01hY2ludG9zaFwiKTtcbmV4cG9ydHMuaXNMaW51eCA9IF9nZXRfXyhcIl9pc0xpbnV4XCIpO1xuZXhwb3J0cy5pc0ZyZWVCU0QgPSBfZ2V0X18oXCJfaXNGcmVlQlNEXCIpO1xuZXhwb3J0cy5pc05hdGl2ZSA9IF9nZXRfXyhcIl9pc05hdGl2ZVwiKTtcbmV4cG9ydHMuaXNXZWIgPSBfZ2V0X18oXCJfaXNXZWJcIik7XG5leHBvcnRzLnBsYXRmb3JtID0gX2dldF9fKFwiX3BsYXRmb3JtXCIpO1xuZnVuY3Rpb24gaXNSb290VXNlcigpIHtcbiAgcmV0dXJuIF9nZXRfXyhcIl9pc05hdGl2ZVwiKSAmJiAhX2dldF9fKFwiX2lzV2luZG93c1wiKSAmJiBwcm9jZXNzLmdldHVpZCgpID09PSAwO1xufVxuZXhwb3J0cy5pc1Jvb3RVc2VyID0gX2dldF9fKFwiaXNSb290VXNlclwiKTtcbmNvbnN0IGcgPSB0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0JyA/IGdsb2JhbCA6IHt9O1xuY29uc3QgX2dsb2JhbHMgPSB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgPyBzZWxmIDogX2dldF9fKFwiZ1wiKTtcbmV4cG9ydHMuZ2xvYmFscyA9IF9nZXRfXyhcIl9nbG9iYWxzXCIpO1xubGV0IF9zZXRJbW1lZGlhdGUgPSBudWxsO1xuZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gIGlmIChfZ2V0X18oXCJfc2V0SW1tZWRpYXRlXCIpID09PSBudWxsKSB7XG4gICAgaWYgKGV4cG9ydHMuZ2xvYmFscy5zZXRJbW1lZGlhdGUpIHtcbiAgICAgIF9hc3NpZ25fXyhcIl9zZXRJbW1lZGlhdGVcIiwgZXhwb3J0cy5nbG9iYWxzLnNldEltbWVkaWF0ZS5iaW5kKGV4cG9ydHMuZ2xvYmFscykpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzLm5leHRUaWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBfYXNzaWduX18oXCJfc2V0SW1tZWRpYXRlXCIsIHByb2Nlc3MubmV4dFRpY2suYmluZChwcm9jZXNzKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF9hc3NpZ25fXyhcIl9zZXRJbW1lZGlhdGVcIiwgZXhwb3J0cy5nbG9iYWxzLnNldFRpbWVvdXQuYmluZChleHBvcnRzLmdsb2JhbHMpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIF9nZXRfXyhcIl9zZXRJbW1lZGlhdGVcIikoY2FsbGJhY2spO1xufVxuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSBfZ2V0X18oXCJzZXRJbW1lZGlhdGVcIik7XG5jb25zdCBfd2wgPSBfZ2V0X18oXCJfaXNXaW5kb3dzXCIpID8gMSAvKiBPcGVyYXRpbmdTeXN0ZW0uV2luZG93cyAqLyA6IDMgLyogT3BlcmF0aW5nU3lzdGVtLkxpbnV4ICovIHwgNCAvKiBPcGVyYXRpbmdTeXN0ZW0uRnJlZUJTRCAqLztcbmV4cG9ydHMuT1MgPSBfZ2V0X18oXCJfaXNNYWNpbnRvc2hcIikgPyAyIC8qIE9wZXJhdGluZ1N5c3RlbS5NYWNpbnRvc2ggKi8gOiBfZ2V0X18oXCJfd2xcIik7XG5mdW5jdGlvbiBfZ2V0R2xvYmFsT2JqZWN0KCkge1xuICB0cnkge1xuICAgIGlmICghIWdsb2JhbCkge1xuICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCEhd2luZG93KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG59XG47XG52YXIgX1Jld2lyZU1vZHVsZUlkX18gPSBudWxsO1xuZnVuY3Rpb24gX2dldFJld2lyZU1vZHVsZUlkX18oKSB7XG4gIGlmIChfUmV3aXJlTW9kdWxlSWRfXyA9PT0gbnVsbCkge1xuICAgIGxldCBnbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgICBpZiAoIWdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18pIHtcbiAgICAgIGdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18gPSAwO1xuICAgIH1cbiAgICBfUmV3aXJlTW9kdWxlSWRfXyA9IF9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18rKztcbiAgfVxuICByZXR1cm4gX1Jld2lyZU1vZHVsZUlkX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuICByZXR1cm4gdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVkRGF0YV9fKCkge1xuICBsZXQgbW9kdWxlSWQgPSBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpO1xuICBsZXQgcmVnaXN0cnkgPSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpO1xuICBsZXQgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgaWYgKCFyZXdpcmVEYXRhKSB7XG4gICAgcmVnaXN0cnlbbW9kdWxlSWRdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICB9XG4gIHJldHVybiByZXdpcmVEYXRhO1xufVxuKGZ1bmN0aW9uIHJlZ2lzdGVyUmVzZXRBbGwoKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSkge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfTtcbiAgfVxufSkoKTtcbnZhciBJTlRFTlRJT05BTF9VTkRFRklORUQgPSAnX19JTlRFTlRJT05BTF9VTkRFRklORURfXyc7XG5sZXQgX1Jld2lyZUFQSV9fID0ge307XG4oZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KG5hbWUsIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9SZXdpcmVBUElfXywgbmFtZSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfVxuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX193aXRoX18nLCBfd2l0aF9fKTtcbn0pKCk7XG5mdW5jdGlvbiBfZ2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB2YWx1ZSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICBpZiAodmFsdWUgPT09IElOVEVOVElPTkFMX1VOREVGSU5FRCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJpc0VsZWN0cm9uUmVuZGVyZXJcIjpcbiAgICAgIHJldHVybiBpc0VsZWN0cm9uUmVuZGVyZXI7XG4gICAgY2FzZSBcIl9pc1dpbmRvd3NcIjpcbiAgICAgIHJldHVybiBfaXNXaW5kb3dzO1xuICAgIGNhc2UgXCJfaXNNYWNpbnRvc2hcIjpcbiAgICAgIHJldHVybiBfaXNNYWNpbnRvc2g7XG4gICAgY2FzZSBcIl9pc0xpbnV4XCI6XG4gICAgICByZXR1cm4gX2lzTGludXg7XG4gICAgY2FzZSBcIl9pc0ZyZWVCU0RcIjpcbiAgICAgIHJldHVybiBfaXNGcmVlQlNEO1xuICAgIGNhc2UgXCJfaXNXZWJcIjpcbiAgICAgIHJldHVybiBfaXNXZWI7XG4gICAgY2FzZSBcIl9pc05hdGl2ZVwiOlxuICAgICAgcmV0dXJuIF9pc05hdGl2ZTtcbiAgICBjYXNlIFwiUGxhdGZvcm1Ub1N0cmluZ1wiOlxuICAgICAgcmV0dXJuIFBsYXRmb3JtVG9TdHJpbmc7XG4gICAgY2FzZSBcIl9wbGF0Zm9ybVwiOlxuICAgICAgcmV0dXJuIF9wbGF0Zm9ybTtcbiAgICBjYXNlIFwiaXNSb290VXNlclwiOlxuICAgICAgcmV0dXJuIGlzUm9vdFVzZXI7XG4gICAgY2FzZSBcImdcIjpcbiAgICAgIHJldHVybiBnO1xuICAgIGNhc2UgXCJfZ2xvYmFsc1wiOlxuICAgICAgcmV0dXJuIF9nbG9iYWxzO1xuICAgIGNhc2UgXCJfc2V0SW1tZWRpYXRlXCI6XG4gICAgICByZXR1cm4gX3NldEltbWVkaWF0ZTtcbiAgICBjYXNlIFwic2V0SW1tZWRpYXRlXCI6XG4gICAgICByZXR1cm4gc2V0SW1tZWRpYXRlO1xuICAgIGNhc2UgXCJfd2xcIjpcbiAgICAgIHJldHVybiBfd2w7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gIH1cbn1cbmZ1bmN0aW9uIF9zZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUsIF92YWx1ZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJfaXNXaW5kb3dzXCI6XG4gICAgICByZXR1cm4gX2lzV2luZG93cyA9IF92YWx1ZTtcbiAgICBjYXNlIFwiX2lzTWFjaW50b3NoXCI6XG4gICAgICByZXR1cm4gX2lzTWFjaW50b3NoID0gX3ZhbHVlO1xuICAgIGNhc2UgXCJfaXNMaW51eFwiOlxuICAgICAgcmV0dXJuIF9pc0xpbnV4ID0gX3ZhbHVlO1xuICAgIGNhc2UgXCJfaXNGcmVlQlNEXCI6XG4gICAgICByZXR1cm4gX2lzRnJlZUJTRCA9IF92YWx1ZTtcbiAgICBjYXNlIFwiX2lzV2ViXCI6XG4gICAgICByZXR1cm4gX2lzV2ViID0gX3ZhbHVlO1xuICAgIGNhc2UgXCJfaXNOYXRpdmVcIjpcbiAgICAgIHJldHVybiBfaXNOYXRpdmUgPSBfdmFsdWU7XG4gICAgY2FzZSBcIl9wbGF0Zm9ybVwiOlxuICAgICAgcmV0dXJuIF9wbGF0Zm9ybSA9IF92YWx1ZTtcbiAgICBjYXNlIFwiX3NldEltbWVkaWF0ZVwiOlxuICAgICAgcmV0dXJuIF9zZXRJbW1lZGlhdGUgPSBfdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF91cGRhdGVfb3BlcmF0aW9uX18ob3BlcmF0aW9uLCB2YXJpYWJsZU5hbWUsIHByZWZpeCkge1xuICB2YXIgb2xkVmFsdWUgPSBfZ2V0X18odmFyaWFibGVOYW1lKTtcbiAgdmFyIG5ld1ZhbHVlID0gb3BlcmF0aW9uID09PSAnKysnID8gb2xkVmFsdWUgKyAxIDogb2xkVmFsdWUgLSAxO1xuICBfYXNzaWduX18odmFyaWFibGVOYW1lLCBuZXdWYWx1ZSk7XG4gIHJldHVybiBwcmVmaXggPyBuZXdWYWx1ZSA6IG9sZFZhbHVlO1xufVxuZnVuY3Rpb24gX3NldF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAodHlwZW9mIHZhcmlhYmxlTmFtZSA9PT0gJ29iamVjdCcpIHtcbiAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbbmFtZV0gPSB2YXJpYWJsZU5hbWVbbmFtZV07XG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgICAgfSk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gSU5URU5USU9OQUxfVU5ERUZJTkVEO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgfTtcbiAgfVxufVxuZnVuY3Rpb24gX3Jlc2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgZGVsZXRlIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgaWYgKE9iamVjdC5rZXlzKHJld2lyZURhdGEpLmxlbmd0aCA9PSAwKSB7XG4gICAgZGVsZXRlIF9nZXRSZXdpcmVSZWdpc3RyeV9fKClbX2dldFJld2lyZU1vZHVsZUlkX19dO1xuICB9XG4gIDtcbn1cbmZ1bmN0aW9uIF93aXRoX18ob2JqZWN0KSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgdmFyIHJld2lyZWRWYXJpYWJsZU5hbWVzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcbiAgdmFyIHByZXZpb3VzVmFsdWVzID0ge307XG4gIGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gb2JqZWN0W3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gICAgbGV0IHJlc3VsdCA9IGNhbGxiYWNrKCk7XG4gICAgaWYgKCEhcmVzdWx0ICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXN1bHQudGhlbihyZXNldCkuY2F0Y2gocmVzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNldCgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxubGV0IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9IHR5cGVvZiBtb2R1bGUuZXhwb3J0cztcbmZ1bmN0aW9uIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eShuYW1lLCB2YWx1ZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLmV4cG9ydHMsIG5hbWUsIHtcbiAgICB2YWx1ZTogdmFsdWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufVxuaWYgKChfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdvYmplY3QnIHx8IF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ2Z1bmN0aW9uJykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZShtb2R1bGUuZXhwb3J0cykpIHtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX193aXRoX18nLCBfd2l0aF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZUFQSV9fJywgX1Jld2lyZUFQSV9fKTtcbn0iLCJcInVzZSBzdHJpY3RcIjtcblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5ydHJpbSA9IGV4cG9ydHMubHRyaW0gPSBleHBvcnRzLnRyaW0gPSBleHBvcnRzLmVzY2FwZSA9IHZvaWQgMDtcbi8qKlxuICogQ29udmVydHMgSFRNTCBjaGFyYWN0ZXJzIGluc2lkZSB0aGUgc3RyaW5nIHRvIHVzZSBlbnRpdGllcyBpbnN0ZWFkLiBNYWtlcyB0aGUgc3RyaW5nIHNhZmUgZnJvbVxuICogYmVpbmcgdXNlZCBlLmcuIGluIEhUTUxFbGVtZW50LmlubmVySFRNTC5cbiAqL1xuZnVuY3Rpb24gZXNjYXBlKGh0bWwpIHtcbiAgcmV0dXJuIGh0bWwucmVwbGFjZSgvWzw+Jl0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgc3dpdGNoIChtYXRjaCkge1xuICAgICAgY2FzZSAnPCc6XG4gICAgICAgIHJldHVybiAnJmx0Oyc7XG4gICAgICBjYXNlICc+JzpcbiAgICAgICAgcmV0dXJuICcmZ3Q7JztcbiAgICAgIGNhc2UgJyYnOlxuICAgICAgICByZXR1cm4gJyZhbXA7JztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9XG4gIH0pO1xufVxuZXhwb3J0cy5lc2NhcGUgPSBfZ2V0X18oXCJlc2NhcGVcIik7XG4vKipcbiAqIFJlbW92ZXMgYWxsIG9jY3VycmVuY2VzIG9mIG5lZWRsZSBmcm9tIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBoYXlzdGFjay5cbiAqIEBwYXJhbSBoYXlzdGFjayBzdHJpbmcgdG8gdHJpbVxuICogQHBhcmFtIG5lZWRsZSB0aGUgdGhpbmcgdG8gdHJpbSAoZGVmYXVsdCBpcyBhIGJsYW5rKVxuICovXG5mdW5jdGlvbiB0cmltKGhheXN0YWNrLCBuZWVkbGUgPSAnICcpIHtcbiAgY29uc3QgdHJpbW1lZCA9IF9nZXRfXyhcImx0cmltXCIpKGhheXN0YWNrLCBuZWVkbGUpO1xuICByZXR1cm4gX2dldF9fKFwicnRyaW1cIikodHJpbW1lZCwgbmVlZGxlKTtcbn1cbmV4cG9ydHMudHJpbSA9IF9nZXRfXyhcInRyaW1cIik7XG4vKipcbiAqIFJlbW92ZXMgYWxsIG9jY3VycmVuY2VzIG9mIG5lZWRsZSBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgaGF5c3RhY2suXG4gKiBAcGFyYW0gaGF5c3RhY2sgc3RyaW5nIHRvIHRyaW1cbiAqIEBwYXJhbSBuZWVkbGUgdGhlIHRoaW5nIHRvIHRyaW1cbiAqL1xuZnVuY3Rpb24gbHRyaW0oaGF5c3RhY2ssIG5lZWRsZSkge1xuICBpZiAoIWhheXN0YWNrIHx8ICFuZWVkbGUpIHtcbiAgICByZXR1cm4gaGF5c3RhY2s7XG4gIH1cbiAgY29uc3QgbmVlZGxlTGVuID0gbmVlZGxlLmxlbmd0aDtcbiAgaWYgKG5lZWRsZUxlbiA9PT0gMCB8fCBoYXlzdGFjay5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gaGF5c3RhY2s7XG4gIH1cbiAgbGV0IG9mZnNldCA9IDA7XG4gIHdoaWxlIChoYXlzdGFjay5pbmRleE9mKG5lZWRsZSwgb2Zmc2V0KSA9PT0gb2Zmc2V0KSB7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0ICsgbmVlZGxlTGVuO1xuICB9XG4gIHJldHVybiBoYXlzdGFjay5zdWJzdHJpbmcob2Zmc2V0KTtcbn1cbmV4cG9ydHMubHRyaW0gPSBfZ2V0X18oXCJsdHJpbVwiKTtcbi8qKlxuICogUmVtb3ZlcyBhbGwgb2NjdXJyZW5jZXMgb2YgbmVlZGxlIGZyb20gdGhlIGVuZCBvZiBoYXlzdGFjay5cbiAqIEBwYXJhbSBoYXlzdGFjayBzdHJpbmcgdG8gdHJpbVxuICogQHBhcmFtIG5lZWRsZSB0aGUgdGhpbmcgdG8gdHJpbVxuICovXG5mdW5jdGlvbiBydHJpbShoYXlzdGFjaywgbmVlZGxlKSB7XG4gIGlmICghaGF5c3RhY2sgfHwgIW5lZWRsZSkge1xuICAgIHJldHVybiBoYXlzdGFjaztcbiAgfVxuICBjb25zdCBuZWVkbGVMZW4gPSBuZWVkbGUubGVuZ3RoLFxuICAgIGhheXN0YWNrTGVuID0gaGF5c3RhY2subGVuZ3RoO1xuICBpZiAobmVlZGxlTGVuID09PSAwIHx8IGhheXN0YWNrTGVuID09PSAwKSB7XG4gICAgcmV0dXJuIGhheXN0YWNrO1xuICB9XG4gIGxldCBvZmZzZXQgPSBoYXlzdGFja0xlbixcbiAgICBpZHggPSAtMTtcbiAgd2hpbGUgKHRydWUpIHtcbiAgICBpZHggPSBoYXlzdGFjay5sYXN0SW5kZXhPZihuZWVkbGUsIG9mZnNldCAtIDEpO1xuICAgIGlmIChpZHggPT09IC0xIHx8IGlkeCArIG5lZWRsZUxlbiAhPT0gb2Zmc2V0KSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKGlkeCA9PT0gMCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBvZmZzZXQgPSBpZHg7XG4gIH1cbiAgcmV0dXJuIGhheXN0YWNrLnN1YnN0cmluZygwLCBvZmZzZXQpO1xufVxuZXhwb3J0cy5ydHJpbSA9IF9nZXRfXyhcInJ0cmltXCIpO1xuZnVuY3Rpb24gX2dldEdsb2JhbE9iamVjdCgpIHtcbiAgdHJ5IHtcbiAgICBpZiAoISFnbG9iYWwpIHtcbiAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghIXdpbmRvdykge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxufVxuO1xudmFyIF9SZXdpcmVNb2R1bGVJZF9fID0gbnVsbDtcbmZ1bmN0aW9uIF9nZXRSZXdpcmVNb2R1bGVJZF9fKCkge1xuICBpZiAoX1Jld2lyZU1vZHVsZUlkX18gPT09IG51bGwpIHtcbiAgICBsZXQgZ2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gICAgaWYgKCFnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKSB7XG4gICAgICBnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fID0gMDtcbiAgICB9XG4gICAgX1Jld2lyZU1vZHVsZUlkX18gPSBfXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKys7XG4gIH1cbiAgcmV0dXJuIF9SZXdpcmVNb2R1bGVJZF9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZVJlZ2lzdHJ5X18oKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cbiAgcmV0dXJuIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlZERhdGFfXygpIHtcbiAgbGV0IG1vZHVsZUlkID0gX2dldFJld2lyZU1vZHVsZUlkX18oKTtcbiAgbGV0IHJlZ2lzdHJ5ID0gX2dldFJld2lyZVJlZ2lzdHJ5X18oKTtcbiAgbGV0IHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIGlmICghcmV3aXJlRGF0YSkge1xuICAgIHJlZ2lzdHJ5W21vZHVsZUlkXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgfVxuICByZXR1cm4gcmV3aXJlRGF0YTtcbn1cbihmdW5jdGlvbiByZWdpc3RlclJlc2V0QWxsKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH07XG4gIH1cbn0pKCk7XG52YXIgSU5URU5USU9OQUxfVU5ERUZJTkVEID0gJ19fSU5URU5USU9OQUxfVU5ERUZJTkVEX18nO1xubGV0IF9SZXdpcmVBUElfXyA9IHt9O1xuKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gYWRkUHJvcGVydHlUb0FQSU9iamVjdChuYW1lLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfUmV3aXJlQVBJX18sIG5hbWUsIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG59KSgpO1xuZnVuY3Rpb24gX2dldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdmFsdWUgPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgaWYgKHZhbHVlID09PSBJTlRFTlRJT05BTF9VTkRFRklORUQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHtcbiAgICBjYXNlIFwiZXNjYXBlXCI6XG4gICAgICByZXR1cm4gZXNjYXBlO1xuICAgIGNhc2UgXCJsdHJpbVwiOlxuICAgICAgcmV0dXJuIGx0cmltO1xuICAgIGNhc2UgXCJydHJpbVwiOlxuICAgICAgcmV0dXJuIHJ0cmltO1xuICAgIGNhc2UgXCJ0cmltXCI6XG4gICAgICByZXR1cm4gdHJpbTtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgX3ZhbHVlKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7fVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX3VwZGF0ZV9vcGVyYXRpb25fXyhvcGVyYXRpb24sIHZhcmlhYmxlTmFtZSwgcHJlZml4KSB7XG4gIHZhciBvbGRWYWx1ZSA9IF9nZXRfXyh2YXJpYWJsZU5hbWUpO1xuICB2YXIgbmV3VmFsdWUgPSBvcGVyYXRpb24gPT09ICcrKycgPyBvbGRWYWx1ZSArIDEgOiBvbGRWYWx1ZSAtIDE7XG4gIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIG5ld1ZhbHVlKTtcbiAgcmV0dXJuIHByZWZpeCA/IG5ld1ZhbHVlIDogb2xkVmFsdWU7XG59XG5mdW5jdGlvbiBfc2V0X18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmICh0eXBlb2YgdmFyaWFibGVOYW1lID09PSAnb2JqZWN0Jykge1xuICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVtuYW1lXSA9IHZhcmlhYmxlTmFtZVtuYW1lXTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBJTlRFTlRJT05BTF9VTkRFRklORUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBkZWxldGUgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICBpZiAoT2JqZWN0LmtleXMocmV3aXJlRGF0YSkubGVuZ3RoID09IDApIHtcbiAgICBkZWxldGUgX2dldFJld2lyZVJlZ2lzdHJ5X18oKVtfZ2V0UmV3aXJlTW9kdWxlSWRfX107XG4gIH1cbiAgO1xufVxuZnVuY3Rpb24gX3dpdGhfXyhvYmplY3QpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICB2YXIgcmV3aXJlZFZhcmlhYmxlTmFtZXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICB2YXIgcHJldmlvdXNWYWx1ZXMgPSB7fTtcbiAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV0gPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBvYmplY3RbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgICBsZXQgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgICBpZiAoISFyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlc3VsdC50aGVuKHJlc2V0KS5jYXRjaChyZXNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc2V0KCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5sZXQgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID0gdHlwZW9mIG1vZHVsZS5leHBvcnRzO1xuZnVuY3Rpb24gYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgbmFtZSwge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5pZiAoKF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ29iamVjdCcgfHwgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnZnVuY3Rpb24nKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKG1vZHVsZS5leHBvcnRzKSkge1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3dpdGhfXycsIF93aXRoX18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlQVBJX18nLCBfUmV3aXJlQVBJX18pO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIEFsZXhUb3JyZXNEZXYuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmxvYWRXaW5kb3dJY29ucyA9IGV4cG9ydHMuYXBwbHlGaWxsID0gZXhwb3J0cy5wYXJzZUFjY2VsZXJhdG9yID0gZXhwb3J0cy5jbGVhbk1uZW1vbmljID0gZXhwb3J0cy5tbmVtb25pY0J1dHRvbkxhYmVsID0gZXhwb3J0cy5tbmVtb25pY01lbnVMYWJlbCA9IGV4cG9ydHMuZ2V0UHggPSBleHBvcnRzLm1lbnVJY29ucyA9IGV4cG9ydHMuTUVOVV9FU0NBUEVEX01ORU1PTklDX1JFR0VYID0gZXhwb3J0cy5NRU5VX01ORU1PTklDX1JFR0VYID0gZXhwb3J0cy5XSU5ET1dfTUlOX0hFSUdIVCA9IGV4cG9ydHMuV0lORE9XX01JTl9XSURUSCA9IGV4cG9ydHMuVE9QX1RJVExFQkFSX0hFSUdIVF9XSU4gPSBleHBvcnRzLlRPUF9USVRMRUJBUl9IRUlHSFRfTUFDID0gZXhwb3J0cy5CT1RUT01fVElUTEVCQVJfSEVJR0hUID0gZXhwb3J0cy5JU19NQUNfQklHU1VSX09SX0xBVEVSID0gZXhwb3J0cy5ERUZBVUxUX0lURU1fU0VMRUNUT1IgPSBleHBvcnRzLkFDVElWRV9GT1JFR1JPVU5EID0gZXhwb3J0cy5JTkFDVElWRV9GT1JFR1JPVU5EID0gZXhwb3J0cy5BQ1RJVkVfRk9SRUdST1VORF9EQVJLID0gZXhwb3J0cy5JTkFDVElWRV9GT1JFR1JPVU5EX0RBUksgPSB2b2lkIDA7XG5jb25zdCBjb2xvcl8xID0gcmVxdWlyZShcIi4vYmFzZS9jb21tb24vY29sb3JcIik7XG5jb25zdCBwbGF0Zm9ybV8xID0gcmVxdWlyZShcIi4vYmFzZS9jb21tb24vcGxhdGZvcm1cIik7XG5leHBvcnRzLklOQUNUSVZFX0ZPUkVHUk9VTkRfREFSSyA9IF9nZXRfXyhcImNvbG9yXzFcIikuQ29sb3IuZnJvbUhleCgnIzIyMjIyMicpO1xuZXhwb3J0cy5BQ1RJVkVfRk9SRUdST1VORF9EQVJLID0gX2dldF9fKFwiY29sb3JfMVwiKS5Db2xvci5mcm9tSGV4KCcjMzMzMzMzJyk7XG5leHBvcnRzLklOQUNUSVZFX0ZPUkVHUk9VTkQgPSBfZ2V0X18oXCJjb2xvcl8xXCIpLkNvbG9yLmZyb21IZXgoJyNFRUVFRUUnKTtcbmV4cG9ydHMuQUNUSVZFX0ZPUkVHUk9VTkQgPSBfZ2V0X18oXCJjb2xvcl8xXCIpLkNvbG9yLmZyb21IZXgoJyNGRkZGRkYnKTtcbmV4cG9ydHMuREVGQVVMVF9JVEVNX1NFTEVDVE9SID0gX2dldF9fKFwiY29sb3JfMVwiKS5Db2xvci5mcm9tSGV4KCcjMDAwMDAwMUYnKTtcbmV4cG9ydHMuSVNfTUFDX0JJR1NVUl9PUl9MQVRFUiA9IF9nZXRfXyhcInBsYXRmb3JtXzFcIikuaXNNYWNpbnRvc2ggJiYgcGFyc2VJbnQocHJvY2Vzcy5nZXRTeXN0ZW1WZXJzaW9uKCkuc3BsaXQoJy4nKVswXSkgPj0gMTE7XG5leHBvcnRzLkJPVFRPTV9USVRMRUJBUl9IRUlHSFQgPSA2MDtcbmV4cG9ydHMuVE9QX1RJVExFQkFSX0hFSUdIVF9NQUMgPSBleHBvcnRzLklTX01BQ19CSUdTVVJfT1JfTEFURVIgPyAyOCA6IDIyO1xuZXhwb3J0cy5UT1BfVElUTEVCQVJfSEVJR0hUX1dJTiA9IDMwO1xuZXhwb3J0cy5XSU5ET1dfTUlOX1dJRFRIID0gNDAwO1xuZXhwb3J0cy5XSU5ET1dfTUlOX0hFSUdIVCA9IDI3MDtcbmV4cG9ydHMuTUVOVV9NTkVNT05JQ19SRUdFWCA9IC9cXCgmKFteXFxzJl0pXFwpfChefFteJl0pJihbXlxccyZdKS87XG5leHBvcnRzLk1FTlVfRVNDQVBFRF9NTkVNT05JQ19SRUdFWCA9IC8oJmFtcDspPygmYW1wOykoW15cXHMmXSkvZztcbmV4cG9ydHMubWVudUljb25zID0ge1xuICBzdWJtZW51SW5kaWNhdG9yOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNMCAwaDI0djI0SDB6XCIgZmlsbD1cIm5vbmVcIiAvPjxwb2x5bGluZSBwb2ludHM9XCI5IDYgMTUgMTIgOSAxOFwiIC8+PC9zdmc+JyxcbiAgY2hlY2tib3g6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgc3Ryb2tlLXdpZHRoPVwiMS41XCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgZmlsbD1cIm5vbmVcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0wIDBoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48cGF0aCBkPVwiTTUgMTJsNSA1bDEwIC0xMFwiIC8+PC9zdmc+JyxcbiAgcmFkaW9DaGVja2VkOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyMCAyMFwiPjxwYXRoIGZpbGw9XCJjdXJyZW50Q29sb3JcIiBkPVwiTTEwLDUgQzcuMiw1IDUsNy4yIDUsMTAgQzUsMTIuOCA3LjIsMTUgMTAsMTUgQzEyLjgsMTUgMTUsMTIuOCAxNSwxMCBDMTUsNy4yIDEyLjgsNSAxMCw1IEwxMCw1IFogTTEwLDAgQzQuNSwwIDAsNC41IDAsMTAgQzAsMTUuNSA0LjUsMjAgMTAsMjAgQzE1LjUsMjAgMjAsMTUuNSAyMCwxMCBDMjAsNC41IDE1LjUsMCAxMCwwIEwxMCwwIFogTTEwLDE4IEM1LjYsMTggMiwxNC40IDIsMTAgQzIsNS42IDUuNiwyIDEwLDIgQzE0LjQsMiAxOCw1LjYgMTgsMTAgQzE4LDE0LjQgMTQuNCwxOCAxMCwxOCBMMTAsMTggWlwiIC8+PC9zdmc+JyxcbiAgcmFkaW9VbmNoZWNrZWQ6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+PHBhdGggZmlsbD1cImN1cnJlbnRDb2xvclwiIGQ9XCJNMTAsMCBDNC41LDAgMCw0LjUgMCwxMCBDMCwxNS41IDQuNSwyMCAxMCwyMCBDMTUuNSwyMCAyMCwxNS41IDIwLDEwIEMyMCw0LjUgMTUuNSwwIDEwLDAgTDEwLDAgWiBNMTAsMTggQzUuNiwxOCAyLDE0LjQgMiwxMCBDMiw1LjYgNS42LDIgMTAsMiBDMTQuNCwyIDE4LDUuNiAxOCwxMCBDMTgsMTQuNCAxNC40LDE4IDEwLDE4IEwxMCwxOCBaXCIgLz48L3N2Zz4nLFxuICBsaW51eDoge1xuICAgIG1pbmltaXplOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMSAxMVwiPjxwYXRoIGQ9XCJNMTEsNC45djEuMUgwVjQuMzk5aDExelwiLz48L3N2Zz4nLFxuICAgIG1heGltaXplOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMSAxMVwiPjxwYXRoIGQ9XCJNMCwxLjd2Ny42QzAsMTAuMiwwLjgsMTEsMS43LDExaDcuNmMwLjksMCwxLjctMC44LDEuNy0xLjdWMS43QzExLDAuOCwxMC4yLDAsOS4zLDBIMS43QzAuOCwwLDAsMC44LDAsMS43eiBNOC44LDkuOUgyLjJjLTAuNiwwLTEuMS0wLjUtMS4xLTEuMVYyLjJjMC0wLjYsMC41LTEuMSwxLjEtMS4xaDYuN2MwLjYsMCwxLjEsMC41LDEuMSwxLjF2Ni43QzkuOSw5LjQsOS40LDkuOSw4LjgsOS45elwiLz48L3N2Zz4nLFxuICAgIHJlc3RvcmU6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDExIDExXCI+PHBhdGggZD1cIk03LjksMi4yaC03QzAuNCwyLjIsMCwyLjYsMCwzLjF2N0MwLDEwLjYsMC40LDExLDAuOSwxMWg3YzAuNSwwLDAuOS0wLjQsMC45LTAuOXYtN0M4LjgsMi42LDguNCwyLjIsNy45LDIuMnogTTcuNyw5LjYgYzAsMC4yLTAuMSwwLjMtMC4zLDAuM2gtNmMtMC4yLDAtMC4zLTAuMS0wLjMtMC4zdi02YzAtMC4yLDAuMS0wLjMsMC4zLTAuM2g2YzAuMiwwLDAuMywwLjEsMC4zLDAuM1Y5LjZ6IE0xMCwwLjkgYzAsMC41LTAuNCwwLjktMC45LDAuOWgtMi4xIGMtMC41LDAtMC45LTAuNC0wLjktMC45VjAuOWMwLTAuNSwwLjQtMC45LDAuOS0wLjloMi4xQzkuNiwwLDEwLDAuNCwxMCwwLjl6XCIvPjwvc3ZnPicsXG4gICAgY2xvc2U6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDExIDExXCI+PHBhdGggZD1cIk02LjI3OSA1LjVMMTEgMTAuMjIxbC0uNzc5Ljc3OUw1LjUgNi4yNzkuNzc5IDExIDAgMTAuMjIxIDQuNzIxIDUuNSAwIC43NzkuNzc5IDAgNS41IDQuNzIxIDEwLjIyMSAwIDExIC43NzkgNi4yNzkgNS41elwiLz48L3N2Zz4nXG4gIH0sXG4gIGZyZWVic2Q6IHtcbiAgICBtaW5pbWl6ZTogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTEgMTFcIj48cGF0aCBkPVwiTTExLDQuOXYxLjFIMFY0LjM5OWgxMXpcIi8+PC9zdmc+JyxcbiAgICBtYXhpbWl6ZTogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTEgMTFcIj48cGF0aCBkPVwiTTAsMS43djcuNkMwLDEwLjIsMC44LDExLDEuNywxMWg3LjZjMC45LDAsMS43LTAuOCwxLjctMS43VjEuN0MxMSwwLjgsMTAuMiwwLDkuMywwSDEuN0MwLjgsMCwwLDAuOCwwLDEuN3ogTTguOCw5LjlIMi4yYy0wLjYsMC0xLjEtMC41LTEuMS0xLjFWMi4yYzAtMC42LDAuNS0xLjEsMS4xLTEuMWg2LjdjMC42LDAsMS4xLDAuNSwxLjEsMS4xdjYuN0M5LjksOS40LDkuNCw5LjksOC44LDkuOXpcIi8+PC9zdmc+JyxcbiAgICByZXN0b3JlOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMSAxMVwiPjxwYXRoIGQ9XCJNNy45LDIuMmgtN0MwLjQsMi4yLDAsMi42LDAsMy4xdjdDMCwxMC42LDAuNCwxMSwwLjksMTFoN2MwLjUsMCwwLjktMC40LDAuOS0wLjl2LTdDOC44LDIuNiw4LjQsMi4yLDcuOSwyLjJ6IE03LjcsOS42IGMwLDAuMi0wLjEsMC4zLTAuMywwLjNoLTZjLTAuMiwwLTAuMy0wLjEtMC4zLTAuM3YtNmMwLTAuMiwwLjEtMC4zLDAuMy0wLjNoNmMwLjIsMCwwLjMsMC4xLDAuMywwLjNWOS42eiBNMTAsMC45IGMwLDAuNS0wLjQsMC45LTAuOSwwLjloLTIuMSBjLTAuNSwwLTAuOS0wLjQtMC45LTAuOVYwLjljMC0wLjUsMC40LTAuOSwwLjktMC45aDIuMUM5LjYsMCwxMCwwLjQsMTAsMC45elwiLz48L3N2Zz4nLFxuICAgIGNsb3NlOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAxMSAxMVwiPjxwYXRoIGQ9XCJNNi4yNzkgNS41TDExIDEwLjIyMWwtLjc3OS43NzlMNS41IDYuMjc5Ljc3OSAxMSAwIDEwLjIyMSA0LjcyMSA1LjUgMCAuNzc5Ljc3OSAwIDUuNSA0LjcyMSAxMC4yMjEgMCAxMSAuNzc5IDYuMjc5IDUuNXpcIi8+PC9zdmc+J1xuICB9LFxuICB3aW5kb3dzOiB7XG4gICAgbWluaW1pemU6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDExIDExXCI+PHBhdGggZD1cIk0xMSw0Ljl2MS4xSDBWNC4zOTloMTF6XCIvPjwvc3ZnPicsXG4gICAgbWF4aW1pemU6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDExIDExXCI+PHBhdGggZD1cIk0wLDEuN3Y3LjZDMCwxMC4yLDAuOCwxMSwxLjcsMTFoNy42YzAuOSwwLDEuNy0wLjgsMS43LTEuN1YxLjdDMTEsMC44LDEwLjIsMCw5LjMsMEgxLjdDMC44LDAsMCwwLjgsMCwxLjd6IE04LjgsOS45SDIuMmMtMC42LDAtMS4xLTAuNS0xLjEtMS4xVjIuMmMwLTAuNiwwLjUtMS4xLDEuMS0xLjFoNi43YzAuNiwwLDEuMSwwLjUsMS4xLDEuMXY2LjdDOS45LDkuNCw5LjQsOS45LDguOCw5Ljl6XCIvPjwvc3ZnPicsXG4gICAgcmVzdG9yZTogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMTEgMTFcIj48cGF0aCBkPVwiTTcuOSwyLjJoLTdDMC40LDIuMiwwLDIuNiwwLDMuMXY3QzAsMTAuNiwwLjQsMTEsMC45LDExaDdjMC41LDAsMC45LTAuNCwwLjktMC45di03QzguOCwyLjYsOC40LDIuMiw3LjksMi4yeiBNNy43LDkuNiBjMCwwLjItMC4xLDAuMy0wLjMsMC4zaC02Yy0wLjIsMC0wLjMtMC4xLTAuMy0wLjN2LTZjMC0wLjIsMC4xLTAuMywwLjMtMC4zaDZjMC4yLDAsMC4zLDAuMSwwLjMsMC4zVjkuNnpcIi8+PHBhdGggZD1cIk0xMCwwSDMuNXYxLjFoNi4xYzAuMiwwLDAuMywwLjEsMC4zLDAuM3Y2LjFIMTFWMUMxMSwwLjQsMTAuNiwwLDEwLDB6XCIvPjwvc3ZnPicsXG4gICAgY2xvc2U6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDExIDExXCI+PHBhdGggZD1cIk02LjI3OSA1LjVMMTEgMTAuMjIxbC0uNzc5Ljc3OUw1LjUgNi4yNzkuNzc5IDExIDAgMTAuMjIxIDQuNzIxIDUuNSAwIC43NzkuNzc5IDAgNS41IDQuNzIxIDEwLjIyMSAwIDExIC43NzkgNi4yNzkgNS41elwiLz48L3N2Zz4nXG4gIH1cbn07XG5mdW5jdGlvbiBnZXRQeCh2YWx1ZSkge1xuICByZXR1cm4gYCR7dmFsdWV9cHhgO1xufVxuZXhwb3J0cy5nZXRQeCA9IF9nZXRfXyhcImdldFB4XCIpO1xuLyoqXG4gKiBIYW5kbGVzIG1uZW1vbmljcyBmb3IgbWVudSBpdGVtcy4gRGVwZW5kaW5nIG9uIE9TOlxuICogLSBXaW5kb3dzOiBTdXBwb3J0ZWQgdmlhICYgY2hhcmFjdGVyIChyZXBsYWNlICYmIHdpdGggJilcbiAqIC0gTGludXg6IFN1cHBvcnRlZCB2aWEgJiBjaGFyYWN0ZXIgKHJlcGxhY2UgJiYgd2l0aCAmKVxuICogLSBGcmVlQlNEOiBTdXBwb3J0ZWQgdmlhICYgY2hhcmFjdGVyIChyZXBsYWNlICYmIHdpdGggJilcbiAqIC0gbWFjT1M6IFVuc3VwcG9ydGVkIChyZXBsYWNlICYmIHdpdGggZW1wdHkgc3RyaW5nKVxuICovXG5mdW5jdGlvbiBtbmVtb25pY01lbnVMYWJlbChsYWJlbCwgZm9yY2VEaXNhYmxlTW5lbW9uaWNzKSB7XG4gIGlmIChfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLmlzTWFjaW50b3NoIHx8IGZvcmNlRGlzYWJsZU1uZW1vbmljcykge1xuICAgIHJldHVybiBsYWJlbC5yZXBsYWNlKC9cXCgmJlxcd1xcKXwmJi9nLCAnJykucmVwbGFjZSgvJi9nLCBfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLmlzTWFjaW50b3NoID8gJyYnIDogJyYmJyk7XG4gIH1cbiAgcmV0dXJuIGxhYmVsLnJlcGxhY2UoLyYmfCYvZywgbSA9PiBtID09PSAnJicgPyAnJiYnIDogJyYnKTtcbn1cbmV4cG9ydHMubW5lbW9uaWNNZW51TGFiZWwgPSBfZ2V0X18oXCJtbmVtb25pY01lbnVMYWJlbFwiKTtcbi8qKlxuICogSGFuZGxlcyBtbmVtb25pY3MgZm9yIGJ1dHRvbnMuIERlcGVuZGluZyBvbiBPUzpcbiAqIC0gV2luZG93czogU3VwcG9ydGVkIHZpYSAmIGNoYXJhY3RlciAocmVwbGFjZSAmJiB3aXRoICYgYW5kICYgd2l0aCAmJiBmb3IgZXNjYXBpbmcpXG4gKiAtIExpbnV4OiBTdXBwb3J0ZWQgdmlhIF8gY2hhcmFjdGVyIChyZXBsYWNlICYmIHdpdGggXylcbiAqIC0gRnJlZUJTRDogU3VwcG9ydGVkIHZpYSBfIGNoYXJhY3RlciAocmVwbGFjZSAmJiB3aXRoIF8pXG4gKiAtIG1hY09TOiBVbnN1cHBvcnRlZCAocmVwbGFjZSAmJiB3aXRoIGVtcHR5IHN0cmluZylcbiAqL1xuZnVuY3Rpb24gbW5lbW9uaWNCdXR0b25MYWJlbChsYWJlbCwgZm9yY2VEaXNhYmxlTW5lbW9uaWNzKSB7XG4gIGlmIChfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLmlzTWFjaW50b3NoIHx8IGZvcmNlRGlzYWJsZU1uZW1vbmljcykge1xuICAgIHJldHVybiBsYWJlbC5yZXBsYWNlKC9cXCgmJlxcd1xcKXwmJi9nLCAnJyk7XG4gIH1cbiAgaWYgKF9nZXRfXyhcInBsYXRmb3JtXzFcIikuaXNXaW5kb3dzKSB7XG4gICAgcmV0dXJuIGxhYmVsLnJlcGxhY2UoLyYmfCYvZywgbSA9PiBtID09PSAnJicgPyAnJiYnIDogJyYnKTtcbiAgfVxuICByZXR1cm4gbGFiZWwucmVwbGFjZSgvJiYvZywgJ18nKTtcbn1cbmV4cG9ydHMubW5lbW9uaWNCdXR0b25MYWJlbCA9IF9nZXRfXyhcIm1uZW1vbmljQnV0dG9uTGFiZWxcIik7XG5mdW5jdGlvbiBjbGVhbk1uZW1vbmljKGxhYmVsKSB7XG4gIGNvbnN0IHJlZ2V4ID0gZXhwb3J0cy5NRU5VX01ORU1PTklDX1JFR0VYO1xuICBjb25zdCBtYXRjaGVzID0gcmVnZXguZXhlYyhsYWJlbCk7XG4gIGlmICghbWF0Y2hlcykge1xuICAgIHJldHVybiBsYWJlbDtcbiAgfVxuICBjb25zdCBtbmVtb25pY0luVGV4dCA9ICFtYXRjaGVzWzFdO1xuICByZXR1cm4gbGFiZWwucmVwbGFjZShyZWdleCwgbW5lbW9uaWNJblRleHQgPyAnJDIkMycgOiAnJykudHJpbSgpO1xufVxuZXhwb3J0cy5jbGVhbk1uZW1vbmljID0gX2dldF9fKFwiY2xlYW5NbmVtb25pY1wiKTtcbmZ1bmN0aW9uIHBhcnNlQWNjZWxlcmF0b3IoYWNjZWxlcmF0b3IpIHtcbiAgbGV0IGFjYyA9IGFjY2VsZXJhdG9yLnRvU3RyaW5nKCk7XG4gIGlmICghX2dldF9fKFwicGxhdGZvcm1fMVwiKS5pc01hY2ludG9zaCkge1xuICAgIGFjYyA9IGFjYy5yZXBsYWNlKC8oQ21kKXwoQ29tbWFuZCkvZ2ksICcnKTtcbiAgfSBlbHNlIHtcbiAgICBhY2MgPSBhY2MucmVwbGFjZSgvKEN0cmwpfChDb250cm9sKS9naSwgJycpO1xuICB9XG4gIGFjYyA9IGFjYy5yZXBsYWNlKC8oT3IpL2dpLCAnJyk7XG4gIHJldHVybiBhY2M7XG59XG5leHBvcnRzLnBhcnNlQWNjZWxlcmF0b3IgPSBfZ2V0X18oXCJwYXJzZUFjY2VsZXJhdG9yXCIpO1xuZnVuY3Rpb24gYXBwbHlGaWxsKGVsZW1lbnQsIHN2Z0NvbG9yLCBmZ0NvbG9yLCBjb2xvciA9IHRydWUpIHtcbiAgbGV0IGZpbGxDb2xvciA9ICcnO1xuICBpZiAoc3ZnQ29sb3IpIGZpbGxDb2xvciA9IHN2Z0NvbG9yLnRvU3RyaW5nKCk7ZWxzZSBpZiAoZmdDb2xvcikgZmlsbENvbG9yID0gZmdDb2xvci50b1N0cmluZygpO1xuICBpZiAoZWxlbWVudCAmJiBlbGVtZW50ICE9PSBudWxsKSB7XG4gICAgaWYgKGNvbG9yKSBlbGVtZW50LnN0eWxlLmNvbG9yID0gZmlsbENvbG9yO2Vsc2UgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBmaWxsQ29sb3I7XG4gIH1cbn1cbmV4cG9ydHMuYXBwbHlGaWxsID0gX2dldF9fKFwiYXBwbHlGaWxsXCIpO1xuZnVuY3Rpb24gbG9hZFdpbmRvd0ljb25zKGljb25zKSB7XG4gIGlmICghaWNvbnMpIHJldHVybjtcbiAgY29uc3QgaldpbmRvd3NJY29ucyA9IHJlcXVpcmUoaWNvbnMpO1xuICByZXR1cm4ge1xuICAgIGljb25zOiBqV2luZG93c0ljb25zLFxuICAgIHBsYXRmb3JtSWNvbnM6IGpXaW5kb3dzSWNvbnNbKDAsIF9nZXRfXyhcInBsYXRmb3JtXzFcIikuUGxhdGZvcm1Ub1N0cmluZykoX2dldF9fKFwicGxhdGZvcm1fMVwiKS5wbGF0Zm9ybSkudG9Mb2NhbGVMb3dlckNhc2UoKV1cbiAgfTtcbn1cbmV4cG9ydHMubG9hZFdpbmRvd0ljb25zID0gX2dldF9fKFwibG9hZFdpbmRvd0ljb25zXCIpO1xuZnVuY3Rpb24gX2dldEdsb2JhbE9iamVjdCgpIHtcbiAgdHJ5IHtcbiAgICBpZiAoISFnbG9iYWwpIHtcbiAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghIXdpbmRvdykge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxufVxuO1xudmFyIF9SZXdpcmVNb2R1bGVJZF9fID0gbnVsbDtcbmZ1bmN0aW9uIF9nZXRSZXdpcmVNb2R1bGVJZF9fKCkge1xuICBpZiAoX1Jld2lyZU1vZHVsZUlkX18gPT09IG51bGwpIHtcbiAgICBsZXQgZ2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gICAgaWYgKCFnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKSB7XG4gICAgICBnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fID0gMDtcbiAgICB9XG4gICAgX1Jld2lyZU1vZHVsZUlkX18gPSBfXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKys7XG4gIH1cbiAgcmV0dXJuIF9SZXdpcmVNb2R1bGVJZF9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZVJlZ2lzdHJ5X18oKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cbiAgcmV0dXJuIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlZERhdGFfXygpIHtcbiAgbGV0IG1vZHVsZUlkID0gX2dldFJld2lyZU1vZHVsZUlkX18oKTtcbiAgbGV0IHJlZ2lzdHJ5ID0gX2dldFJld2lyZVJlZ2lzdHJ5X18oKTtcbiAgbGV0IHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIGlmICghcmV3aXJlRGF0YSkge1xuICAgIHJlZ2lzdHJ5W21vZHVsZUlkXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgfVxuICByZXR1cm4gcmV3aXJlRGF0YTtcbn1cbihmdW5jdGlvbiByZWdpc3RlclJlc2V0QWxsKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH07XG4gIH1cbn0pKCk7XG52YXIgSU5URU5USU9OQUxfVU5ERUZJTkVEID0gJ19fSU5URU5USU9OQUxfVU5ERUZJTkVEX18nO1xubGV0IF9SZXdpcmVBUElfXyA9IHt9O1xuKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gYWRkUHJvcGVydHlUb0FQSU9iamVjdChuYW1lLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfUmV3aXJlQVBJX18sIG5hbWUsIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG59KSgpO1xuZnVuY3Rpb24gX2dldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdmFsdWUgPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgaWYgKHZhbHVlID09PSBJTlRFTlRJT05BTF9VTkRFRklORUQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHtcbiAgICBjYXNlIFwiY29sb3JfMVwiOlxuICAgICAgcmV0dXJuIGNvbG9yXzE7XG4gICAgY2FzZSBcInBsYXRmb3JtXzFcIjpcbiAgICAgIHJldHVybiBwbGF0Zm9ybV8xO1xuICAgIGNhc2UgXCJnZXRQeFwiOlxuICAgICAgcmV0dXJuIGdldFB4O1xuICAgIGNhc2UgXCJtbmVtb25pY01lbnVMYWJlbFwiOlxuICAgICAgcmV0dXJuIG1uZW1vbmljTWVudUxhYmVsO1xuICAgIGNhc2UgXCJtbmVtb25pY0J1dHRvbkxhYmVsXCI6XG4gICAgICByZXR1cm4gbW5lbW9uaWNCdXR0b25MYWJlbDtcbiAgICBjYXNlIFwiY2xlYW5NbmVtb25pY1wiOlxuICAgICAgcmV0dXJuIGNsZWFuTW5lbW9uaWM7XG4gICAgY2FzZSBcInBhcnNlQWNjZWxlcmF0b3JcIjpcbiAgICAgIHJldHVybiBwYXJzZUFjY2VsZXJhdG9yO1xuICAgIGNhc2UgXCJhcHBseUZpbGxcIjpcbiAgICAgIHJldHVybiBhcHBseUZpbGw7XG4gICAgY2FzZSBcImxvYWRXaW5kb3dJY29uc1wiOlxuICAgICAgcmV0dXJuIGxvYWRXaW5kb3dJY29ucztcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgX3ZhbHVlKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7fVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX3VwZGF0ZV9vcGVyYXRpb25fXyhvcGVyYXRpb24sIHZhcmlhYmxlTmFtZSwgcHJlZml4KSB7XG4gIHZhciBvbGRWYWx1ZSA9IF9nZXRfXyh2YXJpYWJsZU5hbWUpO1xuICB2YXIgbmV3VmFsdWUgPSBvcGVyYXRpb24gPT09ICcrKycgPyBvbGRWYWx1ZSArIDEgOiBvbGRWYWx1ZSAtIDE7XG4gIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIG5ld1ZhbHVlKTtcbiAgcmV0dXJuIHByZWZpeCA/IG5ld1ZhbHVlIDogb2xkVmFsdWU7XG59XG5mdW5jdGlvbiBfc2V0X18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmICh0eXBlb2YgdmFyaWFibGVOYW1lID09PSAnb2JqZWN0Jykge1xuICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVtuYW1lXSA9IHZhcmlhYmxlTmFtZVtuYW1lXTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBJTlRFTlRJT05BTF9VTkRFRklORUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBkZWxldGUgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICBpZiAoT2JqZWN0LmtleXMocmV3aXJlRGF0YSkubGVuZ3RoID09IDApIHtcbiAgICBkZWxldGUgX2dldFJld2lyZVJlZ2lzdHJ5X18oKVtfZ2V0UmV3aXJlTW9kdWxlSWRfX107XG4gIH1cbiAgO1xufVxuZnVuY3Rpb24gX3dpdGhfXyhvYmplY3QpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICB2YXIgcmV3aXJlZFZhcmlhYmxlTmFtZXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICB2YXIgcHJldmlvdXNWYWx1ZXMgPSB7fTtcbiAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV0gPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBvYmplY3RbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgICBsZXQgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgICBpZiAoISFyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlc3VsdC50aGVuKHJlc2V0KS5jYXRjaChyZXNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc2V0KCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5sZXQgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID0gdHlwZW9mIG1vZHVsZS5leHBvcnRzO1xuZnVuY3Rpb24gYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgbmFtZSwge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5pZiAoKF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ29iamVjdCcgfHwgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnZnVuY3Rpb24nKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKG1vZHVsZS5leHBvcnRzKSkge1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3dpdGhfXycsIF93aXRoX18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlQVBJX18nLCBfUmV3aXJlQVBJX18pO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIEFsZXhUb3JyZXNEZXYuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLlRpdGxlYmFyQ29sb3IgPSBleHBvcnRzLlRpdGxlYmFyID0gZXhwb3J0cy5DdXN0b21UaXRsZWJhciA9IHZvaWQgMDtcbmNvbnN0IHRpdGxlYmFyXzEgPSByZXF1aXJlKFwiLi90aXRsZWJhclwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIkN1c3RvbVRpdGxlYmFyXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9nZXRfXyhcInRpdGxlYmFyXzFcIikuQ3VzdG9tVGl0bGViYXI7XG4gIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiVGl0bGViYXJcIiwge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2dldF9fKFwidGl0bGViYXJfMVwiKS5DdXN0b21UaXRsZWJhcjtcbiAgfVxufSk7XG5jb25zdCBjb2xvcl8xID0gcmVxdWlyZShcIi4vYmFzZS9jb21tb24vY29sb3JcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJUaXRsZWJhckNvbG9yXCIsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9nZXRfXyhcImNvbG9yXzFcIikuQ29sb3I7XG4gIH1cbn0pO1xuZnVuY3Rpb24gX2dldEdsb2JhbE9iamVjdCgpIHtcbiAgdHJ5IHtcbiAgICBpZiAoISFnbG9iYWwpIHtcbiAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghIXdpbmRvdykge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxufVxuO1xudmFyIF9SZXdpcmVNb2R1bGVJZF9fID0gbnVsbDtcbmZ1bmN0aW9uIF9nZXRSZXdpcmVNb2R1bGVJZF9fKCkge1xuICBpZiAoX1Jld2lyZU1vZHVsZUlkX18gPT09IG51bGwpIHtcbiAgICBsZXQgZ2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gICAgaWYgKCFnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKSB7XG4gICAgICBnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fID0gMDtcbiAgICB9XG4gICAgX1Jld2lyZU1vZHVsZUlkX18gPSBfXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKys7XG4gIH1cbiAgcmV0dXJuIF9SZXdpcmVNb2R1bGVJZF9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZVJlZ2lzdHJ5X18oKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cbiAgcmV0dXJuIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlZERhdGFfXygpIHtcbiAgbGV0IG1vZHVsZUlkID0gX2dldFJld2lyZU1vZHVsZUlkX18oKTtcbiAgbGV0IHJlZ2lzdHJ5ID0gX2dldFJld2lyZVJlZ2lzdHJ5X18oKTtcbiAgbGV0IHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIGlmICghcmV3aXJlRGF0YSkge1xuICAgIHJlZ2lzdHJ5W21vZHVsZUlkXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgfVxuICByZXR1cm4gcmV3aXJlRGF0YTtcbn1cbihmdW5jdGlvbiByZWdpc3RlclJlc2V0QWxsKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH07XG4gIH1cbn0pKCk7XG52YXIgSU5URU5USU9OQUxfVU5ERUZJTkVEID0gJ19fSU5URU5USU9OQUxfVU5ERUZJTkVEX18nO1xubGV0IF9SZXdpcmVBUElfXyA9IHt9O1xuKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gYWRkUHJvcGVydHlUb0FQSU9iamVjdChuYW1lLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfUmV3aXJlQVBJX18sIG5hbWUsIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG59KSgpO1xuZnVuY3Rpb24gX2dldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdmFsdWUgPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgaWYgKHZhbHVlID09PSBJTlRFTlRJT05BTF9VTkRFRklORUQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHtcbiAgICBjYXNlIFwidGl0bGViYXJfMVwiOlxuICAgICAgcmV0dXJuIHRpdGxlYmFyXzE7XG4gICAgY2FzZSBcImNvbG9yXzFcIjpcbiAgICAgIHJldHVybiBjb2xvcl8xO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfYXNzaWduX18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfc2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lLCB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICB9XG59XG5mdW5jdGlvbiBfc2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lLCBfdmFsdWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHt9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfdXBkYXRlX29wZXJhdGlvbl9fKG9wZXJhdGlvbiwgdmFyaWFibGVOYW1lLCBwcmVmaXgpIHtcbiAgdmFyIG9sZFZhbHVlID0gX2dldF9fKHZhcmlhYmxlTmFtZSk7XG4gIHZhciBuZXdWYWx1ZSA9IG9wZXJhdGlvbiA9PT0gJysrJyA/IG9sZFZhbHVlICsgMSA6IG9sZFZhbHVlIC0gMTtcbiAgX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgbmV3VmFsdWUpO1xuICByZXR1cm4gcHJlZml4ID8gbmV3VmFsdWUgOiBvbGRWYWx1ZTtcbn1cbmZ1bmN0aW9uIF9zZXRfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHR5cGVvZiB2YXJpYWJsZU5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW25hbWVdID0gdmFyaWFibGVOYW1lW25hbWVdO1xuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IElOVEVOVElPTkFMX1VOREVGSU5FRDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIF9yZXNldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGRlbGV0ZSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gIGlmIChPYmplY3Qua2V5cyhyZXdpcmVEYXRhKS5sZW5ndGggPT0gMCkge1xuICAgIGRlbGV0ZSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpW19nZXRSZXdpcmVNb2R1bGVJZF9fXTtcbiAgfVxuICA7XG59XG5mdW5jdGlvbiBfd2l0aF9fKG9iamVjdCkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIHZhciByZXdpcmVkVmFyaWFibGVOYW1lcyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG4gIHZhciBwcmV2aW91c1ZhbHVlcyA9IHt9O1xuICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IG9iamVjdFt2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICAgIGxldCByZXN1bHQgPSBjYWxsYmFjaygpO1xuICAgIGlmICghIXJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmVzdWx0LnRoZW4ocmVzZXQpLmNhdGNoKHJlc2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzZXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cbmxldCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPSB0eXBlb2YgbW9kdWxlLmV4cG9ydHM7XG5mdW5jdGlvbiBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCBuYW1lLCB7XG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cbmlmICgoX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnb2JqZWN0JyB8fCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdmdW5jdGlvbicpICYmIE9iamVjdC5pc0V4dGVuc2libGUobW9kdWxlLmV4cG9ydHMpKSB7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVBUElfXycsIF9SZXdpcmVBUElfXyk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgQWxleFRvcnJlc0Rldi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIF9fY3JlYXRlQmluZGluZyA9IHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcgfHwgKE9iamVjdC5jcmVhdGUgPyBmdW5jdGlvbiAobywgbSwgaywgazIpIHtcbiAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xuICBpZiAoIWRlc2MgfHwgKFwiZ2V0XCIgaW4gZGVzYyA/ICFtLl9fZXNNb2R1bGUgOiBkZXNjLndyaXRhYmxlIHx8IGRlc2MuY29uZmlndXJhYmxlKSkge1xuICAgIGRlc2MgPSB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtW2tdO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcbn0gOiBmdW5jdGlvbiAobywgbSwgaywgazIpIHtcbiAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgb1trMl0gPSBtW2tdO1xufSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gdGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCB8fCAoT2JqZWN0LmNyZWF0ZSA/IGZ1bmN0aW9uIChvLCB2KSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgdmFsdWU6IHZcbiAgfSk7XG59IDogZnVuY3Rpb24gKG8sIHYpIHtcbiAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gdGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhciB8fCBmdW5jdGlvbiAobW9kKSB7XG4gIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfZ2V0X18oXCJfX2NyZWF0ZUJpbmRpbmdcIikocmVzdWx0LCBtb2QsIGspO1xuICBfZ2V0X18oXCJfX3NldE1vZHVsZURlZmF1bHRcIikocmVzdWx0LCBtb2QpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLk1lbnVCYXIgPSB2b2lkIDA7XG5jb25zdCBlbGVjdHJvbl8xID0gcmVxdWlyZShcImVsZWN0cm9uXCIpO1xuY29uc3QgRE9NID0gX2dldF9fKFwiX19pbXBvcnRTdGFyXCIpKHJlcXVpcmUoXCIuLi9iYXNlL2NvbW1vbi9kb21cIikpO1xuY29uc3QgZXZlbnRfMSA9IHJlcXVpcmUoXCIuLi9iYXNlL2NvbW1vbi9ldmVudFwiKTtcbmNvbnN0IGxpZmVjeWNsZV8xID0gcmVxdWlyZShcIi4uL2Jhc2UvY29tbW9uL2xpZmVjeWNsZVwiKTtcbmNvbnN0IHBsYXRmb3JtXzEgPSByZXF1aXJlKFwiLi4vYmFzZS9jb21tb24vcGxhdGZvcm1cIik7XG5jb25zdCBrZXlib2FyZEV2ZW50XzEgPSByZXF1aXJlKFwiLi4vYmFzZS9icm93c2VyL2tleWJvYXJkRXZlbnRcIik7XG5jb25zdCBrZXlDb2Rlc18xID0gcmVxdWlyZShcIi4uL2Jhc2UvY29tbW9uL2tleUNvZGVzXCIpO1xuY29uc3QgY29uc3RzXzEgPSByZXF1aXJlKFwiLi4vY29uc3RzXCIpO1xuY29uc3QgbWVudV8xID0gcmVxdWlyZShcIi4vbWVudVwiKTtcbmNvbnN0IGFzeW5jXzEgPSByZXF1aXJlKFwiLi4vYmFzZS9jb21tb24vYXN5bmNcIik7XG5jb25zdCBtb3VzZUV2ZW50XzEgPSByZXF1aXJlKFwiLi4vYmFzZS9icm93c2VyL21vdXNlRXZlbnRcIik7XG5jb25zdCB0b3VjaF8xID0gcmVxdWlyZShcIi4uL2Jhc2UvYnJvd3Nlci90b3VjaFwiKTtcbmNvbnN0IHN0cmluZ3MgPSBfZ2V0X18oXCJfX2ltcG9ydFN0YXJcIikocmVxdWlyZShcIi4uL2Jhc2UvY29tbW9uL3N0cmluZ3NcIikpO1xuY29uc3QgJCA9IF9nZXRfXyhcIkRPTVwiKS4kO1xudmFyIE1lbnViYXJTdGF0ZTtcbihmdW5jdGlvbiAoTWVudWJhclN0YXRlKSB7XG4gIE1lbnViYXJTdGF0ZVtNZW51YmFyU3RhdGVbXCJISURERU5cIl0gPSAwXSA9IFwiSElEREVOXCI7XG4gIE1lbnViYXJTdGF0ZVtNZW51YmFyU3RhdGVbXCJWSVNJQkxFXCJdID0gMV0gPSBcIlZJU0lCTEVcIjtcbiAgTWVudWJhclN0YXRlW01lbnViYXJTdGF0ZVtcIkZPQ1VTRURcIl0gPSAyXSA9IFwiRk9DVVNFRFwiO1xuICBNZW51YmFyU3RhdGVbTWVudWJhclN0YXRlW1wiT1BFTlwiXSA9IDNdID0gXCJPUEVOXCI7XG59KShfZ2V0X18oXCJNZW51YmFyU3RhdGVcIikgfHwgX2Fzc2lnbl9fKFwiTWVudWJhclN0YXRlXCIsIHt9KSk7XG5jbGFzcyBNZW51QmFyIGV4dGVuZHMgX2dldF9fKFwibGlmZWN5Y2xlXzFcIikuRGlzcG9zYWJsZSB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgbWVudUljb25zLCBjdXJyZW50T3B0aW9ucywgb3B0aW9ucywgY2xvc2VNZW51ID0gKCkgPT4ge30pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMubWVudUljb25zID0gbWVudUljb25zO1xuICAgIHRoaXMuY3VycmVudE9wdGlvbnMgPSBjdXJyZW50T3B0aW9ucztcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuY2xvc2VNZW51ID0gY2xvc2VNZW51O1xuICAgIC8vIElucHV0LXJlbGF0ZWRcbiAgICB0aGlzLl9tbmVtb25pY3NJblVzZSA9IGZhbHNlO1xuICAgIHRoaXMub3BlbmVkVmlhS2V5Ym9hcmQgPSBmYWxzZTtcbiAgICB0aGlzLmF3YWl0aW5nQWx0UmVsZWFzZSA9IGZhbHNlO1xuICAgIHRoaXMuaWdub3JlTmV4dE1vdXNlVXAgPSBmYWxzZTtcbiAgICB0aGlzLnVwZGF0ZVBlbmRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLm51bU1lbnVzU2hvd24gPSAwO1xuICAgIHRoaXMub3ZlcmZsb3dMYXlvdXRTY2hlZHVsZWQgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5tZW51U3R5bGUgPSB7fTtcbiAgICB0aGlzLmNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnbWVudWJhcicpO1xuICAgIGlmICh0aGlzLmlzQ29tcGFjdCkge1xuICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgnY29tcGFjdCcpO1xuICAgIH1cbiAgICB0aGlzLm1lbnVzID0gW107XG4gICAgdGhpcy5tbmVtb25pY3MgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5fZm9jdXNTdGF0ZSA9IF9nZXRfXyhcIk1lbnViYXJTdGF0ZVwiKS5WSVNJQkxFO1xuICAgIHRoaXMuX29uVmlzaWJpbGl0eUNoYW5nZSA9IHRoaXMuX3JlZ2lzdGVyKG5ldyAoX2dldF9fKFwiZXZlbnRfMVwiKS5FbWl0dGVyKSgpKTtcbiAgICB0aGlzLl9vbkZvY3VzU3RhdGVDaGFuZ2UgPSB0aGlzLl9yZWdpc3RlcihuZXcgKF9nZXRfXyhcImV2ZW50XzFcIikuRW1pdHRlcikoKSk7XG4gICAgdGhpcy5jcmVhdGVPdmVyZmxvd01lbnUoKTtcbiAgICB0aGlzLm1lbnVVcGRhdGVyID0gdGhpcy5fcmVnaXN0ZXIobmV3IChfZ2V0X18oXCJhc3luY18xXCIpLlJ1bk9uY2VTY2hlZHVsZXIpKCgpID0+IHRoaXMudXBkYXRlKCksIDIwMCkpO1xuICAgIC8vIHRoaXMuYWN0aW9uUnVubmVyID0gdGhpcy5vcHRpb25zLmFjdGlvblJ1bm5lciA/PyB0aGlzLl9yZWdpc3RlcihuZXcgQWN0aW9uUnVubmVyKCkpO1xuICAgIHRoaXMucmVnaXN0ZXJMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnNldFVuZm9jdXNlZFN0YXRlKCk7XG4gIH1cbiAgcmVnaXN0ZXJMaXN0ZW5lcnMoKSB7XG4gICAgLyogdGhpcy5fcmVnaXN0ZXIodGhpcy5hY3Rpb25SdW5uZXIub25XaWxsUnVuKCgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRVbmZvY3VzZWRTdGF0ZSgpO1xuICAgIH0pKTsgKi9cbiAgICBpZiAoIV9nZXRfXyhcInBsYXRmb3JtXzFcIikuaXNNYWNpbnRvc2gpIHtcbiAgICAgIHRoaXMuX3JlZ2lzdGVyKF9nZXRfXyhcIkRPTVwiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIod2luZG93LCBfZ2V0X18oXCJET01cIikuRXZlbnRUeXBlLlJFU0laRSwgKCkgPT4ge1xuICAgICAgICB0aGlzLmJsdXIoKTtcbiAgICAgIH0pKTtcbiAgICB9XG4gICAgdGhpcy5fcmVnaXN0ZXIoX2dldF9fKFwiRE9NXCIpLk1vZGlmaWVyS2V5RW1pdHRlci5nZXRJbnN0YW5jZSgpLmV2ZW50KHRoaXMub25Nb2RpZmllcktleVRvZ2dsZWQsIHRoaXMpKTtcbiAgICB0aGlzLl9yZWdpc3RlcihfZ2V0X18oXCJET01cIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMuY29udGFpbmVyLCBfZ2V0X18oXCJET01cIikuRXZlbnRUeXBlLktFWV9ET1dOLCBlID0+IHtcbiAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IChfZ2V0X18oXCJrZXlib2FyZEV2ZW50XzFcIikuU3RhbmRhcmRLZXlib2FyZEV2ZW50KShlKTtcbiAgICAgIGxldCBldmVudEhhbmRsZWQgPSB0cnVlO1xuICAgICAgY29uc3Qga2V5ID0gISFlLmtleSA/IGUua2V5LnRvTG9jYWxlTG93ZXJDYXNlKCkgOiAnJztcbiAgICAgIGNvbnN0IHRhYk5hdiA9IF9nZXRfXyhcInBsYXRmb3JtXzFcIikuaXNNYWNpbnRvc2ggJiYgIXRoaXMuaXNDb21wYWN0O1xuICAgICAgaWYgKGV2ZW50LmVxdWFscygxNSAvKiBLZXlDb2RlLkxlZnRBcnJvdyAqLykgfHwgdGFiTmF2ICYmIGV2ZW50LmVxdWFscygyIC8qIEtleUNvZGUuVGFiICovIHwgMTAyNCAvKiBLZXlNb2QuU2hpZnQgKi8pKSB7XG4gICAgICAgIHRoaXMuZm9jdXNQcmV2aW91cygpO1xuICAgICAgfSBlbHNlIGlmIChldmVudC5lcXVhbHMoMTcgLyogS2V5Q29kZS5SaWdodEFycm93ICovKSB8fCB0YWJOYXYgJiYgZXZlbnQuZXF1YWxzKDIgLyogS2V5Q29kZS5UYWIgKi8pKSB7XG4gICAgICAgIHRoaXMuZm9jdXNOZXh0KCk7XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50LmVxdWFscyg5IC8qIEtleUNvZGUuRXNjYXBlICovKSAmJiB0aGlzLmlzRm9jdXNlZCAmJiAhdGhpcy5pc09wZW4pIHtcbiAgICAgICAgdGhpcy5zZXRVbmZvY3VzZWRTdGF0ZSgpO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5pc09wZW4gJiYgIWV2ZW50LmN0cmxLZXkgJiYgdGhpcy5vcHRpb25zLmVuYWJsZU1uZW1vbmljcyAmJiB0aGlzLm1uZW1vbmljc0luVXNlICYmIHRoaXMubW5lbW9uaWNzLmhhcyhrZXkpKSB7XG4gICAgICAgIGNvbnN0IG1lbnVJbmRleCA9IHRoaXMubW5lbW9uaWNzLmdldChrZXkpO1xuICAgICAgICB0aGlzLm9uTWVudVRyaWdnZXJlZChtZW51SW5kZXgsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGV2ZW50SGFuZGxlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gTmV2ZXIgYWxsb3cgZGVmYXVsdCB0YWIgYmVoYXZpb3Igd2hlbiBub3QgY29tcGFjdFxuICAgICAgaWYgKCF0aGlzLmlzQ29tcGFjdCAmJiAoZXZlbnQuZXF1YWxzKDIgLyogS2V5Q29kZS5UYWIgKi8gfCAxMDI0IC8qIEtleU1vZC5TaGlmdCAqLykgfHwgZXZlbnQuZXF1YWxzKDIgLyogS2V5Q29kZS5UYWIgKi8pKSkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgICAgaWYgKGV2ZW50SGFuZGxlZCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoX2dldF9fKFwiRE9NXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcih3aW5kb3csIF9nZXRfXyhcIkRPTVwiKS5FdmVudFR5cGUuTU9VU0VfRE9XTiwgKCkgPT4ge1xuICAgICAgLy8gVGhpcyBtb3VzZSBldmVudCBpcyBvdXRzaWRlIHRoZSBtZW51YmFyIHNvIGl0IGNvdW50cyBhcyBhIGZvY3VzIG91dFxuICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgIHRoaXMuc2V0VW5mb2N1c2VkU3RhdGUoKTtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoX2dldF9fKFwiRE9NXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcih0aGlzLmNvbnRhaW5lciwgX2dldF9fKFwiRE9NXCIpLkV2ZW50VHlwZS5GT0NVU19JTiwgZSA9PiB7XG4gICAgICBjb25zdCBldmVudCA9IGU7XG4gICAgICBpZiAoZXZlbnQucmVsYXRlZFRhcmdldCkge1xuICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyLmNvbnRhaW5zKGV2ZW50LnJlbGF0ZWRUYXJnZXQpKSB7XG4gICAgICAgICAgdGhpcy5mb2N1c1RvUmV0dXJuID0gZXZlbnQucmVsYXRlZFRhcmdldDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pKTtcbiAgICB0aGlzLl9yZWdpc3RlcihfZ2V0X18oXCJET01cIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKHRoaXMuY29udGFpbmVyLCBfZ2V0X18oXCJET01cIikuRXZlbnRUeXBlLkZPQ1VTX09VVCwgZSA9PiB7XG4gICAgICBjb25zdCBldmVudCA9IGU7XG4gICAgICAvLyBXZSBhcmUgbG9zaW5nIGZvY3VzIGFuZCB0aGVyZSBpcyBhIHRhcmdldCwgcmVzZXQgZm9jdXNUb1JldHVybiB2YWx1ZSBhcyBub3QgdG8gcmVkaXJlY3RcbiAgICAgIGlmIChldmVudC5yZWxhdGVkVGFyZ2V0ICYmICF0aGlzLmNvbnRhaW5lci5jb250YWlucyhldmVudC5yZWxhdGVkVGFyZ2V0KSkge1xuICAgICAgICB0aGlzLmZvY3VzVG9SZXR1cm4gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuc2V0VW5mb2N1c2VkU3RhdGUoKTtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoX2dldF9fKFwiRE9NXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcih3aW5kb3csIF9nZXRfXyhcIkRPTVwiKS5FdmVudFR5cGUuS0VZX0RPV04sIGUgPT4ge1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuZW5hYmxlTW5lbW9uaWNzIHx8ICFlLmFsdEtleSB8fCBlLmN0cmxLZXkgfHwgZS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGtleSA9IGUua2V5LnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoIXRoaXMubW5lbW9uaWNzLmhhcyhrZXkpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMubW5lbW9uaWNzSW5Vc2UgPSB0cnVlO1xuICAgICAgdGhpcy51cGRhdGVNbmVtb25pY1Zpc2liaWxpdHkodHJ1ZSk7XG4gICAgICBjb25zdCBtZW51SW5kZXggPSB0aGlzLm1uZW1vbmljcy5nZXQoa2V5KTtcbiAgICAgIHRoaXMub25NZW51VHJpZ2dlcmVkKG1lbnVJbmRleCwgZmFsc2UpO1xuICAgIH0pKTtcbiAgfVxuICBwdXNoKG1lbnUpIHtcbiAgICBjb25zdCB0b3BMZXZlbE1lbnVzID0gbWVudS5pdGVtcztcbiAgICB0b3BMZXZlbE1lbnVzLmZvckVhY2gobWVudUJhck1lbnUgPT4ge1xuICAgICAgY29uc3QgbWVudUluZGV4ID0gdGhpcy5tZW51cy5sZW5ndGg7XG4gICAgICBjb25zdCBjbGVhbk1lbnVMYWJlbCA9ICgwLCBfZ2V0X18oXCJjb25zdHNfMVwiKS5jbGVhbk1uZW1vbmljKShtZW51QmFyTWVudS5sYWJlbCk7XG4gICAgICBjb25zdCBtbmVtb25pY01hdGNoZXMgPSBfZ2V0X18oXCJjb25zdHNfMVwiKS5NRU5VX01ORU1PTklDX1JFR0VYLmV4ZWMobWVudUJhck1lbnUubGFiZWwpO1xuICAgICAgLy8gUmVnaXN0ZXIgbW5lbW9uaWNzXG4gICAgICBpZiAobW5lbW9uaWNNYXRjaGVzKSB7XG4gICAgICAgIGNvbnN0IG1uZW1vbmljID0gISFtbmVtb25pY01hdGNoZXNbMV0gPyBtbmVtb25pY01hdGNoZXNbMV0gOiBtbmVtb25pY01hdGNoZXNbM107XG4gICAgICAgIHRoaXMucmVnaXN0ZXJNbmVtb25pYyh0aGlzLm1lbnVzLmxlbmd0aCwgbW5lbW9uaWMpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaXNDb21wYWN0KSB7XG4gICAgICAgIHRoaXMubWVudXMucHVzaCh7XG4gICAgICAgICAgbGFiZWw6ICcnLFxuICAgICAgICAgIGFjdGlvbnM6IG1lbnVCYXJNZW51LnN1Ym1lbnVcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBidXR0b25FbGVtZW50ID0gX2dldF9fKFwiJFwiKSgnLmNldC1tZW51YmFyLW1lbnUtYnV0dG9uJywge1xuICAgICAgICAgIHJvbGU6ICdtZW51aXRlbScsXG4gICAgICAgICAgdGFiaW5kZXg6IC0xLFxuICAgICAgICAgICdhcmlhLWxhYmVsJzogY2xlYW5NZW51TGFiZWwsXG4gICAgICAgICAgJ2FyaWEtaGFzcG9wdXAnOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB0aXRsZUVsZW1lbnQgPSBfZ2V0X18oXCIkXCIpKCcuY2V0LW1lbnViYXItbWVudS10aXRsZScsIHtcbiAgICAgICAgICByb2xlOiAnbm9uZScsXG4gICAgICAgICAgJ2FyaWEtaGlkZGVuJzogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgYnV0dG9uRWxlbWVudC5hcHBlbmRDaGlsZCh0aXRsZUVsZW1lbnQpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5pbnNlcnRCZWZvcmUoYnV0dG9uRWxlbWVudCwgdGhpcy5vdmVyZmxvd01lbnUuYnV0dG9uRWxlbWVudCk7XG4gICAgICAgIHRoaXMudXBkYXRlTGFiZWxzKHRpdGxlRWxlbWVudCwgYnV0dG9uRWxlbWVudCwgbWVudUJhck1lbnUubGFiZWwpO1xuICAgICAgICB0aGlzLl9yZWdpc3RlcihfZ2V0X18oXCJET01cIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKGJ1dHRvbkVsZW1lbnQsIF9nZXRfXyhcIkRPTVwiKS5FdmVudFR5cGUuS0VZX1VQLCBlID0+IHtcbiAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyAoX2dldF9fKFwia2V5Ym9hcmRFdmVudF8xXCIpLlN0YW5kYXJkS2V5Ym9hcmRFdmVudCkoZSk7XG4gICAgICAgICAgbGV0IGV2ZW50SGFuZGxlZCA9IHRydWU7XG4gICAgICAgICAgaWYgKChldmVudC5lcXVhbHMoMTggLyogS2V5Q29kZS5Eb3duQXJyb3cgKi8pIHx8IGV2ZW50LmVxdWFscygzIC8qIEtleUNvZGUuRW50ZXIgKi8pKSAmJiAhdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZE1lbnUgPSB7XG4gICAgICAgICAgICAgIGluZGV4OiBtZW51SW5kZXhcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLm9wZW5lZFZpYUtleWJvYXJkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNTdGF0ZSA9IF9nZXRfXyhcIk1lbnViYXJTdGF0ZVwiKS5PUEVOO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBldmVudEhhbmRsZWQgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGV2ZW50SGFuZGxlZCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLl9yZWdpc3RlcihfZ2V0X18oXCJ0b3VjaF8xXCIpLkdlc3R1cmUuYWRkVGFyZ2V0KGJ1dHRvbkVsZW1lbnQpKTtcbiAgICAgICAgdGhpcy5fcmVnaXN0ZXIoX2dldF9fKFwiRE9NXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcihidXR0b25FbGVtZW50LCBfZ2V0X18oXCJ0b3VjaF8xXCIpLkV2ZW50VHlwZS5UYXAsIGUgPT4ge1xuICAgICAgICAgIC8vIElnbm9yZSB0aGlzIHRvdWNoIGlmIHRoZSBtZW51IGlzIHRvdWNoZWRcbiAgICAgICAgICBpZiAodGhpcy5pc09wZW4gJiYgdGhpcy5mb2N1c2VkTWVudSAmJiB0aGlzLmZvY3VzZWRNZW51LmhvbGRlciAmJiBfZ2V0X18oXCJET01cIikuaXNBbmNlc3RvcihlLmluaXRpYWxUYXJnZXQsIHRoaXMuZm9jdXNlZE1lbnUuaG9sZGVyKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmlnbm9yZU5leHRNb3VzZVVwID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5vbk1lbnVUcmlnZ2VyZWQobWVudUluZGV4LCB0cnVlKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLl9yZWdpc3RlcihfZ2V0X18oXCJET01cIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKGJ1dHRvbkVsZW1lbnQsIF9nZXRfXyhcIkRPTVwiKS5FdmVudFR5cGUuTU9VU0VfRE9XTiwgZSA9PiB7XG4gICAgICAgICAgLy8gSWdub3JlIG5vbi1sZWZ0LWNsaWNrXG4gICAgICAgICAgY29uc3QgbW91c2VFdmVudCA9IG5ldyAoX2dldF9fKFwibW91c2VFdmVudF8xXCIpLlN0YW5kYXJkTW91c2VFdmVudCkoZSk7XG4gICAgICAgICAgaWYgKCFtb3VzZUV2ZW50LmxlZnRCdXR0b24pIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgLy8gT3BlbiB0aGUgbWVudSB3aXRoIG1vdXNlIGRvd24gYW5kIGlnbm9yZSB0aGUgZm9sbG93aW5nIG1vdXNlIHVwIGV2ZW50XG4gICAgICAgICAgICB0aGlzLmlnbm9yZU5leHRNb3VzZVVwID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMub25NZW51VHJpZ2dlcmVkKG1lbnVJbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlTmV4dE1vdXNlVXAgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5fcmVnaXN0ZXIoX2dldF9fKFwiRE9NXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcihidXR0b25FbGVtZW50LCBfZ2V0X18oXCJET01cIikuRXZlbnRUeXBlLk1PVVNFX1VQLCBlID0+IHtcbiAgICAgICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghdGhpcy5pZ25vcmVOZXh0TW91c2VVcCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICAgIHRoaXMub25NZW51VHJpZ2dlcmVkKG1lbnVJbmRleCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlTmV4dE1vdXNlVXAgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5fcmVnaXN0ZXIoX2dldF9fKFwiRE9NXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcihidXR0b25FbGVtZW50LCBfZ2V0X18oXCJET01cIikuRXZlbnRUeXBlLk1PVVNFX0VOVEVSLCAoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuaXNPcGVuICYmICF0aGlzLmlzQ3VycmVudE1lbnUobWVudUluZGV4KSkge1xuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgICAgdGhpcy5jbGVhbnVwTWVudSgpO1xuICAgICAgICAgICAgdGhpcy5zaG93TWVudShtZW51SW5kZXgsIGZhbHNlKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNGb2N1c2VkICYmICF0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy5mb2N1c2VkTWVudSA9IHtcbiAgICAgICAgICAgICAgaW5kZXg6IG1lbnVJbmRleFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgdGhpcy5tZW51cy5wdXNoKHtcbiAgICAgICAgICBsYWJlbDogbWVudUJhck1lbnUubGFiZWwsXG4gICAgICAgICAgYWN0aW9uczogbWVudUJhck1lbnUuc3VibWVudSxcbiAgICAgICAgICBidXR0b25FbGVtZW50LFxuICAgICAgICAgIHRpdGxlRWxlbWVudFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICBjcmVhdGVPdmVyZmxvd01lbnUoKSB7XG4gICAgY29uc3QgbGFiZWwgPSB0aGlzLmlzQ29tcGFjdCA/ICdDb21wYWN0JyA6ICdNb3JlJztcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gX2dldF9fKFwiJFwiKSgnLmNldC1tZW51YmFyLW1lbnUtYnV0dG9uJywge1xuICAgICAgcm9sZTogJ21lbnVpdGVtJyxcbiAgICAgIHRhYmluZGV4OiB0aGlzLmlzQ29tcGFjdCA/IDAgOiAtMSxcbiAgICAgICdhcmlhLWxhYmVsJzogbGFiZWwsXG4gICAgICAnYXJpYS1oYXNwb3B1cCc6IHRydWVcbiAgICB9KTtcbiAgICBjb25zdCB0aXRsZUVsZW1lbnQgPSBfZ2V0X18oXCIkXCIpKCcuY2V0LW1lbnViYXItbWVudS10aXRsZS5jZXQtdG9nZ2xlLW1vcmUnLCB7XG4gICAgICByb2xlOiAnbm9uZScsXG4gICAgICAnYXJpYS1oaWRkZW4nOiB0cnVlXG4gICAgfSk7XG4gICAgYnV0dG9uRWxlbWVudC5hcHBlbmRDaGlsZCh0aXRsZUVsZW1lbnQpO1xuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbkVsZW1lbnQpO1xuICAgIGJ1dHRvbkVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgIHRoaXMuX3JlZ2lzdGVyKF9nZXRfXyhcIkRPTVwiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoYnV0dG9uRWxlbWVudCwgX2dldF9fKFwiRE9NXCIpLkV2ZW50VHlwZS5LRVlfVVAsIGUgPT4ge1xuICAgICAgY29uc3QgZXZlbnQgPSBuZXcgKF9nZXRfXyhcImtleWJvYXJkRXZlbnRfMVwiKS5TdGFuZGFyZEtleWJvYXJkRXZlbnQpKGUpO1xuICAgICAgbGV0IGV2ZW50SGFuZGxlZCA9IHRydWU7XG4gICAgICBjb25zdCB0cmlnZ2VyS2V5cyA9IFszIC8qIEtleUNvZGUuRW50ZXIgKi9dO1xuICAgICAgaWYgKCF0aGlzLmlzQ29tcGFjdCkge1xuICAgICAgICB0cmlnZ2VyS2V5cy5wdXNoKDE4IC8qIEtleUNvZGUuRG93bkFycm93ICovKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyaWdnZXJLZXlzLnB1c2goMTAgLyogS2V5Q29kZS5TcGFjZSAqLyk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGFjdE1vZGUgPT09IF9nZXRfXyhcIm1lbnVfMVwiKS5EaXJlY3Rpb24uUmlnaHQpIHtcbiAgICAgICAgICB0cmlnZ2VyS2V5cy5wdXNoKDE3IC8qIEtleUNvZGUuUmlnaHRBcnJvdyAqLyk7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmNvbXBhY3RNb2RlID09PSBfZ2V0X18oXCJtZW51XzFcIikuRGlyZWN0aW9uLkxlZnQpIHtcbiAgICAgICAgICB0cmlnZ2VyS2V5cy5wdXNoKDE1IC8qIEtleUNvZGUuTGVmdEFycm93ICovKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHJpZ2dlcktleXMuc29tZShrID0+IGV2ZW50LmVxdWFscyhrKSkgJiYgIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgIHRoaXMuZm9jdXNlZE1lbnUgPSB7XG4gICAgICAgICAgaW5kZXg6IF9nZXRfXyhcIk1lbnVCYXJcIikuT1ZFUkZMT1dfSU5ERVhcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vcGVuZWRWaWFLZXlib2FyZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZm9jdXNTdGF0ZSA9IF9nZXRfXyhcIk1lbnViYXJTdGF0ZVwiKS5PUEVOO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXZlbnRIYW5kbGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoZXZlbnRIYW5kbGVkKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgICB0aGlzLl9yZWdpc3RlcihfZ2V0X18oXCJ0b3VjaF8xXCIpLkdlc3R1cmUuYWRkVGFyZ2V0KGJ1dHRvbkVsZW1lbnQpKTtcbiAgICB0aGlzLl9yZWdpc3RlcihfZ2V0X18oXCJET01cIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKGJ1dHRvbkVsZW1lbnQsIF9nZXRfXyhcInRvdWNoXzFcIikuRXZlbnRUeXBlLlRhcCwgZSA9PiB7XG4gICAgICAvLyBJZ25vcmUgdGhpcyB0b3VjaCBpZiB0aGUgbWVudSBpcyB0b3VjaGVkXG4gICAgICBpZiAodGhpcy5pc09wZW4gJiYgdGhpcy5mb2N1c2VkTWVudSAmJiB0aGlzLmZvY3VzZWRNZW51LmhvbGRlciAmJiBfZ2V0X18oXCJET01cIikuaXNBbmNlc3RvcihlLmluaXRpYWxUYXJnZXQsIHRoaXMuZm9jdXNlZE1lbnUuaG9sZGVyKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmlnbm9yZU5leHRNb3VzZVVwID0gZmFsc2U7XG4gICAgICB0aGlzLm9uTWVudVRyaWdnZXJlZChfZ2V0X18oXCJNZW51QmFyXCIpLk9WRVJGTE9XX0lOREVYLCB0cnVlKTtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKF9nZXRfXyhcIkRPTVwiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoYnV0dG9uRWxlbWVudCwgX2dldF9fKFwiRE9NXCIpLkV2ZW50VHlwZS5NT1VTRV9ET1dOLCBlID0+IHtcbiAgICAgIC8vIElnbm9yZSBub24tbGVmdC1jbGlja1xuICAgICAgY29uc3QgbW91c2VFdmVudCA9IG5ldyAoX2dldF9fKFwibW91c2VFdmVudF8xXCIpLlN0YW5kYXJkTW91c2VFdmVudCkoZSk7XG4gICAgICBpZiAoIW1vdXNlRXZlbnQubGVmdEJ1dHRvbikge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgLy8gT3BlbiB0aGUgbWVudSB3aXRoIG1vdXNlIGRvd24gYW5kIGlnbm9yZSB0aGUgZm9sbG93aW5nIG1vdXNlIHVwIGV2ZW50XG4gICAgICAgIHRoaXMuaWdub3JlTmV4dE1vdXNlVXAgPSB0cnVlO1xuICAgICAgICB0aGlzLm9uTWVudVRyaWdnZXJlZChfZ2V0X18oXCJNZW51QmFyXCIpLk9WRVJGTE9XX0lOREVYLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaWdub3JlTmV4dE1vdXNlVXAgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKF9nZXRfXyhcIkRPTVwiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIoYnV0dG9uRWxlbWVudCwgX2dldF9fKFwiRE9NXCIpLkV2ZW50VHlwZS5NT1VTRV9VUCwgZSA9PiB7XG4gICAgICBpZiAoZS5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5pZ25vcmVOZXh0TW91c2VVcCkge1xuICAgICAgICBpZiAodGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICB0aGlzLm9uTWVudVRyaWdnZXJlZChfZ2V0X18oXCJNZW51QmFyXCIpLk9WRVJGTE9XX0lOREVYLCB0cnVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pZ25vcmVOZXh0TW91c2VVcCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pKTtcbiAgICB0aGlzLl9yZWdpc3RlcihfZ2V0X18oXCJET01cIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKGJ1dHRvbkVsZW1lbnQsIF9nZXRfXyhcIkRPTVwiKS5FdmVudFR5cGUuTU9VU0VfRU5URVIsICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmlzT3BlbiAmJiAhdGhpcy5pc0N1cnJlbnRNZW51KF9nZXRfXyhcIk1lbnVCYXJcIikuT1ZFUkZMT1dfSU5ERVgpKSB7XG4gICAgICAgIHRoaXMub3ZlcmZsb3dNZW51LmJ1dHRvbkVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5jbGVhbnVwTWVudSgpO1xuICAgICAgICB0aGlzLnNob3dNZW51KF9nZXRfXyhcIk1lbnVCYXJcIikuT1ZFUkZMT1dfSU5ERVgsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0ZvY3VzZWQgJiYgIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgIHRoaXMuZm9jdXNlZE1lbnUgPSB7XG4gICAgICAgICAgaW5kZXg6IF9nZXRfXyhcIk1lbnVCYXJcIikuT1ZFUkZMT1dfSU5ERVhcbiAgICAgICAgfTtcbiAgICAgICAgYnV0dG9uRWxlbWVudC5mb2N1cygpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgICB0aGlzLm92ZXJmbG93TWVudSA9IHtcbiAgICAgIGJ1dHRvbkVsZW1lbnQsXG4gICAgICB0aXRsZUVsZW1lbnQsXG4gICAgICBsYWJlbDogJ01vcmUnXG4gICAgfTtcbiAgfVxuICBzZXRTdHlsZXMoc3R5bGUpIHtcbiAgICB0aGlzLm1lbnVTdHlsZSA9IHN0eWxlO1xuICB9XG4gIHVwZGF0ZU1lbnUobWVudSkge1xuICAgIGNvbnN0IG1lbnVUb1VwZGF0ZSA9IHRoaXMubWVudXMuZmlsdGVyKG1lbnVCYXJNZW51ID0+IG1lbnVCYXJNZW51LmxhYmVsID09PSBtZW51LmxhYmVsKTtcbiAgICBpZiAobWVudVRvVXBkYXRlICYmIG1lbnVUb1VwZGF0ZS5sZW5ndGgpIHtcbiAgICAgIC8vIG1lbnVUb1VwZGF0ZVswXS5hY3Rpb25zID0gbWVudS5hY3Rpb25zO1xuICAgIH1cbiAgfVxuICBkaXNwb3NlKCkge1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLm1lbnVzLmZvckVhY2gobWVudUJhck1lbnUgPT4ge1xuICAgICAgbWVudUJhck1lbnUudGl0bGVFbGVtZW50Py5yZW1vdmUoKTtcbiAgICAgIG1lbnVCYXJNZW51LmJ1dHRvbkVsZW1lbnQ/LnJlbW92ZSgpO1xuICAgIH0pO1xuICAgIHRoaXMub3ZlcmZsb3dNZW51LnRpdGxlRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLm92ZXJmbG93TWVudS5idXR0b25FbGVtZW50LnJlbW92ZSgpO1xuICAgICgwLCBfZ2V0X18oXCJsaWZlY3ljbGVfMVwiKS5kaXNwb3NlKSh0aGlzLm92ZXJmbG93TGF5b3V0U2NoZWR1bGVkKTtcbiAgICB0aGlzLm92ZXJmbG93TGF5b3V0U2NoZWR1bGVkID0gdW5kZWZpbmVkO1xuICB9XG4gIGJsdXIoKSB7XG4gICAgdGhpcy5zZXRVbmZvY3VzZWRTdGF0ZSgpO1xuICB9XG4gIGdldFdpZHRoKCkge1xuICAgIGlmICghdGhpcy5pc0NvbXBhY3QgJiYgdGhpcy5tZW51cykge1xuICAgICAgY29uc3QgbGVmdCA9IHRoaXMubWVudXNbMF0uYnV0dG9uRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuICAgICAgY29uc3QgcmlnaHQgPSB0aGlzLmhhc092ZXJmbG93ID8gdGhpcy5vdmVyZmxvd01lbnUuYnV0dG9uRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCA6IHRoaXMubWVudXNbdGhpcy5tZW51cy5sZW5ndGggLSAxXS5idXR0b25FbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnJpZ2h0O1xuICAgICAgcmV0dXJuIHJpZ2h0IC0gbGVmdDtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH1cbiAgZ2V0SGVpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gIH1cbiAgdG9nZ2xlRm9jdXMoKSB7XG4gICAgaWYgKCF0aGlzLmlzRm9jdXNlZCAmJiB0aGlzLm9wdGlvbnMudmlzaWJpbGl0eSAhPT0gJ2hpZGRlbicpIHtcbiAgICAgIHRoaXMubW5lbW9uaWNzSW5Vc2UgPSB0cnVlO1xuICAgICAgdGhpcy5mb2N1c2VkTWVudSA9IHtcbiAgICAgICAgaW5kZXg6IHRoaXMubnVtTWVudXNTaG93biA+IDAgPyAwIDogX2dldF9fKFwiTWVudUJhclwiKS5PVkVSRkxPV19JTkRFWFxuICAgICAgfTtcbiAgICAgIHRoaXMuZm9jdXNTdGF0ZSA9IF9nZXRfXyhcIk1lbnViYXJTdGF0ZVwiKS5GT0NVU0VEO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICB0aGlzLnNldFVuZm9jdXNlZFN0YXRlKCk7XG4gICAgfVxuICB9XG4gIHVwZGF0ZU92ZXJmbG93QWN0aW9uKCkge1xuICAgIGlmICghdGhpcy5tZW51cyB8fCAhdGhpcy5tZW51cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgb3ZlcmZsb3dNZW51T25seUNsYXNzID0gJ292ZXJmbG93LW1lbnUtb25seSc7XG4gICAgLy8gUmVtb3ZlIG92ZXJmbG93IG9ubHkgcmVzdHJpY3Rpb24gdG8gYWxsb3cgdGhlIG1vc3Qgc3BhY2VcbiAgICB0aGlzLmNvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKG92ZXJmbG93TWVudU9ubHlDbGFzcywgZmFsc2UpO1xuICAgIGNvbnN0IHNpemVBdmFpbGFibGUgPSB0aGlzLmNvbnRhaW5lci5vZmZzZXRXaWR0aDtcbiAgICBsZXQgY3VycmVudFNpemUgPSAwO1xuICAgIGxldCBmdWxsID0gdGhpcy5pc0NvbXBhY3Q7XG4gICAgY29uc3QgcHJldk51bU1lbnVzU2hvd24gPSB0aGlzLm51bU1lbnVzU2hvd247XG4gICAgdGhpcy5udW1NZW51c1Nob3duID0gMDtcbiAgICBjb25zdCBzaG93YWJsZU1lbnVzID0gdGhpcy5tZW51cy5maWx0ZXIobWVudSA9PiBtZW51LmJ1dHRvbkVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBtZW51LnRpdGxlRWxlbWVudCAhPT0gdW5kZWZpbmVkKTtcbiAgICBmb3IgKGNvbnN0IG1lbnVCYXJNZW51IG9mIHNob3dhYmxlTWVudXMpIHtcbiAgICAgIGlmICghZnVsbCkge1xuICAgICAgICBjb25zdCBzaXplID0gbWVudUJhck1lbnUuYnV0dG9uRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgaWYgKGN1cnJlbnRTaXplICsgc2l6ZSA+IHNpemVBdmFpbGFibGUpIHtcbiAgICAgICAgICBmdWxsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50U2l6ZSArPSBzaXplO1xuICAgICAgICAgIHRoaXMubnVtTWVudXNTaG93bisrO1xuICAgICAgICAgIGlmICh0aGlzLm51bU1lbnVzU2hvd24gPiBwcmV2TnVtTWVudXNTaG93bikge1xuICAgICAgICAgICAgbWVudUJhck1lbnUuYnV0dG9uRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGZ1bGwpIHtcbiAgICAgICAgbWVudUJhck1lbnUuYnV0dG9uRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIElmIGJlbG93IG1pbmltaXVtIG1lbnUgdGhyZXNob2xkLCBzaG93IHRoZSBvdmVyZmxvdyBtZW51IG9ubHkgYXMgaGFtYnVyZ2VyIG1lbnVcbiAgICBpZiAodGhpcy5udW1NZW51c1Nob3duIC0gMSA8PSBzaG93YWJsZU1lbnVzLmxlbmd0aCAvIDIpIHtcbiAgICAgIGZvciAoY29uc3QgbWVudUJhck1lbnUgb2Ygc2hvd2FibGVNZW51cykge1xuICAgICAgICBtZW51QmFyTWVudS5idXR0b25FbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICAgIH1cbiAgICAgIGZ1bGwgPSB0cnVlO1xuICAgICAgdGhpcy5udW1NZW51c1Nob3duID0gMDtcbiAgICAgIGN1cnJlbnRTaXplID0gMDtcbiAgICB9XG4gICAgLy8gT3ZlcmZsb3dcbiAgICBpZiAodGhpcy5pc0NvbXBhY3QpIHtcbiAgICAgIC8vIHRoaXMub3ZlcmZsb3dNZW51LmFjdGlvbnMgPSBbXTtcbiAgICAgIGZvciAobGV0IGlkeCA9IHRoaXMubnVtTWVudXNTaG93bjsgaWR4IDwgdGhpcy5tZW51cy5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgIC8vIHRoaXMub3ZlcmZsb3dNZW51LmFjdGlvbnMucHVzaChuZXcgU3VibWVudUFjdGlvbihgbWVudWJhci5zdWJtZW51LiR7dGhpcy5tZW51c1tpZHhdLmxhYmVsfWAsIHRoaXMubWVudXNbaWR4XS5sYWJlbCwgdGhpcy5tZW51c1tpZHhdLmFjdGlvbnMgfHwgW10pKTtcbiAgICAgIH1cbiAgICAgIC8qIGNvbnN0IGNvbXBhY3RNZW51QWN0aW9ucyA9IHRoaXMub3B0aW9ucy5nZXRDb21wYWN0TWVudUFjdGlvbnM/LigpO1xuICAgICAgaWYgKGNvbXBhY3RNZW51QWN0aW9ucyAmJiBjb21wYWN0TWVudUFjdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgLy90aGlzLm92ZXJmbG93TWVudS5hY3Rpb25zLnB1c2gobmV3IFNlcGFyYXRvcigpKTtcbiAgICAgICAgICB0aGlzLm92ZXJmbG93TWVudS5hY3Rpb25zLnB1c2goLi4uY29tcGFjdE1lbnVBY3Rpb25zKTtcbiAgICAgIH0gKi9cbiAgICAgIHRoaXMub3ZlcmZsb3dNZW51LmJ1dHRvbkVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICB9IGVsc2UgaWYgKGZ1bGwpIHtcbiAgICAgIC8vIENhbid0IGZpdCB0aGUgbW9yZSBidXR0b24sIG5lZWQgdG8gcmVtb3ZlIG1vcmUgbWVudXNcbiAgICAgIHdoaWxlIChjdXJyZW50U2l6ZSArIHRoaXMub3ZlcmZsb3dNZW51LmJ1dHRvbkVsZW1lbnQub2Zmc2V0V2lkdGggPiBzaXplQXZhaWxhYmxlICYmIHRoaXMubnVtTWVudXNTaG93biA+IDApIHtcbiAgICAgICAgdGhpcy5udW1NZW51c1Nob3duLS07XG4gICAgICAgIGNvbnN0IHNpemUgPSBzaG93YWJsZU1lbnVzW3RoaXMubnVtTWVudXNTaG93bl0uYnV0dG9uRWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICAgICAgc2hvd2FibGVNZW51c1t0aGlzLm51bU1lbnVzU2hvd25dLmJ1dHRvbkVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICBjdXJyZW50U2l6ZSAtPSBzaXplO1xuICAgICAgfVxuICAgICAgLy8gdGhpcy5vdmVyZmxvd01lbnUuYWN0aW9ucyA9IFtdO1xuICAgICAgZm9yIChsZXQgaWR4ID0gdGhpcy5udW1NZW51c1Nob3duOyBpZHggPCBzaG93YWJsZU1lbnVzLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgLy8gdGhpcy5vdmVyZmxvd01lbnUuYWN0aW9ucy5wdXNoKG5ldyBTdWJtZW51QWN0aW9uKGBtZW51YmFyLnN1Ym1lbnUuJHtzaG93YWJsZU1lbnVzW2lkeF0ubGFiZWx9YCwgc2hvd2FibGVNZW51c1tpZHhdLmxhYmVsLCBzaG93YWJsZU1lbnVzW2lkeF0uYWN0aW9ucyB8fCBbXSkpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMub3ZlcmZsb3dNZW51LmJ1dHRvbkVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nICE9PSBzaG93YWJsZU1lbnVzW3RoaXMubnVtTWVudXNTaG93bl0uYnV0dG9uRWxlbWVudCkge1xuICAgICAgICB0aGlzLm92ZXJmbG93TWVudS5idXR0b25FbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5pbnNlcnRCZWZvcmUodGhpcy5vdmVyZmxvd01lbnUuYnV0dG9uRWxlbWVudCwgc2hvd2FibGVNZW51c1t0aGlzLm51bU1lbnVzU2hvd25dLmJ1dHRvbkVsZW1lbnQpO1xuICAgICAgfVxuICAgICAgdGhpcy5vdmVyZmxvd01lbnUuYnV0dG9uRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm92ZXJmbG93TWVudS5idXR0b25FbGVtZW50LnJlbW92ZSgpO1xuICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5vdmVyZmxvd01lbnUuYnV0dG9uRWxlbWVudCk7XG4gICAgICB0aGlzLm92ZXJmbG93TWVudS5idXR0b25FbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcbiAgICB9XG4gICAgLy8gSWYgd2UgYXJlIG9ubHkgc2hvd2luZyB0aGUgb3ZlcmZsb3csIGFkZCB0aGlzIGNsYXNzIHRvIGF2b2lkIHRha2luZyB1cCBzcGFjZVxuICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUob3ZlcmZsb3dNZW51T25seUNsYXNzLCB0aGlzLm51bU1lbnVzU2hvd24gPT09IDApO1xuICB9XG4gIHVwZGF0ZUxhYmVscyh0aXRsZUVsZW1lbnQsIGJ1dHRvbkVsZW1lbnQsIGxhYmVsKSB7XG4gICAgY29uc3QgY2xlYW5NZW51TGFiZWwgPSAoMCwgX2dldF9fKFwiY29uc3RzXzFcIikuY2xlYW5NbmVtb25pYykobGFiZWwpO1xuICAgIC8vIFVwZGF0ZSB0aGUgYnV0dG9uIGxhYmVsIHRvIHJlZmxlY3QgbW5lbW9uaWNzXG4gICAgaWYgKHRoaXMub3B0aW9ucy5lbmFibGVNbmVtb25pY3MpIHtcbiAgICAgIGNvbnN0IGNsZWFuTGFiZWwgPSBfZ2V0X18oXCJzdHJpbmdzXCIpLmVzY2FwZShsYWJlbCk7XG4gICAgICAvLyBUaGlzIGlzIGdsb2JhbCBzbyByZXNldCBpdFxuICAgICAgX2dldF9fKFwiY29uc3RzXzFcIikuTUVOVV9FU0NBUEVEX01ORU1PTklDX1JFR0VYLmxhc3RJbmRleCA9IDA7XG4gICAgICBsZXQgZXNjTWF0Y2ggPSBfZ2V0X18oXCJjb25zdHNfMVwiKS5NRU5VX0VTQ0FQRURfTU5FTU9OSUNfUkVHRVguZXhlYyhjbGVhbkxhYmVsKTtcbiAgICAgIC8vIFdlIGNhbid0IHVzZSBuZWdhdGl2ZSBsb29rYmVoaW5kIHNvIHdlIG1hdGNoIG91ciBuZWdhdGl2ZSBhbmQgc2tpcFxuICAgICAgd2hpbGUgKGVzY01hdGNoICYmIGVzY01hdGNoWzFdKSB7XG4gICAgICAgIGVzY01hdGNoID0gX2dldF9fKFwiY29uc3RzXzFcIikuTUVOVV9FU0NBUEVEX01ORU1PTklDX1JFR0VYLmV4ZWMoY2xlYW5MYWJlbCk7XG4gICAgICB9XG4gICAgICBjb25zdCByZXBsYWNlRG91YmxlRXNjYXBlcyA9IHN0ciA9PiBzdHIucmVwbGFjZSgvJmFtcDsmYW1wOy9nLCAnJmFtcDsnKTtcbiAgICAgIGlmIChlc2NNYXRjaCkge1xuICAgICAgICB0aXRsZUVsZW1lbnQuaW5uZXJUZXh0ID0gJyc7XG4gICAgICAgIHRpdGxlRWxlbWVudC5hcHBlbmQoX2dldF9fKFwic3RyaW5nc1wiKS5sdHJpbShyZXBsYWNlRG91YmxlRXNjYXBlcyhjbGVhbkxhYmVsLnN1YnN0cmluZygwLCBlc2NNYXRjaC5pbmRleCkpLCAnICcpLCBfZ2V0X18oXCIkXCIpKCdtbmVtb25pYycsIHtcbiAgICAgICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZSdcbiAgICAgICAgfSwgZXNjTWF0Y2hbM10pLCBfZ2V0X18oXCJzdHJpbmdzXCIpLnJ0cmltKHJlcGxhY2VEb3VibGVFc2NhcGVzKGNsZWFuTGFiZWwuc3Vic3RyaW5nKGVzY01hdGNoLmluZGV4ICsgZXNjTWF0Y2hbMF0ubGVuZ3RoKSksICcgJykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGl0bGVFbGVtZW50LmlubmVyVGV4dCA9IHJlcGxhY2VEb3VibGVFc2NhcGVzKGNsZWFuTGFiZWwpLnRyaW0oKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGl0bGVFbGVtZW50LmlubmVyVGV4dCA9IGNsZWFuTWVudUxhYmVsLnJlcGxhY2UoLyYmL2csICcmJyk7XG4gICAgfVxuICAgIGNvbnN0IG1uZW1vbmljTWF0Y2hlcyA9IF9nZXRfXyhcImNvbnN0c18xXCIpLk1FTlVfTU5FTU9OSUNfUkVHRVguZXhlYyhsYWJlbCk7XG4gICAgLy8gUmVnaXN0ZXIgbW5lbW9uaWNzXG4gICAgaWYgKG1uZW1vbmljTWF0Y2hlcykge1xuICAgICAgY29uc3QgbW5lbW9uaWMgPSAhIW1uZW1vbmljTWF0Y2hlc1sxXSA/IG1uZW1vbmljTWF0Y2hlc1sxXSA6IG1uZW1vbmljTWF0Y2hlc1szXTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZW5hYmxlTW5lbW9uaWNzKSB7XG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWtleXNob3J0Y3V0cycsICdBbHQrJyArIG1uZW1vbmljLnRvTG9jYWxlTG93ZXJDYXNlKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEta2V5c2hvcnRjdXRzJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHVwZGF0ZShvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgfVxuICAgIC8vIERvbid0IHVwZGF0ZSB3aGlsZSB1c2luZyB0aGUgbWVudVxuICAgIGlmICh0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgdGhpcy51cGRhdGVQZW5kaW5nID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5tZW51cy5mb3JFYWNoKG1lbnVCYXJNZW51ID0+IHtcbiAgICAgIGlmICghbWVudUJhck1lbnUuYnV0dG9uRWxlbWVudCB8fCAhbWVudUJhck1lbnUudGl0bGVFbGVtZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlTGFiZWxzKG1lbnVCYXJNZW51LnRpdGxlRWxlbWVudCwgbWVudUJhck1lbnUuYnV0dG9uRWxlbWVudCwgbWVudUJhck1lbnUubGFiZWwpO1xuICAgIH0pO1xuICAgIGlmICghdGhpcy5vdmVyZmxvd0xheW91dFNjaGVkdWxlZCkge1xuICAgICAgdGhpcy5vdmVyZmxvd0xheW91dFNjaGVkdWxlZCA9IF9nZXRfXyhcIkRPTVwiKS5zY2hlZHVsZUF0TmV4dEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGVPdmVyZmxvd0FjdGlvbigpO1xuICAgICAgICB0aGlzLm92ZXJmbG93TGF5b3V0U2NoZWR1bGVkID0gdW5kZWZpbmVkO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuc2V0VW5mb2N1c2VkU3RhdGUoKTtcbiAgfVxuICByZWdpc3Rlck1uZW1vbmljKG1lbnVJbmRleCwgbW5lbW9uaWMpIHtcbiAgICB0aGlzLm1uZW1vbmljcy5zZXQobW5lbW9uaWMudG9Mb2NhbGVMb3dlckNhc2UoKSwgbWVudUluZGV4KTtcbiAgfVxuICBoaWRlTWVudWJhcigpIHtcbiAgICBpZiAodGhpcy5jb250YWluZXIuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgdGhpcy5fb25WaXNpYmlsaXR5Q2hhbmdlLmZpcmUoZmFsc2UpO1xuICAgIH1cbiAgfVxuICBzaG93TWVudWJhcigpIHtcbiAgICBpZiAodGhpcy5jb250YWluZXIuc3R5bGUuZGlzcGxheSAhPT0gJ2ZsZXgnKSB7XG4gICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgdGhpcy5fb25WaXNpYmlsaXR5Q2hhbmdlLmZpcmUodHJ1ZSk7XG4gICAgICB0aGlzLnVwZGF0ZU92ZXJmbG93QWN0aW9uKCk7XG4gICAgfVxuICB9XG4gIGdldCBmb2N1c1N0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9mb2N1c1N0YXRlO1xuICB9XG4gIHNldCBmb2N1c1N0YXRlKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuX2ZvY3VzU3RhdGUgPj0gX2dldF9fKFwiTWVudWJhclN0YXRlXCIpLkZPQ1VTRUQgJiYgdmFsdWUgPCBfZ2V0X18oXCJNZW51YmFyU3RhdGVcIikuRk9DVVNFRCkge1xuICAgICAgLy8gTG9zaW5nIGZvY3VzLCB1cGRhdGUgdGhlIG1lbnUgaWYgbmVlZGVkXG4gICAgICBpZiAodGhpcy51cGRhdGVQZW5kaW5nKSB7XG4gICAgICAgIHRoaXMubWVudVVwZGF0ZXIuc2NoZWR1bGUoKTtcbiAgICAgICAgdGhpcy51cGRhdGVQZW5kaW5nID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PT0gdGhpcy5fZm9jdXNTdGF0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpc1Zpc2libGUgPSB0aGlzLmlzVmlzaWJsZTtcbiAgICBjb25zdCBpc09wZW4gPSB0aGlzLmlzT3BlbjtcbiAgICBjb25zdCBpc0ZvY3VzZWQgPSB0aGlzLmlzRm9jdXNlZDtcbiAgICB0aGlzLl9mb2N1c1N0YXRlID0gdmFsdWU7XG4gICAgc3dpdGNoICh2YWx1ZSkge1xuICAgICAgY2FzZSBfZ2V0X18oXCJNZW51YmFyU3RhdGVcIikuSElEREVOOlxuICAgICAgICBpZiAoaXNWaXNpYmxlKSB7XG4gICAgICAgICAgdGhpcy5oaWRlTWVudWJhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc09wZW4pIHtcbiAgICAgICAgICB0aGlzLmNsZWFudXBNZW51KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRm9jdXNlZCkge1xuICAgICAgICAgIHRoaXMuZm9jdXNlZE1lbnUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHRoaXMuZm9jdXNUb1JldHVybikge1xuICAgICAgICAgICAgdGhpcy5mb2N1c1RvUmV0dXJuLmZvY3VzKCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzVG9SZXR1cm4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBfZ2V0X18oXCJNZW51YmFyU3RhdGVcIikuVklTSUJMRTpcbiAgICAgICAgaWYgKCFpc1Zpc2libGUpIHtcbiAgICAgICAgICB0aGlzLnNob3dNZW51YmFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgIHRoaXMuY2xlYW51cE1lbnUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNGb2N1c2VkKSB7XG4gICAgICAgICAgaWYgKHRoaXMuZm9jdXNlZE1lbnUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvY3VzZWRNZW51LmluZGV4ID09PSBfZ2V0X18oXCJNZW51QmFyXCIpLk9WRVJGTE9XX0lOREVYKSB7XG4gICAgICAgICAgICAgIHRoaXMub3ZlcmZsb3dNZW51LmJ1dHRvbkVsZW1lbnQuYmx1cigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5tZW51c1t0aGlzLmZvY3VzZWRNZW51LmluZGV4XS5idXR0b25FbGVtZW50Py5ibHVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZm9jdXNlZE1lbnUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHRoaXMuZm9jdXNUb1JldHVybikge1xuICAgICAgICAgICAgdGhpcy5mb2N1c1RvUmV0dXJuLmZvY3VzKCk7XG4gICAgICAgICAgICB0aGlzLmZvY3VzVG9SZXR1cm4gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBfZ2V0X18oXCJNZW51YmFyU3RhdGVcIikuRk9DVVNFRDpcbiAgICAgICAgaWYgKCFpc1Zpc2libGUpIHtcbiAgICAgICAgICB0aGlzLnNob3dNZW51YmFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgIHRoaXMuY2xlYW51cE1lbnUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mb2N1c2VkTWVudSkge1xuICAgICAgICAgIGlmICh0aGlzLmZvY3VzZWRNZW51LmluZGV4ID09PSBfZ2V0X18oXCJNZW51QmFyXCIpLk9WRVJGTE9XX0lOREVYKSB7XG4gICAgICAgICAgICB0aGlzLm92ZXJmbG93TWVudS5idXR0b25FbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWVudXNbdGhpcy5mb2N1c2VkTWVudS5pbmRleF0uYnV0dG9uRWxlbWVudD8uZm9jdXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIF9nZXRfXyhcIk1lbnViYXJTdGF0ZVwiKS5PUEVOOlxuICAgICAgICBpZiAoIWlzVmlzaWJsZSkge1xuICAgICAgICAgIHRoaXMuc2hvd01lbnViYXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mb2N1c2VkTWVudSkge1xuICAgICAgICAgIHRoaXMuc2hvd01lbnUodGhpcy5mb2N1c2VkTWVudS5pbmRleCwgdGhpcy5vcGVuZWRWaWFLZXlib2FyZCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIHRoaXMuX2ZvY3VzU3RhdGUgPSB2YWx1ZTtcbiAgICB0aGlzLl9vbkZvY3VzU3RhdGVDaGFuZ2UuZmlyZSh0aGlzLmZvY3VzU3RhdGUgPj0gX2dldF9fKFwiTWVudWJhclN0YXRlXCIpLkZPQ1VTRUQpO1xuICB9XG4gIGdldCBpc1Zpc2libGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZm9jdXNTdGF0ZSA+PSBfZ2V0X18oXCJNZW51YmFyU3RhdGVcIikuVklTSUJMRTtcbiAgfVxuICBnZXQgaXNGb2N1c2VkKCkge1xuICAgIHJldHVybiB0aGlzLmZvY3VzU3RhdGUgPj0gX2dldF9fKFwiTWVudWJhclN0YXRlXCIpLkZPQ1VTRUQ7XG4gIH1cbiAgZ2V0IGlzT3BlbigpIHtcbiAgICByZXR1cm4gdGhpcy5mb2N1c1N0YXRlID49IF9nZXRfXyhcIk1lbnViYXJTdGF0ZVwiKS5PUEVOO1xuICB9XG4gIGdldCBoYXNPdmVyZmxvdygpIHtcbiAgICByZXR1cm4gdGhpcy5pc0NvbXBhY3QgfHwgdGhpcy5udW1NZW51c1Nob3duIDwgdGhpcy5tZW51cy5sZW5ndGg7XG4gIH1cbiAgZ2V0IGlzQ29tcGFjdCgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNvbXBhY3RNb2RlICE9PSB1bmRlZmluZWQ7XG4gIH1cbiAgc2V0VW5mb2N1c2VkU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy52aXNpYmlsaXR5ID09PSAndG9nZ2xlJyB8fCB0aGlzLm9wdGlvbnMudmlzaWJpbGl0eSA9PT0gJ2hpZGRlbicpIHtcbiAgICAgIHRoaXMuZm9jdXNTdGF0ZSA9IF9nZXRfXyhcIk1lbnViYXJTdGF0ZVwiKS5ISURERU47XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMudmlzaWJpbGl0eSA9PT0gJ2NsYXNzaWMnKSB7XG4gICAgICB0aGlzLmZvY3VzU3RhdGUgPSBfZ2V0X18oXCJNZW51YmFyU3RhdGVcIikuSElEREVOO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZvY3VzU3RhdGUgPSBfZ2V0X18oXCJNZW51YmFyU3RhdGVcIikuVklTSUJMRTtcbiAgICB9XG4gICAgdGhpcy5pZ25vcmVOZXh0TW91c2VVcCA9IGZhbHNlO1xuICAgIHRoaXMubW5lbW9uaWNzSW5Vc2UgPSBmYWxzZTtcbiAgICB0aGlzLnVwZGF0ZU1uZW1vbmljVmlzaWJpbGl0eShmYWxzZSk7XG4gIH1cbiAgZm9jdXNQcmV2aW91cygpIHtcbiAgICBpZiAoIXRoaXMuZm9jdXNlZE1lbnUgfHwgdGhpcy5udW1NZW51c1Nob3duID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBuZXdGb2N1c2VkSW5kZXggPSAodGhpcy5mb2N1c2VkTWVudS5pbmRleCAtIDEgKyB0aGlzLm51bU1lbnVzU2hvd24pICUgdGhpcy5udW1NZW51c1Nob3duO1xuICAgIGlmICh0aGlzLmZvY3VzZWRNZW51LmluZGV4ID09PSBfZ2V0X18oXCJNZW51QmFyXCIpLk9WRVJGTE9XX0lOREVYKSB7XG4gICAgICBuZXdGb2N1c2VkSW5kZXggPSB0aGlzLm51bU1lbnVzU2hvd24gLSAxO1xuICAgIH0gZWxzZSBpZiAodGhpcy5mb2N1c2VkTWVudS5pbmRleCA9PT0gMCAmJiB0aGlzLmhhc092ZXJmbG93KSB7XG4gICAgICBuZXdGb2N1c2VkSW5kZXggPSBfZ2V0X18oXCJNZW51QmFyXCIpLk9WRVJGTE9XX0lOREVYO1xuICAgIH1cbiAgICBpZiAobmV3Rm9jdXNlZEluZGV4ID09PSB0aGlzLmZvY3VzZWRNZW51LmluZGV4KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgdGhpcy5jbGVhbnVwTWVudSgpO1xuICAgICAgdGhpcy5zaG93TWVudShuZXdGb2N1c2VkSW5kZXgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc0ZvY3VzZWQpIHtcbiAgICAgIHRoaXMuZm9jdXNlZE1lbnUuaW5kZXggPSBuZXdGb2N1c2VkSW5kZXg7XG4gICAgICBpZiAobmV3Rm9jdXNlZEluZGV4ID09PSBfZ2V0X18oXCJNZW51QmFyXCIpLk9WRVJGTE9XX0lOREVYKSB7XG4gICAgICAgIHRoaXMub3ZlcmZsb3dNZW51LmJ1dHRvbkVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubWVudXNbbmV3Rm9jdXNlZEluZGV4XS5idXR0b25FbGVtZW50Py5mb2N1cygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBmb2N1c05leHQoKSB7XG4gICAgaWYgKCF0aGlzLmZvY3VzZWRNZW51IHx8IHRoaXMubnVtTWVudXNTaG93biA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgbmV3Rm9jdXNlZEluZGV4ID0gKHRoaXMuZm9jdXNlZE1lbnUuaW5kZXggKyAxKSAlIHRoaXMubnVtTWVudXNTaG93bjtcbiAgICBpZiAodGhpcy5mb2N1c2VkTWVudS5pbmRleCA9PT0gX2dldF9fKFwiTWVudUJhclwiKS5PVkVSRkxPV19JTkRFWCkge1xuICAgICAgbmV3Rm9jdXNlZEluZGV4ID0gMDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuZm9jdXNlZE1lbnUuaW5kZXggPT09IHRoaXMubnVtTWVudXNTaG93biAtIDEpIHtcbiAgICAgIG5ld0ZvY3VzZWRJbmRleCA9IF9nZXRfXyhcIk1lbnVCYXJcIikuT1ZFUkZMT1dfSU5ERVg7XG4gICAgfVxuICAgIGlmIChuZXdGb2N1c2VkSW5kZXggPT09IHRoaXMuZm9jdXNlZE1lbnUuaW5kZXgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICB0aGlzLmNsZWFudXBNZW51KCk7XG4gICAgICB0aGlzLnNob3dNZW51KG5ld0ZvY3VzZWRJbmRleCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmlzRm9jdXNlZCkge1xuICAgICAgdGhpcy5mb2N1c2VkTWVudS5pbmRleCA9IG5ld0ZvY3VzZWRJbmRleDtcbiAgICAgIGlmIChuZXdGb2N1c2VkSW5kZXggPT09IF9nZXRfXyhcIk1lbnVCYXJcIikuT1ZFUkZMT1dfSU5ERVgpIHtcbiAgICAgICAgdGhpcy5vdmVyZmxvd01lbnUuYnV0dG9uRWxlbWVudC5mb2N1cygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tZW51c1tuZXdGb2N1c2VkSW5kZXhdLmJ1dHRvbkVsZW1lbnQ/LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHVwZGF0ZU1uZW1vbmljVmlzaWJpbGl0eSh2aXNpYmxlKSB7XG4gICAgaWYgKHRoaXMubWVudXMpIHtcbiAgICAgIHRoaXMubWVudXMuZm9yRWFjaChtZW51QmFyTWVudSA9PiB7XG4gICAgICAgIGlmIChtZW51QmFyTWVudS50aXRsZUVsZW1lbnQgJiYgbWVudUJhck1lbnUudGl0bGVFbGVtZW50LmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IGNoaWxkID0gbWVudUJhck1lbnUudGl0bGVFbGVtZW50LmNoaWxkcmVuLml0ZW0oMCk7XG4gICAgICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgICAgICBjaGlsZC5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9IHRoaXMub3B0aW9ucy5hbHdheXNPbk1uZW1vbmljcyB8fCB2aXNpYmxlID8gJ3VuZGVybGluZScgOiAnJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBnZXQgbW5lbW9uaWNzSW5Vc2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21uZW1vbmljc0luVXNlO1xuICB9XG4gIHNldCBtbmVtb25pY3NJblVzZSh2YWx1ZSkge1xuICAgIHRoaXMuX21uZW1vbmljc0luVXNlID0gdmFsdWU7XG4gIH1cbiAgZ2V0IHNob3VsZEFsdEtleUZvY3VzKCkge1xuICAgIGlmIChfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLmlzTWFjaW50b3NoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICghdGhpcy5vcHRpb25zLmRpc2FibGVBbHRGb2N1cykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMudmlzaWJpbGl0eSA9PT0gJ3RvZ2dsZScpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgZ2V0IG9uVmlzaWJpbGl0eUNoYW5nZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fb25WaXNpYmlsaXR5Q2hhbmdlLmV2ZW50O1xuICB9XG4gIGdldCBvbkZvY3VzU3RhdGVDaGFuZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX29uRm9jdXNTdGF0ZUNoYW5nZS5ldmVudDtcbiAgfVxuICBvbk1lbnVUcmlnZ2VyZWQobWVudUluZGV4LCBjbGlja2VkKSB7XG4gICAgaWYgKCF0aGlzLm1lbnVzW21lbnVJbmRleF0uYWN0aW9ucykge1xuICAgICAgX2dldF9fKFwiZWxlY3Ryb25fMVwiKS5pcGNSZW5kZXJlci5zZW5kKCdtZW51LWV2ZW50JywgbWVudUluZGV4ICsgMSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgaWYgKHRoaXMuaXNDdXJyZW50TWVudShtZW51SW5kZXgpKSB7XG4gICAgICAgIHRoaXMuc2V0VW5mb2N1c2VkU3RhdGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2xlYW51cE1lbnUoKTtcbiAgICAgICAgdGhpcy5zaG93TWVudShtZW51SW5kZXgsIHRoaXMub3BlbmVkVmlhS2V5Ym9hcmQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmZvY3VzZWRNZW51ID0ge1xuICAgICAgICBpbmRleDogbWVudUluZGV4XG4gICAgICB9O1xuICAgICAgdGhpcy5vcGVuZWRWaWFLZXlib2FyZCA9ICFjbGlja2VkO1xuICAgICAgdGhpcy5mb2N1c1N0YXRlID0gX2dldF9fKFwiTWVudWJhclN0YXRlXCIpLk9QRU47XG4gICAgfVxuICB9XG4gIG9uTW9kaWZpZXJLZXlUb2dnbGVkKG1vZGlmaWVyS2V5U3RhdHVzKSB7XG4gICAgY29uc3QgYWxsTW9kaWZpZXJzUmVsZWFzZWQgPSAhbW9kaWZpZXJLZXlTdGF0dXMuYWx0S2V5ICYmICFtb2RpZmllcktleVN0YXR1cy5jdHJsS2V5ICYmICFtb2RpZmllcktleVN0YXR1cy5zaGlmdEtleSAmJiAhbW9kaWZpZXJLZXlTdGF0dXMubWV0YUtleTtcbiAgICBpZiAodGhpcy5vcHRpb25zLnZpc2liaWxpdHkgPT09ICdoaWRkZW4nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIFByZXZlbnQgYWx0LWtleSBkZWZhdWx0IGlmIHRoZSBtZW51IGlzIG5vdCBoaWRkZW4gYW5kIHdlIHVzZSBhbHQgdG8gZm9jdXNcbiAgICBpZiAobW9kaWZpZXJLZXlTdGF0dXMuZXZlbnQgJiYgdGhpcy5zaG91bGRBbHRLZXlGb2N1cykge1xuICAgICAgaWYgKF9nZXRfXyhcImtleUNvZGVzXzFcIikuU2NhbkNvZGVVdGlscy50b0VudW0obW9kaWZpZXJLZXlTdGF0dXMuZXZlbnQuY29kZSkgPT09IDE1OSAvKiBTY2FuQ29kZS5BbHRMZWZ0ICovKSB7XG4gICAgICAgIG1vZGlmaWVyS2V5U3RhdHVzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEFsdCBrZXkgcHJlc3NlZCB3aGlsZSBtZW51IGlzIGZvY3VzZWQuIFRoaXMgc2hvdWxkIHJldHVybiBmb2N1cyBhd2F5IGZyb20gdGhlIG1lbnViYXJcbiAgICBpZiAodGhpcy5pc0ZvY3VzZWQgJiYgbW9kaWZpZXJLZXlTdGF0dXMubGFzdEtleVByZXNzZWQgPT09ICdhbHQnICYmIG1vZGlmaWVyS2V5U3RhdHVzLmFsdEtleSkge1xuICAgICAgdGhpcy5zZXRVbmZvY3VzZWRTdGF0ZSgpO1xuICAgICAgdGhpcy5tbmVtb25pY3NJblVzZSA9IGZhbHNlO1xuICAgICAgdGhpcy5hd2FpdGluZ0FsdFJlbGVhc2UgPSB0cnVlO1xuICAgIH1cbiAgICAvLyBDbGVhbiBhbHQga2V5IHByZXNzIGFuZCByZWxlYXNlXG4gICAgaWYgKGFsbE1vZGlmaWVyc1JlbGVhc2VkICYmIG1vZGlmaWVyS2V5U3RhdHVzLmxhc3RLZXlQcmVzc2VkID09PSAnYWx0JyAmJiBtb2RpZmllcktleVN0YXR1cy5sYXN0S2V5UmVsZWFzZWQgPT09ICdhbHQnKSB7XG4gICAgICBpZiAoIXRoaXMuYXdhaXRpbmdBbHRSZWxlYXNlKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0ZvY3VzZWQgJiYgdGhpcy5zaG91bGRBbHRLZXlGb2N1cykge1xuICAgICAgICAgIHRoaXMubW5lbW9uaWNzSW5Vc2UgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuZm9jdXNlZE1lbnUgPSB7XG4gICAgICAgICAgICBpbmRleDogdGhpcy5udW1NZW51c1Nob3duID4gMCA/IDAgOiBfZ2V0X18oXCJNZW51QmFyXCIpLk9WRVJGTE9XX0lOREVYXG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGlzLmZvY3VzU3RhdGUgPSBfZ2V0X18oXCJNZW51YmFyU3RhdGVcIikuRk9DVVNFRDtcbiAgICAgICAgfSBlbHNlIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICB0aGlzLnNldFVuZm9jdXNlZFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQWx0IGtleSByZWxlYXNlZFxuICAgIGlmICghbW9kaWZpZXJLZXlTdGF0dXMuYWx0S2V5ICYmIG1vZGlmaWVyS2V5U3RhdHVzLmxhc3RLZXlSZWxlYXNlZCA9PT0gJ2FsdCcpIHtcbiAgICAgIHRoaXMuYXdhaXRpbmdBbHRSZWxlYXNlID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuZW5hYmxlTW5lbW9uaWNzICYmIHRoaXMubWVudXMgJiYgIXRoaXMuaXNPcGVuKSB7XG4gICAgICB0aGlzLnVwZGF0ZU1uZW1vbmljVmlzaWJpbGl0eSghdGhpcy5hd2FpdGluZ0FsdFJlbGVhc2UgJiYgbW9kaWZpZXJLZXlTdGF0dXMuYWx0S2V5IHx8IHRoaXMubW5lbW9uaWNzSW5Vc2UpO1xuICAgIH1cbiAgfVxuICBpc0N1cnJlbnRNZW51KG1lbnVJbmRleCkge1xuICAgIGlmICghdGhpcy5mb2N1c2VkTWVudSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5mb2N1c2VkTWVudS5pbmRleCA9PT0gbWVudUluZGV4O1xuICB9XG4gIGNsZWFudXBNZW51KCkge1xuICAgIGlmICh0aGlzLmZvY3VzZWRNZW51KSB7XG4gICAgICAvLyBSZW1vdmUgZm9jdXMgZnJvbSB0aGUgbWVudXMgZmlyc3RcbiAgICAgIGlmICh0aGlzLmZvY3VzZWRNZW51LmluZGV4ID09PSBfZ2V0X18oXCJNZW51QmFyXCIpLk9WRVJGTE9XX0lOREVYKSB7XG4gICAgICAgIHRoaXMub3ZlcmZsb3dNZW51LmJ1dHRvbkVsZW1lbnQuZm9jdXMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubWVudXNbdGhpcy5mb2N1c2VkTWVudS5pbmRleF0uYnV0dG9uRWxlbWVudD8uZm9jdXMoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmZvY3VzZWRNZW51LmhvbGRlcikge1xuICAgICAgICB0aGlzLmZvY3VzZWRNZW51LmhvbGRlci5wYXJlbnRFbGVtZW50Py5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XG4gICAgICAgIHRoaXMuZm9jdXNlZE1lbnUuaG9sZGVyLnJlbW92ZSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5mb2N1c2VkTWVudS53aWRnZXQ/LmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuZm9jdXNlZE1lbnUgPSB7XG4gICAgICAgIGluZGV4OiB0aGlzLmZvY3VzZWRNZW51LmluZGV4XG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBzaG93TWVudShtZW51SW5kZXgsIHNlbGVjdEZpcnN0ID0gdHJ1ZSkge1xuICAgIGNvbnN0IGFjdHVhbE1lbnVJbmRleCA9IG1lbnVJbmRleCA+PSB0aGlzLm51bU1lbnVzU2hvd24gPyBfZ2V0X18oXCJNZW51QmFyXCIpLk9WRVJGTE9XX0lOREVYIDogbWVudUluZGV4O1xuICAgIGNvbnN0IGN1c3RvbU1lbnUgPSBhY3R1YWxNZW51SW5kZXggPT09IF9nZXRfXyhcIk1lbnVCYXJcIikuT1ZFUkZMT1dfSU5ERVggPyB0aGlzLm92ZXJmbG93TWVudSA6IHRoaXMubWVudXNbYWN0dWFsTWVudUluZGV4XTtcbiAgICBpZiAoIWN1c3RvbU1lbnUuYWN0aW9ucyB8fCAhY3VzdG9tTWVudS5idXR0b25FbGVtZW50IHx8ICFjdXN0b21NZW51LnRpdGxlRWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZW51SG9sZGVyID0gX2dldF9fKFwiJFwiKSgnLmNldC1tZW51YmFyLW1lbnUtY29udGFpbmVyJywge1xuICAgICAgdGl0bGU6ICcnXG4gICAgfSk7XG4gICAgY3VzdG9tTWVudS5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcbiAgICBjb25zdCB0aXRsZUJvdW5kaW5nUmVjdCA9IGN1c3RvbU1lbnUudGl0bGVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IHRpdGxlQm91bmRpbmdSZWN0Wm9vbSA9IF9nZXRfXyhcIkRPTVwiKS5nZXREb21Ob2RlWm9vbUxldmVsKGN1c3RvbU1lbnUudGl0bGVFbGVtZW50KTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhY3RNb2RlID09PSBfZ2V0X18oXCJtZW51XzFcIikuRGlyZWN0aW9uLlJpZ2h0KSB7XG4gICAgICBtZW51SG9sZGVyLnN0eWxlLnRvcCA9IGAke3RpdGxlQm91bmRpbmdSZWN0LnRvcH1weGA7XG4gICAgICBtZW51SG9sZGVyLnN0eWxlLmxlZnQgPSBgJHt0aXRsZUJvdW5kaW5nUmVjdC5sZWZ0ICsgdGhpcy5jb250YWluZXIuY2xpZW50V2lkdGh9cHhgO1xuICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmNvbXBhY3RNb2RlID09PSBfZ2V0X18oXCJtZW51XzFcIikuRGlyZWN0aW9uLkxlZnQpIHtcbiAgICAgIG1lbnVIb2xkZXIuc3R5bGUudG9wID0gYCR7dGl0bGVCb3VuZGluZ1JlY3QudG9wfXB4YDtcbiAgICAgIG1lbnVIb2xkZXIuc3R5bGUucmlnaHQgPSBgJHt0aGlzLmNvbnRhaW5lci5jbGllbnRXaWR0aH1weGA7XG4gICAgICBtZW51SG9sZGVyLnN0eWxlLmxlZnQgPSAnYXV0byc7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lbnVIb2xkZXIuc3R5bGUudG9wID0gYCR7dGl0bGVCb3VuZGluZ1JlY3QuYm90dG9tICogdGl0bGVCb3VuZGluZ1JlY3Rab29tfXB4YDtcbiAgICAgIG1lbnVIb2xkZXIuc3R5bGUubGVmdCA9IGAke3RpdGxlQm91bmRpbmdSZWN0LmxlZnQgKiB0aXRsZUJvdW5kaW5nUmVjdFpvb219cHhgO1xuICAgIH1cbiAgICBjdXN0b21NZW51LmJ1dHRvbkVsZW1lbnQuYXBwZW5kQ2hpbGQobWVudUhvbGRlcik7XG4gICAgY29uc3QgbWVudU9wdGlvbnMgPSB7XG4gICAgICAvLyBnZXRLZXlCaW5kaW5nOiB0aGlzLm9wdGlvbnMuZ2V0S2V5YmluZGluZyxcbiAgICAgIC8vIGFjdGlvblJ1bm5lcjogdGhpcy5hY3Rpb25SdW5uZXIsXG4gICAgICBlbmFibGVNbmVtb25pY3M6IHRoaXMub3B0aW9ucy5hbHdheXNPbk1uZW1vbmljcyB8fCB0aGlzLm1uZW1vbmljc0luVXNlICYmIHRoaXMub3B0aW9ucy5lbmFibGVNbmVtb25pY3MsXG4gICAgICBhcmlhTGFiZWw6IGN1c3RvbU1lbnUuYnV0dG9uRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKSA/PyB1bmRlZmluZWRcbiAgICAgIC8vIGV4cGFuZERpcmVjdGlvbjogdGhpcy5pc0NvbXBhY3QgPyB0aGlzLm9wdGlvbnMuY29tcGFjdE1vZGUgOiBEaXJlY3Rpb24uUmlnaHQsXG4gICAgICAvLyB1c2VFdmVudEFzQ29udGV4dDogdHJ1ZVxuICAgIH07XG5cbiAgICBjb25zdCBtZW51V2lkZ2V0ID0gdGhpcy5fcmVnaXN0ZXIobmV3IChfZ2V0X18oXCJtZW51XzFcIikuQ0VUTWVudSkobWVudUhvbGRlciwgdGhpcy5tZW51SWNvbnMsIHRoaXMuY3VycmVudE9wdGlvbnMsIG1lbnVPcHRpb25zLCB0aGlzLmNsb3NlTWVudSkpO1xuICAgIG1lbnVXaWRnZXQuY3JlYXRlTWVudShjdXN0b21NZW51LmFjdGlvbnM/Lml0ZW1zID8/IFtdKTtcbiAgICBtZW51V2lkZ2V0LmFwcGx5U3R5bGUodGhpcy5tZW51U3R5bGUpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKG1lbnVXaWRnZXQub25EaWRDYW5jZWwoKCkgPT4ge1xuICAgICAgdGhpcy5mb2N1c1N0YXRlID0gX2dldF9fKFwiTWVudWJhclN0YXRlXCIpLkZPQ1VTRUQ7XG4gICAgfSkpO1xuICAgIGlmIChhY3R1YWxNZW51SW5kZXggIT09IG1lbnVJbmRleCkge1xuICAgICAgbWVudVdpZGdldC50cmlnZ2VyKG1lbnVJbmRleCAtIHRoaXMubnVtTWVudXNTaG93bik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lbnVXaWRnZXQuZm9jdXMoc2VsZWN0Rmlyc3QpO1xuICAgIH1cbiAgICB0aGlzLmZvY3VzZWRNZW51ID0ge1xuICAgICAgaW5kZXg6IGFjdHVhbE1lbnVJbmRleCxcbiAgICAgIGhvbGRlcjogbWVudUhvbGRlcixcbiAgICAgIHdpZGdldDogbWVudVdpZGdldFxuICAgIH07XG4gIH1cbn1cbmV4cG9ydHMuTWVudUJhciA9IF9nZXRfXyhcIk1lbnVCYXJcIik7XG5fZ2V0X18oXCJNZW51QmFyXCIpLk9WRVJGTE9XX0lOREVYID0gLTE7XG5mdW5jdGlvbiBfZ2V0R2xvYmFsT2JqZWN0KCkge1xuICB0cnkge1xuICAgIGlmICghIWdsb2JhbCkge1xuICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCEhd2luZG93KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG59XG47XG52YXIgX1Jld2lyZU1vZHVsZUlkX18gPSBudWxsO1xuZnVuY3Rpb24gX2dldFJld2lyZU1vZHVsZUlkX18oKSB7XG4gIGlmIChfUmV3aXJlTW9kdWxlSWRfXyA9PT0gbnVsbCkge1xuICAgIGxldCBnbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgICBpZiAoIWdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18pIHtcbiAgICAgIGdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18gPSAwO1xuICAgIH1cbiAgICBfUmV3aXJlTW9kdWxlSWRfXyA9IF9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18rKztcbiAgfVxuICByZXR1cm4gX1Jld2lyZU1vZHVsZUlkX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuICByZXR1cm4gdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVkRGF0YV9fKCkge1xuICBsZXQgbW9kdWxlSWQgPSBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpO1xuICBsZXQgcmVnaXN0cnkgPSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpO1xuICBsZXQgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgaWYgKCFyZXdpcmVEYXRhKSB7XG4gICAgcmVnaXN0cnlbbW9kdWxlSWRdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICB9XG4gIHJldHVybiByZXdpcmVEYXRhO1xufVxuKGZ1bmN0aW9uIHJlZ2lzdGVyUmVzZXRBbGwoKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSkge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfTtcbiAgfVxufSkoKTtcbnZhciBJTlRFTlRJT05BTF9VTkRFRklORUQgPSAnX19JTlRFTlRJT05BTF9VTkRFRklORURfXyc7XG5sZXQgX1Jld2lyZUFQSV9fID0ge307XG4oZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KG5hbWUsIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9SZXdpcmVBUElfXywgbmFtZSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfVxuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX193aXRoX18nLCBfd2l0aF9fKTtcbn0pKCk7XG5mdW5jdGlvbiBfZ2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB2YWx1ZSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICBpZiAodmFsdWUgPT09IElOVEVOVElPTkFMX1VOREVGSU5FRCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJfX2NyZWF0ZUJpbmRpbmdcIjpcbiAgICAgIHJldHVybiBfX2NyZWF0ZUJpbmRpbmc7XG4gICAgY2FzZSBcIl9fc2V0TW9kdWxlRGVmYXVsdFwiOlxuICAgICAgcmV0dXJuIF9fc2V0TW9kdWxlRGVmYXVsdDtcbiAgICBjYXNlIFwiX19pbXBvcnRTdGFyXCI6XG4gICAgICByZXR1cm4gX19pbXBvcnRTdGFyO1xuICAgIGNhc2UgXCJET01cIjpcbiAgICAgIHJldHVybiBET007XG4gICAgY2FzZSBcIk1lbnViYXJTdGF0ZVwiOlxuICAgICAgcmV0dXJuIE1lbnViYXJTdGF0ZTtcbiAgICBjYXNlIFwiZXZlbnRfMVwiOlxuICAgICAgcmV0dXJuIGV2ZW50XzE7XG4gICAgY2FzZSBcImFzeW5jXzFcIjpcbiAgICAgIHJldHVybiBhc3luY18xO1xuICAgIGNhc2UgXCJwbGF0Zm9ybV8xXCI6XG4gICAgICByZXR1cm4gcGxhdGZvcm1fMTtcbiAgICBjYXNlIFwia2V5Ym9hcmRFdmVudF8xXCI6XG4gICAgICByZXR1cm4ga2V5Ym9hcmRFdmVudF8xO1xuICAgIGNhc2UgXCJjb25zdHNfMVwiOlxuICAgICAgcmV0dXJuIGNvbnN0c18xO1xuICAgIGNhc2UgXCIkXCI6XG4gICAgICByZXR1cm4gJDtcbiAgICBjYXNlIFwidG91Y2hfMVwiOlxuICAgICAgcmV0dXJuIHRvdWNoXzE7XG4gICAgY2FzZSBcIm1vdXNlRXZlbnRfMVwiOlxuICAgICAgcmV0dXJuIG1vdXNlRXZlbnRfMTtcbiAgICBjYXNlIFwibWVudV8xXCI6XG4gICAgICByZXR1cm4gbWVudV8xO1xuICAgIGNhc2UgXCJNZW51QmFyXCI6XG4gICAgICByZXR1cm4gTWVudUJhcjtcbiAgICBjYXNlIFwibGlmZWN5Y2xlXzFcIjpcbiAgICAgIHJldHVybiBsaWZlY3ljbGVfMTtcbiAgICBjYXNlIFwic3RyaW5nc1wiOlxuICAgICAgcmV0dXJuIHN0cmluZ3M7XG4gICAgY2FzZSBcImVsZWN0cm9uXzFcIjpcbiAgICAgIHJldHVybiBlbGVjdHJvbl8xO1xuICAgIGNhc2UgXCJrZXlDb2Rlc18xXCI6XG4gICAgICByZXR1cm4ga2V5Q29kZXNfMTtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgX3ZhbHVlKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7XG4gICAgY2FzZSBcIk1lbnViYXJTdGF0ZVwiOlxuICAgICAgcmV0dXJuIE1lbnViYXJTdGF0ZSA9IF92YWx1ZTtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX3VwZGF0ZV9vcGVyYXRpb25fXyhvcGVyYXRpb24sIHZhcmlhYmxlTmFtZSwgcHJlZml4KSB7XG4gIHZhciBvbGRWYWx1ZSA9IF9nZXRfXyh2YXJpYWJsZU5hbWUpO1xuICB2YXIgbmV3VmFsdWUgPSBvcGVyYXRpb24gPT09ICcrKycgPyBvbGRWYWx1ZSArIDEgOiBvbGRWYWx1ZSAtIDE7XG4gIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIG5ld1ZhbHVlKTtcbiAgcmV0dXJuIHByZWZpeCA/IG5ld1ZhbHVlIDogb2xkVmFsdWU7XG59XG5mdW5jdGlvbiBfc2V0X18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmICh0eXBlb2YgdmFyaWFibGVOYW1lID09PSAnb2JqZWN0Jykge1xuICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVtuYW1lXSA9IHZhcmlhYmxlTmFtZVtuYW1lXTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBJTlRFTlRJT05BTF9VTkRFRklORUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBkZWxldGUgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICBpZiAoT2JqZWN0LmtleXMocmV3aXJlRGF0YSkubGVuZ3RoID09IDApIHtcbiAgICBkZWxldGUgX2dldFJld2lyZVJlZ2lzdHJ5X18oKVtfZ2V0UmV3aXJlTW9kdWxlSWRfX107XG4gIH1cbiAgO1xufVxuZnVuY3Rpb24gX3dpdGhfXyhvYmplY3QpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICB2YXIgcmV3aXJlZFZhcmlhYmxlTmFtZXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICB2YXIgcHJldmlvdXNWYWx1ZXMgPSB7fTtcbiAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV0gPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBvYmplY3RbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgICBsZXQgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgICBpZiAoISFyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlc3VsdC50aGVuKHJlc2V0KS5jYXRjaChyZXNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc2V0KCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5sZXQgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID0gdHlwZW9mIG1vZHVsZS5leHBvcnRzO1xuZnVuY3Rpb24gYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgbmFtZSwge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5pZiAoKF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ29iamVjdCcgfHwgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnZnVuY3Rpb24nKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKG1vZHVsZS5leHBvcnRzKSkge1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3dpdGhfXycsIF93aXRoX18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlQVBJX18nLCBfUmV3aXJlQVBJX18pO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIEFsZXhUb3JyZXNEZXYuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLkNFVE1lbnUgPSBleHBvcnRzLkRpcmVjdGlvbiA9IHZvaWQgMDtcbmNvbnN0IGRvbV8xID0gcmVxdWlyZShcIi4uLy4uL2Jhc2UvY29tbW9uL2RvbVwiKTtcbmNvbnN0IGxpZmVjeWNsZV8xID0gcmVxdWlyZShcIi4uLy4uL2Jhc2UvY29tbW9uL2xpZmVjeWNsZVwiKTtcbmNvbnN0IGl0ZW1fMSA9IHJlcXVpcmUoXCIuL2l0ZW1cIik7XG5jb25zdCBrZXlDb2Rlc18xID0gcmVxdWlyZShcIi4uLy4uL2Jhc2UvY29tbW9uL2tleUNvZGVzXCIpO1xuY29uc3Qga2V5Ym9hcmRFdmVudF8xID0gcmVxdWlyZShcIi4uLy4uL2Jhc2UvYnJvd3Nlci9rZXlib2FyZEV2ZW50XCIpO1xuY29uc3QgZXZlbnRfMSA9IHJlcXVpcmUoXCIuLi8uLi9iYXNlL2NvbW1vbi9ldmVudFwiKTtcbmNvbnN0IHNlcGFyYXRvcl8xID0gcmVxdWlyZShcIi4vc2VwYXJhdG9yXCIpO1xuY29uc3Qgc3VibWVudV8xID0gcmVxdWlyZShcIi4vc3VibWVudVwiKTtcbmNvbnN0IHBsYXRmb3JtXzEgPSByZXF1aXJlKFwiLi4vLi4vYmFzZS9jb21tb24vcGxhdGZvcm1cIik7XG52YXIgRGlyZWN0aW9uO1xuKGZ1bmN0aW9uIChEaXJlY3Rpb24pIHtcbiAgRGlyZWN0aW9uW0RpcmVjdGlvbltcIlJpZ2h0XCJdID0gMF0gPSBcIlJpZ2h0XCI7XG4gIERpcmVjdGlvbltEaXJlY3Rpb25bXCJMZWZ0XCJdID0gMV0gPSBcIkxlZnRcIjtcbn0pKF9nZXRfXyhcIkRpcmVjdGlvblwiKSB8fCAoZXhwb3J0cy5EaXJlY3Rpb24gPSBfYXNzaWduX18oXCJEaXJlY3Rpb25cIiwge30pKSk7XG5jbGFzcyBDRVRNZW51IGV4dGVuZHMgX2dldF9fKFwibGlmZWN5Y2xlXzFcIikuRGlzcG9zYWJsZSB7XG4gIGNvbnN0cnVjdG9yKG1lbnVDb250YWluZXIsIG1lbnVJY29ucywgcGFyZW50T3B0aW9ucywgY3VycmVudE9wdGlvbnMsIGNsb3NlU3ViTWVudSA9ICgpID0+IHt9KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm1lbnVDb250YWluZXIgPSBtZW51Q29udGFpbmVyO1xuICAgIHRoaXMubWVudUljb25zID0gbWVudUljb25zO1xuICAgIHRoaXMucGFyZW50T3B0aW9ucyA9IHBhcmVudE9wdGlvbnM7XG4gICAgdGhpcy5jdXJyZW50T3B0aW9ucyA9IGN1cnJlbnRPcHRpb25zO1xuICAgIHRoaXMuY2xvc2VTdWJNZW51ID0gY2xvc2VTdWJNZW51O1xuICAgIHRoaXMuZm9jdXNlZEl0ZW0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgIHRoaXMudHJpZ2dlcktleXMgPSB7XG4gICAgICBrZXlzOiBbMyAvKiBLZXlDb2RlLkVudGVyICovLCAxMCAvKiBLZXlDb2RlLlNwYWNlICovXSxcbiAgICAgIGtleURvd246IHRydWVcbiAgICB9O1xuICAgIHRoaXMucGFyZW50RGF0YSA9IHtcbiAgICAgIHBhcmVudDogdGhpc1xuICAgIH07XG4gICAgdGhpcy5fb25EaWRDYW5jZWwgPSB0aGlzLl9yZWdpc3RlcihuZXcgKF9nZXRfXyhcImV2ZW50XzFcIikuRW1pdHRlcikoKSk7XG4gICAgdGhpcy5tbmVtb25pY3MgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcikodGhpcy5tZW51Q29udGFpbmVyLCBfZ2V0X18oXCJkb21fMVwiKS5FdmVudFR5cGUuS0VZX0RPV04sIGUgPT4ge1xuICAgICAgY29uc3QgZXZlbnQgPSBuZXcgKF9nZXRfXyhcImtleWJvYXJkRXZlbnRfMVwiKS5TdGFuZGFyZEtleWJvYXJkRXZlbnQpKGUpO1xuICAgICAgbGV0IGV2ZW50SGFuZGxlZCA9IHRydWU7XG4gICAgICBpZiAoZXZlbnQuZXF1YWxzKDE2IC8qIEtleUNvZGUuVXBBcnJvdyAqLykpIHtcbiAgICAgICAgdGhpcy5mb2N1c1ByZXZpb3VzKCk7XG4gICAgICB9IGVsc2UgaWYgKGV2ZW50LmVxdWFscygxOCAvKiBLZXlDb2RlLkRvd25BcnJvdyAqLykpIHtcbiAgICAgICAgdGhpcy5mb2N1c05leHQoKTtcbiAgICAgIH0gZWxzZSBpZiAoZXZlbnQuZXF1YWxzKDkgLyogS2V5Q29kZS5Fc2NhcGUgKi8pKSB7XG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXNUcmlnZ2VyS2V5RXZlbnQoZXZlbnQpKSB7XG4gICAgICAgIC8vIFN0YXlpbmcgb3V0IG9mIHRoZSBlbHNlIGJyYW5jaCBldmVuIGlmIG5vdCB0cmlnZ2VyZWRcbiAgICAgICAgaWYgKHRoaXMudHJpZ2dlcktleXMgJiYgdGhpcy50cmlnZ2VyS2V5cy5rZXlEb3duKSB7XG4gICAgICAgICAgdGhpcy5kb1RyaWdnZXIoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBldmVudEhhbmRsZWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChldmVudEhhbmRsZWQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9XG4gICAgfSkpO1xuICAgIHRoaXMuX3JlZ2lzdGVyKCgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIpKHRoaXMubWVudUNvbnRhaW5lciwgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRUeXBlLktFWV9VUCwgZSA9PiB7XG4gICAgICBjb25zdCBldmVudCA9IG5ldyAoX2dldF9fKFwia2V5Ym9hcmRFdmVudF8xXCIpLlN0YW5kYXJkS2V5Ym9hcmRFdmVudCkoZSk7XG4gICAgICAvLyBSdW4gYWN0aW9uIG9uIEVudGVyL1NwYWNlXG4gICAgICBpZiAodGhpcy5pc1RyaWdnZXJLZXlFdmVudChldmVudCkpIHtcbiAgICAgICAgaWYgKHRoaXMudHJpZ2dlcktleXMgJiYgIXRoaXMudHJpZ2dlcktleXMua2V5RG93bikge1xuICAgICAgICAgIHRoaXMuZG9UcmlnZ2VyKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgLy8gUmVjb21wdXRlIGZvY3VzZWQgaXRlbVxuICAgICAgfSBlbHNlIGlmIChldmVudC5lcXVhbHMoMiAvKiBLZXlDb2RlLlRhYiAqLykgfHwgZXZlbnQuZXF1YWxzKDEwMjQgLyogS2V5TW9kLlNoaWZ0ICovIHwgMiAvKiBLZXlDb2RlLlRhYiAqLykpIHtcbiAgICAgICAgdGhpcy51cGRhdGVGb2N1c2VkSXRlbSgpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgICBpZiAodGhpcy5jdXJyZW50T3B0aW9ucy5lbmFibGVNbmVtb25pY3MpIHtcbiAgICAgIHRoaXMuX3JlZ2lzdGVyKCgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIpKHRoaXMubWVudUNvbnRhaW5lciwgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRUeXBlLktFWV9ET1dOLCBlID0+IHtcbiAgICAgICAgY29uc3Qga2V5ID0gX2dldF9fKFwia2V5Q29kZXNfMVwiKS5LZXlDb2RlVXRpbHMuZnJvbVN0cmluZyhlLmtleSk7XG4gICAgICAgIGlmICh0aGlzLm1uZW1vbmljcy5oYXMoa2V5KSkge1xuICAgICAgICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5tbmVtb25pY3MuZ2V0KGtleSk7XG4gICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgaWYgKGl0ZW1zWzBdIGluc3RhbmNlb2YgX2dldF9fKFwic3VibWVudV8xXCIpLkNFVFN1Yk1lbnUpIHtcbiAgICAgICAgICAgICAgdGhpcy5mb2N1c0l0ZW1CeUVsZW1lbnQoaXRlbXNbMF0uZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtc1swXS5vbkNsaWNrKGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IGl0ZW1zLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgICB0aGlzLmZvY3VzSXRlbUJ5RWxlbWVudChpdGVtLmVsZW1lbnQpO1xuICAgICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tbmVtb25pY3Muc2V0KGtleSwgaXRlbXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH1cbiAgICBpZiAoX2dldF9fKFwicGxhdGZvcm1fMVwiKS5pc0xpbnV4KSB7XG4gICAgICB0aGlzLl9yZWdpc3RlcigoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKSh0aGlzLm1lbnVDb250YWluZXIsIF9nZXRfXyhcImRvbV8xXCIpLkV2ZW50VHlwZS5LRVlfRE9XTiwgZSA9PiB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IChfZ2V0X18oXCJrZXlib2FyZEV2ZW50XzFcIikuU3RhbmRhcmRLZXlib2FyZEV2ZW50KShlKTtcbiAgICAgICAgaWYgKGV2ZW50LmVxdWFscygxNCAvKiBLZXlDb2RlLkhvbWUgKi8pIHx8IGV2ZW50LmVxdWFscygxMSAvKiBLZXlDb2RlLlBhZ2VVcCAqLykpIHtcbiAgICAgICAgICB0aGlzLmZvY3VzZWRJdGVtID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxO1xuICAgICAgICAgIHRoaXMuZm9jdXNOZXh0KCk7XG4gICAgICAgICAgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRIZWxwZXIuc3RvcChlLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC5lcXVhbHMoMTMgLyogS2V5Q29kZS5FbmQgKi8pIHx8IGV2ZW50LmVxdWFscygxMiAvKiBLZXlDb2RlLlBhZ2VEb3duICovKSkge1xuICAgICAgICAgIHRoaXMuZm9jdXNlZEl0ZW0gPSAwO1xuICAgICAgICAgIHRoaXMuZm9jdXNQcmV2aW91cygpO1xuICAgICAgICAgIF9nZXRfXyhcImRvbV8xXCIpLkV2ZW50SGVscGVyLnN0b3AoZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9XG4gICAgaWYgKF9nZXRfXyhcInBsYXRmb3JtXzFcIikuaXNGcmVlQlNEKSB7XG4gICAgICB0aGlzLl9yZWdpc3RlcigoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKSh0aGlzLm1lbnVDb250YWluZXIsIF9nZXRfXyhcImRvbV8xXCIpLkV2ZW50VHlwZS5LRVlfRE9XTiwgZSA9PiB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IChfZ2V0X18oXCJrZXlib2FyZEV2ZW50XzFcIikuU3RhbmRhcmRLZXlib2FyZEV2ZW50KShlKTtcbiAgICAgICAgaWYgKGV2ZW50LmVxdWFscygxNCAvKiBLZXlDb2RlLkhvbWUgKi8pIHx8IGV2ZW50LmVxdWFscygxMSAvKiBLZXlDb2RlLlBhZ2VVcCAqLykpIHtcbiAgICAgICAgICB0aGlzLmZvY3VzZWRJdGVtID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxO1xuICAgICAgICAgIHRoaXMuZm9jdXNOZXh0KCk7XG4gICAgICAgICAgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRIZWxwZXIuc3RvcChlLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC5lcXVhbHMoMTMgLyogS2V5Q29kZS5FbmQgKi8pIHx8IGV2ZW50LmVxdWFscygxMiAvKiBLZXlDb2RlLlBhZ2VEb3duICovKSkge1xuICAgICAgICAgIHRoaXMuZm9jdXNlZEl0ZW0gPSAwO1xuICAgICAgICAgIHRoaXMuZm9jdXNQcmV2aW91cygpO1xuICAgICAgICAgIF9nZXRfXyhcImRvbV8xXCIpLkV2ZW50SGVscGVyLnN0b3AoZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9XG4gICAgdGhpcy5fcmVnaXN0ZXIoKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcikodGhpcy5tZW51Q29udGFpbmVyLCBfZ2V0X18oXCJkb21fMVwiKS5FdmVudFR5cGUuTU9VU0VfT1VULCBlID0+IHtcbiAgICAgIGNvbnN0IHJlbGF0ZWRUYXJnZXQgPSBlLnJlbGF0ZWRUYXJnZXQ7XG4gICAgICBpZiAoISgwLCBfZ2V0X18oXCJkb21fMVwiKS5pc0FuY2VzdG9yKShyZWxhdGVkVGFyZ2V0LCB0aGlzLm1lbnVDb250YWluZXIpKSB7XG4gICAgICAgIHRoaXMuZm9jdXNlZEl0ZW0gPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMudXBkYXRlRm9jdXMoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcikodGhpcy5tZW51Q29udGFpbmVyLCBfZ2V0X18oXCJkb21fMVwiKS5FdmVudFR5cGUuTU9VU0VfVVAsIGUgPT4ge1xuICAgICAgLy8gQWJzb3JiIGNsaWNrcyBpbiBtZW51IGRlYWQgc3BhY2UgaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC92c2NvZGUvaXNzdWVzLzYzNTc1XG4gICAgICBfZ2V0X18oXCJkb21fMVwiKS5FdmVudEhlbHBlci5zdG9wKGUsIHRydWUpO1xuICAgIH0pKTtcbiAgICB0aGlzLl9yZWdpc3RlcigoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKSh0aGlzLm1lbnVDb250YWluZXIsIF9nZXRfXyhcImRvbV8xXCIpLkV2ZW50VHlwZS5NT1VTRV9PVkVSLCBlID0+IHtcbiAgICAgIGxldCB0YXJnZXQgPSBlLnRhcmdldDtcbiAgICAgIGlmICghdGFyZ2V0IHx8ICEoMCwgX2dldF9fKFwiZG9tXzFcIikuaXNBbmNlc3RvcikodGFyZ2V0LCB0aGlzLm1lbnVDb250YWluZXIpIHx8IHRhcmdldCA9PT0gdGhpcy5tZW51Q29udGFpbmVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHdoaWxlICh0YXJnZXQucGFyZW50RWxlbWVudCAhPT0gdGhpcy5tZW51Q29udGFpbmVyICYmIHRhcmdldC5wYXJlbnRFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgfVxuICAgICAgaWYgKCgwLCBfZ2V0X18oXCJkb21fMVwiKS5oYXNDbGFzcykodGFyZ2V0LCAnY2V0LWFjdGlvbi1pdGVtJykpIHtcbiAgICAgICAgY29uc3QgbGFzdEZvY3VzZWRJdGVtID0gdGhpcy5mb2N1c2VkSXRlbTtcbiAgICAgICAgdGhpcy5zZXRGb2N1c2VkSXRlbSh0YXJnZXQpO1xuICAgICAgICBpZiAobGFzdEZvY3VzZWRJdGVtICE9PSB0aGlzLmZvY3VzZWRJdGVtKSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVGb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSkpO1xuICAgIGlmICh0aGlzLmN1cnJlbnRPcHRpb25zLmFyaWFMYWJlbCkge1xuICAgICAgdGhpcy5tZW51Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRoaXMuY3VycmVudE9wdGlvbnMuYXJpYUxhYmVsKTtcbiAgICB9XG4gIH1cbiAgdHJpZ2dlcihpbmRleCkge1xuICAgIGlmIChpbmRleCA8PSB0aGlzLml0ZW1zLmxlbmd0aCAmJiBpbmRleCA+PSAwKSB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtc1tpbmRleF07XG4gICAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIF9nZXRfXyhcInN1Ym1lbnVfMVwiKS5DRVRTdWJNZW51KSB7XG4gICAgICAgIHRoaXMuZm9jdXMoaW5kZXgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBjcmVhdGVNZW51KG1lbnVJdGVtcykge1xuICAgIGlmICghbWVudUl0ZW1zKSByZXR1cm47XG4gICAgbWVudUl0ZW1zLmZvckVhY2gobWVudUl0ZW0gPT4ge1xuICAgICAgaWYgKCFtZW51SXRlbSkgcmV0dXJuO1xuICAgICAgY29uc3QgaXRlbUVsZW1lbnQgPSAoMCwgX2dldF9fKFwiZG9tXzFcIikuJCkoJ2xpLmNldC1hY3Rpb24taXRlbScsIHtcbiAgICAgICAgcm9sZTogJ3ByZXNlbnRhdGlvbidcbiAgICAgIH0pO1xuICAgICAgLy8gUHJldmVudCBuYXRpdmUgY29udGV4dCBtZW51IG9uIGFjdGlvbnNcbiAgICAgIHRoaXMuX3JlZ2lzdGVyKCgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIpKGl0ZW1FbGVtZW50LCBfZ2V0X18oXCJkb21fMVwiKS5FdmVudFR5cGUuQ09OVEVYVF9NRU5VLCBlID0+IHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfSkpO1xuICAgICAgbGV0IGl0ZW07XG4gICAgICBpZiAobWVudUl0ZW0udHlwZSA9PT0gJ3NlcGFyYXRvcicpIHtcbiAgICAgICAgaXRlbSA9IG5ldyAoX2dldF9fKFwic2VwYXJhdG9yXzFcIikuQ0VUU2VwYXJhdG9yKShtZW51SXRlbSwgdGhpcy5tZW51SWNvbnMsIHRoaXMucGFyZW50T3B0aW9ucywgdGhpcy5jdXJyZW50T3B0aW9ucyk7XG4gICAgICB9IGVsc2UgaWYgKG1lbnVJdGVtLnR5cGUgPT09ICdzdWJtZW51JyB8fCBtZW51SXRlbS5zdWJtZW51KSB7XG4gICAgICAgIGNvbnN0IHN1Ym1lbnVJdGVtcyA9IG1lbnVJdGVtLnN1Ym1lbnUuaXRlbXM7XG4gICAgICAgIGl0ZW0gPSBuZXcgKF9nZXRfXyhcInN1Ym1lbnVfMVwiKS5DRVRTdWJNZW51KShtZW51SXRlbSwgdGhpcy5tZW51SWNvbnMsIHN1Ym1lbnVJdGVtcywgdGhpcy5wYXJlbnREYXRhLCB0aGlzLnBhcmVudE9wdGlvbnMsIHRoaXMuY3VycmVudE9wdGlvbnMsIHRoaXMuY2xvc2VTdWJNZW51KTtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudE9wdGlvbnMuZW5hYmxlTW5lbW9uaWNzKSB7XG4gICAgICAgICAgY29uc3QgbW5lbW9uaWMgPSBpdGVtLm1uZW1vbmljO1xuICAgICAgICAgIGlmIChtbmVtb25pYyAmJiBpdGVtLmlzRW5hYmxlZCgpKSB7XG4gICAgICAgICAgICBsZXQgYWN0aW9uSXRlbXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1uZW1vbmljcy5oYXMobW5lbW9uaWMpKSB7XG4gICAgICAgICAgICAgIGFjdGlvbkl0ZW1zID0gdGhpcy5tbmVtb25pY3MuZ2V0KG1uZW1vbmljKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjdGlvbkl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB0aGlzLm1uZW1vbmljcy5zZXQobW5lbW9uaWMsIGFjdGlvbkl0ZW1zKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW0gPSBuZXcgKF9nZXRfXyhcIml0ZW1fMVwiKS5DRVRNZW51SXRlbSkobWVudUl0ZW0sIHRoaXMubWVudUljb25zLCB0aGlzLnBhcmVudE9wdGlvbnMsIHRoaXMuY3VycmVudE9wdGlvbnMsIHRoaXMuaXRlbXMsIHRoaXMuY2xvc2VTdWJNZW51KTtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudE9wdGlvbnMuZW5hYmxlTW5lbW9uaWNzKSB7XG4gICAgICAgICAgY29uc3QgbW5lbW9uaWMgPSBpdGVtLm1uZW1vbmljO1xuICAgICAgICAgIGlmIChtbmVtb25pYyAmJiBpdGVtLmlzRW5hYmxlZCgpKSB7XG4gICAgICAgICAgICBsZXQgYWN0aW9uSXRlbXMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLm1uZW1vbmljcy5oYXMobW5lbW9uaWMpKSB7XG4gICAgICAgICAgICAgIGFjdGlvbkl0ZW1zID0gdGhpcy5tbmVtb25pY3MuZ2V0KG1uZW1vbmljKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjdGlvbkl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB0aGlzLm1uZW1vbmljcy5zZXQobW5lbW9uaWMsIGFjdGlvbkl0ZW1zKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGl0ZW0ucmVuZGVyKGl0ZW1FbGVtZW50KTtcbiAgICAgIHRoaXMuaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hcHBlbmQpKHRoaXMubWVudUNvbnRhaW5lciwgaXRlbUVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG4gIGlzVHJpZ2dlcktleUV2ZW50KGV2ZW50KSB7XG4gICAgbGV0IHJldCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnRyaWdnZXJLZXlzKSB7XG4gICAgICB0aGlzLnRyaWdnZXJLZXlzLmtleXMuZm9yRWFjaChrZXlDb2RlID0+IHtcbiAgICAgICAgcmV0ID0gcmV0IHx8IGV2ZW50LmVxdWFscyhrZXlDb2RlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9XG4gIHVwZGF0ZUZvY3VzZWRJdGVtKCkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZW51Q29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBlbGVtID0gdGhpcy5tZW51Q29udGFpbmVyLmNoaWxkcmVuW2ldO1xuICAgICAgaWYgKCgwLCBfZ2V0X18oXCJkb21fMVwiKS5pc0FuY2VzdG9yKShkb2N1bWVudC5hY3RpdmVFbGVtZW50LCBlbGVtKSkge1xuICAgICAgICB0aGlzLmZvY3VzZWRJdGVtID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZvY3VzKGFyZykge1xuICAgIGxldCBzZWxlY3RGaXJzdCA9IGZhbHNlO1xuICAgIGxldCBpbmRleDtcbiAgICBpZiAoYXJnID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHNlbGVjdEZpcnN0ID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInKSB7XG4gICAgICBpbmRleCA9IGFyZztcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdib29sZWFuJykge1xuICAgICAgc2VsZWN0Rmlyc3QgPSBhcmc7XG4gICAgfVxuICAgIGlmIChzZWxlY3RGaXJzdCAmJiB0eXBlb2YgdGhpcy5mb2N1c2VkSXRlbSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIEZvY3VzIHRoZSBmaXJzdCBlbmFibGVkIGl0ZW1cbiAgICAgIHRoaXMuZm9jdXNlZEl0ZW0gPSB0aGlzLml0ZW1zLmxlbmd0aCAtIDE7XG4gICAgICB0aGlzLmZvY3VzTmV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLmZvY3VzZWRJdGVtID0gaW5kZXg7XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZUZvY3VzKCk7XG4gICAgfVxuICB9XG4gIGZvY3VzTmV4dCgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZm9jdXNlZEl0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmZvY3VzZWRJdGVtID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxO1xuICAgIH1cbiAgICBjb25zdCBzdGFydEluZGV4ID0gdGhpcy5mb2N1c2VkSXRlbTtcbiAgICBsZXQgaXRlbTtcbiAgICBkbyB7XG4gICAgICB0aGlzLmZvY3VzZWRJdGVtID0gKHRoaXMuZm9jdXNlZEl0ZW0gKyAxKSAlIHRoaXMuaXRlbXMubGVuZ3RoO1xuICAgICAgaXRlbSA9IHRoaXMuaXRlbXNbdGhpcy5mb2N1c2VkSXRlbV07XG4gICAgfSB3aGlsZSAodGhpcy5mb2N1c2VkSXRlbSAhPT0gc3RhcnRJbmRleCAmJiAhaXRlbS5pc0VuYWJsZWQoKSB8fCBpdGVtLmlzU2VwYXJhdG9yKCkpO1xuICAgIGlmICh0aGlzLmZvY3VzZWRJdGVtID09PSBzdGFydEluZGV4ICYmICFpdGVtLmlzRW5hYmxlZCgpIHx8IGl0ZW0uaXNTZXBhcmF0b3IoKSkge1xuICAgICAgdGhpcy5mb2N1c2VkSXRlbSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVGb2N1cygpO1xuICB9XG4gIGZvY3VzUHJldmlvdXMoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmZvY3VzZWRJdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5mb2N1c2VkSXRlbSA9IDA7XG4gICAgfVxuICAgIGNvbnN0IHN0YXJ0SW5kZXggPSB0aGlzLmZvY3VzZWRJdGVtO1xuICAgIGxldCBpdGVtO1xuICAgIGRvIHtcbiAgICAgIHRoaXMuZm9jdXNlZEl0ZW0gPSB0aGlzLmZvY3VzZWRJdGVtIC0gMTtcbiAgICAgIGlmICh0aGlzLmZvY3VzZWRJdGVtIDwgMCkge1xuICAgICAgICB0aGlzLmZvY3VzZWRJdGVtID0gdGhpcy5pdGVtcy5sZW5ndGggLSAxO1xuICAgICAgfVxuICAgICAgaXRlbSA9IHRoaXMuaXRlbXNbdGhpcy5mb2N1c2VkSXRlbV07XG4gICAgfSB3aGlsZSAodGhpcy5mb2N1c2VkSXRlbSAhPT0gc3RhcnRJbmRleCAmJiAhaXRlbS5pc0VuYWJsZWQoKSB8fCBpdGVtLmlzU2VwYXJhdG9yKCkpO1xuICAgIGlmICh0aGlzLmZvY3VzZWRJdGVtID09PSBzdGFydEluZGV4ICYmICFpdGVtLmlzRW5hYmxlZCgpIHx8IGl0ZW0uaXNTZXBhcmF0b3IoKSkge1xuICAgICAgdGhpcy5mb2N1c2VkSXRlbSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdGhpcy51cGRhdGVGb2N1cygpO1xuICB9XG4gIHVwZGF0ZUZvY3VzKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5mb2N1c2VkSXRlbSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubWVudUNvbnRhaW5lci5mb2N1cygpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zW2ldO1xuICAgICAgaWYgKGkgPT09IHRoaXMuZm9jdXNlZEl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0uaXNFbmFibGVkKCkpIHtcbiAgICAgICAgICBpdGVtLmZvY3VzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5tZW51Q29udGFpbmVyLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW0uYmx1cigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBkb1RyaWdnZXIoZXZlbnQpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZm9jdXNlZEl0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm47IC8vIG5vdGhpbmcgdG8gZm9jdXNcbiAgICB9XG4gICAgLy8gdHJpZ2dlciBhY3Rpb25cbiAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtc1t0aGlzLmZvY3VzZWRJdGVtXTtcbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIF9nZXRfXyhcIml0ZW1fMVwiKS5DRVRNZW51SXRlbSkge1xuICAgICAgaXRlbS5vbkNsaWNrKGV2ZW50KTtcbiAgICB9XG4gIH1cbiAgY2FuY2VsKCkge1xuICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpOyAvLyByZW1vdmUgZm9jdXMgZnJvbSBmb2N1c2VkIGFjdGlvblxuICAgIH1cblxuICAgIHRoaXMuX29uRGlkQ2FuY2VsLmZpcmUoKTtcbiAgfVxuICBmb2N1c0l0ZW1CeUVsZW1lbnQoZWxlbWVudCkge1xuICAgIGNvbnN0IGxhc3RGb2N1c2VkSXRlbSA9IHRoaXMuZm9jdXNlZEl0ZW07XG4gICAgaWYgKGVsZW1lbnQpIHRoaXMuc2V0Rm9jdXNlZEl0ZW0oZWxlbWVudCk7XG4gICAgaWYgKGxhc3RGb2N1c2VkSXRlbSAhPT0gdGhpcy5mb2N1c2VkSXRlbSkge1xuICAgICAgdGhpcy51cGRhdGVGb2N1cygpO1xuICAgIH1cbiAgfVxuICBzZXRGb2N1c2VkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5mb2N1c2VkSXRlbSA9IEFycmF5LnByb3RvdHlwZS5maW5kSW5kZXguY2FsbCh0aGlzLmNvbnRhaW5lci5jaGlsZHJlbiwgZWxlbSA9PiBlbGVtID09PSBlbGVtZW50KTtcbiAgfVxuICBhcHBseVN0eWxlKHN0eWxlKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5tZW51Q29udGFpbmVyO1xuICAgIGlmIChzdHlsZT8uYmFja2dyb3VuZENvbG9yKSB7XG4gICAgICBsZXQgdHJhbnNwYXJlbmN5ID0gdGhpcy5wYXJlbnRPcHRpb25zPy5tZW51VHJhbnNwYXJlbmN5O1xuICAgICAgaWYgKHRyYW5zcGFyZW5jeSA8IDApIHRyYW5zcGFyZW5jeSA9IDA7XG4gICAgICBpZiAodHJhbnNwYXJlbmN5ID4gMSkgdHJhbnNwYXJlbmN5ID0gMTtcbiAgICAgIGNvbnN0IHJnYmEgPSBzdHlsZS5iYWNrZ3JvdW5kQ29sb3I/LnJnYmE7XG4gICAgICBjb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYHJnYigke3JnYmEucn0gJHtyZ2JhLmd9ICR7cmdiYS5ifSAvICR7MSAtIHRyYW5zcGFyZW5jeX0pYDtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXRlbXMpIHtcbiAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBfZ2V0X18oXCJpdGVtXzFcIikuQ0VUTWVudUl0ZW0gfHwgaXRlbSBpbnN0YW5jZW9mIF9nZXRfXyhcInNlcGFyYXRvcl8xXCIpLkNFVFNlcGFyYXRvcikge1xuICAgICAgICAgIGl0ZW0udXBkYXRlU3R5bGUoc3R5bGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgZ2V0IGNvbnRhaW5lcigpIHtcbiAgICByZXR1cm4gdGhpcy5tZW51Q29udGFpbmVyO1xuICB9XG4gIGdldCBvbkRpZENhbmNlbCgpIHtcbiAgICByZXR1cm4gdGhpcy5fb25EaWRDYW5jZWwuZXZlbnQ7XG4gIH1cbiAgZGlzcG9zZSgpIHtcbiAgICAoMCwgX2dldF9fKFwibGlmZWN5Y2xlXzFcIikuZGlzcG9zZSkodGhpcy5pdGVtcyk7XG4gICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5yZW1vdmVOb2RlKSh0aGlzLmNvbnRhaW5lcik7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG59XG5leHBvcnRzLkNFVE1lbnUgPSBfZ2V0X18oXCJDRVRNZW51XCIpO1xuZnVuY3Rpb24gX2dldEdsb2JhbE9iamVjdCgpIHtcbiAgdHJ5IHtcbiAgICBpZiAoISFnbG9iYWwpIHtcbiAgICAgIHJldHVybiBnbG9iYWw7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghIXdpbmRvdykge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxufVxuO1xudmFyIF9SZXdpcmVNb2R1bGVJZF9fID0gbnVsbDtcbmZ1bmN0aW9uIF9nZXRSZXdpcmVNb2R1bGVJZF9fKCkge1xuICBpZiAoX1Jld2lyZU1vZHVsZUlkX18gPT09IG51bGwpIHtcbiAgICBsZXQgZ2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gICAgaWYgKCFnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKSB7XG4gICAgICBnbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fID0gMDtcbiAgICB9XG4gICAgX1Jld2lyZU1vZHVsZUlkX18gPSBfXyQkR0xPQkFMX1JFV0lSRV9ORVhUX01PRFVMRV9JRF9fKys7XG4gIH1cbiAgcmV0dXJuIF9SZXdpcmVNb2R1bGVJZF9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZVJlZ2lzdHJ5X18oKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH1cbiAgcmV0dXJuIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlZERhdGFfXygpIHtcbiAgbGV0IG1vZHVsZUlkID0gX2dldFJld2lyZU1vZHVsZUlkX18oKTtcbiAgbGV0IHJlZ2lzdHJ5ID0gX2dldFJld2lyZVJlZ2lzdHJ5X18oKTtcbiAgbGV0IHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIGlmICghcmV3aXJlRGF0YSkge1xuICAgIHJlZ2lzdHJ5W21vZHVsZUlkXSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgfVxuICByZXR1cm4gcmV3aXJlRGF0YTtcbn1cbihmdW5jdGlvbiByZWdpc3RlclJlc2V0QWxsKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIH07XG4gIH1cbn0pKCk7XG52YXIgSU5URU5USU9OQUxfVU5ERUZJTkVEID0gJ19fSU5URU5USU9OQUxfVU5ERUZJTkVEX18nO1xubGV0IF9SZXdpcmVBUElfXyA9IHt9O1xuKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gYWRkUHJvcGVydHlUb0FQSU9iamVjdChuYW1lLCB2YWx1ZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfUmV3aXJlQVBJX18sIG5hbWUsIHtcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXdpcmVfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmVzZXREZXBlbmRlbmN5X18nLCBfcmVzZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG59KSgpO1xuZnVuY3Rpb24gX2dldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdmFsdWUgPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgaWYgKHZhbHVlID09PSBJTlRFTlRJT05BTF9VTkRFRklORUQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHtcbiAgICBjYXNlIFwiRGlyZWN0aW9uXCI6XG4gICAgICByZXR1cm4gRGlyZWN0aW9uO1xuICAgIGNhc2UgXCJldmVudF8xXCI6XG4gICAgICByZXR1cm4gZXZlbnRfMTtcbiAgICBjYXNlIFwiZG9tXzFcIjpcbiAgICAgIHJldHVybiBkb21fMTtcbiAgICBjYXNlIFwia2V5Ym9hcmRFdmVudF8xXCI6XG4gICAgICByZXR1cm4ga2V5Ym9hcmRFdmVudF8xO1xuICAgIGNhc2UgXCJrZXlDb2Rlc18xXCI6XG4gICAgICByZXR1cm4ga2V5Q29kZXNfMTtcbiAgICBjYXNlIFwic3VibWVudV8xXCI6XG4gICAgICByZXR1cm4gc3VibWVudV8xO1xuICAgIGNhc2UgXCJwbGF0Zm9ybV8xXCI6XG4gICAgICByZXR1cm4gcGxhdGZvcm1fMTtcbiAgICBjYXNlIFwic2VwYXJhdG9yXzFcIjpcbiAgICAgIHJldHVybiBzZXBhcmF0b3JfMTtcbiAgICBjYXNlIFwiaXRlbV8xXCI6XG4gICAgICByZXR1cm4gaXRlbV8xO1xuICAgIGNhc2UgXCJsaWZlY3ljbGVfMVwiOlxuICAgICAgcmV0dXJuIGxpZmVjeWNsZV8xO1xuICAgIGNhc2UgXCJDRVRNZW51XCI6XG4gICAgICByZXR1cm4gQ0VUTWVudTtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgX3ZhbHVlKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7XG4gICAgY2FzZSBcIkRpcmVjdGlvblwiOlxuICAgICAgcmV0dXJuIERpcmVjdGlvbiA9IF92YWx1ZTtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX3VwZGF0ZV9vcGVyYXRpb25fXyhvcGVyYXRpb24sIHZhcmlhYmxlTmFtZSwgcHJlZml4KSB7XG4gIHZhciBvbGRWYWx1ZSA9IF9nZXRfXyh2YXJpYWJsZU5hbWUpO1xuICB2YXIgbmV3VmFsdWUgPSBvcGVyYXRpb24gPT09ICcrKycgPyBvbGRWYWx1ZSArIDEgOiBvbGRWYWx1ZSAtIDE7XG4gIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIG5ld1ZhbHVlKTtcbiAgcmV0dXJuIHByZWZpeCA/IG5ld1ZhbHVlIDogb2xkVmFsdWU7XG59XG5mdW5jdGlvbiBfc2V0X18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmICh0eXBlb2YgdmFyaWFibGVOYW1lID09PSAnb2JqZWN0Jykge1xuICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVtuYW1lXSA9IHZhcmlhYmxlTmFtZVtuYW1lXTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBJTlRFTlRJT05BTF9VTkRFRklORUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBkZWxldGUgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICBpZiAoT2JqZWN0LmtleXMocmV3aXJlRGF0YSkubGVuZ3RoID09IDApIHtcbiAgICBkZWxldGUgX2dldFJld2lyZVJlZ2lzdHJ5X18oKVtfZ2V0UmV3aXJlTW9kdWxlSWRfX107XG4gIH1cbiAgO1xufVxuZnVuY3Rpb24gX3dpdGhfXyhvYmplY3QpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICB2YXIgcmV3aXJlZFZhcmlhYmxlTmFtZXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICB2YXIgcHJldmlvdXNWYWx1ZXMgPSB7fTtcbiAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV0gPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBvYmplY3RbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgICBsZXQgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgICBpZiAoISFyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlc3VsdC50aGVuKHJlc2V0KS5jYXRjaChyZXNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc2V0KCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5sZXQgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID0gdHlwZW9mIG1vZHVsZS5leHBvcnRzO1xuZnVuY3Rpb24gYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgbmFtZSwge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5pZiAoKF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ29iamVjdCcgfHwgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnZnVuY3Rpb24nKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKG1vZHVsZS5leHBvcnRzKSkge1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3dpdGhfXycsIF93aXRoX18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlQVBJX18nLCBfUmV3aXJlQVBJX18pO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIEFsZXhUb3JyZXNEZXYuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSB0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nIHx8IChPYmplY3QuY3JlYXRlID8gZnVuY3Rpb24gKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihtLCBrKTtcbiAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICBkZXNjID0ge1xuICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbVtrXTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59IDogZnVuY3Rpb24gKG8sIG0sIGssIGsyKSB7XG4gIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gIG9bazJdID0gbVtrXTtcbn0pO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQgfHwgKE9iamVjdC5jcmVhdGUgPyBmdW5jdGlvbiAobywgdikge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIHZhbHVlOiB2XG4gIH0pO1xufSA6IGZ1bmN0aW9uIChvLCB2KSB7XG4gIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9IHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIgfHwgZnVuY3Rpb24gKG1vZCkge1xuICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICB2YXIgcmVzdWx0ID0ge307XG4gIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX2dldF9fKFwiX19jcmVhdGVCaW5kaW5nXCIpKHJlc3VsdCwgbW9kLCBrKTtcbiAgX2dldF9fKFwiX19zZXRNb2R1bGVEZWZhdWx0XCIpKHJlc3VsdCwgbW9kKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5DRVRNZW51SXRlbSA9IHZvaWQgMDtcbmNvbnN0IGVsZWN0cm9uXzEgPSByZXF1aXJlKFwiZWxlY3Ryb25cIik7XG5jb25zdCBkb21fMSA9IHJlcXVpcmUoXCIuLi8uLi9iYXNlL2NvbW1vbi9kb21cIik7XG5jb25zdCBrZXlDb2Rlc18xID0gcmVxdWlyZShcIi4uLy4uL2Jhc2UvY29tbW9uL2tleUNvZGVzXCIpO1xuY29uc3QgbGlmZWN5Y2xlXzEgPSByZXF1aXJlKFwiLi4vLi4vYmFzZS9jb21tb24vbGlmZWN5Y2xlXCIpO1xuY29uc3QgY29uc3RzXzEgPSByZXF1aXJlKFwiLi4vLi4vY29uc3RzXCIpO1xuY29uc3Qgc3RyaW5ncyA9IF9nZXRfXyhcIl9faW1wb3J0U3RhclwiKShyZXF1aXJlKFwiLi4vLi4vYmFzZS9jb21tb24vc3RyaW5nc1wiKSk7XG5jbGFzcyBDRVRNZW51SXRlbSBleHRlbmRzIF9nZXRfXyhcImxpZmVjeWNsZV8xXCIpLkRpc3Bvc2FibGUge1xuICBjb25zdHJ1Y3RvcihfaXRlbSwgbWVudUljb25zLCBwYXJlbnRPcHRpb25zLCBvcHRpb25zLCBtZW51SXRlbXMsIGNsb3NlU3ViTWVudSA9ICgpID0+IHt9KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9pdGVtID0gX2l0ZW07XG4gICAgdGhpcy5tZW51SWNvbnMgPSBtZW51SWNvbnM7XG4gICAgdGhpcy5wYXJlbnRPcHRpb25zID0gcGFyZW50T3B0aW9ucztcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMubWVudUl0ZW1zID0gbWVudUl0ZW1zO1xuICAgIHRoaXMuY2xvc2VTdWJNZW51ID0gY2xvc2VTdWJNZW51O1xuICAgIC8vIFNldCBtbmVtb25pY1xuICAgIGlmICh0aGlzLl9pdGVtLmxhYmVsICYmIG9wdGlvbnMuZW5hYmxlTW5lbW9uaWNzKSB7XG4gICAgICBjb25zdCBsYWJlbCA9IHRoaXMuX2l0ZW0ubGFiZWw7XG4gICAgICBpZiAobGFiZWwpIHtcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IF9nZXRfXyhcImNvbnN0c18xXCIpLk1FTlVfTU5FTU9OSUNfUkVHRVguZXhlYyhsYWJlbCk7XG4gICAgICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICAgICAgdGhpcy5fbW5lbW9uaWMgPSBfZ2V0X18oXCJrZXlDb2Rlc18xXCIpLktleUNvZGVVdGlscy5mcm9tU3RyaW5nKCghIW1hdGNoZXNbMV0gPyBtYXRjaGVzWzFdIDogbWF0Y2hlc1syXSkudG9Mb2NhbGVVcHBlckNhc2UoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmVuZGVyKGVsKSB7XG4gICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBlbDtcbiAgICB0aGlzLl9yZWdpc3RlcigoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKSh0aGlzLmVsZW1lbnQsIF9nZXRfXyhcImRvbV8xXCIpLkV2ZW50VHlwZS5NT1VTRV9ET1dOLCBlID0+IHtcbiAgICAgIGlmICh0aGlzLml0ZW0uZW5hYmxlZCAmJiBlLmJ1dHRvbiA9PT0gMCAmJiB0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFkZENsYXNzKSh0aGlzLmVsZW1lbnQsICdhY3RpdmUnKTtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcikodGhpcy5lbGVtZW50LCBfZ2V0X18oXCJkb21fMVwiKS5FdmVudFR5cGUuQ0xJQ0ssIGUgPT4ge1xuICAgICAgaWYgKHRoaXMuaXRlbS5lbmFibGVkKSB7XG4gICAgICAgIHRoaXMub25DbGljayhlKTtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgdGhpcy5fcmVnaXN0ZXIoKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcikodGhpcy5lbGVtZW50LCBfZ2V0X18oXCJkb21fMVwiKS5FdmVudFR5cGUuREJMQ0xJQ0ssIGUgPT4ge1xuICAgICAgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRIZWxwZXIuc3RvcChlLCB0cnVlKTtcbiAgICB9KSk7XG4gICAgW19nZXRfXyhcImRvbV8xXCIpLkV2ZW50VHlwZS5NT1VTRV9VUCwgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRUeXBlLk1PVVNFX09VVF0uZm9yRWFjaChldmVudCA9PiB7XG4gICAgICB0aGlzLl9yZWdpc3RlcigoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKSh0aGlzLmVsZW1lbnQsIGV2ZW50LCBlID0+IHtcbiAgICAgICAgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRIZWxwZXIuc3RvcChlKTtcbiAgICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLnJlbW92ZUNsYXNzKSh0aGlzLmVsZW1lbnQsICdhY3RpdmUnKTtcbiAgICAgIH0pKTtcbiAgICB9KTtcbiAgICB0aGlzLml0ZW1FbGVtZW50ID0gKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFwcGVuZCkodGhpcy5lbGVtZW50LCAoMCwgX2dldF9fKFwiZG9tXzFcIikuJCkoJ2EuY2V0LWFjdGlvbi1tZW51LWl0ZW0nKSk7XG4gICAgaWYgKHRoaXMubW5lbW9uaWMpIHtcbiAgICAgIHRoaXMuaXRlbUVsZW1lbnQuc2V0QXR0cmlidXRlKCdhcmlhLWtleXNob3J0Y3V0cycsIGAke3RoaXMubW5lbW9uaWN9YCk7XG4gICAgfVxuICAgIHRoaXMuaWNvbkVsZW1lbnQgPSAoMCwgX2dldF9fKFwiZG9tXzFcIikuYXBwZW5kKSh0aGlzLml0ZW1FbGVtZW50LCAoMCwgX2dldF9fKFwiZG9tXzFcIikuJCkoJ3NwYW4uY2V0LW1lbnUtaXRlbS1pY29uJykpO1xuICAgIHRoaXMuaWNvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdyb2xlJywgJ25vbmUnKTtcbiAgICB0aGlzLmxhYmVsRWxlbWVudCA9ICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hcHBlbmQpKHRoaXMuaXRlbUVsZW1lbnQsICgwLCBfZ2V0X18oXCJkb21fMVwiKS4kKSgnc3Bhbi5jZXQtYWN0aW9uLWxhYmVsJykpO1xuICAgIHRoaXMudXBkYXRlTGFiZWwoKTtcbiAgICB0aGlzLnNldEFjY2VsZXJhdG9yKCk7XG4gICAgdGhpcy51cGRhdGVJY29uKCk7XG4gICAgdGhpcy51cGRhdGVUb29sdGlwKCk7XG4gICAgdGhpcy51cGRhdGVFbmFibGVkKCk7XG4gICAgdGhpcy51cGRhdGVDaGVja2VkKCk7XG4gICAgdGhpcy51cGRhdGVWaXNpYmlsaXR5KCk7XG4gIH1cbiAgb25DbGljayhldmVudCkge1xuICAgIF9nZXRfXyhcImRvbV8xXCIpLkV2ZW50SGVscGVyLnN0b3AoZXZlbnQsIHRydWUpO1xuICAgIF9nZXRfXyhcImVsZWN0cm9uXzFcIikuaXBjUmVuZGVyZXIuc2VuZCgnbWVudS1ldmVudCcsIHRoaXMuaXRlbS5jb21tYW5kSWQpO1xuICAgIGlmICh0aGlzLml0ZW0udHlwZSA9PT0gJ2NoZWNrYm94Jykge1xuICAgICAgdGhpcy5pdGVtLmNoZWNrZWQgPSAhdGhpcy5pdGVtLmNoZWNrZWQ7XG4gICAgICB0aGlzLnVwZGF0ZUNoZWNrZWQoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXRlbS50eXBlID09PSAncmFkaW8nKSB7XG4gICAgICB0aGlzLnVwZGF0ZVJhZGlvR3JvdXAoKTtcbiAgICB9XG4gICAgdGhpcy5jbG9zZVN1Yk1lbnUoKTtcbiAgfVxuICBhcHBseVN0eWxlKCkge1xuICAgIGlmICghdGhpcy5tZW51U3R5bGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaXNTZWxlY3RlZCA9IHRoaXMuZWxlbWVudCAmJiAoMCwgX2dldF9fKFwiZG9tXzFcIikuaGFzQ2xhc3MpKHRoaXMuZWxlbWVudCwgJ2ZvY3VzZWQnKTtcbiAgICBjb25zdCBmZ0NvbG9yID0gaXNTZWxlY3RlZCAmJiB0aGlzLm1lbnVTdHlsZS5zZWxlY3Rpb25Gb3JlZ3JvdW5kQ29sb3IgPyB0aGlzLm1lbnVTdHlsZS5zZWxlY3Rpb25Gb3JlZ3JvdW5kQ29sb3IgOiB0aGlzLm1lbnVTdHlsZS5mb3JlZ3JvdW5kQ29sb3I7XG4gICAgY29uc3QgYmdDb2xvciA9IGlzU2VsZWN0ZWQgJiYgdGhpcy5tZW51U3R5bGUuc2VsZWN0aW9uQmFja2dyb3VuZENvbG9yID8gdGhpcy5tZW51U3R5bGUuc2VsZWN0aW9uQmFja2dyb3VuZENvbG9yIDogbnVsbDtcbiAgICBpZiAodGhpcy5pdGVtRWxlbWVudCkge1xuICAgICAgdGhpcy5pdGVtRWxlbWVudC5zdHlsZS5jb2xvciA9IGZnQ29sb3IgPyBmZ0NvbG9yLnRvU3RyaW5nKCkgOiAnJztcbiAgICAgIHRoaXMuaXRlbUVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYmdDb2xvciA/IGJnQ29sb3IudG9TdHJpbmcoKSA6ICcnO1xuICAgICAgaWYgKHRoaXMuaWNvbkVsZW1lbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuaWNvbkVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQ/LmNsYXNzTmFtZSA9PT0gJ2ljb24nKSB7XG4gICAgICAgICAgKDAsIF9nZXRfXyhcImNvbnN0c18xXCIpLmFwcGx5RmlsbCkodGhpcy5pY29uRWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCwgdGhpcy5wYXJlbnRPcHRpb25zPy5zdmdDb2xvciwgZmdDb2xvciwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICgwLCBfZ2V0X18oXCJjb25zdHNfMVwiKS5hcHBseUZpbGwpKHRoaXMuaWNvbkVsZW1lbnQsIHRoaXMucGFyZW50T3B0aW9ucz8uc3ZnQ29sb3IsIGZnQ29sb3IpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHVwZGF0ZVN0eWxlKHN0eWxlKSB7XG4gICAgdGhpcy5tZW51U3R5bGUgPSBzdHlsZTtcbiAgICB0aGlzLmFwcGx5U3R5bGUoKTtcbiAgfVxuICBmb2N1cygpIHtcbiAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICB0aGlzLmVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGRDbGFzcykodGhpcy5lbGVtZW50LCAnZm9jdXNlZCcpO1xuICAgIH1cbiAgICB0aGlzLmFwcGx5U3R5bGUoKTtcbiAgfVxuICBibHVyKCkge1xuICAgIGlmICh0aGlzLmVsZW1lbnQpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5ibHVyKCk7XG4gICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikucmVtb3ZlQ2xhc3MpKHRoaXMuZWxlbWVudCwgJ2ZvY3VzZWQnKTtcbiAgICB9XG4gICAgdGhpcy5hcHBseVN0eWxlKCk7XG4gIH1cbiAgc2V0QWNjZWxlcmF0b3IoKSB7XG4gICAgbGV0IGFjY2VsZXJhdG9yID0gbnVsbDtcbiAgICBpZiAodGhpcy5pdGVtLnJvbGUpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5pdGVtLnJvbGUudG9Mb2NhbGVMb3dlckNhc2UoKSkge1xuICAgICAgICBjYXNlICd1bmRvJzpcbiAgICAgICAgICBhY2NlbGVyYXRvciA9ICdDdHJsT3JDbWQrWic7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3JlZG8nOlxuICAgICAgICAgIGFjY2VsZXJhdG9yID0gJ0N0cmxPckNtZCtZJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnY3V0JzpcbiAgICAgICAgICBhY2NlbGVyYXRvciA9ICdDdHJsT3JDbWQrWCc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2NvcHknOlxuICAgICAgICAgIGFjY2VsZXJhdG9yID0gJ0N0cmxPckNtZCtDJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAncGFzdGUnOlxuICAgICAgICAgIGFjY2VsZXJhdG9yID0gJ0N0cmxPckNtZCtWJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnc2VsZWN0YWxsJzpcbiAgICAgICAgICBhY2NlbGVyYXRvciA9ICdDdHJsT3JDbWQrQSc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21pbmltaXplJzpcbiAgICAgICAgICBhY2NlbGVyYXRvciA9ICdDdHJsT3JDbWQrTSc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2Nsb3NlJzpcbiAgICAgICAgICBhY2NlbGVyYXRvciA9ICdDdHJsT3JDbWQrVyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3JlbG9hZCc6XG4gICAgICAgICAgYWNjZWxlcmF0b3IgPSAnQ3RybE9yQ21kK1InO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdmb3JjZXJlbG9hZCc6XG4gICAgICAgICAgYWNjZWxlcmF0b3IgPSAnQ3RybE9yQ21kK1NoaWZ0K1InO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0b2dnbGVkZXZ0b29scyc6XG4gICAgICAgICAgYWNjZWxlcmF0b3IgPSAnQ3RybE9yQ21kK1NoaWZ0K0knO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0b2dnbGVmdWxsc2NyZWVuJzpcbiAgICAgICAgICBhY2NlbGVyYXRvciA9ICdGMTEnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyZXNldHpvb20nOlxuICAgICAgICAgIGFjY2VsZXJhdG9yID0gJ0N0cmxPckNtZCswJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnem9vbWluJzpcbiAgICAgICAgICBhY2NlbGVyYXRvciA9ICdDdHJsT3JDbWQrKyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3pvb21vdXQnOlxuICAgICAgICAgIGFjY2VsZXJhdG9yID0gJ0N0cmxPckNtZCstJztcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuaXRlbS5sYWJlbCAmJiB0aGlzLml0ZW0uYWNjZWxlcmF0b3IpIHtcbiAgICAgIGFjY2VsZXJhdG9yID0gdGhpcy5pdGVtLmFjY2VsZXJhdG9yO1xuICAgIH1cbiAgICBpZiAodGhpcy5pdGVtRWxlbWVudCAmJiBhY2NlbGVyYXRvciAhPT0gbnVsbCkge1xuICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFwcGVuZCkodGhpcy5pdGVtRWxlbWVudCwgKDAsIF9nZXRfXyhcImRvbV8xXCIpLiQpKCdzcGFuLmtleWJpbmRpbmcnKSkudGV4dENvbnRlbnQgPSAoMCwgX2dldF9fKFwiY29uc3RzXzFcIikucGFyc2VBY2NlbGVyYXRvcikoYWNjZWxlcmF0b3IpO1xuICAgIH1cbiAgfVxuICB1cGRhdGVMYWJlbCgpIHtcbiAgICBjb25zdCBsYWJlbCA9IHRoaXMuaXRlbS5sYWJlbCB8fCAnJztcbiAgICBjb25zdCBjbGVhbk1lbnVMYWJlbCA9ICgwLCBfZ2V0X18oXCJjb25zdHNfMVwiKS5jbGVhbk1uZW1vbmljKShsYWJlbCk7XG4gICAgLy8gVXBkYXRlIHRoZSBidXR0b24gbGFiZWwgdG8gcmVmbGVjdCBtbmVtb25pY3NcbiAgICBpZiAodGhpcy5vcHRpb25zLmVuYWJsZU1uZW1vbmljcykge1xuICAgICAgY29uc3QgY2xlYW5MYWJlbCA9IF9nZXRfXyhcInN0cmluZ3NcIikuZXNjYXBlKGxhYmVsKTtcbiAgICAgIC8vIFRoaXMgaXMgZ2xvYmFsIHNvIHJlc2V0IGl0XG4gICAgICBfZ2V0X18oXCJjb25zdHNfMVwiKS5NRU5VX0VTQ0FQRURfTU5FTU9OSUNfUkVHRVgubGFzdEluZGV4ID0gMDtcbiAgICAgIGxldCBlc2NNYXRjaCA9IF9nZXRfXyhcImNvbnN0c18xXCIpLk1FTlVfRVNDQVBFRF9NTkVNT05JQ19SRUdFWC5leGVjKGNsZWFuTGFiZWwpO1xuICAgICAgLy8gV2UgY2FuJ3QgdXNlIG5lZ2F0aXZlIGxvb2tiZWhpbmQgc28gd2UgbWF0Y2ggb3VyIG5lZ2F0aXZlIGFuZCBza2lwXG4gICAgICB3aGlsZSAoZXNjTWF0Y2ggJiYgZXNjTWF0Y2hbMV0pIHtcbiAgICAgICAgZXNjTWF0Y2ggPSBfZ2V0X18oXCJjb25zdHNfMVwiKS5NRU5VX0VTQ0FQRURfTU5FTU9OSUNfUkVHRVguZXhlYyhjbGVhbkxhYmVsKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlcGxhY2VEb3VibGVFc2NhcGVzID0gc3RyID0+IHN0ci5yZXBsYWNlKC8mYW1wOyZhbXA7L2csICcmYW1wOycpO1xuICAgICAgaWYgKGVzY01hdGNoKSB7XG4gICAgICAgIHRoaXMubGFiZWxFbGVtZW50LmlubmVyVGV4dCA9ICcnO1xuICAgICAgICB0aGlzLmxhYmVsRWxlbWVudC5hcHBlbmQoX2dldF9fKFwic3RyaW5nc1wiKS5sdHJpbShyZXBsYWNlRG91YmxlRXNjYXBlcyhjbGVhbkxhYmVsLnN1YnN0cmluZygwLCBlc2NNYXRjaC5pbmRleCkpLCAnICcpLCAoMCwgX2dldF9fKFwiZG9tXzFcIikuJCkoJ21uZW1vbmljJywge1xuICAgICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJ1xuICAgICAgICB9LCBlc2NNYXRjaFszXSksIF9nZXRfXyhcInN0cmluZ3NcIikucnRyaW0ocmVwbGFjZURvdWJsZUVzY2FwZXMoY2xlYW5MYWJlbC5zdWJzdHJpbmcoZXNjTWF0Y2guaW5kZXggKyBlc2NNYXRjaFswXS5sZW5ndGgpKSwgJyAnKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxhYmVsRWxlbWVudC5pbm5lclRleHQgPSByZXBsYWNlRG91YmxlRXNjYXBlcyhjbGVhbkxhYmVsKS50cmltKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubGFiZWxFbGVtZW50LmlubmVyVGV4dCA9IGNsZWFuTWVudUxhYmVsLnJlcGxhY2UoLyYmL2csICcmJyk7XG4gICAgfVxuICAgIGNvbnN0IG1uZW1vbmljTWF0Y2hlcyA9IF9nZXRfXyhcImNvbnN0c18xXCIpLk1FTlVfTU5FTU9OSUNfUkVHRVguZXhlYyhsYWJlbCk7XG4gICAgLy8gUmVnaXN0ZXIgbW5lbW9uaWNzXG4gICAgaWYgKG1uZW1vbmljTWF0Y2hlcykge1xuICAgICAgY29uc3QgbW5lbW9uaWMgPSAhIW1uZW1vbmljTWF0Y2hlc1sxXSA/IG1uZW1vbmljTWF0Y2hlc1sxXSA6IG1uZW1vbmljTWF0Y2hlc1szXTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZW5hYmxlTW5lbW9uaWNzKSB7XG4gICAgICAgIHRoaXMuaXRlbUVsZW1lbnQ/LnNldEF0dHJpYnV0ZSgnYXJpYS1rZXlzaG9ydGN1dHMnLCAnQWx0KycgKyBtbmVtb25pYy50b0xvY2FsZUxvd2VyQ2FzZSgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaXRlbUVsZW1lbnQ/LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1rZXlzaG9ydGN1dHMnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgdXBkYXRlSWNvbigpIHtcbiAgICBpZiAodGhpcy5pdGVtLmljb24pIHtcbiAgICAgIGNvbnN0IGljb24gPSB0aGlzLml0ZW0uaWNvbjtcbiAgICAgIGlmICh0aGlzLmljb25FbGVtZW50ICYmIGljb24pIHtcbiAgICAgICAgY29uc3QgaWNvbkUgPSAoMCwgX2dldF9fKFwiZG9tXzFcIikuYXBwZW5kKSh0aGlzLmljb25FbGVtZW50LCAoMCwgX2dldF9fKFwiZG9tXzFcIikuJCkoJy5pY29uJykpO1xuICAgICAgICBsZXQgaWNvbkRhdGE7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5pdGVtLmljb24gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWNvbkRhdGEgPSBfZ2V0X18oXCJlbGVjdHJvbl8xXCIpLmlwY1JlbmRlcmVyLnNlbmRTeW5jKCdtZW51LWljb24nLCB0aGlzLml0ZW0uY29tbWFuZElkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBpY29uUGF0aCA9IHRoaXMuaXRlbS5pY29uO1xuICAgICAgICAgIGljb25EYXRhID0gX2dldF9fKFwiZWxlY3Ryb25fMVwiKS5uYXRpdmVJbWFnZS5jcmVhdGVGcm9tUGF0aChpY29uUGF0aCkudG9EYXRhVVJMKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGljb25EYXRhKSBpY29uRS5zdHlsZS53ZWJraXRNYXNrQm94SW1hZ2UgPSBgdXJsKCR7aWNvbkRhdGF9KWA7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmljb25FbGVtZW50ICYmIHRoaXMuaXRlbS50eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkQ2xhc3MpKHRoaXMuaWNvbkVsZW1lbnQsICdjaGVja2JveCcpO1xuICAgICAgdGhpcy5pY29uRWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLm1lbnVJY29ucy5jaGVja2JveDtcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXRlbS50eXBlID09PSAncmFkaW8nKSB7XG4gICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkQ2xhc3MpKHRoaXMuaWNvbkVsZW1lbnQsICdyYWRpbycpO1xuICAgICAgdGhpcy5pY29uRWxlbWVudC5pbm5lckhUTUwgPSB0aGlzLml0ZW0uY2hlY2tlZCA/IHRoaXMubWVudUljb25zLnJhZGlvQ2hlY2tlZCA6IHRoaXMubWVudUljb25zLnJhZGlvVW5jaGVja2VkO1xuICAgIH1cbiAgICAoMCwgX2dldF9fKFwiY29uc3RzXzFcIikuYXBwbHlGaWxsKSh0aGlzLmljb25FbGVtZW50LCB0aGlzLnBhcmVudE9wdGlvbnM/LnN2Z0NvbG9yLCB0aGlzLm1lbnVTdHlsZT8uZm9yZWdyb3VuZENvbG9yKTtcbiAgfVxuICB1cGRhdGVUb29sdGlwKCkge1xuICAgIGxldCB0aXRsZSA9IG51bGw7XG4gICAgaWYgKHRoaXMuaXRlbS5zdWJsYWJlbCkge1xuICAgICAgdGl0bGUgPSB0aGlzLml0ZW0uc3VibGFiZWw7XG4gICAgfSBlbHNlIGlmICghdGhpcy5pdGVtLmxhYmVsICYmIHRoaXMuaXRlbS5sYWJlbCAmJiB0aGlzLml0ZW0uaWNvbikge1xuICAgICAgdGl0bGUgPSB0aGlzLml0ZW0ubGFiZWw7XG4gICAgICBpZiAodGhpcy5pdGVtLmFjY2VsZXJhdG9yKSB7XG4gICAgICAgIHRpdGxlID0gKDAsIF9nZXRfXyhcImNvbnN0c18xXCIpLnBhcnNlQWNjZWxlcmF0b3IpKHRoaXMuaXRlbS5hY2NlbGVyYXRvcik7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLml0ZW1FbGVtZW50ICYmIHRpdGxlKSB7XG4gICAgICB0aGlzLml0ZW1FbGVtZW50LnRpdGxlID0gdGl0bGU7XG4gICAgfVxuICB9XG4gIHVwZGF0ZUVuYWJsZWQoKSB7XG4gICAgaWYgKHRoaXMuZWxlbWVudCkge1xuICAgICAgaWYgKHRoaXMuaXRlbS5lbmFibGVkICYmIHRoaXMuaXRlbS50eXBlICE9PSAnc2VwYXJhdG9yJykge1xuICAgICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikucmVtb3ZlQ2xhc3MpKHRoaXMuZWxlbWVudCwgJ2Rpc2FibGVkJyk7XG4gICAgICAgIHRoaXMuZWxlbWVudC50YWJJbmRleCA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkQ2xhc3MpKHRoaXMuZWxlbWVudCwgJ2Rpc2FibGVkJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHVwZGF0ZVZpc2liaWxpdHkoKSB7XG4gICAgaWYgKHRoaXMuaXRlbS52aXNpYmxlID09PSBmYWxzZSAmJiB0aGlzLml0ZW1FbGVtZW50KSB7XG4gICAgICB0aGlzLml0ZW1FbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cbiAgfVxuICB1cGRhdGVDaGVja2VkKCkge1xuICAgIGlmICh0aGlzLml0ZW1FbGVtZW50KSB7XG4gICAgICBpZiAodGhpcy5pdGVtLmNoZWNrZWQpIHtcbiAgICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFkZENsYXNzKSh0aGlzLml0ZW1FbGVtZW50LCAnY2hlY2tlZCcpO1xuICAgICAgICB0aGlzLml0ZW1FbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1jaGVja2VkJywgJ3RydWUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5yZW1vdmVDbGFzcykodGhpcy5pdGVtRWxlbWVudCwgJ2NoZWNrZWQnKTtcbiAgICAgICAgdGhpcy5pdGVtRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtY2hlY2tlZCcsICdmYWxzZScpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICB1cGRhdGVSYWRpb0dyb3VwKCkge1xuICAgIGlmICh0aGlzLnJhZGlvR3JvdXAgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5yYWRpb0dyb3VwID0gdGhpcy5nZXRSYWRpb0dyb3VwKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1lbnVJdGVtcykge1xuICAgICAgZm9yIChsZXQgaSA9IHRoaXMucmFkaW9Hcm91cC5zdGFydDsgaSA8IHRoaXMucmFkaW9Hcm91cC5lbmQ7IGkrKykge1xuICAgICAgICBjb25zdCBtZW51SXRlbSA9IHRoaXMubWVudUl0ZW1zW2ldO1xuICAgICAgICBpZiAobWVudUl0ZW0gaW5zdGFuY2VvZiBfZ2V0X18oXCJDRVRNZW51SXRlbVwiKSAmJiBtZW51SXRlbS5pdGVtLnR5cGUgPT09ICdyYWRpbycpIHtcbiAgICAgICAgICAvLyB1cGRhdGUgaXRlbS5jaGVja2VkIGZvciBlYWNoIHJhZGlvIGJ1dHRvbiBpbiBncm91cFxuICAgICAgICAgIG1lbnVJdGVtLml0ZW0uY2hlY2tlZCA9IG1lbnVJdGVtID09PSB0aGlzO1xuICAgICAgICAgIG1lbnVJdGVtLnVwZGF0ZUljb24oKTtcbiAgICAgICAgICAvLyB1cGRhdGVDaGVja2VkKCkgKmFsbCogcmFkaW8gYnV0dG9ucyBpbiBncm91cFxuICAgICAgICAgIG1lbnVJdGVtLnVwZGF0ZUNoZWNrZWQoKTtcbiAgICAgICAgICAvLyBzZXQgdGhlIHJhZGlvR3JvdXAgcHJvcGVydHkgb2YgYWxsIHRoZSBvdGhlciByYWRpbyBidXR0b25zIHNpbmNlIGl0IHdhcyBhbHJlYWR5IGNhbGN1bGF0ZWRcbiAgICAgICAgICBpZiAobWVudUl0ZW0gIT09IHRoaXMpIHtcbiAgICAgICAgICAgIG1lbnVJdGVtLnJhZGlvR3JvdXAgPSB0aGlzLnJhZGlvR3JvdXA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKiByYWRpb0dyb3VwIGluZGV4J3Mgc3RhcnRzIHdpdGggKHByZXZpb3VzIHNlcGFyYXRvciArMSBPUiBtZW51SXRlbXNbMF0pIGFuZCBlbmRzIHdpdGggKG5leHQgc2VwYXJhdG9yIE9SIG1lbnVJdGVtc1tsZW5ndGhdKSAqL1xuICBnZXRSYWRpb0dyb3VwKCkge1xuICAgIGxldCBzdGFydEluZGV4ID0gMDtcbiAgICBsZXQgZW5kSW5kZXggPSB0aGlzLm1lbnVJdGVtcyA/IHRoaXMubWVudUl0ZW1zLmxlbmd0aCA6IDA7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgaWYgKHRoaXMubWVudUl0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGluZGV4IGluIHRoaXMubWVudUl0ZW1zKSB7XG4gICAgICAgIGNvbnN0IG1lbnVJdGVtID0gdGhpcy5tZW51SXRlbXNbaW5kZXhdO1xuICAgICAgICBpZiAobWVudUl0ZW0gPT09IHRoaXMpIHtcbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAobWVudUl0ZW0gaW5zdGFuY2VvZiBfZ2V0X18oXCJDRVRNZW51SXRlbVwiKSAmJiBtZW51SXRlbS5pc1NlcGFyYXRvcigpKSB7XG4gICAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgICBlbmRJbmRleCA9IE51bWJlci5wYXJzZUludChpbmRleCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhcnRJbmRleCA9IE51bWJlci5wYXJzZUludChpbmRleCkgKyAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc3RhcnQ6IHN0YXJ0SW5kZXgsXG4gICAgICBlbmQ6IGVuZEluZGV4XG4gICAgfTtcbiAgfVxuICBnZXQgZWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudEVsZW1lbnQ7XG4gIH1cbiAgZ2V0IGl0ZW0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2l0ZW07XG4gIH1cbiAgaXNFbmFibGVkKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW0uZW5hYmxlZDtcbiAgfVxuICBpc1NlcGFyYXRvcigpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtLnR5cGUgPT09ICdzZXBhcmF0b3InO1xuICB9XG4gIGdldCBtbmVtb25pYygpIHtcbiAgICByZXR1cm4gdGhpcy5fbW5lbW9uaWM7XG4gIH1cbiAgZGlzcG9zZSgpIHtcbiAgICBpZiAodGhpcy5pdGVtRWxlbWVudCkge1xuICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLnJlbW92ZU5vZGUpKHRoaXMuaXRlbUVsZW1lbnQpO1xuICAgICAgdGhpcy5pdGVtRWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG59XG5leHBvcnRzLkNFVE1lbnVJdGVtID0gX2dldF9fKFwiQ0VUTWVudUl0ZW1cIik7XG5mdW5jdGlvbiBfZ2V0R2xvYmFsT2JqZWN0KCkge1xuICB0cnkge1xuICAgIGlmICghIWdsb2JhbCkge1xuICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCEhd2luZG93KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG59XG47XG52YXIgX1Jld2lyZU1vZHVsZUlkX18gPSBudWxsO1xuZnVuY3Rpb24gX2dldFJld2lyZU1vZHVsZUlkX18oKSB7XG4gIGlmIChfUmV3aXJlTW9kdWxlSWRfXyA9PT0gbnVsbCkge1xuICAgIGxldCBnbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgICBpZiAoIWdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18pIHtcbiAgICAgIGdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18gPSAwO1xuICAgIH1cbiAgICBfUmV3aXJlTW9kdWxlSWRfXyA9IF9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18rKztcbiAgfVxuICByZXR1cm4gX1Jld2lyZU1vZHVsZUlkX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuICByZXR1cm4gdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVkRGF0YV9fKCkge1xuICBsZXQgbW9kdWxlSWQgPSBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpO1xuICBsZXQgcmVnaXN0cnkgPSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpO1xuICBsZXQgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgaWYgKCFyZXdpcmVEYXRhKSB7XG4gICAgcmVnaXN0cnlbbW9kdWxlSWRdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICB9XG4gIHJldHVybiByZXdpcmVEYXRhO1xufVxuKGZ1bmN0aW9uIHJlZ2lzdGVyUmVzZXRBbGwoKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSkge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfTtcbiAgfVxufSkoKTtcbnZhciBJTlRFTlRJT05BTF9VTkRFRklORUQgPSAnX19JTlRFTlRJT05BTF9VTkRFRklORURfXyc7XG5sZXQgX1Jld2lyZUFQSV9fID0ge307XG4oZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KG5hbWUsIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9SZXdpcmVBUElfXywgbmFtZSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfVxuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX193aXRoX18nLCBfd2l0aF9fKTtcbn0pKCk7XG5mdW5jdGlvbiBfZ2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB2YWx1ZSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICBpZiAodmFsdWUgPT09IElOVEVOVElPTkFMX1VOREVGSU5FRCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJfX2NyZWF0ZUJpbmRpbmdcIjpcbiAgICAgIHJldHVybiBfX2NyZWF0ZUJpbmRpbmc7XG4gICAgY2FzZSBcIl9fc2V0TW9kdWxlRGVmYXVsdFwiOlxuICAgICAgcmV0dXJuIF9fc2V0TW9kdWxlRGVmYXVsdDtcbiAgICBjYXNlIFwiX19pbXBvcnRTdGFyXCI6XG4gICAgICByZXR1cm4gX19pbXBvcnRTdGFyO1xuICAgIGNhc2UgXCJjb25zdHNfMVwiOlxuICAgICAgcmV0dXJuIGNvbnN0c18xO1xuICAgIGNhc2UgXCJrZXlDb2Rlc18xXCI6XG4gICAgICByZXR1cm4ga2V5Q29kZXNfMTtcbiAgICBjYXNlIFwiZG9tXzFcIjpcbiAgICAgIHJldHVybiBkb21fMTtcbiAgICBjYXNlIFwiZWxlY3Ryb25fMVwiOlxuICAgICAgcmV0dXJuIGVsZWN0cm9uXzE7XG4gICAgY2FzZSBcInN0cmluZ3NcIjpcbiAgICAgIHJldHVybiBzdHJpbmdzO1xuICAgIGNhc2UgXCJDRVRNZW51SXRlbVwiOlxuICAgICAgcmV0dXJuIENFVE1lbnVJdGVtO1xuICAgIGNhc2UgXCJsaWZlY3ljbGVfMVwiOlxuICAgICAgcmV0dXJuIGxpZmVjeWNsZV8xO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfYXNzaWduX18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfc2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lLCB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICB9XG59XG5mdW5jdGlvbiBfc2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lLCBfdmFsdWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHt9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfdXBkYXRlX29wZXJhdGlvbl9fKG9wZXJhdGlvbiwgdmFyaWFibGVOYW1lLCBwcmVmaXgpIHtcbiAgdmFyIG9sZFZhbHVlID0gX2dldF9fKHZhcmlhYmxlTmFtZSk7XG4gIHZhciBuZXdWYWx1ZSA9IG9wZXJhdGlvbiA9PT0gJysrJyA/IG9sZFZhbHVlICsgMSA6IG9sZFZhbHVlIC0gMTtcbiAgX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgbmV3VmFsdWUpO1xuICByZXR1cm4gcHJlZml4ID8gbmV3VmFsdWUgOiBvbGRWYWx1ZTtcbn1cbmZ1bmN0aW9uIF9zZXRfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHR5cGVvZiB2YXJpYWJsZU5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW25hbWVdID0gdmFyaWFibGVOYW1lW25hbWVdO1xuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IElOVEVOVElPTkFMX1VOREVGSU5FRDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIF9yZXNldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGRlbGV0ZSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gIGlmIChPYmplY3Qua2V5cyhyZXdpcmVEYXRhKS5sZW5ndGggPT0gMCkge1xuICAgIGRlbGV0ZSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpW19nZXRSZXdpcmVNb2R1bGVJZF9fXTtcbiAgfVxuICA7XG59XG5mdW5jdGlvbiBfd2l0aF9fKG9iamVjdCkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIHZhciByZXdpcmVkVmFyaWFibGVOYW1lcyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG4gIHZhciBwcmV2aW91c1ZhbHVlcyA9IHt9O1xuICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IG9iamVjdFt2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICAgIGxldCByZXN1bHQgPSBjYWxsYmFjaygpO1xuICAgIGlmICghIXJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmVzdWx0LnRoZW4ocmVzZXQpLmNhdGNoKHJlc2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzZXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cbmxldCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPSB0eXBlb2YgbW9kdWxlLmV4cG9ydHM7XG5mdW5jdGlvbiBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCBuYW1lLCB7XG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cbmlmICgoX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnb2JqZWN0JyB8fCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdmdW5jdGlvbicpICYmIE9iamVjdC5pc0V4dGVuc2libGUobW9kdWxlLmV4cG9ydHMpKSB7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVBUElfXycsIF9SZXdpcmVBUElfXyk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgQWxleFRvcnJlc0Rldi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuQ0VUU2VwYXJhdG9yID0gdm9pZCAwO1xuY29uc3QgaXRlbV8xID0gcmVxdWlyZShcIi4vaXRlbVwiKTtcbmNvbnN0IGRvbV8xID0gcmVxdWlyZShcIi4uLy4uL2Jhc2UvY29tbW9uL2RvbVwiKTtcbmNsYXNzIENFVFNlcGFyYXRvciBleHRlbmRzIF9nZXRfXyhcIml0ZW1fMVwiKS5DRVRNZW51SXRlbSB7XG4gIGNvbnN0cnVjdG9yKGl0ZW0sIHN1Ym1lbnVJY29ucywgc3VibWVudVBhcmVudE9wdGlvbnMsIHN1Ym1lbnVPcHRpb25zKSB7XG4gICAgc3VwZXIoaXRlbSwgc3VibWVudUljb25zLCBzdWJtZW51UGFyZW50T3B0aW9ucywgc3VibWVudU9wdGlvbnMpO1xuICB9XG4gIHJlbmRlcihjb250YWluZXIpIHtcbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICB0aGlzLnNlcGFyYXRvckVsZW1lbnQgPSAoMCwgX2dldF9fKFwiZG9tXzFcIikuYXBwZW5kKShjb250YWluZXIsICgwLCBfZ2V0X18oXCJkb21fMVwiKS4kKSgnYS5jZXQtYWN0aW9uLWxhYmVsLnNlcGFyYXRvcicsIHtcbiAgICAgICAgcm9sZTogJ3ByZXNlbnRhdGlvbidcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cbiAgdXBkYXRlU3R5bGUoc3R5bGUpIHtcbiAgICBpZiAodGhpcy5zZXBhcmF0b3JFbGVtZW50ICYmIHN0eWxlLnNlcGFyYXRvckNvbG9yKSB7XG4gICAgICB0aGlzLnNlcGFyYXRvckVsZW1lbnQuc3R5bGUuYm9yZGVyQm90dG9tQ29sb3IgPSBzdHlsZS5zZXBhcmF0b3JDb2xvci50b1N0cmluZygpO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0cy5DRVRTZXBhcmF0b3IgPSBfZ2V0X18oXCJDRVRTZXBhcmF0b3JcIik7XG5mdW5jdGlvbiBfZ2V0R2xvYmFsT2JqZWN0KCkge1xuICB0cnkge1xuICAgIGlmICghIWdsb2JhbCkge1xuICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCEhd2luZG93KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG59XG47XG52YXIgX1Jld2lyZU1vZHVsZUlkX18gPSBudWxsO1xuZnVuY3Rpb24gX2dldFJld2lyZU1vZHVsZUlkX18oKSB7XG4gIGlmIChfUmV3aXJlTW9kdWxlSWRfXyA9PT0gbnVsbCkge1xuICAgIGxldCBnbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgICBpZiAoIWdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18pIHtcbiAgICAgIGdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18gPSAwO1xuICAgIH1cbiAgICBfUmV3aXJlTW9kdWxlSWRfXyA9IF9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18rKztcbiAgfVxuICByZXR1cm4gX1Jld2lyZU1vZHVsZUlkX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuICByZXR1cm4gdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVkRGF0YV9fKCkge1xuICBsZXQgbW9kdWxlSWQgPSBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpO1xuICBsZXQgcmVnaXN0cnkgPSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpO1xuICBsZXQgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgaWYgKCFyZXdpcmVEYXRhKSB7XG4gICAgcmVnaXN0cnlbbW9kdWxlSWRdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICB9XG4gIHJldHVybiByZXdpcmVEYXRhO1xufVxuKGZ1bmN0aW9uIHJlZ2lzdGVyUmVzZXRBbGwoKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSkge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfTtcbiAgfVxufSkoKTtcbnZhciBJTlRFTlRJT05BTF9VTkRFRklORUQgPSAnX19JTlRFTlRJT05BTF9VTkRFRklORURfXyc7XG5sZXQgX1Jld2lyZUFQSV9fID0ge307XG4oZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KG5hbWUsIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9SZXdpcmVBUElfXywgbmFtZSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfVxuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX193aXRoX18nLCBfd2l0aF9fKTtcbn0pKCk7XG5mdW5jdGlvbiBfZ2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB2YWx1ZSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICBpZiAodmFsdWUgPT09IElOVEVOVElPTkFMX1VOREVGSU5FRCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJkb21fMVwiOlxuICAgICAgcmV0dXJuIGRvbV8xO1xuICAgIGNhc2UgXCJpdGVtXzFcIjpcbiAgICAgIHJldHVybiBpdGVtXzE7XG4gICAgY2FzZSBcIkNFVFNlcGFyYXRvclwiOlxuICAgICAgcmV0dXJuIENFVFNlcGFyYXRvcjtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgdmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSB2YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gX3NldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSwgX3ZhbHVlKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7fVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuZnVuY3Rpb24gX3VwZGF0ZV9vcGVyYXRpb25fXyhvcGVyYXRpb24sIHZhcmlhYmxlTmFtZSwgcHJlZml4KSB7XG4gIHZhciBvbGRWYWx1ZSA9IF9nZXRfXyh2YXJpYWJsZU5hbWUpO1xuICB2YXIgbmV3VmFsdWUgPSBvcGVyYXRpb24gPT09ICcrKycgPyBvbGRWYWx1ZSArIDEgOiBvbGRWYWx1ZSAtIDE7XG4gIF9hc3NpZ25fXyh2YXJpYWJsZU5hbWUsIG5ld1ZhbHVlKTtcbiAgcmV0dXJuIHByZWZpeCA/IG5ld1ZhbHVlIDogb2xkVmFsdWU7XG59XG5mdW5jdGlvbiBfc2V0X18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmICh0eXBlb2YgdmFyaWFibGVOYW1lID09PSAnb2JqZWN0Jykge1xuICAgIE9iamVjdC5rZXlzKHZhcmlhYmxlTmFtZSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgcmV3aXJlRGF0YVtuYW1lXSA9IHZhcmlhYmxlTmFtZVtuYW1lXTtcbiAgICB9KTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIF9yZXNldF9fKHZhcmlhYmxlTmFtZSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBJTlRFTlRJT05BTF9VTkRFRklORUQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBkZWxldGUgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICBpZiAoT2JqZWN0LmtleXMocmV3aXJlRGF0YSkubGVuZ3RoID09IDApIHtcbiAgICBkZWxldGUgX2dldFJld2lyZVJlZ2lzdHJ5X18oKVtfZ2V0UmV3aXJlTW9kdWxlSWRfX107XG4gIH1cbiAgO1xufVxuZnVuY3Rpb24gX3dpdGhfXyhvYmplY3QpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICB2YXIgcmV3aXJlZFZhcmlhYmxlTmFtZXMgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuICB2YXIgcHJldmlvdXNWYWx1ZXMgPSB7fTtcbiAgZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgcmV3aXJlZFZhcmlhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFibGVOYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBwcmV2aW91c1ZhbHVlc1t2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV0gPSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gICAgICByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPSBvYmplY3RbdmFyaWFibGVOYW1lXTtcbiAgICB9KTtcbiAgICBsZXQgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgICBpZiAoISFyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlc3VsdC50aGVuKHJlc2V0KS5jYXRjaChyZXNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc2V0KCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5sZXQgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID0gdHlwZW9mIG1vZHVsZS5leHBvcnRzO1xuZnVuY3Rpb24gYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUuZXhwb3J0cywgbmFtZSwge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5pZiAoKF90eXBlT2ZPcmlnaW5hbEV4cG9ydCA9PT0gJ29iamVjdCcgfHwgX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnZnVuY3Rpb24nKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKG1vZHVsZS5leHBvcnRzKSkge1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fR2V0RGVwZW5kZW5jeV9fJywgX2dldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3Jlc2V0X18nLCBfcmVzZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX3dpdGhfXycsIF93aXRoX18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlQVBJX18nLCBfUmV3aXJlQVBJX18pO1xufSIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqICBDb3B5cmlnaHQgKGMpIEFsZXhUb3JyZXNEZXYuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLkNFVFN1Yk1lbnUgPSB2b2lkIDA7XG5jb25zdCBjb25zdHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9jb25zdHNcIik7XG5jb25zdCBpdGVtXzEgPSByZXF1aXJlKFwiLi9pdGVtXCIpO1xuY29uc3QgbGlmZWN5Y2xlXzEgPSByZXF1aXJlKFwiLi4vLi4vYmFzZS9jb21tb24vbGlmZWN5Y2xlXCIpO1xuY29uc3QgZG9tXzEgPSByZXF1aXJlKFwiLi4vLi4vYmFzZS9jb21tb24vZG9tXCIpO1xuY29uc3Qga2V5Ym9hcmRFdmVudF8xID0gcmVxdWlyZShcIi4uLy4uL2Jhc2UvYnJvd3Nlci9rZXlib2FyZEV2ZW50XCIpO1xuY29uc3QgaW5kZXhfMSA9IHJlcXVpcmUoXCIuL2luZGV4XCIpO1xuY29uc3QgYXN5bmNfMSA9IHJlcXVpcmUoXCIuLi8uLi9iYXNlL2NvbW1vbi9hc3luY1wiKTtcbmNsYXNzIENFVFN1Yk1lbnUgZXh0ZW5kcyBfZ2V0X18oXCJpdGVtXzFcIikuQ0VUTWVudUl0ZW0ge1xuICBjb25zdHJ1Y3RvcihpdGVtLCBzdWJtZW51SWNvbnMsIHN1Ym1lbnVJdGVtcywgcGFyZW50RGF0YSwgc3VibWVudVBhcmVudE9wdGlvbnMsIHN1Ym1lbnVPcHRpb25zLCBjbG9zZVN1Yk1lbnUgPSAoKSA9PiB7fSkge1xuICAgIHN1cGVyKGl0ZW0sIHN1Ym1lbnVJY29ucywgc3VibWVudVBhcmVudE9wdGlvbnMsIHN1Ym1lbnVPcHRpb25zKTtcbiAgICB0aGlzLnN1Ym1lbnVJY29ucyA9IHN1Ym1lbnVJY29ucztcbiAgICB0aGlzLnN1Ym1lbnVJdGVtcyA9IHN1Ym1lbnVJdGVtcztcbiAgICB0aGlzLnBhcmVudERhdGEgPSBwYXJlbnREYXRhO1xuICAgIHRoaXMuc3VibWVudVBhcmVudE9wdGlvbnMgPSBzdWJtZW51UGFyZW50T3B0aW9ucztcbiAgICB0aGlzLnN1Ym1lbnVPcHRpb25zID0gc3VibWVudU9wdGlvbnM7XG4gICAgdGhpcy5zdWJtZW51RGlzcG9zYWJsZXMgPSBbXTtcbiAgICB0aGlzLm1vdXNlT3ZlciA9IGZhbHNlO1xuICAgIHRoaXMuX2Nsb3NlU3ViTWVudSA9ICgpID0+IHt9O1xuICAgIHRoaXMuX2Nsb3NlU3ViTWVudSA9IGNsb3NlU3ViTWVudTtcbiAgICB0aGlzLnNob3dTY2hlZHVsZXIgPSBuZXcgKF9nZXRfXyhcImFzeW5jXzFcIikuUnVuT25jZVNjaGVkdWxlcikoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMubW91c2VPdmVyKSB7XG4gICAgICAgIHRoaXMuY2xlYW51cEV4aXN0aW5nU3VibWVudShmYWxzZSk7XG4gICAgICAgIHRoaXMuY3JlYXRlU3VibWVudShmYWxzZSk7XG4gICAgICB9XG4gICAgfSwgMjUwKTtcbiAgICB0aGlzLmhpZGVTY2hlZHVsZXIgPSBuZXcgKF9nZXRfXyhcImFzeW5jXzFcIikuUnVuT25jZVNjaGVkdWxlcikoKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuZWxlbWVudCAmJiAhKDAsIF9nZXRfXyhcImRvbV8xXCIpLmlzQW5jZXN0b3IpKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsIHRoaXMuZWxlbWVudCkgJiYgdGhpcy5wYXJlbnREYXRhLnN1Ym1lbnUgPT09IHRoaXMubXlTdWJtZW51KSB7XG4gICAgICAgIHRoaXMucGFyZW50RGF0YS5wYXJlbnQuZm9jdXMoZmFsc2UpO1xuICAgICAgICB0aGlzLmNsZWFudXBFeGlzdGluZ1N1Ym1lbnUodHJ1ZSk7XG4gICAgICB9XG4gICAgfSwgNzUwKTtcbiAgfVxuICByZW5kZXIoZWwpIHtcbiAgICBzdXBlci5yZW5kZXIoZWwpO1xuICAgIGlmICghdGhpcy5pdGVtRWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkQ2xhc3MpKHRoaXMuaXRlbUVsZW1lbnQsICdjZXQtc3VibWVudS1pdGVtJyk7XG4gICAgdGhpcy5pdGVtRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGFzcG9wdXAnLCAndHJ1ZScpO1xuICAgIHRoaXMuc3VibWVudUluZGljYXRvciA9ICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hcHBlbmQpKHRoaXMuaXRlbUVsZW1lbnQsICgwLCBfZ2V0X18oXCJkb21fMVwiKS4kKSgnc3Bhbi5jZXQtc3VibWVudS1pbmRpY2F0b3InKSk7XG4gICAgdGhpcy5zdWJtZW51SW5kaWNhdG9yLmlubmVySFRNTCA9IHRoaXMuc3VibWVudUljb25zLnN1Ym1lbnVJbmRpY2F0b3I7XG4gICAgdGhpcy5zdWJtZW51SW5kaWNhdG9yLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgICgwLCBfZ2V0X18oXCJjb25zdHNfMVwiKS5hcHBseUZpbGwpKHRoaXMuc3VibWVudUluZGljYXRvciwgdGhpcy5tZW51U3R5bGU/LnN2Z0NvbG9yLCB0aGlzLm1lbnVTdHlsZT8uZm9yZWdyb3VuZENvbG9yKTtcbiAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKSh0aGlzLmVsZW1lbnQsIF9nZXRfXyhcImRvbV8xXCIpLkV2ZW50VHlwZS5LRVlfVVAsIGUgPT4ge1xuICAgICAgICBjb25zdCBldmVudCA9IG5ldyAoX2dldF9fKFwia2V5Ym9hcmRFdmVudF8xXCIpLlN0YW5kYXJkS2V5Ym9hcmRFdmVudCkoZSk7XG4gICAgICAgIGlmIChldmVudC5lcXVhbHMoMTcgLyogS2V5Q29kZS5SaWdodEFycm93ICovKSB8fCBldmVudC5lcXVhbHMoMyAvKiBLZXlDb2RlLkVudGVyICovKSkge1xuICAgICAgICAgIF9nZXRfXyhcImRvbV8xXCIpLkV2ZW50SGVscGVyLnN0b3AoZSwgdHJ1ZSk7XG4gICAgICAgICAgdGhpcy5jcmVhdGVTdWJtZW51KHRydWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIpKHRoaXMuZWxlbWVudCwgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRUeXBlLktFWV9ET1dOLCBlID0+IHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgKF9nZXRfXyhcImtleWJvYXJkRXZlbnRfMVwiKS5TdGFuZGFyZEtleWJvYXJkRXZlbnQpKGUpO1xuICAgICAgICBpZiAoZXZlbnQuZXF1YWxzKDE3IC8qIEtleUNvZGUuUmlnaHRBcnJvdyAqLykgfHwgZXZlbnQuZXF1YWxzKDMgLyogS2V5Q29kZS5FbnRlciAqLykpIHtcbiAgICAgICAgICBfZ2V0X18oXCJkb21fMVwiKS5FdmVudEhlbHBlci5zdG9wKGUsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIpKHRoaXMuZWxlbWVudCwgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRUeXBlLk1PVVNFX09WRVIsIGUgPT4ge1xuICAgICAgICBpZiAoIXRoaXMubW91c2VPdmVyKSB7XG4gICAgICAgICAgdGhpcy5tb3VzZU92ZXIgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuc2hvd1NjaGVkdWxlci5zY2hlZHVsZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIpKHRoaXMuZWxlbWVudCwgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRUeXBlLk1PVVNFX0xFQVZFLCBlID0+IHtcbiAgICAgICAgdGhpcy5tb3VzZU92ZXIgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcikodGhpcy5lbGVtZW50LCBfZ2V0X18oXCJkb21fMVwiKS5FdmVudFR5cGUuRk9DVVNfT1VULCBlID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudCAmJiAhKDAsIF9nZXRfXyhcImRvbV8xXCIpLmlzQW5jZXN0b3IpKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQsIHRoaXMuZWxlbWVudCkpIHtcbiAgICAgICAgICB0aGlzLmhpZGVTY2hlZHVsZXIuc2NoZWR1bGUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIGNsZWFudXBFeGlzdGluZ1N1Ym1lbnUoZm9yY2UpIHtcbiAgICBpZiAodGhpcy5wYXJlbnREYXRhLnN1Ym1lbnUgJiYgKGZvcmNlIHx8IHRoaXMucGFyZW50RGF0YS5zdWJtZW51ICE9PSB0aGlzLm15U3VibWVudSkpIHtcbiAgICAgIHRoaXMucGFyZW50RGF0YS5zdWJtZW51LmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMucGFyZW50RGF0YS5zdWJtZW51ID0gdW5kZWZpbmVkO1xuICAgICAgaWYgKHRoaXMuc3VibWVudUNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLnN1Ym1lbnVDb250YWluZXIgPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGNyZWF0ZVN1Ym1lbnUoc2VsZWN0Rmlyc3RJdGVtID0gdHJ1ZSkge1xuICAgIGlmICghdGhpcy5pdGVtRWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICBpZiAoIXRoaXMucGFyZW50RGF0YS5zdWJtZW51KSB7XG4gICAgICAgIHRoaXMuc3VibWVudUNvbnRhaW5lciA9ICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hcHBlbmQpKHRoaXMuZWxlbWVudCwgKDAsIF9nZXRfXyhcImRvbV8xXCIpLiQpKCcuY2V0LXN1Ym1lbnUnKSk7XG4gICAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGRDbGFzc2VzKSh0aGlzLnN1Ym1lbnVDb250YWluZXIsICdjZXQtbWVudWJhci1tZW51LWNvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLnBhcmVudERhdGEuc3VibWVudSA9IG5ldyAoX2dldF9fKFwiaW5kZXhfMVwiKS5DRVRNZW51KSh0aGlzLnN1Ym1lbnVDb250YWluZXIsIHRoaXMuc3VibWVudUljb25zLCB0aGlzLnN1Ym1lbnVQYXJlbnRPcHRpb25zLCB0aGlzLnN1Ym1lbnVPcHRpb25zLCB0aGlzLl9jbG9zZVN1Yk1lbnUpO1xuICAgICAgICB0aGlzLnBhcmVudERhdGEuc3VibWVudS5jcmVhdGVNZW51KHRoaXMuc3VibWVudUl0ZW1zKTtcbiAgICAgICAgaWYgKHRoaXMubWVudVN0eWxlKSB7XG4gICAgICAgICAgdGhpcy5wYXJlbnREYXRhLnN1Ym1lbnUuYXBwbHlTdHlsZSh0aGlzLm1lbnVTdHlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYm91bmRpbmdSZWN0ID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBjb25zdCBjaGlsZEJvdW5kaW5nUmVjdCA9IHRoaXMuc3VibWVudUNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgY29uc3QgY29tcHV0ZWRTdHlsZXMgPSBnZXRDb21wdXRlZFN0eWxlKHRoaXMucGFyZW50RGF0YS5wYXJlbnQuY29udGFpbmVyKTtcbiAgICAgICAgY29uc3QgcGFkZGluZ1RvcCA9IHBhcnNlRmxvYXQoY29tcHV0ZWRTdHlsZXMucGFkZGluZ1RvcCB8fCAnMCcpIHx8IDA7XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSBib3VuZGluZ1JlY3QucmlnaHQgKyBjaGlsZEJvdW5kaW5nUmVjdC53aWR0aCkge1xuICAgICAgICAgIHRoaXMuc3VibWVudUNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJzEwcHgnO1xuICAgICAgICAgIHRoaXMuc3VibWVudUNvbnRhaW5lci5zdHlsZS50b3AgPSBgJHt0aGlzLmVsZW1lbnQub2Zmc2V0VG9wICsgYm91bmRpbmdSZWN0LmhlaWdodH1weGA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zdWJtZW51Q29udGFpbmVyLnN0eWxlLmxlZnQgPSBgJHt0aGlzLmVsZW1lbnQub2Zmc2V0V2lkdGh9cHhgO1xuICAgICAgICAgIHRoaXMuc3VibWVudUNvbnRhaW5lci5zdHlsZS50b3AgPSBgJHt0aGlzLmVsZW1lbnQub2Zmc2V0VG9wIC0gcGFkZGluZ1RvcH1weGA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdWJtZW51RGlzcG9zYWJsZXMucHVzaCgoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkRGlzcG9zYWJsZUxpc3RlbmVyKSh0aGlzLnN1Ym1lbnVDb250YWluZXIsIF9nZXRfXyhcImRvbV8xXCIpLkV2ZW50VHlwZS5LRVlfVVAsIGUgPT4ge1xuICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IChfZ2V0X18oXCJrZXlib2FyZEV2ZW50XzFcIikuU3RhbmRhcmRLZXlib2FyZEV2ZW50KShlKTtcbiAgICAgICAgICBpZiAoZXZlbnQuZXF1YWxzKDE1IC8qIEtleUNvZGUuTGVmdEFycm93ICovKSkge1xuICAgICAgICAgICAgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRIZWxwZXIuc3RvcChlLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50RGF0YS5wYXJlbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudERhdGEuc3VibWVudSkge1xuICAgICAgICAgICAgICB0aGlzLnBhcmVudERhdGEuc3VibWVudS5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgIHRoaXMucGFyZW50RGF0YS5zdWJtZW51ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdWJtZW51RGlzcG9zYWJsZXMgPSAoMCwgX2dldF9fKFwibGlmZWN5Y2xlXzFcIikuZGlzcG9zZSkodGhpcy5zdWJtZW51RGlzcG9zYWJsZXMpO1xuICAgICAgICAgICAgdGhpcy5zdWJtZW51Q29udGFpbmVyID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLnN1Ym1lbnVEaXNwb3NhYmxlcy5wdXNoKCgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIpKHRoaXMuc3VibWVudUNvbnRhaW5lciwgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRUeXBlLktFWV9ET1dOLCBlID0+IHtcbiAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyAoX2dldF9fKFwia2V5Ym9hcmRFdmVudF8xXCIpLlN0YW5kYXJkS2V5Ym9hcmRFdmVudCkoZSk7XG4gICAgICAgICAgaWYgKGV2ZW50LmVxdWFscygxNSAvKiBLZXlDb2RlLkxlZnRBcnJvdyAqLykpIHtcbiAgICAgICAgICAgIF9nZXRfXyhcImRvbV8xXCIpLkV2ZW50SGVscGVyLnN0b3AoZSwgdHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuc3VibWVudURpc3Bvc2FibGVzLnB1c2godGhpcy5wYXJlbnREYXRhLnN1Ym1lbnUub25EaWRDYW5jZWwoKCkgPT4ge1xuICAgICAgICAgIHRoaXMucGFyZW50RGF0YS5wYXJlbnQuZm9jdXMoKTtcbiAgICAgICAgICBpZiAodGhpcy5wYXJlbnREYXRhLnN1Ym1lbnUpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50RGF0YS5zdWJtZW51LmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIHRoaXMucGFyZW50RGF0YS5zdWJtZW51ID0gdW5kZWZpbmVkO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnN1Ym1lbnVEaXNwb3NhYmxlcyA9ICgwLCBfZ2V0X18oXCJsaWZlY3ljbGVfMVwiKS5kaXNwb3NlKSh0aGlzLnN1Ym1lbnVEaXNwb3NhYmxlcyk7XG4gICAgICAgICAgdGhpcy5zdWJtZW51Q29udGFpbmVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMucGFyZW50RGF0YS5zdWJtZW51LmZvY3VzKHNlbGVjdEZpcnN0SXRlbSk7XG4gICAgICAgIHRoaXMubXlTdWJtZW51ID0gdGhpcy5wYXJlbnREYXRhLnN1Ym1lbnU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhcmVudERhdGEuc3VibWVudS5mb2N1cyhmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGFwcGx5U3R5bGUoKSB7XG4gICAgc3VwZXIuYXBwbHlTdHlsZSgpO1xuICAgIGlmICghdGhpcy5tZW51U3R5bGUpIHJldHVybjtcbiAgICBjb25zdCBpc1NlbGVjdGVkID0gdGhpcy5lbGVtZW50ICYmICgwLCBfZ2V0X18oXCJkb21fMVwiKS5oYXNDbGFzcykodGhpcy5lbGVtZW50LCAnZm9jdXNlZCcpO1xuICAgIGNvbnN0IGZnQ29sb3IgPSBpc1NlbGVjdGVkICYmIHRoaXMubWVudVN0eWxlLnNlbGVjdGlvbkZvcmVncm91bmRDb2xvciA/IHRoaXMubWVudVN0eWxlLnNlbGVjdGlvbkZvcmVncm91bmRDb2xvciA6IHRoaXMubWVudVN0eWxlLmZvcmVncm91bmRDb2xvcjtcbiAgICAoMCwgX2dldF9fKFwiY29uc3RzXzFcIikuYXBwbHlGaWxsKSh0aGlzLnN1Ym1lbnVJbmRpY2F0b3IsIHRoaXMuc3VibWVudVBhcmVudE9wdGlvbnMuc3ZnQ29sb3IsIGZnQ29sb3IpO1xuICAgIGlmICh0aGlzLnBhcmVudERhdGEuc3VibWVudSkgdGhpcy5wYXJlbnREYXRhLnN1Ym1lbnUuYXBwbHlTdHlsZSh0aGlzLm1lbnVTdHlsZSk7XG4gIH1cbiAgb25DbGljayhlKSB7XG4gICAgLy8gc3RvcCBjbGlja2luZyBmcm9tIHRyeWluZyB0byBydW4gYW4gYWN0aW9uXG4gICAgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRIZWxwZXIuc3RvcChlLCB0cnVlKTtcbiAgICB0aGlzLmNsZWFudXBFeGlzdGluZ1N1Ym1lbnUoZmFsc2UpO1xuICAgIHRoaXMuY3JlYXRlU3VibWVudShmYWxzZSk7XG4gIH1cbiAgZGlzcG9zZSgpIHtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gICAgdGhpcy5oaWRlU2NoZWR1bGVyLmRpc3Bvc2UoKTtcbiAgICBpZiAodGhpcy5teVN1Ym1lbnUpIHtcbiAgICAgIHRoaXMubXlTdWJtZW51LmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMubXlTdWJtZW51ID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3VibWVudUNvbnRhaW5lcikge1xuICAgICAgdGhpcy5zdWJtZW51RGlzcG9zYWJsZXMgPSAoMCwgX2dldF9fKFwibGlmZWN5Y2xlXzFcIikuZGlzcG9zZSkodGhpcy5zdWJtZW51RGlzcG9zYWJsZXMpO1xuICAgICAgdGhpcy5zdWJtZW51Q29udGFpbmVyID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxufVxuZXhwb3J0cy5DRVRTdWJNZW51ID0gX2dldF9fKFwiQ0VUU3ViTWVudVwiKTtcbmZ1bmN0aW9uIF9nZXRHbG9iYWxPYmplY3QoKSB7XG4gIHRyeSB7XG4gICAgaWYgKCEhZ2xvYmFsKSB7XG4gICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoISF3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH1cbn1cbjtcbnZhciBfUmV3aXJlTW9kdWxlSWRfXyA9IG51bGw7XG5mdW5jdGlvbiBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpIHtcbiAgaWYgKF9SZXdpcmVNb2R1bGVJZF9fID09PSBudWxsKSB7XG4gICAgbGV0IGdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICAgIGlmICghZ2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXykge1xuICAgICAgZ2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXyA9IDA7XG4gICAgfVxuICAgIF9SZXdpcmVNb2R1bGVJZF9fID0gX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXysrO1xuICB9XG4gIHJldHVybiBfUmV3aXJlTW9kdWxlSWRfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVSZWdpc3RyeV9fKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXykge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG4gIHJldHVybiB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZWREYXRhX18oKSB7XG4gIGxldCBtb2R1bGVJZCA9IF9nZXRSZXdpcmVNb2R1bGVJZF9fKCk7XG4gIGxldCByZWdpc3RyeSA9IF9nZXRSZXdpcmVSZWdpc3RyeV9fKCk7XG4gIGxldCByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICBpZiAoIXJld2lyZURhdGEpIHtcbiAgICByZWdpc3RyeVttb2R1bGVJZF0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIH1cbiAgcmV0dXJuIHJld2lyZURhdGE7XG59XG4oZnVuY3Rpb24gcmVnaXN0ZXJSZXNldEFsbCgpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9O1xuICB9XG59KSgpO1xudmFyIElOVEVOVElPTkFMX1VOREVGSU5FRCA9ICdfX0lOVEVOVElPTkFMX1VOREVGSU5FRF9fJztcbmxldCBfUmV3aXJlQVBJX18gPSB7fTtcbihmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGFkZFByb3BlcnR5VG9BUElPYmplY3QobmFtZSwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX1Jld2lyZUFQSV9fLCBuYW1lLCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3dpdGhfXycsIF93aXRoX18pO1xufSkoKTtcbmZ1bmN0aW9uIF9nZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHZhbHVlID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgIGlmICh2YWx1ZSA9PT0gSU5URU5USU9OQUxfVU5ERUZJTkVEKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7XG4gICAgY2FzZSBcImFzeW5jXzFcIjpcbiAgICAgIHJldHVybiBhc3luY18xO1xuICAgIGNhc2UgXCJkb21fMVwiOlxuICAgICAgcmV0dXJuIGRvbV8xO1xuICAgIGNhc2UgXCJjb25zdHNfMVwiOlxuICAgICAgcmV0dXJuIGNvbnN0c18xO1xuICAgIGNhc2UgXCJrZXlib2FyZEV2ZW50XzFcIjpcbiAgICAgIHJldHVybiBrZXlib2FyZEV2ZW50XzE7XG4gICAgY2FzZSBcImluZGV4XzFcIjpcbiAgICAgIHJldHVybiBpbmRleF8xO1xuICAgIGNhc2UgXCJsaWZlY3ljbGVfMVwiOlxuICAgICAgcmV0dXJuIGxpZmVjeWNsZV8xO1xuICAgIGNhc2UgXCJpdGVtXzFcIjpcbiAgICAgIHJldHVybiBpdGVtXzE7XG4gICAgY2FzZSBcIkNFVFN1Yk1lbnVcIjpcbiAgICAgIHJldHVybiBDRVRTdWJNZW51O1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfYXNzaWduX18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfc2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lLCB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICB9XG59XG5mdW5jdGlvbiBfc2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lLCBfdmFsdWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHt9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfdXBkYXRlX29wZXJhdGlvbl9fKG9wZXJhdGlvbiwgdmFyaWFibGVOYW1lLCBwcmVmaXgpIHtcbiAgdmFyIG9sZFZhbHVlID0gX2dldF9fKHZhcmlhYmxlTmFtZSk7XG4gIHZhciBuZXdWYWx1ZSA9IG9wZXJhdGlvbiA9PT0gJysrJyA/IG9sZFZhbHVlICsgMSA6IG9sZFZhbHVlIC0gMTtcbiAgX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgbmV3VmFsdWUpO1xuICByZXR1cm4gcHJlZml4ID8gbmV3VmFsdWUgOiBvbGRWYWx1ZTtcbn1cbmZ1bmN0aW9uIF9zZXRfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHR5cGVvZiB2YXJpYWJsZU5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW25hbWVdID0gdmFyaWFibGVOYW1lW25hbWVdO1xuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IElOVEVOVElPTkFMX1VOREVGSU5FRDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIF9yZXNldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGRlbGV0ZSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gIGlmIChPYmplY3Qua2V5cyhyZXdpcmVEYXRhKS5sZW5ndGggPT0gMCkge1xuICAgIGRlbGV0ZSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpW19nZXRSZXdpcmVNb2R1bGVJZF9fXTtcbiAgfVxuICA7XG59XG5mdW5jdGlvbiBfd2l0aF9fKG9iamVjdCkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIHZhciByZXdpcmVkVmFyaWFibGVOYW1lcyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG4gIHZhciBwcmV2aW91c1ZhbHVlcyA9IHt9O1xuICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IG9iamVjdFt2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICAgIGxldCByZXN1bHQgPSBjYWxsYmFjaygpO1xuICAgIGlmICghIXJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmVzdWx0LnRoZW4ocmVzZXQpLmNhdGNoKHJlc2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzZXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cbmxldCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPSB0eXBlb2YgbW9kdWxlLmV4cG9ydHM7XG5mdW5jdGlvbiBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCBuYW1lLCB7XG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cbmlmICgoX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnb2JqZWN0JyB8fCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdmdW5jdGlvbicpICYmIE9iamVjdC5pc0V4dGVuc2libGUobW9kdWxlLmV4cG9ydHMpKSB7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVBUElfXycsIF9SZXdpcmVBUElfXyk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgQWxleFRvcnJlc0Rldi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuQ3VzdG9tVGl0bGViYXIgPSB2b2lkIDA7XG5jb25zdCBlbGVjdHJvbl8xID0gcmVxdWlyZShcImVsZWN0cm9uXCIpO1xuY29uc3QgY29sb3JfMSA9IHJlcXVpcmUoXCIuLi9iYXNlL2NvbW1vbi9jb2xvclwiKTtcbmNvbnN0IGRvbV8xID0gcmVxdWlyZShcIi4uL2Jhc2UvY29tbW9uL2RvbVwiKTtcbmNvbnN0IHBsYXRmb3JtXzEgPSByZXF1aXJlKFwiLi4vYmFzZS9jb21tb24vcGxhdGZvcm1cIik7XG5jb25zdCBtZW51YmFyXzEgPSByZXF1aXJlKFwiLi4vbWVudWJhclwiKTtcbmNvbnN0IHRoZW1lYmFyXzEgPSByZXF1aXJlKFwiLi90aGVtZWJhclwiKTtcbmNvbnN0IGNvbnN0c18xID0gcmVxdWlyZShcIi4uL2NvbnN0c1wiKTtcbmNsYXNzIEN1c3RvbVRpdGxlYmFyIGV4dGVuZHMgX2dldF9fKFwidGhlbWViYXJfMVwiKS5UaGVtZUJhciB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgVGl0bGVCYXIgaW5zdGFuY2VcbiAgICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnMgZm9yIHRoZSB0aXRsZSBiYXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuaXNJbmFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuY3VycmVudE9wdGlvbnMgPSB7XG4gICAgICBjbG9zZWFibGU6IHRydWUsXG4gICAgICBlbmFibGVNbmVtb25pY3M6IHRydWUsXG4gICAgICAvLyBoaWRlV2hlbkNsaWNraW5nQ2xvc2U6IGZhbHNlLFxuICAgICAgaWNvblNpemU6IDE2LFxuICAgICAgaXRlbUJhY2tncm91bmRDb2xvcjogdW5kZWZpbmVkLFxuICAgICAgbWF4aW1pemFibGU6IHRydWUsXG4gICAgICBtZW51UG9zaXRpb246ICdsZWZ0JyxcbiAgICAgIG1lbnVUcmFuc3BhcmVuY3k6IDAsXG4gICAgICBtaW5pbWl6YWJsZTogdHJ1ZSxcbiAgICAgIG9ubHlTaG93TWVudUJhcjogZmFsc2UsXG4gICAgICBzaGFkb3c6IGZhbHNlLFxuICAgICAgdGl0bGVIb3Jpem9udGFsQWxpZ25tZW50OiAnY2VudGVyJyxcbiAgICAgIHRvb2x0aXBzOiB7XG4gICAgICAgIGNsb3NlOiAnQ2xvc2UnLFxuICAgICAgICBtYXhpbWl6ZTogJ01heGltaXplJyxcbiAgICAgICAgbWluaW1pemU6ICdNaW5pbWl6ZScsXG4gICAgICAgIHJlc3RvcmVEb3duOiAnUmVzdG9yZSBEb3duJ1xuICAgICAgfVxuICAgIH07XG4gICAgLy8gVE9ETzogUmVmYWN0b3IsIHZlcmlmeSBpZiBpcyBwb3NzaWJsZSB1c2UgaW50byBtZW51YmFyXG4gICAgdGhpcy5jbG9zZU1lbnUgPSAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5tZW51QmFyKSB7XG4gICAgICAgIHRoaXMubWVudUJhci5ibHVyKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmN1cnJlbnRPcHRpb25zID0ge1xuICAgICAgLi4udGhpcy5jdXJyZW50T3B0aW9ucyxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9O1xuICAgIGNvbnN0IGpXaW5kb3dJY29ucyA9IF9nZXRfXyhcImNvbnN0c18xXCIpLm1lbnVJY29uc1soMCwgX2dldF9fKFwicGxhdGZvcm1fMVwiKS5QbGF0Zm9ybVRvU3RyaW5nKShfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLnBsYXRmb3JtKT8udG9Mb2NhbGVMb3dlckNhc2UoKV07XG4gICAgdGhpcy5wbGF0Zm9ybUljb25zID0galdpbmRvd0ljb25zO1xuICAgIHRoaXMudGl0bGViYXIgPSAoMCwgX2dldF9fKFwiZG9tXzFcIikuJCkoJy5jZXQtdGl0bGViYXInKTtcbiAgICB0aGlzLmRyYWdSZWdpb24gPSAoMCwgX2dldF9fKFwiZG9tXzFcIikuJCkoJy5jZXQtZHJhZy1yZWdpb24nKTtcbiAgICB0aGlzLmljb24gPSAoMCwgX2dldF9fKFwiZG9tXzFcIikuJCkoJy5jZXQtaWNvbicpO1xuICAgIHRoaXMubWVudUJhckNvbnRhaW5lciA9ICgwLCBfZ2V0X18oXCJkb21fMVwiKS4kKSgnLmNldC1tZW51YmFyJyk7XG4gICAgdGhpcy50aXRsZSA9ICgwLCBfZ2V0X18oXCJkb21fMVwiKS4kKSgnLmNldC10aXRsZScpO1xuICAgIHRoaXMuY29udHJvbHNDb250YWluZXIgPSAoMCwgX2dldF9fKFwiZG9tXzFcIikuJCkoJy5jZXQtd2luZG93LWNvbnRyb2xzJyk7XG4gICAgdGhpcy5jb250YWluZXIgPSAoMCwgX2dldF9fKFwiZG9tXzFcIikuJCkoJy5jZXQtY29udGFpbmVyJyk7XG4gICAgdGhpcy5jb250cm9scyA9IHtcbiAgICAgIG1pbmltaXplOiAoMCwgX2dldF9fKFwiZG9tXzFcIikuJCkoJy5jZXQtY29udHJvbC1taW5pbWl6ZScpLFxuICAgICAgbWF4aW1pemU6ICgwLCBfZ2V0X18oXCJkb21fMVwiKS4kKSgnLmNldC1jb250cm9sLW1heGltaXplJyksXG4gICAgICBjbG9zZTogKDAsIF9nZXRfXyhcImRvbV8xXCIpLiQpKCcuY2V0LWNvbnRyb2wtY2xvc2UnKVxuICAgIH07XG4gICAgdGhpcy5yZXNpemVyID0ge1xuICAgICAgdG9wOiAoMCwgX2dldF9fKFwiZG9tXzFcIikuJCkoJy5jZXQtcmVzaXplci50b3AnKSxcbiAgICAgIGxlZnQ6ICgwLCBfZ2V0X18oXCJkb21fMVwiKS4kKSgnLmNldC1yZXNpemVyLmxlZnQnKVxuICAgIH07XG4gICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFwcGVuZCkodGhpcy50aXRsZWJhciwgdGhpcy5kcmFnUmVnaW9uKTtcbiAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuYXBwZW5kKSh0aGlzLnRpdGxlYmFyLCB0aGlzLnJlc2l6ZXIubGVmdCk7XG4gICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFwcGVuZCkodGhpcy50aXRsZWJhciwgdGhpcy5yZXNpemVyLnRvcCk7XG4gICAgdGhpcy5sb2FkSWNvbnMoKTtcbiAgICB0aGlzLnNldHVwQmFja2dyb3VuZENvbG9yKCk7XG4gICAgdGhpcy5jcmVhdGVJY29uKCk7XG4gICAgdGhpcy5zZXR1cE1lbnViYXIoKTtcbiAgICB0aGlzLnNldHVwVGl0bGUoKTtcbiAgICB0aGlzLnNldHVwV2luZG93Q29udHJvbHMoKTtcbiAgICB0aGlzLnNldHVwQ29udGFpbmVyKCk7XG4gICAgdGhpcy5zZXR1cFRpdGxlQmFyKCk7XG4gICAgdGhpcy5sb2FkRXZlbnRzKCk7XG4gICAgLy8gdGhpcy5yZWdpc3RlclRoZW1lKFRoZW1lQmFyLndpbilcbiAgfVxuXG4gIGxvYWRJY29ucygpIHtcbiAgICBjb25zdCBpY29ucyA9IHRoaXMuY3VycmVudE9wdGlvbnMuaWNvbnM7XG4gICAgaWYgKGljb25zKSB7XG4gICAgICBjb25zdCB7XG4gICAgICAgIHBsYXRmb3JtSWNvbnNcbiAgICAgIH0gPSAoMCwgX2dldF9fKFwiY29uc3RzXzFcIikubG9hZFdpbmRvd0ljb25zKShpY29ucyk7XG4gICAgICB0aGlzLnBsYXRmb3JtSWNvbnMgPSBwbGF0Zm9ybUljb25zO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2V0dXAgdGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIHRpdGxlIGJhclxuICAgKiBCeSBkZWZhdWx0LCBpdCB3aWxsIHVzZSB0aGUgbWV0YSB0aGVtZS1jb2xvciBvciBtc2FwcGxpY2F0aW9uLVRpbGVDb2xvciBhbmQgaWYgaXQgZG9lc24ndCBleGlzdCwgaXQgd2lsbCB1c2Ugd2hpdGVcbiAgICovXG4gIHNldHVwQmFja2dyb3VuZENvbG9yKCkge1xuICAgIGxldCBjb2xvciA9IHRoaXMuY3VycmVudE9wdGlvbnMuYmFja2dyb3VuZENvbG9yO1xuICAgIGlmICghY29sb3IpIHtcbiAgICAgIGNvbnN0IG1ldGFDb2xvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ21ldGFbbmFtZT1cInRoZW1lLWNvbG9yXCJdJykgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbWV0YVtuYW1lPVwibXNhcHBsaWNhdGlvbi1UaWxlQ29sb3JcIl0nKTtcbiAgICAgIG1ldGFDb2xvci5mb3JFYWNoKG1ldGEgPT4ge1xuICAgICAgICBjb2xvciA9IF9nZXRfXyhcImNvbG9yXzFcIikuQ29sb3IuZnJvbUhleChtZXRhLmdldEF0dHJpYnV0ZSgnY29udGVudCcpKTtcbiAgICAgIH0pO1xuICAgICAgaWYgKCFjb2xvcikgY29sb3IgPSBfZ2V0X18oXCJjb2xvcl8xXCIpLkNvbG9yLldISVRFO1xuICAgICAgdGhpcy5jdXJyZW50T3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvcjtcbiAgICB9XG4gICAgdGhpcy50aXRsZWJhci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvci50b1N0cmluZygpO1xuICB9XG4gIC8qKlxuICAgKiBSZW5kZXIgdGhlIGljb24gb2YgdGhlIHRpdGxlIGJhciwgaWYgaXMgbWFjLCBpdCB3aWxsIG5vdCByZW5kZXJcbiAgICogQnkgZGVmYXVsdCwgaXQgd2lsbCB1c2UgdGhlIGZpcnN0IGljb24gZm91bmQgaW4gdGhlIGhlYWQgb2YgdGhlIGRvY3VtZW50XG4gICAqL1xuICBjcmVhdGVJY29uKCkge1xuICAgIC8vIGNvbnN0IG9ubHlSZW5kZXJlck1lbnVCYXIgPSB0aGlzLmN1cnJlbnRPcHRpb25zLm9ubHlTaG93TWVudUJhclxuICAgIGlmIChfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLmlzTWFjaW50b3NoKSByZXR1cm47XG4gICAgbGV0IGljb24gPSB0aGlzLmN1cnJlbnRPcHRpb25zLmljb247XG4gICAgaWYgKCFpY29uKSB7XG4gICAgICBjb25zdCB0YWdMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGluaycpO1xuICAgICAgdGFnTGluay5mb3JFYWNoKGxpbmsgPT4ge1xuICAgICAgICBpZiAobGluay5nZXRBdHRyaWJ1dGUoJ3JlbCcpID09PSAnaWNvbicgfHwgbGluay5nZXRBdHRyaWJ1dGUoJ3JlbCcpID09PSAnc2hvcnRjdXQgaWNvbicpIHtcbiAgICAgICAgICBpY29uID0gbGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRPcHRpb25zLmljb24gPSBpY29uO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpY29uKSB7XG4gICAgICBjb25zdCB3aW5kb3dJY29uID0gKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFwcGVuZCkodGhpcy5pY29uLCAoMCwgX2dldF9fKFwiZG9tXzFcIikuJCkoJ2ltZycpKTtcbiAgICAgIGlmICh0eXBlb2YgaWNvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgd2luZG93SWNvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsIGljb24pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93SWNvbi5zZXRBdHRyaWJ1dGUoJ3NyYycsIGljb24udG9EYXRhVVJMKCkpO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRJY29uU2l6ZSh0aGlzLmN1cnJlbnRPcHRpb25zLmljb25TaXplKTtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hcHBlbmQpKHRoaXMudGl0bGViYXIsIHRoaXMuaWNvbik7XG4gICAgfVxuICB9XG4gIHNldEljb25TaXplKHNpemUpIHtcbiAgICBpZiAoc2l6ZSA8IDE2KSBzaXplID0gMTY7XG4gICAgaWYgKHNpemUgPiAyNCkgc2l6ZSA9IDI0O1xuICAgIHRoaXMuaWNvbi5maXJzdEVsZW1lbnRDaGlsZC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYGhlaWdodDogJHtzaXplfXB4YCk7XG4gIH1cbiAgc2V0dXBNZW51YmFyKCkge1xuICAgIF9nZXRfXyhcImVsZWN0cm9uXzFcIikuaXBjUmVuZGVyZXIuaW52b2tlKCdyZXF1ZXN0LWFwcGxpY2F0aW9uLW1lbnUnKT8udGhlbihtZW51ID0+IHRoaXMudXBkYXRlTWVudShtZW51KSk7XG4gICAgY29uc3QgbWVudVBvc2l0aW9uID0gdGhpcy5jdXJyZW50T3B0aW9ucy5tZW51UG9zaXRpb247XG4gICAgaWYgKG1lbnVQb3NpdGlvbikge1xuICAgICAgdGhpcy51cGRhdGVNZW51UG9zaXRpb24obWVudVBvc2l0aW9uKTtcbiAgICB9XG4gICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFwcGVuZCkodGhpcy50aXRsZWJhciwgdGhpcy5tZW51QmFyQ29udGFpbmVyKTtcbiAgfVxuICBzZXR1cFRpdGxlKCkge1xuICAgIGNvbnN0IG9ubHlSZW5kZXJlck1lbnVCYXIgPSB0aGlzLmN1cnJlbnRPcHRpb25zLm9ubHlTaG93TWVudUJhcjtcbiAgICBpZiAob25seVJlbmRlcmVyTWVudUJhcikgcmV0dXJuO1xuICAgIHRoaXMudXBkYXRlVGl0bGUoZG9jdW1lbnQudGl0bGUpO1xuICAgIHRoaXMudXBkYXRlVGl0bGVBbGlnbm1lbnQodGhpcy5jdXJyZW50T3B0aW9ucy50aXRsZUhvcml6b250YWxBbGlnbm1lbnQpO1xuICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hcHBlbmQpKHRoaXMudGl0bGViYXIsIHRoaXMudGl0bGUpO1xuICB9XG4gIGNyZWF0ZUNvbnRyb2xCdXR0b24oZWxlbWVudCwgaWNvbiwgdGl0bGUsIGFjdGl2ZSA9IHRydWUpIHtcbiAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkQ2xhc3MpKGVsZW1lbnQsICdjZXQtY29udHJvbC1pY29uJyk7XG4gICAgZWxlbWVudC5pbm5lckhUTUwgPSBpY29uO1xuICAgIGVsZW1lbnQudGl0bGUgPSB0aXRsZTtcbiAgICBpZiAoIWFjdGl2ZSkge1xuICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFkZENsYXNzKShlbGVtZW50LCAnaW5hY3RpdmUnKTtcbiAgICB9XG4gICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFwcGVuZCkodGhpcy5jb250cm9sc0NvbnRhaW5lciwgZWxlbWVudCk7XG4gIH1cbiAgc2V0dXBXaW5kb3dDb250cm9scygpIHtcbiAgICBjb25zdCBvbmx5UmVuZGVyZXJNZW51QmFyID0gdGhpcy5jdXJyZW50T3B0aW9ucy5vbmx5U2hvd01lbnVCYXI7XG4gICAgY29uc3QgdG9vbHRpcHMgPSB0aGlzLmN1cnJlbnRPcHRpb25zLnRvb2x0aXBzO1xuICAgIGlmIChfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLmlzTWFjaW50b3NoIHx8IG9ubHlSZW5kZXJlck1lbnVCYXIpIHJldHVybjtcbiAgICB0aGlzLmNyZWF0ZUNvbnRyb2xCdXR0b24odGhpcy5jb250cm9scy5taW5pbWl6ZSwgdGhpcy5wbGF0Zm9ybUljb25zPy5taW5pbWl6ZSwgdG9vbHRpcHMubWluaW1pemUsIHRoaXMuY3VycmVudE9wdGlvbnMubWluaW1pemFibGUpO1xuICAgIHRoaXMuY3JlYXRlQ29udHJvbEJ1dHRvbih0aGlzLmNvbnRyb2xzLm1heGltaXplLCB0aGlzLnBsYXRmb3JtSWNvbnM/Lm1heGltaXplLCB0b29sdGlwcy5tYXhpbWl6ZSwgdGhpcy5jdXJyZW50T3B0aW9ucy5tYXhpbWl6YWJsZSk7XG4gICAgdGhpcy5jcmVhdGVDb250cm9sQnV0dG9uKHRoaXMuY29udHJvbHMuY2xvc2UsIHRoaXMucGxhdGZvcm1JY29ucz8uY2xvc2UsIHRvb2x0aXBzLmNsb3NlLCB0aGlzLmN1cnJlbnRPcHRpb25zLmNsb3NlYWJsZSk7XG4gICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFwcGVuZCkodGhpcy50aXRsZWJhciwgdGhpcy5jb250cm9sc0NvbnRhaW5lcik7XG4gIH1cbiAgc2V0dXBDb250YWluZXIoKSB7XG4gICAgY29uc3QgY29udGFpbmVyT3ZlcmZsb3cgPSB0aGlzLmN1cnJlbnRPcHRpb25zLmNvbnRhaW5lck92ZXJmbG93O1xuICAgIGlmIChjb250YWluZXJPdmVyZmxvdykge1xuICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUub3ZlcmZsb3cgPSBjb250YWluZXJPdmVyZmxvdztcbiAgICB9XG4gICAgd2hpbGUgKGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCkge1xuICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFwcGVuZCkodGhpcy5jb250YWluZXIsIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hcHBlbmQpKGRvY3VtZW50LmJvZHksIHRoaXMuY29udGFpbmVyKTtcbiAgfVxuICBzZXR1cFRpdGxlQmFyKCkge1xuICAgIGNvbnN0IG9yZGVyID0gdGhpcy5jdXJyZW50T3B0aW9ucy5vcmRlcjtcbiAgICBjb25zdCBoYXNTaGFkb3cgPSB0aGlzLmN1cnJlbnRPcHRpb25zLnNoYWRvdztcbiAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkQ2xhc3MpKHRoaXMudGl0bGViYXIsIGBjZXQtJHsoMCwgX2dldF9fKFwicGxhdGZvcm1fMVwiKS5QbGF0Zm9ybVRvU3RyaW5nKShfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLnBsYXRmb3JtKT8udG9Mb2NhbGVMb3dlckNhc2UoKX1gKTtcbiAgICBpZiAob3JkZXIpIHtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGRDbGFzcykodGhpcy50aXRsZWJhciwgYGNldC0ke29yZGVyfWApO1xuICAgIH1cbiAgICBpZiAoaGFzU2hhZG93KSB7XG4gICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkQ2xhc3MpKHRoaXMudGl0bGViYXIsICdjZXQtc2hhZG93Jyk7XG4gICAgfVxuICAgIGlmICghX2dldF9fKFwicGxhdGZvcm1fMVwiKS5pc01hY2ludG9zaCkge1xuICAgICAgdGhpcy50aXRsZS5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCc7XG4gICAgfVxuICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5wcmVwZW5kKShkb2N1bWVudC5ib2R5LCB0aGlzLnRpdGxlYmFyKTtcbiAgfVxuICBsb2FkRXZlbnRzKCkge1xuICAgIGNvbnN0IG9ubHlSZW5kZXJlck1lbnVCYXIgPSB0aGlzLmN1cnJlbnRPcHRpb25zLm9ubHlTaG93TWVudUJhcjtcbiAgICBpZiAob25seVJlbmRlcmVyTWVudUJhcikgcmV0dXJuO1xuICAgIGNvbnN0IG1pbmltaXphYmxlID0gdGhpcy5jdXJyZW50T3B0aW9ucy5taW5pbWl6YWJsZTtcbiAgICBjb25zdCBtYXhpbWl6YWJsZSA9IHRoaXMuY3VycmVudE9wdGlvbnMubWF4aW1pemFibGU7XG4gICAgY29uc3QgY2xvc2VhYmxlID0gdGhpcy5jdXJyZW50T3B0aW9ucy5jbG9zZWFibGU7XG4gICAgdGhpcy5vbkRpZENoYW5nZU1heGltaXplZChfZ2V0X18oXCJlbGVjdHJvbl8xXCIpLmlwY1JlbmRlcmVyLnNlbmRTeW5jKCd3aW5kb3ctZXZlbnQnLCAnd2luZG93LWlzLW1heGltaXplZCcpKTtcbiAgICBfZ2V0X18oXCJlbGVjdHJvbl8xXCIpLmlwY1JlbmRlcmVyLm9uKCd3aW5kb3ctbWF4aW1pemUnLCAoXywgaXNNYXhpbWl6ZWQpID0+IHRoaXMub25EaWRDaGFuZ2VNYXhpbWl6ZWQoaXNNYXhpbWl6ZWQpKTtcbiAgICBfZ2V0X18oXCJlbGVjdHJvbl8xXCIpLmlwY1JlbmRlcmVyLm9uKCd3aW5kb3ctZnVsbHNjcmVlbicsIChfLCBpc0Z1bGxTY3JlZW4pID0+IHRoaXMub25XaW5kb3dGdWxsU2NyZWVuKGlzRnVsbFNjcmVlbikpO1xuICAgIF9nZXRfXyhcImVsZWN0cm9uXzFcIikuaXBjUmVuZGVyZXIub24oJ3dpbmRvdy1mb2N1cycsIChfLCBpc0ZvY3VzZWQpID0+IHRoaXMub25XaW5kb3dGb2N1cyhpc0ZvY3VzZWQpKTtcbiAgICBpZiAobWluaW1pemFibGUpIHtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIpKHRoaXMuY29udHJvbHMubWluaW1pemUsIF9nZXRfXyhcImRvbV8xXCIpLkV2ZW50VHlwZS5DTElDSywgKCkgPT4ge1xuICAgICAgICBfZ2V0X18oXCJlbGVjdHJvbl8xXCIpLmlwY1JlbmRlcmVyLnNlbmQoJ3dpbmRvdy1ldmVudCcsICd3aW5kb3ctbWluaW1pemUnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoX2dldF9fKFwicGxhdGZvcm1fMVwiKS5pc01hY2ludG9zaCkge1xuICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcikodGhpcy50aXRsZWJhciwgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRUeXBlLkRCTENMSUNLLCAoKSA9PiB7XG4gICAgICAgIF9nZXRfXyhcImVsZWN0cm9uXzFcIikuaXBjUmVuZGVyZXIuc2VuZCgnd2luZG93LWV2ZW50JywgJ3dpbmRvdy1tYXhpbWl6ZScpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChtYXhpbWl6YWJsZSkge1xuICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcikodGhpcy5jb250cm9scy5tYXhpbWl6ZSwgX2dldF9fKFwiZG9tXzFcIikuRXZlbnRUeXBlLkNMSUNLLCAoKSA9PiB7XG4gICAgICAgIF9nZXRfXyhcImVsZWN0cm9uXzFcIikuaXBjUmVuZGVyZXIuc2VuZCgnd2luZG93LWV2ZW50JywgJ3dpbmRvdy1tYXhpbWl6ZScpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChjbG9zZWFibGUpIHtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGREaXNwb3NhYmxlTGlzdGVuZXIpKHRoaXMuY29udHJvbHMuY2xvc2UsIF9nZXRfXyhcImRvbV8xXCIpLkV2ZW50VHlwZS5DTElDSywgKCkgPT4ge1xuICAgICAgICBfZ2V0X18oXCJlbGVjdHJvbl8xXCIpLmlwY1JlbmRlcmVyLnNlbmQoJ3dpbmRvdy1ldmVudCcsICd3aW5kb3ctY2xvc2UnKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBvbkJsdXIoKSB7XG4gICAgdGhpcy5pc0luYWN0aXZlID0gdHJ1ZTtcbiAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xuICB9XG4gIG9uRm9jdXMoKSB7XG4gICAgdGhpcy5pc0luYWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy51cGRhdGVTdHlsZXMoKTtcbiAgfVxuICBvbk1lbnVCYXJWaXNpYmlsaXR5Q2hhbmdlZCh2aXNpYmxlKSB7XG4gICAgaWYgKF9nZXRfXyhcInBsYXRmb3JtXzFcIikuaXNXaW5kb3dzIHx8IF9nZXRfXyhcInBsYXRmb3JtXzFcIikuaXNMaW51eCB8fCBfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLmlzRnJlZUJTRCkge1xuICAgICAgaWYgKHZpc2libGUpIHtcbiAgICAgICAgLy8gSGFjayB0byBmaXggaXNzdWUgIzUyNTIyIHdpdGggbGF5ZXJlZCB3ZWJraXQtYXBwLXJlZ2lvbiBlbGVtZW50cyBhcHBlYXJpbmcgdW5kZXIgY3Vyc29yXG4gICAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5oaWRlKSh0aGlzLmRyYWdSZWdpb24pO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+ICgwLCBfZ2V0X18oXCJkb21fMVwiKS5zaG93KSh0aGlzLmRyYWdSZWdpb24pLCA1MCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIG9uTWVudUJhckZvY3VzQ2hhbmdlZChmb2N1c2VkKSB7XG4gICAgaWYgKF9nZXRfXyhcInBsYXRmb3JtXzFcIikuaXNXaW5kb3dzIHx8IF9nZXRfXyhcInBsYXRmb3JtXzFcIikuaXNMaW51eCB8fCBfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLmlzRnJlZUJTRCkge1xuICAgICAgaWYgKGZvY3VzZWQpICgwLCBfZ2V0X18oXCJkb21fMVwiKS5oaWRlKSh0aGlzLmRyYWdSZWdpb24pO2Vsc2UgKDAsIF9nZXRfXyhcImRvbV8xXCIpLnNob3cpKHRoaXMuZHJhZ1JlZ2lvbik7XG4gICAgfVxuICB9XG4gIG9uRGlkQ2hhbmdlTWF4aW1pemVkKGlzTWF4aW1pemVkKSB7XG4gICAgY29uc3QgbWF4aW1pemUgPSB0aGlzLmNvbnRyb2xzLm1heGltaXplO1xuICAgIGlmIChtYXhpbWl6ZSkge1xuICAgICAgbWF4aW1pemUudGl0bGUgPSBpc01heGltaXplZCA/IHRoaXMuY3VycmVudE9wdGlvbnMudG9vbHRpcHM/LnJlc3RvcmVEb3duIDogdGhpcy5jdXJyZW50T3B0aW9ucy50b29sdGlwcz8ubWF4aW1pemU7XG4gICAgICBtYXhpbWl6ZS5pbm5lckhUTUwgPSBpc01heGltaXplZCA/IHRoaXMucGxhdGZvcm1JY29ucz8ucmVzdG9yZSA6IHRoaXMucGxhdGZvcm1JY29ucz8ubWF4aW1pemU7XG4gICAgfVxuICAgIGlmICh0aGlzLnJlc2l6ZXIpIHtcbiAgICAgIGlmIChpc01heGltaXplZCkgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmhpZGUpKHRoaXMucmVzaXplci50b3AsIHRoaXMucmVzaXplci5sZWZ0KTtlbHNlICgwLCBfZ2V0X18oXCJkb21fMVwiKS5zaG93KSh0aGlzLnJlc2l6ZXIudG9wLCB0aGlzLnJlc2l6ZXIubGVmdCk7XG4gICAgfVxuICB9XG4gIHVwZGF0ZU1lbnUobWVudSkge1xuICAgIGlmIChfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLmlzTWFjaW50b3NoIHx8ICFtZW51KSByZXR1cm47XG4gICAgaWYgKHRoaXMubWVudUJhcikgdGhpcy5tZW51QmFyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLm1lbnVCYXIgPSBuZXcgKF9nZXRfXyhcIm1lbnViYXJfMVwiKS5NZW51QmFyKSh0aGlzLm1lbnVCYXJDb250YWluZXIsIF9nZXRfXyhcImNvbnN0c18xXCIpLm1lbnVJY29ucywgdGhpcy5jdXJyZW50T3B0aW9ucywge1xuICAgICAgZW5hYmxlTW5lbW9uaWNzOiB0cnVlXG4gICAgfSwgdGhpcy5jbG9zZU1lbnUpOyAvLyBUT0RPOiBWZXJpZnkgbWVudWJhciBvcHRpb25zXG4gICAgdGhpcy5tZW51QmFyLnB1c2gobWVudSk7XG4gICAgdGhpcy5tZW51QmFyLnVwZGF0ZSgpO1xuICAgIHRoaXMubWVudUJhci5vblZpc2liaWxpdHlDaGFuZ2UoZSA9PiB0aGlzLm9uTWVudUJhclZpc2liaWxpdHlDaGFuZ2VkKGUpKTtcbiAgICB0aGlzLm1lbnVCYXIub25Gb2N1c1N0YXRlQ2hhbmdlKGUgPT4gdGhpcy5vbk1lbnVCYXJGb2N1c0NoYW5nZWQoZSkpO1xuICAgIHRoaXMudXBkYXRlU3R5bGVzKCk7XG4gIH1cbiAgdXBkYXRlU3R5bGVzKCkge1xuICAgIGlmICh0aGlzLmlzSW5hY3RpdmUpIHtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGRDbGFzcykodGhpcy50aXRsZWJhciwgJ2luYWN0aXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5yZW1vdmVDbGFzcykodGhpcy50aXRsZWJhciwgJ2luYWN0aXZlJyk7XG4gICAgfVxuICAgIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IHRoaXMuaXNJbmFjdGl2ZSA/IHRoaXMuY3VycmVudE9wdGlvbnMuYmFja2dyb3VuZENvbG9yPy5saWdodGVuKDAuMTIpIDogdGhpcy5jdXJyZW50T3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgaWYgKGJhY2tncm91bmRDb2xvcikge1xuICAgICAgdGhpcy50aXRsZWJhci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBiYWNrZ3JvdW5kQ29sb3I/LnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGxldCBmb3JlZ3JvdW5kQ29sb3I7XG4gICAgaWYgKGJhY2tncm91bmRDb2xvcj8uaXNMaWdodGVyKCkpIHtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGRDbGFzcykodGhpcy50aXRsZWJhciwgJ2xpZ2h0Jyk7XG4gICAgICBmb3JlZ3JvdW5kQ29sb3IgPSB0aGlzLmlzSW5hY3RpdmUgPyBfZ2V0X18oXCJjb25zdHNfMVwiKS5JTkFDVElWRV9GT1JFR1JPVU5EX0RBUksgOiBfZ2V0X18oXCJjb25zdHNfMVwiKS5BQ1RJVkVfRk9SRUdST1VORF9EQVJLO1xuICAgIH0gZWxzZSB7XG4gICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikucmVtb3ZlQ2xhc3MpKHRoaXMudGl0bGViYXIsICdsaWdodCcpO1xuICAgICAgZm9yZWdyb3VuZENvbG9yID0gdGhpcy5pc0luYWN0aXZlID8gX2dldF9fKFwiY29uc3RzXzFcIikuSU5BQ1RJVkVfRk9SRUdST1VORCA6IF9nZXRfXyhcImNvbnN0c18xXCIpLkFDVElWRV9GT1JFR1JPVU5EO1xuICAgIH1cbiAgICB0aGlzLnRpdGxlYmFyLnN0eWxlLmNvbG9yID0gZm9yZWdyb3VuZENvbG9yPy50b1N0cmluZygpO1xuICAgIGNvbnN0IHVwZGF0ZWRXaW5kb3dDb250cm9scyA9IF9nZXRfXyhcImVsZWN0cm9uXzFcIikuaXBjUmVuZGVyZXIuc2VuZFN5bmMoJ3VwZGF0ZS13aW5kb3ctY29udHJvbHMnLCB7XG4gICAgICBjb2xvcjogYmFja2dyb3VuZENvbG9yPy50b1N0cmluZygpLFxuICAgICAgc3ltYm9sQ29sb3I6IGZvcmVncm91bmRDb2xvcj8udG9TdHJpbmcoKSxcbiAgICAgIGhlaWdodDogX2dldF9fKFwiY29uc3RzXzFcIikuVE9QX1RJVExFQkFSX0hFSUdIVF9XSU5cbiAgICB9KTtcbiAgICBpZiAodXBkYXRlZFdpbmRvd0NvbnRyb2xzKSB7XG4gICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuaGlkZSkodGhpcy5jb250cm9sc0NvbnRhaW5lcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5zaG93KSh0aGlzLmNvbnRyb2xzQ29udGFpbmVyKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubWVudUJhcikge1xuICAgICAgbGV0IGZnQ29sb3I7XG4gICAgICBjb25zdCBiYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmN1cnJlbnRPcHRpb25zLm1lbnVCYXJCYWNrZ3JvdW5kQ29sb3IgfHwgdGhpcy5jdXJyZW50T3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IuZGFya2VuKDAuMTIpO1xuICAgICAgY29uc3QgZm9yZWdyb3VuZENvbG9yID0gYmFja2dyb3VuZENvbG9yPy5pc0xpZ2h0ZXIoKSA/IF9nZXRfXyhcImNvbnN0c18xXCIpLklOQUNUSVZFX0ZPUkVHUk9VTkRfREFSSyA6IF9nZXRfXyhcImNvbnN0c18xXCIpLklOQUNUSVZFX0ZPUkVHUk9VTkQ7XG4gICAgICBjb25zdCBiZ0NvbG9yID0gdGhpcy5jdXJyZW50T3B0aW9ucy5pdGVtQmFja2dyb3VuZENvbG9yICYmICF0aGlzLmN1cnJlbnRPcHRpb25zLml0ZW1CYWNrZ3JvdW5kQ29sb3IuZXF1YWxzKGJhY2tncm91bmRDb2xvcikgPyB0aGlzLmN1cnJlbnRPcHRpb25zLml0ZW1CYWNrZ3JvdW5kQ29sb3IgOiBfZ2V0X18oXCJjb25zdHNfMVwiKS5ERUZBVUxUX0lURU1fU0VMRUNUT1I7XG4gICAgICBpZiAoYmdDb2xvcj8uZXF1YWxzKF9nZXRfXyhcImNvbnN0c18xXCIpLkRFRkFVTFRfSVRFTV9TRUxFQ1RPUikpIHtcbiAgICAgICAgZmdDb2xvciA9IGJhY2tncm91bmRDb2xvcj8uaXNMaWdodGVyKCkgPyBfZ2V0X18oXCJjb25zdHNfMVwiKS5BQ1RJVkVfRk9SRUdST1VORF9EQVJLIDogX2dldF9fKFwiY29uc3RzXzFcIikuQUNUSVZFX0ZPUkVHUk9VTkQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmZ0NvbG9yID0gYmdDb2xvcj8uaXNMaWdodGVyKCkgPyBfZ2V0X18oXCJjb25zdHNfMVwiKS5BQ1RJVkVfRk9SRUdST1VORF9EQVJLIDogX2dldF9fKFwiY29uc3RzXzFcIikuQUNUSVZFX0ZPUkVHUk9VTkQ7XG4gICAgICB9XG4gICAgICB0aGlzLm1lbnVCYXIuc2V0U3R5bGVzKHtcbiAgICAgICAgYmFja2dyb3VuZENvbG9yLFxuICAgICAgICBmb3JlZ3JvdW5kQ29sb3IsXG4gICAgICAgIHNlbGVjdGlvbkJhY2tncm91bmRDb2xvcjogYmdDb2xvcixcbiAgICAgICAgc2VsZWN0aW9uRm9yZWdyb3VuZENvbG9yOiBmZ0NvbG9yLFxuICAgICAgICBzZXBhcmF0b3JDb2xvcjogdGhpcy5jdXJyZW50T3B0aW9ucy5tZW51U2VwYXJhdG9yQ29sb3IgPz8gZm9yZWdyb3VuZENvbG9yLFxuICAgICAgICBzdmdDb2xvcjogdGhpcy5jdXJyZW50T3B0aW9ucy5zdmdDb2xvclxuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIC8vLyBQdWJsaWMgbWV0aG9kc1xuICAvKipcbiAgICogVXBkYXRlIHRpdGxlIGJhciBzdHlsZXMgYmFzZWQgb24gZm9jdXMgc3RhdGUuXG4gICAqIEBwYXJhbSBoYXNGb2N1cyBmb2N1cyBzdGF0ZSBvZiB0aGUgd2luZG93XG4gICAqL1xuICBvbldpbmRvd0ZvY3VzKGZvY3VzKSB7XG4gICAgaWYgKHRoaXMudGl0bGViYXIpIHtcbiAgICAgIGlmIChmb2N1cykge1xuICAgICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikucmVtb3ZlQ2xhc3MpKHRoaXMudGl0bGViYXIsICdpbmFjdGl2ZScpO1xuICAgICAgICB0aGlzLm9uRm9jdXMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5hZGRDbGFzcykodGhpcy50aXRsZWJhciwgJ2luYWN0aXZlJyk7XG4gICAgICAgIHRoaXMubWVudUJhcj8uYmx1cigpO1xuICAgICAgICB0aGlzLm9uQmx1cigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBmdWxsIHNjcmVlbiBzdGF0ZSBhbmQgaGlkZSBvciBzaG93IHRoZSB0aXRsZSBiYXIuXG4gICAqIEBwYXJhbSBmdWxsc2NyZWVuIEZ1bGxzY3JlZW4gc3RhdGUgb2YgdGhlIHdpbmRvd1xuICAgKi9cbiAgb25XaW5kb3dGdWxsU2NyZWVuKGZ1bGxzY3JlZW4pIHtcbiAgICBjb25zdCBoZWlnaHQgPSBfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLmlzTWFjaW50b3NoID8gX2dldF9fKFwiY29uc3RzXzFcIikuVE9QX1RJVExFQkFSX0hFSUdIVF9NQUMgOiBfZ2V0X18oXCJjb25zdHNfMVwiKS5UT1BfVElUTEVCQVJfSEVJR0hUX1dJTjtcbiAgICBjb25zdCBoYXNTaGFkb3cgPSB0aGlzLmN1cnJlbnRPcHRpb25zLnNoYWRvdztcbiAgICBpZiAoIV9nZXRfXyhcInBsYXRmb3JtXzFcIikuaXNNYWNpbnRvc2gpIHtcbiAgICAgIGlmIChmdWxsc2NyZWVuKSB7XG4gICAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5oaWRlKSh0aGlzLnRpdGxlYmFyKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUudG9wID0gJzBweCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuc2hvdykodGhpcy50aXRsZWJhcik7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRPcHRpb25zLm1lbnVQb3NpdGlvbiA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS50b3AgPSAoMCwgX2dldF9fKFwiY29uc3RzXzFcIikuZ2V0UHgpKF9nZXRfXyhcImNvbnN0c18xXCIpLkJPVFRPTV9USVRMRUJBUl9IRUlHSFQpO1xuICAgICAgICAgIHRoaXMuY29udHJvbHNDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gKDAsIF9nZXRfXyhcImNvbnN0c18xXCIpLmdldFB4KShfZ2V0X18oXCJjb25zdHNfMVwiKS5UT1BfVElUTEVCQVJfSEVJR0hUX1dJTik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUudG9wID0gKDAsIF9nZXRfXyhcImNvbnN0c18xXCIpLmdldFB4KShoZWlnaHQgKyAoaGFzU2hhZG93ID8gMSA6IDApKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSB0aXRsZSBvZiB0aGUgdGl0bGUgYmFyLlxuICAgKiBZb3UgY2FuIHVzZSB0aGlzIG1ldGhvZCBpZiBjaGFuZ2UgdGhlIGNvbnRlbnQgb2YgYDx0aXRsZT5gIHRhZyBvbiB5b3VyIGh0bWwuXG4gICAqIEBwYXJhbSB0aXRsZSBUaGUgdGl0bGUgb2YgdGhlIHRpdGxlIGJhciBhbmQgZG9jdW1lbnQuXG4gICAqL1xuICB1cGRhdGVUaXRsZSh0aXRsZSkge1xuICAgIHRoaXMudGl0bGUuaW5uZXJUZXh0ID0gdGl0bGU7XG4gICAgZG9jdW1lbnQudGl0bGUgPSB0aXRsZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogSXQgbWV0aG9kIHNldCBuZXcgaWNvbiB0byB0aXRsZS1iYXItaWNvbiBvZiB0aXRsZS1iYXIuXG4gICAqIEBwYXJhbSBwYXRoIHBhdGggdG8gaWNvblxuICAgKi9cbiAgdXBkYXRlSWNvbihwYXRoKSB7XG4gICAgaWYgKHRoaXMuaWNvbikge1xuICAgICAgdGhpcy5pY29uLmZpcnN0RWxlbWVudENoaWxkLnNldEF0dHJpYnV0ZSgnc3JjJywgcGF0aCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBIb3Jpem9udGFsIGFsaWdubWVudCBvZiB0aGUgdGl0bGUuXG4gICAqIEBwYXJhbSBzaWRlIGBsZWZ0YCwgYGNlbnRlcmAgb3IgYHJpZ2h0YC5cbiAgICovXG4gIHVwZGF0ZVRpdGxlQWxpZ25tZW50KHNpZGUpIHtcbiAgICBjb25zdCBvcmRlciA9IHRoaXMuY3VycmVudE9wdGlvbnMub3JkZXI7XG4gICAgY29uc3QgbWVudVBvc2l0aW9uID0gdGhpcy5jdXJyZW50T3B0aW9ucy5tZW51UG9zaXRpb247XG4gICAgaWYgKHNpZGUgPT09ICdsZWZ0JyB8fCBzaWRlID09PSAncmlnaHQnICYmIG9yZGVyID09PSAnaW52ZXJ0ZWQnKSB7XG4gICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikucmVtb3ZlQ2xhc3MpKHRoaXMudGl0bGUsICdjZXQtdGl0bGUtbGVmdCcpO1xuICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLnJlbW92ZUNsYXNzKSh0aGlzLnRpdGxlLCAnY2V0LXRpdGxlLXJpZ2h0Jyk7XG4gICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikucmVtb3ZlQ2xhc3MpKHRoaXMudGl0bGUsICdjZXQtdGl0bGUtY2VudGVyJyk7XG4gICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkQ2xhc3MpKHRoaXMudGl0bGUsICdjZXQtdGl0bGUtbGVmdCcpO1xuICAgIH1cbiAgICBpZiAoc2lkZSA9PT0gJ3JpZ2h0JyB8fCBzaWRlID09PSAnbGVmdCcgJiYgb3JkZXIgPT09ICdpbnZlcnRlZCcpIHtcbiAgICAgIGlmIChzaWRlICE9PSAnbGVmdCcgJiYgb3JkZXIgIT09ICdpbnZlcnRlZCcpIHtcbiAgICAgICAgdGhpcy5jb250cm9sc0NvbnRhaW5lci5zdHlsZS5tYXJnaW5MZWZ0ID0gJzEwcHgnO1xuICAgICAgfVxuICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLnJlbW92ZUNsYXNzKSh0aGlzLnRpdGxlLCAnY2V0LXRpdGxlLWxlZnQnKTtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5yZW1vdmVDbGFzcykodGhpcy50aXRsZSwgJ2NldC10aXRsZS1yaWdodCcpO1xuICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLnJlbW92ZUNsYXNzKSh0aGlzLnRpdGxlLCAnY2V0LXRpdGxlLWNlbnRlcicpO1xuICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFkZENsYXNzKSh0aGlzLnRpdGxlLCAnY2V0LXRpdGxlLXJpZ2h0Jyk7XG4gICAgfVxuICAgIGlmIChzaWRlID09PSAnY2VudGVyJykge1xuICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLnJlbW92ZUNsYXNzKSh0aGlzLnRpdGxlLCAnY2V0LXRpdGxlLWxlZnQnKTtcbiAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5yZW1vdmVDbGFzcykodGhpcy50aXRsZSwgJ2NldC10aXRsZS1yaWdodCcpO1xuICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLnJlbW92ZUNsYXNzKSh0aGlzLnRpdGxlLCAnY2V0LXRpdGxlLWNlbnRlcicpO1xuICAgICAgaWYgKG1lbnVQb3NpdGlvbiAhPT0gJ2JvdHRvbScpIHtcbiAgICAgICAgKDAsIF9nZXRfXyhcImRvbV8xXCIpLmFkZERpc3Bvc2FibGVMaXN0ZW5lcikod2luZG93LCAncmVzaXplJywgKCkgPT4ge1xuICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+PSAxMTg4KSB7XG4gICAgICAgICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkQ2xhc3MpKHRoaXMudGl0bGUsICdjZXQtdGl0bGUtY2VudGVyJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICgwLCBfZ2V0X18oXCJkb21fMVwiKS5yZW1vdmVDbGFzcykodGhpcy50aXRsZSwgJ2NldC10aXRsZS1jZW50ZXInKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkQ2xhc3MpKHRoaXMudGl0bGUsICdjZXQtdGl0bGUtY2VudGVyJyk7XG4gICAgICB9XG4gICAgICBpZiAoIV9nZXRfXyhcInBsYXRmb3JtXzFcIikuaXNNYWNpbnRvc2ggJiYgb3JkZXIgPT09ICdmaXJzdC1idXR0b25zJykge1xuICAgICAgICB0aGlzLmNvbnRyb2xzQ29udGFpbmVyLnN0eWxlLm1hcmdpbkxlZnQgPSAnYXV0byc7XG4gICAgICB9XG4gICAgICB0aGlzLnRpdGxlLnN0eWxlLm1heFdpZHRoID0gJ2NhbGMoMTAwJSAtIDI5NnB4KSc7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIHRpdGxlIGJhclxuICAgKiBAcGFyYW0gYmFja2dyb3VuZENvbG9yIFRoZSBjb2xvciBmb3IgdGhlIGJhY2tncm91bmRcbiAgICovXG4gIHVwZGF0ZUJhY2tncm91bmQoYmFja2dyb3VuZENvbG9yKSB7XG4gICAgaWYgKHR5cGVvZiBiYWNrZ3JvdW5kQ29sb3IgPT09ICdzdHJpbmcnKSBiYWNrZ3JvdW5kQ29sb3IgPSBfZ2V0X18oXCJjb2xvcl8xXCIpLkNvbG9yLmZyb21IZXgoYmFja2dyb3VuZENvbG9yKTtcbiAgICB0aGlzLmN1cnJlbnRPcHRpb25zLmJhY2tncm91bmRDb2xvciA9IGJhY2tncm91bmRDb2xvcjtcbiAgICB0aGlzLnVwZGF0ZVN0eWxlcygpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGl0ZW0gYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgbWVudWJhclxuICAgKiBAcGFyYW0gaXRlbUJHQ29sb3IgVGhlIGNvbG9yIGZvciB0aGUgaXRlbSBiYWNrZ3JvdW5kXG4gICAqL1xuICB1cGRhdGVJdGVtQkdDb2xvcihpdGVtQkdDb2xvcikge1xuICAgIGlmICh0eXBlb2YgaXRlbUJHQ29sb3IgPT09ICdzdHJpbmcnKSBpdGVtQkdDb2xvciA9IF9nZXRfXyhcImNvbG9yXzFcIikuQ29sb3IuZnJvbUhleChpdGVtQkdDb2xvcik7XG4gICAgdGhpcy5jdXJyZW50T3B0aW9ucy5pdGVtQmFja2dyb3VuZENvbG9yID0gaXRlbUJHQ29sb3I7XG4gICAgdGhpcy51cGRhdGVTdHlsZXMoKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBtZW51IGZyb20gTWVudS5nZXRBcHBsaWNhdGlvbk1lbnUoKVxuICAgKi9cbiAgYXN5bmMgcmVmcmVzaE1lbnUoKSB7XG4gICAgaWYgKCFfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLmlzTWFjaW50b3NoKSB7XG4gICAgICBfZ2V0X18oXCJlbGVjdHJvbl8xXCIpLmlwY1JlbmRlcmVyLmludm9rZSgncmVxdWVzdC1hcHBsaWNhdGlvbi1tZW51JykudGhlbihtZW51ID0+IHRoaXMudXBkYXRlTWVudShtZW51KSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHBvc2l0aW9uIG9mIG1lbnViYXIuXG4gICAqIEBwYXJhbSBtZW51UG9zaXRpb24gVGhlIHBvc2l0aW9uIG9mIHRoZSBtZW51IGBsZWZ0YCBvciBgYm90dG9tYC5cbiAgICovXG4gIHVwZGF0ZU1lbnVQb3NpdGlvbihtZW51UG9zaXRpb24pIHtcbiAgICBjb25zdCBoZWlnaHQgPSBfZ2V0X18oXCJwbGF0Zm9ybV8xXCIpLmlzTWFjaW50b3NoID8gX2dldF9fKFwiY29uc3RzXzFcIikuVE9QX1RJVExFQkFSX0hFSUdIVF9NQUMgOiBfZ2V0X18oXCJjb25zdHNfMVwiKS5UT1BfVElUTEVCQVJfSEVJR0hUX1dJTjtcbiAgICBjb25zdCBvbmx5UmVuZGVyZXJNZW51QmFyID0gdGhpcy5jdXJyZW50T3B0aW9ucy5vbmx5U2hvd01lbnVCYXI7XG4gICAgY29uc3QgaGFzU2hhZG93ID0gdGhpcy5jdXJyZW50T3B0aW9ucy5zaGFkb3c7XG4gICAgdGhpcy5jdXJyZW50T3B0aW9ucy5tZW51UG9zaXRpb24gPSBtZW51UG9zaXRpb247XG4gICAgaWYgKG1lbnVQb3NpdGlvbiA9PT0gJ2xlZnQnIHx8IG9ubHlSZW5kZXJlck1lbnVCYXIpIHtcbiAgICAgIHRoaXMudGl0bGViYXIuc3R5bGUuaGVpZ2h0ID0gKDAsIF9nZXRfXyhcImNvbnN0c18xXCIpLmdldFB4KShoZWlnaHQgKyAoaGFzU2hhZG93ID8gMSA6IDApKTtcbiAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnRvcCA9ICgwLCBfZ2V0X18oXCJjb25zdHNfMVwiKS5nZXRQeCkoaGVpZ2h0ICsgKGhhc1NoYWRvdyA/IDEgOiAwKSk7XG4gICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikucmVtb3ZlQ2xhc3MpKHRoaXMubWVudUJhckNvbnRhaW5lciwgJ2JvdHRvbScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRpdGxlYmFyLnN0eWxlLmhlaWdodCA9ICgwLCBfZ2V0X18oXCJjb25zdHNfMVwiKS5nZXRQeCkoX2dldF9fKFwiY29uc3RzXzFcIikuQk9UVE9NX1RJVExFQkFSX0hFSUdIVCk7XG4gICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS50b3AgPSAoMCwgX2dldF9fKFwiY29uc3RzXzFcIikuZ2V0UHgpKF9nZXRfXyhcImNvbnN0c18xXCIpLkJPVFRPTV9USVRMRUJBUl9IRUlHSFQpO1xuICAgICAgdGhpcy5jb250cm9sc0NvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAoMCwgX2dldF9fKFwiY29uc3RzXzFcIikuZ2V0UHgpKGhlaWdodCk7XG4gICAgICAoMCwgX2dldF9fKFwiZG9tXzFcIikuYWRkQ2xhc3MpKHRoaXMubWVudUJhckNvbnRhaW5lciwgJ2JvdHRvbScpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIHRoZSB0aXRsZWJhciwgbWVudWJhciBhbmQgYWxsIG1ldGhvZHMuXG4gICAqL1xuICBkaXNwb3NlKCkge1xuICAgIC8vIGlmICh0aGlzLm1lbnVCYXIpIHRoaXMubWVudUJhci5kaXNwb3NlKClcbiAgICB0aGlzLnRpdGxlYmFyLnJlbW92ZSgpO1xuICAgIHdoaWxlICh0aGlzLmNvbnRhaW5lci5maXJzdENoaWxkKSAoMCwgX2dldF9fKFwiZG9tXzFcIikuYXBwZW5kKShkb2N1bWVudC5ib2R5LCB0aGlzLmNvbnRhaW5lci5maXJzdENoaWxkKTtcbiAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmUoKTtcbiAgfVxuICBnZXQgdGl0bGViYXJFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLnRpdGxlYmFyO1xuICB9XG4gIGdldCBtZW51YmFyRWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5tZW51QmFyO1xuICB9XG4gIGdldCBjb250YWluZXJFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcbiAgfVxuICBnZXQgdGl0bGVFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLnRpdGxlO1xuICB9XG59XG5leHBvcnRzLkN1c3RvbVRpdGxlYmFyID0gX2dldF9fKFwiQ3VzdG9tVGl0bGViYXJcIik7XG5mdW5jdGlvbiBfZ2V0R2xvYmFsT2JqZWN0KCkge1xuICB0cnkge1xuICAgIGlmICghIWdsb2JhbCkge1xuICAgICAgcmV0dXJuIGdsb2JhbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKCEhd2luZG93KSB7XG4gICAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XG59XG47XG52YXIgX1Jld2lyZU1vZHVsZUlkX18gPSBudWxsO1xuZnVuY3Rpb24gX2dldFJld2lyZU1vZHVsZUlkX18oKSB7XG4gIGlmIChfUmV3aXJlTW9kdWxlSWRfXyA9PT0gbnVsbCkge1xuICAgIGxldCBnbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgICBpZiAoIWdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18pIHtcbiAgICAgIGdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18gPSAwO1xuICAgIH1cbiAgICBfUmV3aXJlTW9kdWxlSWRfXyA9IF9fJCRHTE9CQUxfUkVXSVJFX05FWFRfTU9EVUxFX0lEX18rKztcbiAgfVxuICByZXR1cm4gX1Jld2lyZU1vZHVsZUlkX187XG59XG5mdW5jdGlvbiBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18pIHtcbiAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfVxuICByZXR1cm4gdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVkRGF0YV9fKCkge1xuICBsZXQgbW9kdWxlSWQgPSBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpO1xuICBsZXQgcmVnaXN0cnkgPSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpO1xuICBsZXQgcmV3aXJlRGF0YSA9IHJlZ2lzdHJ5W21vZHVsZUlkXTtcbiAgaWYgKCFyZXdpcmVEYXRhKSB7XG4gICAgcmVnaXN0cnlbbW9kdWxlSWRdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICB9XG4gIHJldHVybiByZXdpcmVEYXRhO1xufVxuKGZ1bmN0aW9uIHJlZ2lzdGVyUmVzZXRBbGwoKSB7XG4gIGxldCB0aGVHbG9iYWxWYXJpYWJsZSA9IF9nZXRHbG9iYWxPYmplY3QoKTtcbiAgaWYgKCF0aGVHbG9iYWxWYXJpYWJsZVsnX19yZXdpcmVfcmVzZXRfYWxsX18nXSkge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfTtcbiAgfVxufSkoKTtcbnZhciBJTlRFTlRJT05BTF9VTkRFRklORUQgPSAnX19JTlRFTlRJT05BTF9VTkRFRklORURfXyc7XG5sZXQgX1Jld2lyZUFQSV9fID0ge307XG4oZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KG5hbWUsIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9SZXdpcmVBUElfXywgbmFtZSwge1xuICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfVxuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX2dldF9fJywgX2dldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jld2lyZV9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19zZXRfXycsIF9zZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19SZXNldERlcGVuZGVuY3lfXycsIF9yZXNldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX193aXRoX18nLCBfd2l0aF9fKTtcbn0pKCk7XG5mdW5jdGlvbiBfZ2V0X18odmFyaWFibGVOYW1lKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIF9nZXRfb3JpZ2luYWxfXyh2YXJpYWJsZU5hbWUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB2YWx1ZSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICBpZiAodmFsdWUgPT09IElOVEVOVElPTkFMX1VOREVGSU5FRCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSkge1xuICBzd2l0Y2ggKHZhcmlhYmxlTmFtZSkge1xuICAgIGNhc2UgXCJjb25zdHNfMVwiOlxuICAgICAgcmV0dXJuIGNvbnN0c18xO1xuICAgIGNhc2UgXCJwbGF0Zm9ybV8xXCI6XG4gICAgICByZXR1cm4gcGxhdGZvcm1fMTtcbiAgICBjYXNlIFwiZG9tXzFcIjpcbiAgICAgIHJldHVybiBkb21fMTtcbiAgICBjYXNlIFwiY29sb3JfMVwiOlxuICAgICAgcmV0dXJuIGNvbG9yXzE7XG4gICAgY2FzZSBcImVsZWN0cm9uXzFcIjpcbiAgICAgIHJldHVybiBlbGVjdHJvbl8xO1xuICAgIGNhc2UgXCJtZW51YmFyXzFcIjpcbiAgICAgIHJldHVybiBtZW51YmFyXzE7XG4gICAgY2FzZSBcInRoZW1lYmFyXzFcIjpcbiAgICAgIHJldHVybiB0aGVtZWJhcl8xO1xuICAgIGNhc2UgXCJDdXN0b21UaXRsZWJhclwiOlxuICAgICAgcmV0dXJuIEN1c3RvbVRpdGxlYmFyO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfYXNzaWduX18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfc2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lLCB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICB9XG59XG5mdW5jdGlvbiBfc2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lLCBfdmFsdWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHt9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfdXBkYXRlX29wZXJhdGlvbl9fKG9wZXJhdGlvbiwgdmFyaWFibGVOYW1lLCBwcmVmaXgpIHtcbiAgdmFyIG9sZFZhbHVlID0gX2dldF9fKHZhcmlhYmxlTmFtZSk7XG4gIHZhciBuZXdWYWx1ZSA9IG9wZXJhdGlvbiA9PT0gJysrJyA/IG9sZFZhbHVlICsgMSA6IG9sZFZhbHVlIC0gMTtcbiAgX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgbmV3VmFsdWUpO1xuICByZXR1cm4gcHJlZml4ID8gbmV3VmFsdWUgOiBvbGRWYWx1ZTtcbn1cbmZ1bmN0aW9uIF9zZXRfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHR5cGVvZiB2YXJpYWJsZU5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW25hbWVdID0gdmFyaWFibGVOYW1lW25hbWVdO1xuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IElOVEVOVElPTkFMX1VOREVGSU5FRDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIF9yZXNldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGRlbGV0ZSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gIGlmIChPYmplY3Qua2V5cyhyZXdpcmVEYXRhKS5sZW5ndGggPT0gMCkge1xuICAgIGRlbGV0ZSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpW19nZXRSZXdpcmVNb2R1bGVJZF9fXTtcbiAgfVxuICA7XG59XG5mdW5jdGlvbiBfd2l0aF9fKG9iamVjdCkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIHZhciByZXdpcmVkVmFyaWFibGVOYW1lcyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG4gIHZhciBwcmV2aW91c1ZhbHVlcyA9IHt9O1xuICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IG9iamVjdFt2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICAgIGxldCByZXN1bHQgPSBjYWxsYmFjaygpO1xuICAgIGlmICghIXJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmVzdWx0LnRoZW4ocmVzZXQpLmNhdGNoKHJlc2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzZXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cbmxldCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPSB0eXBlb2YgbW9kdWxlLmV4cG9ydHM7XG5mdW5jdGlvbiBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCBuYW1lLCB7XG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cbmlmICgoX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnb2JqZWN0JyB8fCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdmdW5jdGlvbicpICYmIE9iamVjdC5pc0V4dGVuc2libGUobW9kdWxlLmV4cG9ydHMpKSB7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVBUElfXycsIF9SZXdpcmVBUElfXyk7XG59IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5UaGVtZUJhciA9IHZvaWQgMDtcbmNvbnN0IGxpZmVjeWNsZV8xID0gcmVxdWlyZShcIi4uL2Jhc2UvY29tbW9uL2xpZmVjeWNsZVwiKTtcbmNvbnN0IGJhc2VUaGVtZSA9IFwiYm9keSB7XFxuICBtYXJnaW46IDAgIWltcG9ydGFudDtcXG4gIG92ZXJmbG93OiBoaWRkZW4gIWltcG9ydGFudDtcXG59XFxuXFxuLyogVGl0bGViYXIgKi9cXG4uY2V0LXRpdGxlYmFyIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBmbGV4LXNocmluazogMDtcXG4gIGZsZXgtd3JhcDogd3JhcDtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMDtcXG4gIGxlZnQ6IDA7XFxuICByaWdodDogMDtcXG4gIGZvbnQtc2l6ZTogMTNweDtcXG4gIGZvbnQtZmFtaWx5OiBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIHBhZGRpbmc6IDAgMTZweDtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxuICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lO1xcbiAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xcbiAgdXNlci1zZWxlY3Q6IG5vbmU7XFxuICB6b29tOiAxO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDMxcHg7XFxuICBsaW5lLWhlaWdodDogMzFweDtcXG4gIHotaW5kZXg6IDk5OTk5O1xcbn1cXG5cXG4uY2V0LXRpdGxlYmFyICosXFxuLmNldC10aXRsZWJhciAqOmJlZm9yZSxcXG4uY2V0LXRpdGxlYmFyICo6YWZ0ZXIge1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG59XFxuXFxuLmNldC10aXRsZWJhci5jZXQtd2luZG93cyxcXG4uY2V0LXRpdGxlYmFyLmNldC1saW51eCxcXG4uY2V0LXRpdGxlYmFyLmNldC1mcmVlYnNkIHtcXG4gIHBhZGRpbmc6IDA7XFxuICBoZWlnaHQ6IDMwcHg7XFxuICBsaW5lLWhlaWdodDogMzBweDtcXG4gIGp1c3RpZnktY29udGVudDogbGVmdDtcXG4gIG92ZXJmbG93OiB2aXNpYmxlO1xcbn1cXG5cXG4vKiBJbnZlcnRlZCAqL1xcbi5jZXQtdGl0bGViYXIuY2V0LWludmVydGVkIHtcXG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcXG59XFxuXFxuLmNldC10aXRsZWJhci5jZXQtaW52ZXJ0ZWQgLmNldC1tZW51YmFyLFxcbi5jZXQtdGl0bGViYXIuY2V0LWludmVydGVkIC5jZXQtd2luZG93LWNvbnRyb2xzIHtcXG4gIGZsZXgtZGlyZWN0aW9uOiByb3ctcmV2ZXJzZTtcXG4gIG1hcmdpbi1sZWZ0OiAyMHB4O1xcbiAgbWFyZ2luLXJpZ2h0OiAwO1xcbn1cXG5cXG4vKiBGaXJzdCBidXR0b25zICovXFxuLmNldC10aXRsZWJhci5jZXQtZmlyc3QtYnV0dG9ucyAuY2V0LXdpbmRvdy1jb250cm9scyB7XFxuICBvcmRlcjogLTE7XFxuICBtYXJnaW46IDAgNXB4IDAgMDtcXG59XFxuXFxuLmNldC10aXRsZWJhci5jZXQtaW52ZXJ0ZWQgLmNldC13aW5kb3ctY29udHJvbHMge1xcbiAgbWFyZ2luOiAwIDVweCAwIDA7XFxufVxcblxcbi8qIFNoYWRvdyAqL1xcbi5jZXQtdGl0bGViYXIuY2V0LXNoYWRvdyB7XFxuICBib3gtc2hhZG93OiAwIDJweCAxcHggLTFweCByZ2JhKDAsIDAsIDAsIDAuMiksIDAgMXB4IDFweCAwIHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgMXB4IDNweCAwIHJnYmEoMCwgMCwgMCwgMC4xMik7XFxufVxcblxcbi8qIERyYWcgcmVnaW9uICovXFxuLmNldC1kcmFnLXJlZ2lvbiB7XFxuICB0b3A6IDA7XFxuICBsZWZ0OiAwO1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTtcXG4gIHotaW5kZXg6IC0xO1xcbiAgLXdlYmtpdC1hcHAtcmVnaW9uOiBkcmFnO1xcbn1cXG5cXG4vKiBJY29uICovXFxuLmNldC1pY29uIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICB3aWR0aDogMzRweDtcXG4gIGhlaWdodDogMzBweDtcXG4gIHotaW5kZXg6IDk5O1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXG59XFxuXFxuLyogVGl0bGUgKi9cXG4uY2V0LXRpdGxlIHtcXG4gIGZsZXg6IDAgMSBhdXRvO1xcbiAgZm9udC1zaXplOiAxMnB4O1xcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcXG4gIHpvb206IDE7XFxufVxcblxcbi8qIFRpdGxlIGFsaWdubWVudCAqL1xcbi5jZXQtdGl0bGUuY2V0LXRpdGxlLWxlZnQge1xcbiAgbWFyZ2luLWxlZnQ6IDhweDtcXG4gIG1hcmdpbi1yaWdodDogYXV0bztcXG59XFxuXFxuLmNldC10aXRsZS5jZXQtdGl0bGUtcmlnaHQge1xcbiAgbWFyZ2luLWxlZnQ6IGF1dG87XFxuICBtYXJnaW4tcmlnaHQ6IDhweDtcXG59XFxuXFxuLmNldC10aXRsZS5jZXQtdGl0bGUtY2VudGVyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDUwJTtcXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTtcXG59XFxuXFxuLmNldC10aXRsZS5jZXQtYmlnc3VyIHtcXG4gIGZvbnQtc2l6ZTogMTNweDtcXG4gIGZvbnQtd2VpZ2h0OiA2MDA7XFxufVxcblxcbi8qIFdpbmRvdyBjb250cm9scyAqL1xcbi5jZXQtd2luZG93LWNvbnRyb2xzIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWdyb3c6IDA7XFxuICBmbGV4LXNocmluazogMDtcXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIHotaW5kZXg6IDk5O1xcbiAgLXdlYmtpdC1hcHAtcmVnaW9uOiBuby1kcmFnO1xcbiAgaGVpZ2h0OiAzMHB4O1xcbiAgZm9udC1mYW1pbHk6IGluaXRpYWwgIWltcG9ydGFudDtcXG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xcbn1cXG5cXG4uY2V0LWNvbnRyb2wtaWNvbiB7XFxuICB3aWR0aDogMi44NXJlbTtcXG59XFxuXFxuLmNldC1jb250cm9sLWljb246bm90KC5pbmFjdGl2ZSk6aG92ZXIge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSAyNTUgMjU1IC8gMTIlKTtcXG59XFxuXFxuLmxpZ2h0IC5jZXQtY29udHJvbC1pY29uOm5vdCguaW5hY3RpdmUpOmhvdmVyIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigwIDAgMCAvIDEyJSk7XFxufVxcblxcbi5jZXQtY29udHJvbC1pY29uLmluYWN0aXZlIHN2ZyB7XFxuICBvcGFjaXR5OiAwLjQ7XFxufVxcblxcbi5jZXQtY29udHJvbC1pY29uIHN2ZyB7XFxuICB3aWR0aDogMTBweDtcXG4gIGhlaWdodDogLXdlYmtpdC1maWxsLWF2YWlsYWJsZTtcXG4gIGZpbGw6ICNmZmY7XFxuICBkaXNwbGF5OiBpbml0aWFsICFpbXBvcnRhbnQ7XFxuICB2ZXJ0aWNhbC1hbGlnbjogdW5zZXQgIWltcG9ydGFudDtcXG59XFxuXFxuLmNldC10aXRsZWJhci5saWdodCAuY2V0LWNvbnRyb2wtaWNvbiBzdmcge1xcbiAgZmlsbDogIzIyMjIyMiAhaW1wb3J0YW50O1xcbn1cXG5cXG4uY2V0LWNvbnRyb2wtY2xvc2U6bm90KC5pbmFjdGl2ZSk6aG92ZXIge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDIzMiAxNyAzNSAvIDkwJSkgIWltcG9ydGFudDtcXG59XFxuXFxuLmNldC1jb250cm9sLWNsb3NlOm5vdCguaW5hY3RpdmUpOmhvdmVyIHN2ZyB7XFxuICBmaWxsOiAjZmZmICFpbXBvcnRhbnQ7XFxufVxcblxcbi8qIFJlc2l6ZXIgKi9cXG4uY2V0LXJlc2l6ZXIge1xcbiAgLXdlYmtpdC1hcHAtcmVnaW9uOiBuby1kcmFnO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbn1cXG5cXG4uY2V0LXJlc2l6ZXIubGVmdCB7XFxuICB0b3A6IDA7XFxuICBsZWZ0OiAwO1xcbiAgd2lkdGg6IDZweDtcXG4gIGhlaWdodDogMTAwJTtcXG59XFxuXFxuLmNldC1yZXNpemVyLnRvcCB7XFxuICB0b3A6IDA7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogNnB4O1xcbn1cXG5cXG4vKiBDb250YWluZXIgKi9cXG4uY2V0LWNvbnRhaW5lciB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiAwO1xcbiAgcmlnaHQ6IDA7XFxuICBib3R0b206IDA7XFxuICBvdmVyZmxvdzogYXV0bztcXG4gIHotaW5kZXg6IDE7XFxufVxcblxcbi8qIE1lbnVCYXIgKi9cXG4uY2V0LW1lbnViYXIge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtc2hyaW5rOiAxO1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIG92ZXJmbG93OiBoaWRkZW47XFxuICBmbGV4LXdyYXA6IHdyYXA7XFxuICBtYXJnaW4tcmlnaHQ6IDIwcHg7XFxufVxcblxcbi5jZXQtbWVudWJhci5ib3R0b20ge1xcbiAgb3JkZXI6IDE7XFxuICB3aWR0aDogMTAwJTtcXG4gIHBhZGRpbmc6IDAgNXB4IDVweDtcXG4gIG1hcmdpbi1yaWdodDogMDtcXG59XFxuXFxuLmNldC1tZW51YmFyLmJvdHRvbSAuY2V0LW1lbnViYXItbWVudS1idXR0b24ge1xcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcbn1cXG5cXG4uY2V0LW1lbnViYXIuYm90dG9tIC5jZXQtbWVudWJhci1tZW51LWJ1dHRvbiAuY2V0LW1lbnViYXItbWVudS10aXRsZSB7XFxuICBsaW5lLWhlaWdodDogMjZweDtcXG59XFxuXFxuLmNldC1tZW51YmFyIC5jZXQtbWVudWJhci1tZW51LWJ1dHRvbiB7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgcGFkZGluZzogMHB4IDhweDtcXG4gIGhlaWdodDogMTAwJTtcXG4gIGN1cnNvcjogZGVmYXVsdDtcXG4gIHpvb206IDE7XFxuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbiAgLXdlYmtpdC1hcHAtcmVnaW9uOiBuby1kcmFnO1xcbiAgb3V0bGluZTogMDtcXG59XFxuXFxuLmNldC1tZW51YmFyIC5jZXQtbWVudWJhci1tZW51LWJ1dHRvbiAuY2V0LW1lbnViYXItbWVudS10aXRsZSB7XFxuICBmb250LXNpemU6IDEycHg7XFxufVxcblxcbi5jZXQtbWVudWJhciAuY2V0LW1lbnViYXItbWVudS1idXR0b24uZGlzYWJsZWQge1xcbiAgb3BhY2l0eTogMC40O1xcbn1cXG5cXG4uY2V0LW1lbnViYXIgLmNldC1tZW51YmFyLW1lbnUtYnV0dG9uOm5vdCguZGlzYWJsZWQpOmhvdmVyLFxcbi5jZXQtbWVudWJhciAuY2V0LW1lbnViYXItbWVudS1idXR0b246bm90KC5kaXNhYmxlZCkub3BlbiB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjU1IDI1NSAyNTUgLyAxMiUpO1xcbn1cXG5cXG4uY2V0LXRpdGxlYmFyLmxpZ2h0IC5jZXQtbWVudWJhciAuY2V0LW1lbnViYXItbWVudS1idXR0b246bm90KC5kaXNhYmxlZCk6aG92ZXIsXFxuLmNldC10aXRsZWJhci5saWdodCAuY2V0LW1lbnViYXIgLmNldC1tZW51YmFyLW1lbnUtYnV0dG9uOm5vdCguZGlzYWJsZWQpLm9wZW4ge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDAgMCAwIC8gMTIlKTtcXG59XFxuXFxuLmNldC1tZW51YmFyLW1lbnUtY29udGFpbmVyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgbGVmdDogMHB4O1xcbiAgb3BhY2l0eTogMTtcXG4gIG91dGxpbmU6IDA7XFxuICBib3JkZXI6IG5vbmU7XFxuICB0ZXh0LWFsaWduOiBsZWZ0O1xcbiAgbWFyZ2luOiAwIGF1dG87XFxuICBtYXJnaW4tbGVmdDogMDtcXG4gIGZvbnQtc2l6ZTogaW5oZXJpdDtcXG4gIG92ZXJmbG93LXg6IHZpc2libGU7XFxuICBvdmVyZmxvdy15OiB2aXNpYmxlO1xcbiAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoO1xcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XFxuICBib3JkZXItcmFkaXVzOiA3cHg7XFxuICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoMTBweCk7XFxuICBib3gtc2hhZG93OiAwIDVweCA1cHggLTNweCByZ2JhKDAsIDAsIDAsIDAuMiksIDAgOHB4IDEwcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgM3B4IDE0cHggMnB4IHJnYmEoMCwgMCwgMCwgMC4xMik7XFxuICB6LWluZGV4OiA5OTk5OTtcXG59XFxuXFxuLmNldC1tZW51YmFyLW1lbnUtY29udGFpbmVyOjotd2Via2l0LXNjcm9sbGJhciB7XFxuICB3aWR0aDogOHB4O1xcbiAgaGVpZ2h0OiA0cHg7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDApO1xcbn1cXG5cXG4uY2V0LW1lbnViYXItbWVudS1jb250YWluZXI6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcXG4gIGJvcmRlcjogbm9uZTtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMCk7XFxufVxcblxcbi5jZXQtbWVudWJhci1tZW51LWNvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIge1xcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTEwLCAxMTAsIDExMCwgMC4yKTtcXG59XFxuXFxuLmNldC1tZW51YmFyLW1lbnUtY29udGFpbmVyOmZvY3VzIHtcXG4gIG91dGxpbmU6IDA7XFxufVxcblxcbi5jZXQtbWVudWJhci1tZW51LWNvbnRhaW5lciAuY2V0LWFjdGlvbi1pdGVtIHtcXG4gIHBhZGRpbmc6IDA7XFxuICBtYXJnaW46IDA7XFxuICB0cmFuc2Zvcm06IG5vbmU7XFxuICBkaXNwbGF5OiAtbXMtZmxleGJveDtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBvdXRsaW5lOiBub25lO1xcbn1cXG5cXG4uY2V0LW1lbnViYXItbWVudS1jb250YWluZXIgLmNldC1hY3Rpb24taXRlbS5hY3RpdmUge1xcbiAgdHJhbnNmb3JtOiBub25lO1xcbn1cXG5cXG4uY2V0LW1lbnViYXItbWVudS1jb250YWluZXIgLmNldC1hY3Rpb24taXRlbS5kaXNhYmxlZCAuY2V0LWFjdGlvbi1tZW51LWl0ZW0ge1xcbiAgb3BhY2l0eTogMC40O1xcbn1cXG5cXG4uY2V0LW1lbnViYXItbWVudS1jb250YWluZXIgLmNldC1hY3Rpb24taXRlbSAuY2V0LXN1Ym1lbnUge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbn1cXG5cXG4uY2V0LW1lbnViYXItbWVudS1jb250YWluZXIgLmNldC1hY3Rpb24tbWVudS1pdGVtIHtcXG4gIC1tcy1mbGV4OiAxIDEgYXV0bztcXG4gIGZsZXg6IDEgMSBhdXRvO1xcbiAgZGlzcGxheTogLW1zLWZsZXhib3g7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgaGVpZ2h0OiAyLjIzMWVtO1xcbiAgbWFyZ2luOiA0cHggM3B4O1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXG59XFxuXFxuLmNldC1tZW51YmFyLW1lbnUtY29udGFpbmVyIC5jZXQtYWN0aW9uLWxhYmVsIHtcXG4gIC1tcy1mbGV4OiAxIDEgYXV0bztcXG4gIGZsZXg6IDEgMSBhdXRvO1xcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbiAgcGFkZGluZzogMCAxZW07XFxuICBiYWNrZ3JvdW5kOiBub25lO1xcbiAgZm9udC1zaXplOiAxMnB4O1xcbiAgbGluZS1oZWlnaHQ6IDE7XFxufVxcblxcbi5jZXQtbWVudWJhci1tZW51LWNvbnRhaW5lciAuY2V0LWFjdGlvbi1sYWJlbDpub3QoLnNlcGFyYXRvcikge1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgLW8tYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIC1tcy1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDAgMmVtIDAgMC44ZW07XFxufVxcblxcbi5jZXQtbWVudWJhci1tZW51LWNvbnRhaW5lciAuY2V0LWFjdGlvbi1sYWJlbC5zZXBhcmF0b3Ige1xcbiAgb3BhY2l0eTogMC4xO1xcbiAgZm9udC1zaXplOiBpbmhlcml0O1xcbiAgd2lkdGg6IDEwMCU7XFxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdHJhbnNwYXJlbnQ7XFxufVxcblxcbi5jZXQtbWVudWJhci1tZW51LWNvbnRhaW5lciAuY2V0LWFjdGlvbi1sYWJlbC5zZXBhcmF0b3IudGV4dCB7XFxuICBwYWRkaW5nOiAwLjdlbSAxZW0gMC4xZW0gMWVtO1xcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICBvcGFjaXR5OiAxO1xcbn1cXG5cXG4uY2V0LW1lbnViYXItbWVudS1jb250YWluZXIgLmNldC1hY3Rpb24tbGFiZWw6aG92ZXIge1xcbiAgY29sb3I6IGluaGVyaXQ7XFxufVxcblxcbi5jZXQtbWVudWJhci1tZW51LWNvbnRhaW5lciAua2V5YmluZGluZyxcXG4uY2V0LW1lbnViYXItbWVudS1jb250YWluZXIgLmNldC1zdWJtZW51LWluZGljYXRvciB7XFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxuICAtbXMtZmxleDogMiAxIGF1dG87XFxuICBmbGV4OiAyIDEgYXV0bztcXG4gIHBhZGRpbmc6IDAgMmVtIDAgMWVtO1xcbiAgdGV4dC1hbGlnbjogcmlnaHQ7XFxuICBmb250LXNpemU6IDExcHg7XFxuICBsaW5lLWhlaWdodDogMTtcXG59XFxuXFxuLmNldC1tZW51YmFyLW1lbnUtY29udGFpbmVyIC5jZXQtc3VibWVudS1pbmRpY2F0b3Ige1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgcmlnaHQ6IDRweDtcXG4gIGhlaWdodDogMTJweDtcXG4gIHdpZHRoOiAxMnB4O1xcbiAgcGFkZGluZzogMDtcXG59XFxuXFxuLmNldC1tZW51YmFyLW1lbnUtY29udGFpbmVyIC5jZXQtc3VibWVudS1pbmRpY2F0b3IgaW1nLFxcbi5jZXQtbWVudWJhci1tZW51LWNvbnRhaW5lciAuY2V0LW1lbnUtaXRlbS1pY29uIC5pY29uLFxcbi5jZXQtbWVudWJhci1tZW51LWNvbnRhaW5lciAuY2V0LXN1Ym1lbnUtaW5kaWNhdG9yIHN2ZyxcXG4uY2V0LW1lbnViYXItbWVudS1jb250YWluZXIgLmNldC1tZW51LWl0ZW0taWNvbiBzdmcge1xcbiAgZGlzcGxheTogaW5oZXJpdDtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiAxMDAlO1xcbn1cXG5cXG4uY2V0LW1lbnViYXItbWVudS1jb250YWluZXIgLmNldC1hY3Rpb24tbWVudS1pdGVtLmNoZWNrZWQ+LmNldC1tZW51LWl0ZW0taWNvbi5jaGVja2JveCB7XFxuICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xcbn1cXG5cXG4uY2V0LW1lbnViYXItbWVudS1jb250YWluZXIgLmNldC1tZW51LWl0ZW0taWNvbiB7XFxuICB3aWR0aDogMTRweDtcXG4gIGhlaWdodDogMTRweDtcXG4gIG1hcmdpbjogMCAwIDAgMTJweDtcXG59XFxuXFxuLmNldC1tZW51YmFyLW1lbnUtY29udGFpbmVyIC5jZXQtbWVudS1pdGVtLWljb24uY2hlY2tib3gge1xcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xcbn1cIjtcbmNvbnN0IG1hY1RoZW1lID0gXCJcIjtcbmNvbnN0IHdpblRoZW1lID0gXCJcIjtcbmNsYXNzIFRoZW1pbmdSZWdpc3RyeSBleHRlbmRzIF9nZXRfXyhcImxpZmVjeWNsZV8xXCIpLkRpc3Bvc2FibGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudGhlbWluZyA9IFtdO1xuICAgIHRoaXMudGhlbWluZyA9IFtdO1xuICB9XG4gIG9uVGhlbWVDaGFuZ2UodGhlbWUpIHtcbiAgICB0aGlzLnRoZW1pbmcucHVzaCh0aGVtZSk7XG4gICAgcmV0dXJuICgwLCBfZ2V0X18oXCJsaWZlY3ljbGVfMVwiKS50b0Rpc3Bvc2FibGUpKCgpID0+IHtcbiAgICAgIGNvbnN0IGlkeCA9IHRoaXMudGhlbWluZy5pbmRleE9mKHRoZW1lKTtcbiAgICAgIHRoaXMudGhlbWluZy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9KTtcbiAgfVxuICBnZXRUaGVtaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnRoZW1pbmc7XG4gIH1cbn1cbmNsYXNzIFRoZW1lQmFyIGV4dGVuZHMgX2dldF9fKFwiVGhlbWluZ1JlZ2lzdHJ5XCIpIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnJlZ2lzdGVyVGhlbWUoY29sbGVjdG9yID0+IHtcbiAgICAgIGNvbGxlY3Rvci5hZGRSdWxlKF9nZXRfXyhcImJhc2VUaGVtZVwiKSk7XG4gICAgfSk7XG4gIH1cbiAgcmVnaXN0ZXJUaGVtZSh0aGVtZSkge1xuICAgIHRoaXMub25UaGVtZUNoYW5nZSh0aGVtZSk7XG4gICAgY29uc3QgY3NzUnVsZXMgPSBbXTtcbiAgICBjb25zdCBoYXNSdWxlID0ge307XG4gICAgY29uc3QgcnVsZUNvbGxlY3RvciA9IHtcbiAgICAgIGFkZFJ1bGU6IHJ1bGUgPT4ge1xuICAgICAgICBpZiAoIWhhc1J1bGVbcnVsZV0pIHtcbiAgICAgICAgICBjc3NSdWxlcy5wdXNoKHJ1bGUpO1xuICAgICAgICAgIGhhc1J1bGVbcnVsZV0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmdldFRoZW1pbmcoKS5mb3JFYWNoKHAgPT4gcChydWxlQ29sbGVjdG9yKSk7XG4gICAgX2dldF9fKFwiX2FwcGx5UnVsZXNcIikoY3NzUnVsZXMuam9pbignXFxuJyksICd0aXRsZWJhci1zdHlsZScpO1xuICB9XG4gIHN0YXRpYyBnZXQgd2luKCkge1xuICAgIHJldHVybiBjb2xsZWN0b3IgPT4ge1xuICAgICAgY29sbGVjdG9yLmFkZFJ1bGUoX2dldF9fKFwid2luVGhlbWVcIikpO1xuICAgIH07XG4gIH1cbiAgc3RhdGljIGdldCBtYWMoKSB7XG4gICAgcmV0dXJuIGNvbGxlY3RvciA9PiB7XG4gICAgICBjb2xsZWN0b3IuYWRkUnVsZShfZ2V0X18oXCJtYWNUaGVtZVwiKSk7XG4gICAgfTtcbiAgfVxufVxuZXhwb3J0cy5UaGVtZUJhciA9IF9nZXRfXyhcIlRoZW1lQmFyXCIpO1xuZnVuY3Rpb24gX2FwcGx5UnVsZXMoc3R5bGVTaGVldENvbnRlbnQsIHJ1bGVzQ2xhc3NOYW1lKSB7XG4gIGNvbnN0IHRoZW1lU3R5bGVzID0gZG9jdW1lbnQuaGVhZC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHJ1bGVzQ2xhc3NOYW1lKTtcbiAgaWYgKHRoZW1lU3R5bGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIGNvbnN0IHN0eWxlRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGVFbGVtZW50LmNsYXNzTmFtZSA9IHJ1bGVzQ2xhc3NOYW1lO1xuICAgIHN0eWxlRWxlbWVudC5pbm5lckhUTUwgPSBzdHlsZVNoZWV0Q29udGVudDtcbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlRWxlbWVudCk7XG4gIH0gZWxzZSB7XG4gICAgdGhlbWVTdHlsZXNbMF0uaW5uZXJIVE1MID0gc3R5bGVTaGVldENvbnRlbnQ7XG4gIH1cbn1cbmZ1bmN0aW9uIF9nZXRHbG9iYWxPYmplY3QoKSB7XG4gIHRyeSB7XG4gICAgaWYgKCEhZ2xvYmFsKSB7XG4gICAgICByZXR1cm4gZ2xvYmFsO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoISF3aW5kb3cpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gIH1cbn1cbjtcbnZhciBfUmV3aXJlTW9kdWxlSWRfXyA9IG51bGw7XG5mdW5jdGlvbiBfZ2V0UmV3aXJlTW9kdWxlSWRfXygpIHtcbiAgaWYgKF9SZXdpcmVNb2R1bGVJZF9fID09PSBudWxsKSB7XG4gICAgbGV0IGdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICAgIGlmICghZ2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXykge1xuICAgICAgZ2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXyA9IDA7XG4gICAgfVxuICAgIF9SZXdpcmVNb2R1bGVJZF9fID0gX18kJEdMT0JBTF9SRVdJUkVfTkVYVF9NT0RVTEVfSURfXysrO1xuICB9XG4gIHJldHVybiBfUmV3aXJlTW9kdWxlSWRfXztcbn1cbmZ1bmN0aW9uIF9nZXRSZXdpcmVSZWdpc3RyeV9fKCkge1xuICBsZXQgdGhlR2xvYmFsVmFyaWFibGUgPSBfZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICghdGhlR2xvYmFsVmFyaWFibGUuX18kJEdMT0JBTF9SRVdJUkVfUkVHSVNUUllfXykge1xuICAgIHRoZUdsb2JhbFZhcmlhYmxlLl9fJCRHTE9CQUxfUkVXSVJFX1JFR0lTVFJZX18gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9XG4gIHJldHVybiB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fO1xufVxuZnVuY3Rpb24gX2dldFJld2lyZWREYXRhX18oKSB7XG4gIGxldCBtb2R1bGVJZCA9IF9nZXRSZXdpcmVNb2R1bGVJZF9fKCk7XG4gIGxldCByZWdpc3RyeSA9IF9nZXRSZXdpcmVSZWdpc3RyeV9fKCk7XG4gIGxldCByZXdpcmVEYXRhID0gcmVnaXN0cnlbbW9kdWxlSWRdO1xuICBpZiAoIXJld2lyZURhdGEpIHtcbiAgICByZWdpc3RyeVttb2R1bGVJZF0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHJld2lyZURhdGEgPSByZWdpc3RyeVttb2R1bGVJZF07XG4gIH1cbiAgcmV0dXJuIHJld2lyZURhdGE7XG59XG4oZnVuY3Rpb24gcmVnaXN0ZXJSZXNldEFsbCgpIHtcbiAgbGV0IHRoZUdsb2JhbFZhcmlhYmxlID0gX2dldEdsb2JhbE9iamVjdCgpO1xuICBpZiAoIXRoZUdsb2JhbFZhcmlhYmxlWydfX3Jld2lyZV9yZXNldF9hbGxfXyddKSB7XG4gICAgdGhlR2xvYmFsVmFyaWFibGVbJ19fcmV3aXJlX3Jlc2V0X2FsbF9fJ10gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGVHbG9iYWxWYXJpYWJsZS5fXyQkR0xPQkFMX1JFV0lSRV9SRUdJU1RSWV9fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB9O1xuICB9XG59KSgpO1xudmFyIElOVEVOVElPTkFMX1VOREVGSU5FRCA9ICdfX0lOVEVOVElPTkFMX1VOREVGSU5FRF9fJztcbmxldCBfUmV3aXJlQVBJX18gPSB7fTtcbihmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGFkZFByb3BlcnR5VG9BUElPYmplY3QobmFtZSwgdmFsdWUpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX1Jld2lyZUFQSV9fLCBuYW1lLCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICB9XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fZ2V0X18nLCBfZ2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX0dldERlcGVuZGVuY3lfXycsIF9nZXRfXyk7XG4gIGFkZFByb3BlcnR5VG9BUElPYmplY3QoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3NldF9fJywgX3NldF9fKTtcbiAgYWRkUHJvcGVydHlUb0FQSU9iamVjdCgnX19yZXNldF9fJywgX3Jlc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGRQcm9wZXJ0eVRvQVBJT2JqZWN0KCdfX3dpdGhfXycsIF93aXRoX18pO1xufSkoKTtcbmZ1bmN0aW9uIF9nZXRfXyh2YXJpYWJsZU5hbWUpIHtcbiAgbGV0IHJld2lyZURhdGEgPSBfZ2V0UmV3aXJlZERhdGFfXygpO1xuICBpZiAocmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gX2dldF9vcmlnaW5hbF9fKHZhcmlhYmxlTmFtZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHZhbHVlID0gcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdO1xuICAgIGlmICh2YWx1ZSA9PT0gSU5URU5USU9OQUxfVU5ERUZJTkVEKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBfZ2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lKSB7XG4gIHN3aXRjaCAodmFyaWFibGVOYW1lKSB7XG4gICAgY2FzZSBcImxpZmVjeWNsZV8xXCI6XG4gICAgICByZXR1cm4gbGlmZWN5Y2xlXzE7XG4gICAgY2FzZSBcImJhc2VUaGVtZVwiOlxuICAgICAgcmV0dXJuIGJhc2VUaGVtZTtcbiAgICBjYXNlIFwiX2FwcGx5UnVsZXNcIjpcbiAgICAgIHJldHVybiBfYXBwbHlSdWxlcztcbiAgICBjYXNlIFwid2luVGhlbWVcIjpcbiAgICAgIHJldHVybiB3aW5UaGVtZTtcbiAgICBjYXNlIFwibWFjVGhlbWVcIjpcbiAgICAgIHJldHVybiBtYWNUaGVtZTtcbiAgICBjYXNlIFwiVGhlbWluZ1JlZ2lzdHJ5XCI6XG4gICAgICByZXR1cm4gVGhlbWluZ1JlZ2lzdHJ5O1xuICAgIGNhc2UgXCJUaGVtZUJhclwiOlxuICAgICAgcmV0dXJuIFRoZW1lQmFyO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfYXNzaWduX18odmFyaWFibGVOYW1lLCB2YWx1ZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGlmIChyZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBfc2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lLCB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHZhbHVlO1xuICB9XG59XG5mdW5jdGlvbiBfc2V0X29yaWdpbmFsX18odmFyaWFibGVOYW1lLCBfdmFsdWUpIHtcbiAgc3dpdGNoICh2YXJpYWJsZU5hbWUpIHt9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59XG5mdW5jdGlvbiBfdXBkYXRlX29wZXJhdGlvbl9fKG9wZXJhdGlvbiwgdmFyaWFibGVOYW1lLCBwcmVmaXgpIHtcbiAgdmFyIG9sZFZhbHVlID0gX2dldF9fKHZhcmlhYmxlTmFtZSk7XG4gIHZhciBuZXdWYWx1ZSA9IG9wZXJhdGlvbiA9PT0gJysrJyA/IG9sZFZhbHVlICsgMSA6IG9sZFZhbHVlIC0gMTtcbiAgX2Fzc2lnbl9fKHZhcmlhYmxlTmFtZSwgbmV3VmFsdWUpO1xuICByZXR1cm4gcHJlZml4ID8gbmV3VmFsdWUgOiBvbGRWYWx1ZTtcbn1cbmZ1bmN0aW9uIF9zZXRfXyh2YXJpYWJsZU5hbWUsIHZhbHVlKSB7XG4gIGxldCByZXdpcmVEYXRhID0gX2dldFJld2lyZWREYXRhX18oKTtcbiAgaWYgKHR5cGVvZiB2YXJpYWJsZU5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgT2JqZWN0LmtleXModmFyaWFibGVOYW1lKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICByZXdpcmVEYXRhW25hbWVdID0gdmFyaWFibGVOYW1lW25hbWVdO1xuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBPYmplY3Qua2V5cyh2YXJpYWJsZU5hbWUpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgX3Jlc2V0X18odmFyaWFibGVOYW1lKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IElOVEVOVElPTkFMX1VOREVGSU5FRDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV3aXJlRGF0YVt2YXJpYWJsZU5hbWVdID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICBfcmVzZXRfXyh2YXJpYWJsZU5hbWUpO1xuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIF9yZXNldF9fKHZhcmlhYmxlTmFtZSkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIGRlbGV0ZSByZXdpcmVEYXRhW3ZhcmlhYmxlTmFtZV07XG4gIGlmIChPYmplY3Qua2V5cyhyZXdpcmVEYXRhKS5sZW5ndGggPT0gMCkge1xuICAgIGRlbGV0ZSBfZ2V0UmV3aXJlUmVnaXN0cnlfXygpW19nZXRSZXdpcmVNb2R1bGVJZF9fXTtcbiAgfVxuICA7XG59XG5mdW5jdGlvbiBfd2l0aF9fKG9iamVjdCkge1xuICBsZXQgcmV3aXJlRGF0YSA9IF9nZXRSZXdpcmVkRGF0YV9fKCk7XG4gIHZhciByZXdpcmVkVmFyaWFibGVOYW1lcyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG4gIHZhciBwcmV2aW91c1ZhbHVlcyA9IHt9O1xuICBmdW5jdGlvbiByZXNldCgpIHtcbiAgICByZXdpcmVkVmFyaWFibGVOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYWJsZU5hbWUpIHtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IHByZXZpb3VzVmFsdWVzW3ZhcmlhYmxlTmFtZV07XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIHJld2lyZWRWYXJpYWJsZU5hbWVzLmZvckVhY2goZnVuY3Rpb24gKHZhcmlhYmxlTmFtZSkge1xuICAgICAgcHJldmlvdXNWYWx1ZXNbdmFyaWFibGVOYW1lXSA9IHJld2lyZURhdGFbdmFyaWFibGVOYW1lXTtcbiAgICAgIHJld2lyZURhdGFbdmFyaWFibGVOYW1lXSA9IG9iamVjdFt2YXJpYWJsZU5hbWVdO1xuICAgIH0pO1xuICAgIGxldCByZXN1bHQgPSBjYWxsYmFjaygpO1xuICAgIGlmICghIXJlc3VsdCAmJiB0eXBlb2YgcmVzdWx0LnRoZW4gPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmVzdWx0LnRoZW4ocmVzZXQpLmNhdGNoKHJlc2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzZXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cbmxldCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPSB0eXBlb2YgbW9kdWxlLmV4cG9ydHM7XG5mdW5jdGlvbiBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkobmFtZSwgdmFsdWUpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZS5leHBvcnRzLCBuYW1lLCB7XG4gICAgdmFsdWU6IHZhbHVlLFxuICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cbmlmICgoX3R5cGVPZk9yaWdpbmFsRXhwb3J0ID09PSAnb2JqZWN0JyB8fCBfdHlwZU9mT3JpZ2luYWxFeHBvcnQgPT09ICdmdW5jdGlvbicpICYmIE9iamVjdC5pc0V4dGVuc2libGUobW9kdWxlLmV4cG9ydHMpKSB7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19nZXRfXycsIF9nZXRfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19HZXREZXBlbmRlbmN5X18nLCBfZ2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fUmV3aXJlX18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fc2V0X18nLCBfc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fcmVzZXRfXycsIF9yZXNldF9fKTtcbiAgYWRkTm9uRW51bWVyYWJsZVByb3BlcnR5KCdfX1Jlc2V0RGVwZW5kZW5jeV9fJywgX3Jlc2V0X18pO1xuICBhZGROb25FbnVtZXJhYmxlUHJvcGVydHkoJ19fd2l0aF9fJywgX3dpdGhfXyk7XG4gIGFkZE5vbkVudW1lcmFibGVQcm9wZXJ0eSgnX19SZXdpcmVBUElfXycsIF9SZXdpcmVBUElfXyk7XG59IiwiZnVuY3Rpb24gd2VicGFja0VtcHR5Q29udGV4dChyZXEpIHtcblx0dmFyIGUgPSBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiICsgcmVxICsgXCInXCIpO1xuXHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdHRocm93IGU7XG59XG53ZWJwYWNrRW1wdHlDb250ZXh0LmtleXMgPSAoKSA9PiAoW10pO1xud2VicGFja0VtcHR5Q29udGV4dC5yZXNvbHZlID0gd2VicGFja0VtcHR5Q29udGV4dDtcbndlYnBhY2tFbXB0eUNvbnRleHQuaWQgPSBcIi4vbm9kZV9tb2R1bGVzL2N1c3RvbS1lbGVjdHJvbi10aXRsZWJhciBzeW5jIHJlY3Vyc2l2ZVwiO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrRW1wdHlDb250ZXh0OyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImVsZWN0cm9uXCIpOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBEaXNhYmxlIG5vLXVudXNlZC12YXJzLCBicm9rZW4gZm9yIHNwcmVhZCBhcmdzXG4vKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IG9mZiAqL1xuaW1wb3J0IHsgY29udGV4dEJyaWRnZSwgaXBjUmVuZGVyZXIsIElwY1JlbmRlcmVyRXZlbnQgfSBmcm9tICdlbGVjdHJvbic7XG5pbXBvcnQgeyBUaXRsZWJhciwgVGl0bGViYXJDb2xvciB9IGZyb20gJ2N1c3RvbS1lbGVjdHJvbi10aXRsZWJhcic7XG5cbmV4cG9ydCB0eXBlIENoYW5uZWxzID0gJ2lwYy1leGFtcGxlJztcblxuY29uc3QgZWxlY3Ryb25IYW5kbGVyID0ge1xuICBpcGNSZW5kZXJlcjoge1xuICAgIHNlbmRNZXNzYWdlKGNoYW5uZWw6IENoYW5uZWxzLCAuLi5hcmdzOiB1bmtub3duW10pIHtcbiAgICAgIGlwY1JlbmRlcmVyLnNlbmQoY2hhbm5lbCwgLi4uYXJncyk7XG4gICAgfSxcbiAgICBvbihjaGFubmVsOiBDaGFubmVscywgZnVuYzogKC4uLmFyZ3M6IHVua25vd25bXSkgPT4gdm9pZCkge1xuICAgICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gKF9ldmVudDogSXBjUmVuZGVyZXJFdmVudCwgLi4uYXJnczogdW5rbm93bltdKSA9PlxuICAgICAgICBmdW5jKC4uLmFyZ3MpO1xuICAgICAgaXBjUmVuZGVyZXIub24oY2hhbm5lbCwgc3Vic2NyaXB0aW9uKTtcblxuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgaXBjUmVuZGVyZXIucmVtb3ZlTGlzdGVuZXIoY2hhbm5lbCwgc3Vic2NyaXB0aW9uKTtcbiAgICAgIH07XG4gICAgfSxcbiAgICBvbmNlKGNoYW5uZWw6IENoYW5uZWxzLCBmdW5jOiAoLi4uYXJnczogdW5rbm93bltdKSA9PiB2b2lkKSB7XG4gICAgICBpcGNSZW5kZXJlci5vbmNlKGNoYW5uZWwsIChfZXZlbnQsIC4uLmFyZ3MpID0+IGZ1bmMoLi4uYXJncykpO1xuICAgIH0sXG4gIH0sXG4gIHN0b3JlOiB7XG4gICAgZ2V0KGtleSkge1xuICAgICAgcmV0dXJuIGlwY1JlbmRlcmVyLnNlbmRTeW5jKCdlbGVjdHJvbi1zdG9yZS1nZXQnLCBrZXkpO1xuICAgIH0sXG4gICAgc2V0KHByb3BlcnR5LCB2YWwpIHtcbiAgICAgIGlwY1JlbmRlcmVyLnNlbmQoJ2VsZWN0cm9uLXN0b3JlLXNldCcsIHByb3BlcnR5LCB2YWwpO1xuICAgIH0sXG4gICAgLy8gT3RoZXIgbWV0aG9kIHlvdSB3YW50IHRvIGFkZCBsaWtlIGhhcygpLCByZXNldCgpLCBldGMuXG4gIH0sXG59O1xuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgLy8gVGl0bGUgYmFyIGltcGxlbWVudGF0aW9uXG4gIG5ldyBUaXRsZWJhcih7XG4gICAgYmFja2dyb3VuZENvbG9yOiBUaXRsZWJhckNvbG9yLlRSQU5TUEFSRU5ULFxuICAgIHRpdGxlSG9yaXpvbnRhbEFsaWdubWVudDogJ2xlZnQnLFxuICB9KTtcbn0pO1xuXG5jb250ZXh0QnJpZGdlLmV4cG9zZUluTWFpbldvcmxkKCdlbGVjdHJvbicsIGVsZWN0cm9uSGFuZGxlcik7XG5cbmV4cG9ydCB0eXBlIEVsZWN0cm9uSGFuZGxlciA9IHR5cGVvZiBlbGVjdHJvbkhhbmRsZXI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=